<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <!-- ======================================================================= -->
  <title>

    kids-home-steamside

  </title>

  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />

<!-- ======================================================================= -->

  <link href="steamside.css" rel="stylesheet" type="text/css" />
  <link href="GameCardDeck.css" rel="stylesheet" type="text/css" />
  <link href="Forms.css" rel="stylesheet" type="text/css" />
  <link href="CommandBox.css" rel="stylesheet" type="text/css" />
  <link href="Tag.css" rel="stylesheet" type="text/css" />
  <link href="CollectionEdit.css" rel="stylesheet" type="text/css" />
  <link href="KidsHome.css" rel="stylesheet" type="text/css" />

<!-- ======================================================================= -->

  <script src="jquery-2.1.1.js" type="text/javascript"></script>
  <script src="underscore.js" type="text/javascript"></script>
  <script src="backbone.js" type="text/javascript"></script>
  <script src="stacktrace.js" type="text/javascript"></script>

  <link href="animate.css" rel="stylesheet" type="text/css" />

  <!-- ======================================================================= -->

  <link href="http://fonts.googleapis.com/css?family=Arvo:regular, bold" rel="stylesheet" type="text/css" />
  <link href="http://fonts.googleapis.com/css?family=Karla:regular" rel="stylesheet" type="text/css" />
  <link href="http://fonts.googleapis.com/css?family=Jura:regular, bold" rel="stylesheet" type="text/css" />

  <!-- ======================================================================= -->

</head>
<body>
<!-- ======================================================================= -->

<div id="page-to-test"></div>

<!-- ======================================================================= -->

<script type="importmap">
  {
    "imports": {
      "#customary": "./../node_modules/customary/src/now.js",
      "#customary/": "./../node_modules/customary/src/",
      "#customary/lit": "./../node_modules/customary/.dist/bundled/customary-library.mjs",
      "#steamside/": "./"
    }
  }
</script>

<script type="module">
  import {GameCardView} from "#steamside/GameCardDeck.js";
  import {KidsSpriteSheet} from "#steamside/KidsHome.js";
  import {Game} from "#steamside/GameCardDeck.js";

  const kidsSpriteSheet = new KidsSpriteSheet();

  const cardTemplatePromise = kidsSpriteSheet.card.sprite_promise();

  const oneResult = new Game();
  oneResult.set("name", "Game of Kids");
  oneResult.set("link", "would be URL");

  const backend_invoked = $.Deferred();

  const MockBackend = Backbone.Model.extend(
          {
            ajax_ajax_promise_2: function(aUrl)
            {
              const that = this;
              that.__aUrl__ajax_ajax_promise_2 = aUrl;
              return backend_invoked;
            },

            fetch_fetch_json: function(collection, success)
            {

            }
          });

  const backend = new MockBackend();

  const enormity = {
    styleClass: 'game-tile-large',
    width: 100
  };

  const card_view = new GameCardView({
    cardTemplatePromise: cardTemplatePromise,
    model: oneResult,
    enormity: enormity,
    kidsMode: true,
    continues: null,
    on_render: null,
    on_tag: null,
    backend: backend
  });
  card_view.render();

  card_view.backend.__backend_invoked = backend_invoked;
  card_view.el.__GameCardView = card_view;

  replaceTestableUI(card_view.$el);

  function replaceTestableUI (el) {
    const testbed = $('#page-to-test');
    testbed.empty();
    testbed.append(el);
  }

</script>

</body>
</html>
