<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd"
xml:lang="en" lang="en">
<head profile="http://www.w3.org/2005/10/profile">
<!-- ======================================================================= -->
<title>Steamside</title>

<link href="static/steamside.css" rel="stylesheet" type="text/css" />
<link rel="icon"
      type="image/png"
      href="static/steamside.png"/>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />

<link href="static/game-tile.css" rel="stylesheet" type="text/css" />

<script src="static/jquery-1.7.2.js"></script>
<script src="static/underscore.js"></script>
<script src="static/backbone.js"></script>
<script src="static/gametiles.js"></script>
<script src="static/session.js"></script>

<link href="http://fonts.googleapis.com/css?family=Ubuntu:regular, bold" rel="stylesheet" type='text/css' />
<link href="http://fonts.googleapis.com/css?family=Arvo:regular, bold" rel="stylesheet" type="text/css" />
<link href="http://fonts.googleapis.com/css?family=Montserrat+Alternates:regular" rel="stylesheet" type="text/css" />
<link href="http://fonts.googleapis.com/css?family=Karla:regular" rel="stylesheet" type="text/css" />
<link href="http://fonts.googleapis.com/css?family=Jura:regular, bold" rel="stylesheet" type="text/css" />

<style type="text/css">

/* ----- */

.page-header {
	margin: 0px auto;
	padding: 0px;
}

.page-header-logo {
	float:left;
}

.page-header-name {
	float:left;
	margin-left: 10px;
	margin-right: 10px;
}
.page-header-name-text {
	font-family: Jura;
	font-weight: bold;
	font-size: 2em;
	color: darkred;
}

.page-header-navigation-bar ul {
	display: table;
	list-style:none;
	width: 65%;
	float: right;
}

.page-header-navigation-bar li {
	display: table-cell;
	text-align: center;
	font-family: Arvo;
}

.page-header-separator {
	clear: both;
	border: 1px dotted lightgray;
	height: 0px;
}

.command-button {
	font-family: monospace;
	font-size: x-small;
}

.command-hint {
	font-family: sans;
	font-size: x-small;
}

</style>


<!-- ======================================================================= -->

<script type="application/javascript">

var ContinueGames = Backbone.Collection.extend({
    model: Game,
    url: 'continue.json'
});

var SearchResults = Backbone.Collection.extend({
    model: Game,
    value: null,
    url: function() {
    	return "search.json?query=" + this.value;
    }
});

var FavoritesCollection = Backbone.Collection.extend({
    model: Game,
    url: 'favorites.json'
});

var SearchTextView = Backbone.View.extend({
    events: {
        'submit form': 'submitSearch'
    },

    initialize: function() {

    },

    submitSearch: function(e) {
        e.preventDefault();

		var c = this.collection;
		c.value = this.$('#input-id-text-search').val();
		fetch_json(c);
    }
});

var SessionView = Backbone.View.extend({
 initialize: function () {
 		var m = this.model;
        m.bind('change',this.render, this);
        fetch_json(m);
    },
   el : 'body',
    render: function () {
    	var m = this.model;
    	var username = m.username();
    	var kidsMode = m.kidsmode();

		if (kidsMode) {
			$("#page-header-navigation-bar").hide();
			$("#search-segment").hide();
			$("#favorites-segment").hide();
			$("#collections-segment").hide();
		}
    }
});

function render_page() {

    $('#nav-steam-client').click(function(e) {
				e.preventDefault();

	        	var jLink = $( this );
	        	var aUrl = jLink.attr( "href" );
	        	alert(aUrl);
				$.ajax(
					{
						url: aUrl
					}
				);
    		});

    var sessionModel = new SessionModel();
    var continues = new ContinueGames();
    var searchResults = new SearchResults();
    var favorites = new FavoritesCollection();

    new SessionView({model: sessionModel});

    new DeckView({
    	el: $('#continues-deck'),
    	collection: continues,
    	session: sessionModel,
        continues: continues
    });

    new SearchTextView({
    	el: $('#div-id-search-text'),
    	collection: searchResults
    });

    new DeckView({
    	el: $('#search-results-deck'),
    	collection: searchResults,
    	session: sessionModel,
        continues: continues
    });

    new DeckView({
        el: $('#favorites-deck'),
        collection: favorites,
        session: sessionModel,
        continues: continues
    });

    fetch_json(continues);
    fetch_json(favorites);

	$("#input-id-text-search").focus();
}


$(document).ready(function() {

    var callback = render_page;
    Tileset.load(callback);

});


</script>


<!-- ======================================================================= -->
</head>
<body>
<!-- ======================================================================= -->


<div class="page-header">
	<div class="page-header-logo">
		<img src="static/steamside.png" height="45" width="45" />
	</div>
	<div class="page-header-name" style="text-align:center;">
		 <span class="page-header-name-text"  style="line-height: 0.90em">Steamside</span>
		 <br style="margin:0px;"/>
		 <span style="font-size: 0.8em;font-family:Arvo">Your <span style="color:DarkRed">companion</span> on Steam</span>
	</div>
	<div class="page-header-navigation-bar"  id="page-header-navigation-bar">
		<ul>
		<li>My games</li>
		<li><a href="http://steampowered.com" target="_blank">Steam Store</a></li>
		<li><a id="nav-steam-client" href="steamclient/open/main">Steam Client</a></li>
		<li>Utilities</li>
		<li>Help</li>
		</ul>
	</div>
	<div class="page-header-separator">

</div>


</div>

<div id="continues-segment" class="container">

	<div class="side-header side-header-at-left">
		<p class="side-header-paragraph">
			<span class="side-text side-text-at-left">
			Con<br/>
			tinue<br/>
			</span>
		</p>
		<div class="side-links">
			<ul>
				<li><a href="">History</a></li>
				<li><a href="">Statistics</a></li>
				<li><a href="">Kids mode...</a></li>
			</ul>
		</div>
	</div>

	<div class="content content-at-right">
	    <div id="continues-deck" style="float:right;">
	    </div>
	</div>

</div>




<div id="search-segment" class="container">

	<div class="side-header side-header-at-right">
		<p class="side-header-paragraph">
			<span class="side-text side-text-at-right">
			Search<br/>
			&amp; do
			</span>
		</p>
		<p class="side-links"><a href="">Aliases...</a></p>
	</div>

	<div class="content content-at-left">

		<div id="div-id-search-text">
			<form action="">
                <div>
                <input type="text" name="text-search" id="input-id-text-search"
                       class="search-text-input"
                       placeholder="game or command"
					/>
                <br/>
                <input class="command-button"  type="submit" value="Enter"/> <span id="command-hint" class="command-hint"> continue Windosill</span>&nbsp;&nbsp;
                <input class="command-button"  type="submit" value="Ctrl+Enter"/> <span id="command-hint-2" class="command-hint">Windosill community hub</span>
                </div>
            </form>
	    </div>

	    <div id="search-results-deck">
	    </div>
	</div>

</div>




<div id="favorites-segment" class="container">

	<div class="side-header side-header-at-left">
		<p class="side-header-paragraph">
			<span class="side-text side-text-at-left">
			Favor<br/>
			ites<br/>
			</span>
		</p>
		<p class="side-links"><a href="FavoritesSwitch.html">Switch...</a></p>
	</div>

	<div class="content content-at-right">

        <div id="favorites-deck">
        </div>
		<a href="collection/favorite/">Favorites</a>
	</div>

</div>





<div id="collections-segment"  class="container">

	<div class="side-header side-header-at-right">
		<p class="side-header-paragraph">
			<span class="side-text side-text-at-right">
			Collec<br/>
			tions<br/>
			</span>
		</p>
		<p class="side-links"><a href="">Share...</a></p>
	</div>

	<div class="content content-at-left">
		<p><span wicket:id="number-of-games">101</span> owned</p>
  	</div>
</div>



<div id="bd" style="display:none;">
	<p>
		Wicket version:
		<wicket:container wicket:id="version">
		1.5-SNAPSHOT
		</wicket:container>
	</p>
</div>

<div id="ft">
</div>


<!-- ======================================================================= -->
</body>
</html>