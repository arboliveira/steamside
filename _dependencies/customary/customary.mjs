
function $parcel$exportWildcard(dest, source) {
  Object.keys(source).forEach(function(key) {
    if (key === 'default' || key === '__esModule' || Object.prototype.hasOwnProperty.call(dest, key)) {
      return;
    }

    Object.defineProperty(dest, key, {
      enumerable: true,
      get: function get() {
        return source[key];
      }
    });
  });

  return dest;
}

function $parcel$export(e, n, v, s) {
  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});
}
var $07201b47c5f8d57a$exports = {};

$parcel$export($07201b47c5f8d57a$exports, "Customary", () => $dc3eede01c452bc5$export$7d556906c4a5f4a7);
$parcel$export($07201b47c5f8d57a$exports, "CustomaryElement", () => $98d0f6a447871cb0$export$4a183080d2c522d7);
class $16878b9af4c78a4c$export$2bcc17fb5433cbbf {
    document;
    globalThis;
    constructor(document, globalThis){
        this.document = document;
        this.globalThis = globalThis;
    }
    detect() {
        return this.detectElementNames().map((name)=>this.detectDeclaration(name));
    }
    detectElementNames() {
        const attribute = 'data-customary-name';
        const fromDocument = [
            ...this.document.querySelectorAll(`template[${attribute}]`)
        ].map((template)=>template.getAttribute(attribute));
        const prefix = 'customary:';
        const fromGlobalScope = Object.keys(this.globalThis).filter((name)=>name.startsWith(prefix)).map((name)=>name.substring(prefix.length));
        return [
            ...new Set([
                ...fromDocument,
                ...fromGlobalScope
            ])
        ];
    }
    detectDeclaration(name) {
        const fromGlobalScope = this.globalThis[`customary:${name}`];
        const config = fromGlobalScope?.config;
        const hooks = fromGlobalScope?.hooks;
        const values = fromGlobalScope?.values ?? this.detectValues(name);
        return {
            name: name,
            ...config ? {
                config: config
            } : {},
            ...hooks ? {
                hooks: hooks
            } : {},
            ...values ? {
                values: values
            } : {}
        };
    }
    detectValues(name) {
        const elements = this.document.querySelectorAll(`script[type="application/json"][data-customary-name='${name}']`);
        if (elements.length === 0) return undefined;
        const result = {};
        for (const element of elements)if (element.textContent) {
            // TODO Require a key and retire default 'state'
            const key = element.getAttribute('data-customary-value') ?? 'state';
            result[key] = JSON.parse(element.textContent);
        }
        return result;
    }
}


function $a6578a6f2ac293b9$export$3452ba782587c66f(constructor) {
    return $a6578a6f2ac293b9$var$definition_property in constructor;
}
function $a6578a6f2ac293b9$export$5c2b83001c88ec5b(constructor, definition) {
    constructor[$a6578a6f2ac293b9$var$definition_property] = definition;
}
function $a6578a6f2ac293b9$export$6dac8c184f86ad18(element) {
    const constructor = element.constructor;
    return constructor[$a6578a6f2ac293b9$var$definition_property] ?? (()=>{
        throw new Error(`${constructor.name}: element never defined`);
    })();
}
const $a6578a6f2ac293b9$var$definition_property = 'customary_definition';


class $961a8c3f5b2d4f3f$var$FetchText_DOM {
    async fetchText(input) {
        console.debug('fetch: ' + input);
        const response = await fetch(input);
        if (response.ok) return await response.text();
        throw new Error(response.statusText, {
            cause: response
        });
    }
}
const $961a8c3f5b2d4f3f$export$d763ec234f19c958 = new $961a8c3f5b2d4f3f$var$FetchText_DOM();


class $74ce46cea2cf8f30$export$f7dc7515e1ab8425 {
    fetchText;
    constructor(fetchText = (0, $961a8c3f5b2d4f3f$export$d763ec234f19c958)){
        this.fetchText = fetchText;
    }
    async getCSSStyleSheet(location) {
        return await this.fetchCSSStyleSheet(location);
    }
    async fetchCSSStyleSheet(location) {
        const text = await this.fetchText.fetchText(location);
        const cssStyleSheet = new CSSStyleSheet({
            baseURL: location
        });
        return cssStyleSheet.replace(text);
    }
}



async function $4e2d6dbcb29ca5b9$export$4b9207a613bd5d70(...locations) {
    await new $4e2d6dbcb29ca5b9$export$56c3e47a265c90f9(new (0, $74ce46cea2cf8f30$export$f7dc7515e1ab8425)((0, $961a8c3f5b2d4f3f$export$d763ec234f19c958)), document).adoptCSSStylesheets(...locations);
}
class $4e2d6dbcb29ca5b9$export$56c3e47a265c90f9 {
    cssStyleSheetImporter;
    document;
    constructor(cssStyleSheetImporter, document1){
        this.cssStyleSheetImporter = cssStyleSheetImporter;
        this.document = document1;
    }
    async adoptCSSStylesheets(...locations) {
        const cssStyleSheetsMaybe = await Promise.all(locations.map((location)=>this.cssStyleSheetImporter.getCSSStyleSheet(location)));
        const cssStyleSheets = cssStyleSheetsMaybe.filter((cssStyleSheet)=>!!cssStyleSheet);
        if (cssStyleSheets.length > 0) this.adoptedStyleSheets_push(cssStyleSheets);
    }
    /**
     * adopter of font stylesheets can only be the root document dom, not the shadow dom.
     * @see https://github.com/microsoft/vscode/issues/159877#issuecomment-1262843952
     * @see https://github.com/mdn/interactive-examples/issues/887#issuecomment-432606925
     */ adoptedStyleSheets_push(cssStyleSheets) {
        this.document.adoptedStyleSheets.push(...cssStyleSheets);
    }
}


class $ee240c89551fb5d5$export$403d1949f253139e {
    fetchText;
    cssStyleSheetImporter;
    options;
    constructor(fetchText, cssStyleSheetImporter, options){
        this.fetchText = fetchText;
        this.cssStyleSheetImporter = cssStyleSheetImporter;
        this.options = options;
    }
    async loadHtml() {
        const location = this.resolveResourceLocation('html');
        return await this.fetchText.fetchText(location);
    }
    async loadCssStyleSheet() {
        const location = this.resolveResourceLocation('css');
        return await this.cssStyleSheetImporter.getCSSStyleSheet(location);
    }
    resolveResourceLocation(extension) {
        return this.options.import_meta.resolve(`./${this.options.name}.${extension}`);
    }
}




function $47456e589c7ad4a8$export$992aa6859e31245f(tag, value, template) {
    try {
        tag.outerHTML = value;
    } catch (error) {
        const chrome = "Failed to set the 'outerHTML' property on 'Element': This element's parent is of type '#document-fragment', which is not an element node.";
        if (error.message === chrome) template.innerHTML = value;
    }
}


class $3537c214ed9d7da0$export$b61252e7516ffc98 {
    static hydrate(template) {
        this.hydrateTree(template.content, template);
    }
    static hydrateTree(node, template) {
        while(true){
            const tag = node.querySelector('for--');
            if (!tag) return;
            this.hydrateTree(tag, template);
            const items = tag.getAttribute('items') ?? (()=>{
                throw Error('Attribute "items" is required for "for--" markup');
            })();
            const value = tag.getAttribute('value') ?? 'value';
            const index = tag.getAttribute('index');
            const args = index ? `(${value}, ${index})` : value;
            const body = tag.innerHTML;
            const directive = `\${map(${items}, ${args} => html\`${body}\`)}`;
            (0, $47456e589c7ad4a8$export$992aa6859e31245f)(tag, directive, template);
        }
    }
}



class $c0c2800b010a729d$export$23d99f65732e27fa {
    static hydrate(template) {
        this.hydrateTree(template.content, template);
    }
    static hydrateTree(node, template) {
        while(true){
            const tag = node.querySelector('if--');
            if (!tag) return;
            this.hydrateTree(tag, template);
            const condition = tag.getAttribute('condition') ?? (()=>{
                throw Error('Attribute "condition" is required for "if--" markup');
            })();
            const trueElements = [
                ...tag.querySelectorAll(':scope > true--')
            ];
            if (trueElements.length > 1) throw Error('Only one "true--" is allowed for "if--" markup');
            const trueElement = trueElements[0];
            const falseElements = [
                ...tag.querySelectorAll(':scope > false--')
            ];
            if (falseElements.length > 1) throw Error('Only one "false--" is allowed for "if--" markup');
            const falseElement = falseElements[0];
            if (falseElement && !trueElement) throw Error('One "true" is required if "false" present for "if--" markup');
            const trueCase = `() => html\`${trueElement?.innerHTML ?? tag.innerHTML}\``;
            const falseCase = falseElement ? `, () => html\`${falseElement.innerHTML}\`` : '';
            const directive = `\${when(${condition}, ${trueCase}${falseCase})}`;
            (0, $47456e589c7ad4a8$export$992aa6859e31245f)(tag, directive, template);
        }
    }
}


class $816f2c49f27978b4$export$c49a946df578cf2c {
    static hydrate(template) {
        this.hydrateTree(template.content, template);
    }
    static hydrateTree(node, template) {
        while(true){
            const markup = node.querySelector('inside--');
            if (!markup) return;
            this.hydrateTree(markup, template);
            const selectors = markup.getAttribute('target');
            if (!selectors) throw new Error('Attribute "target" is required for "inside--" markup');
            const target = node.querySelector(selectors);
            if (!target) throw new Error(`No element matching ${selectors}`);
            target.innerHTML = markup.innerHTML;
            markup.parentNode.removeChild(markup);
        }
    }
}



class $36eb67525e009378$export$24f96fec0f695157 {
    static hydrate(template) {
        this.hydrateTree(template.content, template);
    }
    static hydrateTree(node, template) {
        while(true){
            const tag = node.querySelector('switch--');
            if (!tag) return;
            this.hydrateTree(tag, template);
            const value = tag.getAttribute('value') ?? (()=>{
                throw Error('Attribute "value" is required for "switch--" markup');
            })();
            const cases = this.toCases([
                ...tag.querySelectorAll(':scope > case--')
            ]);
            const valueCases = cases.valueCases.join(',\n');
            const defaultCase = cases.defaultCase ? `,\n${cases.defaultCase}` : '';
            const directive = `\${choose(${value},\n[${valueCases}]${defaultCase})}`;
            (0, $47456e589c7ad4a8$export$992aa6859e31245f)(tag, directive, template);
        }
    }
    static toCases(cases) {
        if (cases.length === 0) throw Error('At least one "case--" is required for "choose--" markup');
        const defaultElements = cases.filter((caseElement)=>!caseElement.hasAttribute('value'));
        if (defaultElements.length > 1) throw Error('Only one default "case--" is allowed for "choose--" markup');
        const defaultElement = defaultElements[0];
        const defaultCase = `() => html\`${defaultElement?.innerHTML}\``;
        const valueElements = cases.filter((caseElement)=>caseElement.hasAttribute('value'));
        const valueCases = valueElements.map((caseElement)=>{
            const value = caseElement.getAttribute('value');
            return `['${value}', () => html\`${caseElement.innerHTML}\`]`;
        });
        return {
            valueCases: valueCases,
            defaultCase: defaultCase
        };
    }
}


class $aa0e73906d8c1d1f$export$d2f740e6c972cdb4 {
    static injectProperties(constructor, propertyDeclaration, names) {
        if (!names.length) return;
        const properties = constructor.properties ??= {};
        for (const key of names){
            if (key in properties) throw new Error(`${key}: property already exists.`);
            properties[key] = propertyDeclaration;
        }
    }
}


class $c3a8716eb65e2738$export$5168145dca66f61b {
    static addProperties(constructor, declaration, template) {
        const fromDeclaration = declaration.config?.attributes ?? [];
        const fromTemplate = template.getAttribute('data-customary-attributes')?.split(',').map((s)=>s.trim()) ?? [];
        const names = [
            ...new Set([
                ...fromDeclaration,
                ...fromTemplate
            ])
        ];
        (0, $aa0e73906d8c1d1f$export$d2f740e6c972cdb4).injectProperties(constructor, {
            reflect: true
        }, names);
    }
}



class $0fe9377839455810$export$a9f1901adeec51a7 {
    static addProperties(constructor, declaration) {
        const fromDeclaration = declaration.config?.state ?? [];
        const fromLegacy = [
            'state'
        ];
        const names = [
            ...new Set([
                ...fromDeclaration,
                ...fromLegacy
            ])
        ];
        (0, $aa0e73906d8c1d1f$export$d2f740e6c972cdb4).injectProperties(constructor, {
            state: true
        }, names);
    }
}



class $240403f5828ff7e8$export$61ef374d05bfb1e {
    static addProperties(constructor, declaration) {
        const hooks = declaration.hooks?.properties;
        const hooksArray = hooks instanceof Array ? hooks : [];
        const hooksRecord = hooks && !(hooks instanceof Array) ? hooks : {};
        const fromArray = hooksArray.map((o)=>o.name);
        const fromRecord = Object.keys(hooksRecord);
        const names = [
            ...new Set([
                ...fromArray,
                ...fromRecord
            ])
        ];
        for (const key of names)(0, $aa0e73906d8c1d1f$export$d2f740e6c972cdb4).injectProperties(constructor, hooksArray.find((value)=>value.name === key)?.propertyDeclaration ?? hooksRecord[key], [
            key
        ]);
    }
}


class $f83be5948bd06259$export$1d2219be11768641 {
    declaration;
    async define(constructor) {
        const [definition] = await Promise.all([
            this.buildDefinition(constructor),
            this.adopt_font_cssStyleSheets()
        ]);
        return definition;
    }
    async buildDefinition(constructor) {
        const { template: template, templateInDocument: templateInDocument } = await this.resolveHTMLTemplateElement(this.name);
        this.addProperties(constructor, template);
        const cssStyleSheet = templateInDocument ? undefined : await this.loadExternalCSSStyleSheet();
        return {
            immutable_htmlString: this.getHtmlString(template),
            ...cssStyleSheet ? {
                cssStyleSheet: cssStyleSheet
            } : {},
            declaration: this.declaration
        };
    }
    async resolveHTMLTemplateElement(name) {
        try {
            const templateInDocument = $f83be5948bd06259$var$findHTMLTemplateElement(name, document);
            if (templateInDocument) return {
                template: templateInDocument,
                templateInDocument: templateInDocument
            };
            const templateInExternalFile = await this.findHTMLTemplateElementInExternalFile(name);
            return {
                template: templateInExternalFile,
                templateInDocument: undefined
            };
        } catch (error) {
            throw new Error('template unresolvable from current page or external html', {
                cause: error
            });
        }
    }
    addProperties(constructor, template) {
        (0, $c3a8716eb65e2738$export$5168145dca66f61b).addProperties(constructor, this.declaration, template);
        (0, $0fe9377839455810$export$a9f1901adeec51a7).addProperties(constructor, this.declaration);
        (0, $240403f5828ff7e8$export$61ef374d05bfb1e).addProperties(constructor, this.declaration);
    }
    getHtmlString(template) {
        (0, $3537c214ed9d7da0$export$b61252e7516ffc98).hydrate(template);
        (0, $c0c2800b010a729d$export$23d99f65732e27fa).hydrate(template);
        (0, $36eb67525e009378$export$24f96fec0f695157).hydrate(template);
        // must be last to accommodate all other directives
        (0, $816f2c49f27978b4$export$c49a946df578cf2c).hydrate(template);
        return $f83be5948bd06259$var$recode(template.innerHTML);
    }
    async findHTMLTemplateElementInExternalFile(name) {
        const htmlString = await this.loadExternalHtml();
        const template = document.createElement('template');
        template.innerHTML = htmlString;
        return $f83be5948bd06259$var$findHTMLTemplateElement(name, template.content) ?? template;
    }
    async loadExternalHtml() {
        try {
            return await (await this.externalLoader).loadHtml();
        } catch (error) {
            throw new Error('External html file out of reach.', {
                cause: error
            });
        }
    }
    async loadExternalCSSStyleSheet() {
        if (this.declaration.hooks?.externalLoader?.css_dont) return undefined;
        try {
            return await (await this.externalLoader).loadCssStyleSheet();
        } catch (error) {
            console.debug('External css file out of reach.', {
                cause: error
            });
            return undefined;
        }
    }
    async adopt_font_cssStyleSheets() {
        const locations = ((a)=>a.length > 0 ? a : undefined)([
            this.declaration.config?.define?.fontLocation,
            ...this.declaration.config?.define?.fontLocations ?? []
        ].filter((location)=>location != undefined));
        if (!locations) return;
        return await (await this.cssStyleSheetAdopter).adoptCSSStylesheets(...locations);
    }
    constructor(declaration){
        this.declaration = declaration;
        this.name = this.declaration.name;
    }
    name;
    get cssStyleSheetImporter() {
        return this._cssStyleSheetImporter ??= $f83be5948bd06259$var$loadCssStyleSheetImporter(this.fetchText);
    }
    _cssStyleSheetImporter;
    get cssStyleSheetAdopter() {
        return this._cssStyleSheetAdopter ??= $f83be5948bd06259$var$loadCssStyleSheetAdopter(this.cssStyleSheetImporter);
    }
    _cssStyleSheetAdopter;
    get externalLoader() {
        return this._externalLoader ??= $f83be5948bd06259$var$createExternalLoader(this.fetchText, this.cssStyleSheetImporter, {
            name: this.name,
            import_meta: this.get_import_meta()
        });
    }
    get_import_meta() {
        return this.declaration.hooks?.externalLoader?.import_meta ?? (()=>{
            throw new Error(`${this.name}: Customary needs "import.meta" if the custom element template ` + 'is to be loaded from an external file. ' + '(document did not have a named template element, and an html string was not provided.)');
        })();
    }
    _externalLoader;
    get fetchText() {
        return this._fetchText ??= $f83be5948bd06259$var$loadFetchText();
    }
    _fetchText;
}
async function $f83be5948bd06259$var$loadCssStyleSheetAdopter(cssStyleSheetImporter) {
    return new (0, $4e2d6dbcb29ca5b9$export$56c3e47a265c90f9)(await cssStyleSheetImporter, document);
}
async function $f83be5948bd06259$var$loadCssStyleSheetImporter(fetchText) {
    return new (0, $74ce46cea2cf8f30$export$f7dc7515e1ab8425)(await fetchText);
}
async function $f83be5948bd06259$var$createExternalLoader(fetchText, cssStyleSheetImporter, options) {
    return new (0, $ee240c89551fb5d5$export$403d1949f253139e)(await fetchText, await cssStyleSheetImporter, options);
}
async function $f83be5948bd06259$var$loadFetchText() {
    return 0, $961a8c3f5b2d4f3f$export$d763ec234f19c958;
}
function $f83be5948bd06259$var$findHTMLTemplateElement(name, node) {
    return node.querySelector(`template[data-customary-name='${name}']`) ?? undefined;
}
/**
 innerHTML encodes some characters used by lit directives
 so we must decode them back into the HTML string.
 over time the need to do this should disappear,
 as we add directive markup for a larger number of lit directives.
 */ function $f83be5948bd06259$var$recode(htmlString) {
    // lit directives expressed as arrow functions
    return htmlString.replaceAll('=&gt;', '=>');
}


const $d29bea016259bab1$var$WAIT_TO_DEFINE_EVERYTHING_IN_THE_END = false;
class $d29bea016259bab1$export$d37a9068d840d1de {
    dom_customElementRegistry;
    static singleton() {
        return $d29bea016259bab1$export$d37a9068d840d1de.CustomaryRegistry_singleton;
    }
    async declare(constructor, declaration) {
        if (!declaration.name) throw new Error('A name must be provided to define a custom element.');
        if (!$d29bea016259bab1$var$WAIT_TO_DEFINE_EVERYTHING_IN_THE_END) {
            await this.define(constructor, declaration);
            return;
        }
        this.declarations.set(constructor, declaration);
    }
    async settle() {
        if (!$d29bea016259bab1$var$WAIT_TO_DEFINE_EVERYTHING_IN_THE_END) return;
        const entries = [
            ...this.declarations.entries()
        ];
        const promises = entries.map((entry)=>{
            const [constructor, declaration] = entry;
            return this.define(constructor, declaration);
        });
        await Promise.all(promises);
    }
    async untilDefined(constructor) {
        const name = constructor.customary?.name;
        if (name === undefined) throw new Error('Class must have the "customary" declaration with a "name" property.');
        return await this.dom_customElementRegistry.whenDefined(name);
    }
    async define(constructor, declaration) {
        if ((0, $a6578a6f2ac293b9$export$3452ba782587c66f)(constructor)) {
            console.debug(`${constructor.name}: element already defined, skipping...`);
            return;
        }
        const definition = await new (0, $f83be5948bd06259$export$1d2219be11768641)(declaration).define(constructor);
        (0, $a6578a6f2ac293b9$export$5c2b83001c88ec5b)(constructor, definition);
        this.dom_customElementRegistry.define(declaration.name, constructor, declaration.hooks?.dom?.define?.options);
    }
    constructor(dom_customElementRegistry){
        this.dom_customElementRegistry = dom_customElementRegistry;
        this.declarations = new Map();
    }
    declarations;
    static CustomaryRegistry_singleton = new $d29bea016259bab1$export$d37a9068d840d1de(customElements);
}


var $6b52b5e2005fdcd9$exports = {};

$parcel$export($6b52b5e2005fdcd9$exports, "LitElement", () => $d812c34aed91105d$export$3f2f9f5909897157);
$parcel$export($6b52b5e2005fdcd9$exports, "html", () => $34c890d2bba8533a$export$c0bb0b647f701bb5);
$parcel$export($6b52b5e2005fdcd9$exports, "map", () => $2df088f3943a4311$export$871de8747c9eaa88);
$parcel$export($6b52b5e2005fdcd9$exports, "choose", () => $36ba9077c37f6d69$export$7877a478dd30fd3d);
$parcel$export($6b52b5e2005fdcd9$exports, "when", () => $5114a2a7e9d58c35$export$a55877ca9db47377);
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ const $8986b12aaba1663b$var$t = globalThis, $8986b12aaba1663b$export$b4d10f6001c083c2 = $8986b12aaba1663b$var$t.ShadowRoot && (void 0 === $8986b12aaba1663b$var$t.ShadyCSS || $8986b12aaba1663b$var$t.ShadyCSS.nativeShadow) && "adoptedStyleSheets" in Document.prototype && "replace" in CSSStyleSheet.prototype, $8986b12aaba1663b$var$s = Symbol(), $8986b12aaba1663b$var$o = new WeakMap;
class $8986b12aaba1663b$export$505d1e8739bad805 {
    constructor(t, e, o){
        if (this._$cssResult$ = !0, o !== $8986b12aaba1663b$var$s) throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");
        this.cssText = t, this.t = e;
    }
    get styleSheet() {
        let t = this.o;
        const s = this.t;
        if ($8986b12aaba1663b$export$b4d10f6001c083c2 && void 0 === t) {
            const e = void 0 !== s && 1 === s.length;
            e && (t = $8986b12aaba1663b$var$o.get(s)), void 0 === t && ((this.o = t = new CSSStyleSheet).replaceSync(this.cssText), e && $8986b12aaba1663b$var$o.set(s, t));
        }
        return t;
    }
    toString() {
        return this.cssText;
    }
}
const $8986b12aaba1663b$export$8d80f9cac07cdb3 = (t)=>new $8986b12aaba1663b$export$505d1e8739bad805("string" == typeof t ? t : t + "", void 0, $8986b12aaba1663b$var$s), $8986b12aaba1663b$export$dbf350e5966cf602 = (t, ...e)=>{
    const o = 1 === t.length ? t[0] : e.reduce((e, s, o)=>e + ((t)=>{
            if (!0 === t._$cssResult$) return t.cssText;
            if ("number" == typeof t) return t;
            throw Error("Value passed to 'css' function must be a 'css' function result: " + t + ". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.");
        })(s) + t[o + 1], t[0]);
    return new $8986b12aaba1663b$export$505d1e8739bad805(o, t, $8986b12aaba1663b$var$s);
}, $8986b12aaba1663b$export$2ca4a66ec4cecb90 = (s, o)=>{
    if ($8986b12aaba1663b$export$b4d10f6001c083c2) s.adoptedStyleSheets = o.map((t)=>t instanceof CSSStyleSheet ? t : t.styleSheet);
    else for (const e of o){
        const o = document.createElement("style"), n = $8986b12aaba1663b$var$t.litNonce;
        void 0 !== n && o.setAttribute("nonce", n), o.textContent = e.cssText, s.appendChild(o);
    }
}, $8986b12aaba1663b$export$ee69dfd951e24778 = $8986b12aaba1663b$export$b4d10f6001c083c2 ? (t)=>t : (t)=>t instanceof CSSStyleSheet ? ((t)=>{
        let e = "";
        for (const s of t.cssRules)e += s.cssText;
        return $8986b12aaba1663b$export$8d80f9cac07cdb3(e);
    })(t) : t;


/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ const { is: $03b44d016d05e4a8$var$i, defineProperty: $03b44d016d05e4a8$var$e, getOwnPropertyDescriptor: $03b44d016d05e4a8$var$r, getOwnPropertyNames: $03b44d016d05e4a8$var$h, getOwnPropertySymbols: $03b44d016d05e4a8$var$o, getPrototypeOf: $03b44d016d05e4a8$var$n } = Object, $03b44d016d05e4a8$var$a = globalThis, $03b44d016d05e4a8$var$c = $03b44d016d05e4a8$var$a.trustedTypes, $03b44d016d05e4a8$var$l = $03b44d016d05e4a8$var$c ? $03b44d016d05e4a8$var$c.emptyScript : "", $03b44d016d05e4a8$var$p = $03b44d016d05e4a8$var$a.reactiveElementPolyfillSupport, $03b44d016d05e4a8$var$d = (t, s)=>t, $03b44d016d05e4a8$export$7312b35fbf521afb = {
    toAttribute (t, s) {
        switch(s){
            case Boolean:
                t = t ? $03b44d016d05e4a8$var$l : null;
                break;
            case Object:
            case Array:
                t = null == t ? t : JSON.stringify(t);
        }
        return t;
    },
    fromAttribute (t, s) {
        let i = t;
        switch(s){
            case Boolean:
                i = null !== t;
                break;
            case Number:
                i = null === t ? null : Number(t);
                break;
            case Object:
            case Array:
                try {
                    i = JSON.parse(t);
                } catch (t) {
                    i = null;
                }
        }
        return i;
    }
}, $03b44d016d05e4a8$export$53a6892c50694894 = (t, s)=>!$03b44d016d05e4a8$var$i(t, s), $03b44d016d05e4a8$var$y = {
    attribute: !0,
    type: String,
    converter: $03b44d016d05e4a8$export$7312b35fbf521afb,
    reflect: !1,
    hasChanged: $03b44d016d05e4a8$export$53a6892c50694894
};
Symbol.metadata ??= Symbol("metadata"), $03b44d016d05e4a8$var$a.litPropertyMetadata ??= new WeakMap;
class $03b44d016d05e4a8$export$c7c07a37856565d extends HTMLElement {
    static addInitializer(t) {
        this._$Ei(), (this.l ??= []).push(t);
    }
    static get observedAttributes() {
        return this.finalize(), this._$Eh && [
            ...this._$Eh.keys()
        ];
    }
    static createProperty(t, s = $03b44d016d05e4a8$var$y) {
        if (s.state && (s.attribute = !1), this._$Ei(), this.elementProperties.set(t, s), !s.noAccessor) {
            const i = Symbol(), r = this.getPropertyDescriptor(t, i, s);
            void 0 !== r && $03b44d016d05e4a8$var$e(this.prototype, t, r);
        }
    }
    static getPropertyDescriptor(t, s, i) {
        const { get: e, set: h } = $03b44d016d05e4a8$var$r(this.prototype, t) ?? {
            get () {
                return this[s];
            },
            set (t) {
                this[s] = t;
            }
        };
        return {
            get () {
                return e?.call(this);
            },
            set (s) {
                const r = e?.call(this);
                h.call(this, s), this.requestUpdate(t, r, i);
            },
            configurable: !0,
            enumerable: !0
        };
    }
    static getPropertyOptions(t) {
        return this.elementProperties.get(t) ?? $03b44d016d05e4a8$var$y;
    }
    static _$Ei() {
        if (this.hasOwnProperty($03b44d016d05e4a8$var$d("elementProperties"))) return;
        const t = $03b44d016d05e4a8$var$n(this);
        t.finalize(), void 0 !== t.l && (this.l = [
            ...t.l
        ]), this.elementProperties = new Map(t.elementProperties);
    }
    static finalize() {
        if (this.hasOwnProperty($03b44d016d05e4a8$var$d("finalized"))) return;
        if (this.finalized = !0, this._$Ei(), this.hasOwnProperty($03b44d016d05e4a8$var$d("properties"))) {
            const t = this.properties, s = [
                ...$03b44d016d05e4a8$var$h(t),
                ...$03b44d016d05e4a8$var$o(t)
            ];
            for (const i of s)this.createProperty(i, t[i]);
        }
        const t = this[Symbol.metadata];
        if (null !== t) {
            const s = litPropertyMetadata.get(t);
            if (void 0 !== s) for (const [t, i] of s)this.elementProperties.set(t, i);
        }
        this._$Eh = new Map;
        for (const [t, s] of this.elementProperties){
            const i = this._$Eu(t, s);
            void 0 !== i && this._$Eh.set(i, t);
        }
        this.elementStyles = this.finalizeStyles(this.styles);
    }
    static finalizeStyles(s) {
        const i = [];
        if (Array.isArray(s)) {
            const e = new Set(s.flat(1 / 0).reverse());
            for (const s of e)i.unshift((0, $8986b12aaba1663b$export$ee69dfd951e24778)(s));
        } else void 0 !== s && i.push((0, $8986b12aaba1663b$export$ee69dfd951e24778)(s));
        return i;
    }
    static _$Eu(t, s) {
        const i = s.attribute;
        return !1 === i ? void 0 : "string" == typeof i ? i : "string" == typeof t ? t.toLowerCase() : void 0;
    }
    constructor(){
        super(), this._$Ep = void 0, this.isUpdatePending = !1, this.hasUpdated = !1, this._$Em = null, this._$Ev();
    }
    _$Ev() {
        this._$ES = new Promise((t)=>this.enableUpdating = t), this._$AL = new Map, this._$E_(), this.requestUpdate(), this.constructor.l?.forEach((t)=>t(this));
    }
    addController(t) {
        (this._$EO ??= new Set).add(t), void 0 !== this.renderRoot && this.isConnected && t.hostConnected?.();
    }
    removeController(t) {
        this._$EO?.delete(t);
    }
    _$E_() {
        const t = new Map, s = this.constructor.elementProperties;
        for (const i of s.keys())this.hasOwnProperty(i) && (t.set(i, this[i]), delete this[i]);
        t.size > 0 && (this._$Ep = t);
    }
    createRenderRoot() {
        const t = this.shadowRoot ?? this.attachShadow(this.constructor.shadowRootOptions);
        return (0, $8986b12aaba1663b$export$2ca4a66ec4cecb90)(t, this.constructor.elementStyles), t;
    }
    connectedCallback() {
        this.renderRoot ??= this.createRenderRoot(), this.enableUpdating(!0), this._$EO?.forEach((t)=>t.hostConnected?.());
    }
    enableUpdating(t) {}
    disconnectedCallback() {
        this._$EO?.forEach((t)=>t.hostDisconnected?.());
    }
    attributeChangedCallback(t, s, i) {
        this._$AK(t, i);
    }
    _$EC(t, s) {
        const i = this.constructor.elementProperties.get(t), e = this.constructor._$Eu(t, i);
        if (void 0 !== e && !0 === i.reflect) {
            const r = (void 0 !== i.converter?.toAttribute ? i.converter : $03b44d016d05e4a8$export$7312b35fbf521afb).toAttribute(s, i.type);
            this._$Em = t, null == r ? this.removeAttribute(e) : this.setAttribute(e, r), this._$Em = null;
        }
    }
    _$AK(t, s) {
        const i = this.constructor, e = i._$Eh.get(t);
        if (void 0 !== e && this._$Em !== e) {
            const t = i.getPropertyOptions(e), r = "function" == typeof t.converter ? {
                fromAttribute: t.converter
            } : void 0 !== t.converter?.fromAttribute ? t.converter : $03b44d016d05e4a8$export$7312b35fbf521afb;
            this._$Em = e, this[e] = r.fromAttribute(s, t.type), this._$Em = null;
        }
    }
    requestUpdate(t, s, i) {
        if (void 0 !== t) {
            if (i ??= this.constructor.getPropertyOptions(t), !(i.hasChanged ?? $03b44d016d05e4a8$export$53a6892c50694894)(this[t], s)) return;
            this.P(t, s, i);
        }
        !1 === this.isUpdatePending && (this._$ES = this._$ET());
    }
    P(t, s, i) {
        this._$AL.has(t) || this._$AL.set(t, s), !0 === i.reflect && this._$Em !== t && (this._$Ej ??= new Set).add(t);
    }
    async _$ET() {
        this.isUpdatePending = !0;
        try {
            await this._$ES;
        } catch (t) {
            Promise.reject(t);
        }
        const t = this.scheduleUpdate();
        return null != t && await t, !this.isUpdatePending;
    }
    scheduleUpdate() {
        return this.performUpdate();
    }
    performUpdate() {
        if (!this.isUpdatePending) return;
        if (!this.hasUpdated) {
            if (this.renderRoot ??= this.createRenderRoot(), this._$Ep) {
                for (const [t, s] of this._$Ep)this[t] = s;
                this._$Ep = void 0;
            }
            const t = this.constructor.elementProperties;
            if (t.size > 0) for (const [s, i] of t)!0 !== i.wrapped || this._$AL.has(s) || void 0 === this[s] || this.P(s, this[s], i);
        }
        let t = !1;
        const s = this._$AL;
        try {
            t = this.shouldUpdate(s), t ? (this.willUpdate(s), this._$EO?.forEach((t)=>t.hostUpdate?.()), this.update(s)) : this._$EU();
        } catch (s) {
            throw t = !1, this._$EU(), s;
        }
        t && this._$AE(s);
    }
    willUpdate(t) {}
    _$AE(t) {
        this._$EO?.forEach((t)=>t.hostUpdated?.()), this.hasUpdated || (this.hasUpdated = !0, this.firstUpdated(t)), this.updated(t);
    }
    _$EU() {
        this._$AL = new Map, this.isUpdatePending = !1;
    }
    get updateComplete() {
        return this.getUpdateComplete();
    }
    getUpdateComplete() {
        return this._$ES;
    }
    shouldUpdate(t) {
        return !0;
    }
    update(t) {
        this._$Ej &&= this._$Ej.forEach((t)=>this._$EC(t, this[t])), this._$EU();
    }
    updated(t) {}
    firstUpdated(t) {}
}
$03b44d016d05e4a8$export$c7c07a37856565d.elementStyles = [], $03b44d016d05e4a8$export$c7c07a37856565d.shadowRootOptions = {
    mode: "open"
}, $03b44d016d05e4a8$export$c7c07a37856565d[$03b44d016d05e4a8$var$d("elementProperties")] = new Map, $03b44d016d05e4a8$export$c7c07a37856565d[$03b44d016d05e4a8$var$d("finalized")] = new Map, $03b44d016d05e4a8$var$p?.({
    ReactiveElement: $03b44d016d05e4a8$export$c7c07a37856565d
}), ($03b44d016d05e4a8$var$a.reactiveElementVersions ??= []).push("2.0.4");


/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ const $34c890d2bba8533a$var$t = globalThis, $34c890d2bba8533a$var$i = $34c890d2bba8533a$var$t.trustedTypes, $34c890d2bba8533a$var$s = $34c890d2bba8533a$var$i ? $34c890d2bba8533a$var$i.createPolicy("lit-html", {
    createHTML: (t)=>t
}) : void 0, $34c890d2bba8533a$var$e = "$lit$", $34c890d2bba8533a$var$h = `lit$${Math.random().toFixed(9).slice(2)}$`, $34c890d2bba8533a$var$o = "?" + $34c890d2bba8533a$var$h, $34c890d2bba8533a$var$n = `<${$34c890d2bba8533a$var$o}>`, $34c890d2bba8533a$var$r = document, $34c890d2bba8533a$var$l = ()=>$34c890d2bba8533a$var$r.createComment(""), $34c890d2bba8533a$var$c = (t)=>null === t || "object" != typeof t && "function" != typeof t, $34c890d2bba8533a$var$a = Array.isArray, $34c890d2bba8533a$var$u = (t)=>$34c890d2bba8533a$var$a(t) || "function" == typeof t?.[Symbol.iterator], $34c890d2bba8533a$var$d = "[ \t\n\f\r]", $34c890d2bba8533a$var$f = /<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g, $34c890d2bba8533a$var$v = /-->/g, $34c890d2bba8533a$var$_ = />/g, $34c890d2bba8533a$var$m = RegExp(`>|${$34c890d2bba8533a$var$d}(?:([^\\s"'>=/]+)(${$34c890d2bba8533a$var$d}*=${$34c890d2bba8533a$var$d}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`, "g"), $34c890d2bba8533a$var$p = /'/g, $34c890d2bba8533a$var$g = /"/g, $34c890d2bba8533a$var$$ = /^(?:script|style|textarea|title)$/i, $34c890d2bba8533a$var$y = (t)=>(i, ...s)=>({
            _$litType$: t,
            strings: i,
            values: s
        }), $34c890d2bba8533a$export$c0bb0b647f701bb5 = $34c890d2bba8533a$var$y(1), $34c890d2bba8533a$export$7ed1367e7fa1ad68 = $34c890d2bba8533a$var$y(2), $34c890d2bba8533a$export$47d5b44d225be5b4 = $34c890d2bba8533a$var$y(3), $34c890d2bba8533a$export$9c068ae9cc5db4e8 = Symbol.for("lit-noChange"), $34c890d2bba8533a$export$45b790e32b2810ee = Symbol.for("lit-nothing"), $34c890d2bba8533a$var$A = new WeakMap, $34c890d2bba8533a$var$C = $34c890d2bba8533a$var$r.createTreeWalker($34c890d2bba8533a$var$r, 129);
function $34c890d2bba8533a$var$P(t, i) {
    if (!$34c890d2bba8533a$var$a(t) || !t.hasOwnProperty("raw")) throw Error("invalid template strings array");
    return void 0 !== $34c890d2bba8533a$var$s ? $34c890d2bba8533a$var$s.createHTML(i) : i;
}
const $34c890d2bba8533a$var$V = (t, i)=>{
    const s = t.length - 1, o = [];
    let r, l = 2 === i ? "<svg>" : 3 === i ? "<math>" : "", c = $34c890d2bba8533a$var$f;
    for(let i = 0; i < s; i++){
        const s = t[i];
        let a, u, d = -1, y = 0;
        for(; y < s.length && (c.lastIndex = y, u = c.exec(s), null !== u);)y = c.lastIndex, c === $34c890d2bba8533a$var$f ? "!--" === u[1] ? c = $34c890d2bba8533a$var$v : void 0 !== u[1] ? c = $34c890d2bba8533a$var$_ : void 0 !== u[2] ? ($34c890d2bba8533a$var$$.test(u[2]) && (r = RegExp("</" + u[2], "g")), c = $34c890d2bba8533a$var$m) : void 0 !== u[3] && (c = $34c890d2bba8533a$var$m) : c === $34c890d2bba8533a$var$m ? ">" === u[0] ? (c = r ?? $34c890d2bba8533a$var$f, d = -1) : void 0 === u[1] ? d = -2 : (d = c.lastIndex - u[2].length, a = u[1], c = void 0 === u[3] ? $34c890d2bba8533a$var$m : '"' === u[3] ? $34c890d2bba8533a$var$g : $34c890d2bba8533a$var$p) : c === $34c890d2bba8533a$var$g || c === $34c890d2bba8533a$var$p ? c = $34c890d2bba8533a$var$m : c === $34c890d2bba8533a$var$v || c === $34c890d2bba8533a$var$_ ? c = $34c890d2bba8533a$var$f : (c = $34c890d2bba8533a$var$m, r = void 0);
        const x = c === $34c890d2bba8533a$var$m && t[i + 1].startsWith("/>") ? " " : "";
        l += c === $34c890d2bba8533a$var$f ? s + $34c890d2bba8533a$var$n : d >= 0 ? (o.push(a), s.slice(0, d) + $34c890d2bba8533a$var$e + s.slice(d) + $34c890d2bba8533a$var$h + x) : s + $34c890d2bba8533a$var$h + (-2 === d ? i : x);
    }
    return [
        $34c890d2bba8533a$var$P(t, l + (t[s] || "<?>") + (2 === i ? "</svg>" : 3 === i ? "</math>" : "")),
        o
    ];
};
class $34c890d2bba8533a$var$N {
    constructor({ strings: t, _$litType$: s }, n){
        let r;
        this.parts = [];
        let c = 0, a = 0;
        const u = t.length - 1, d = this.parts, [f, v] = $34c890d2bba8533a$var$V(t, s);
        if (this.el = $34c890d2bba8533a$var$N.createElement(f, n), $34c890d2bba8533a$var$C.currentNode = this.el.content, 2 === s || 3 === s) {
            const t = this.el.content.firstChild;
            t.replaceWith(...t.childNodes);
        }
        for(; null !== (r = $34c890d2bba8533a$var$C.nextNode()) && d.length < u;){
            if (1 === r.nodeType) {
                if (r.hasAttributes()) for (const t of r.getAttributeNames())if (t.endsWith($34c890d2bba8533a$var$e)) {
                    const i = v[a++], s = r.getAttribute(t).split($34c890d2bba8533a$var$h), e = /([.?@])?(.*)/.exec(i);
                    d.push({
                        type: 1,
                        index: c,
                        name: e[2],
                        strings: s,
                        ctor: "." === e[1] ? $34c890d2bba8533a$var$H : "?" === e[1] ? $34c890d2bba8533a$var$I : "@" === e[1] ? $34c890d2bba8533a$var$L : $34c890d2bba8533a$var$k
                    }), r.removeAttribute(t);
                } else t.startsWith($34c890d2bba8533a$var$h) && (d.push({
                    type: 6,
                    index: c
                }), r.removeAttribute(t));
                if ($34c890d2bba8533a$var$$.test(r.tagName)) {
                    const t = r.textContent.split($34c890d2bba8533a$var$h), s = t.length - 1;
                    if (s > 0) {
                        r.textContent = $34c890d2bba8533a$var$i ? $34c890d2bba8533a$var$i.emptyScript : "";
                        for(let i = 0; i < s; i++)r.append(t[i], $34c890d2bba8533a$var$l()), $34c890d2bba8533a$var$C.nextNode(), d.push({
                            type: 2,
                            index: ++c
                        });
                        r.append(t[s], $34c890d2bba8533a$var$l());
                    }
                }
            } else if (8 === r.nodeType) {
                if (r.data === $34c890d2bba8533a$var$o) d.push({
                    type: 2,
                    index: c
                });
                else {
                    let t = -1;
                    for(; -1 !== (t = r.data.indexOf($34c890d2bba8533a$var$h, t + 1));)d.push({
                        type: 7,
                        index: c
                    }), t += $34c890d2bba8533a$var$h.length - 1;
                }
            }
            c++;
        }
    }
    static createElement(t, i) {
        const s = $34c890d2bba8533a$var$r.createElement("template");
        return s.innerHTML = t, s;
    }
}
function $34c890d2bba8533a$var$S(t, i, s = t, e) {
    if (i === $34c890d2bba8533a$export$9c068ae9cc5db4e8) return i;
    let h = void 0 !== e ? s._$Co?.[e] : s._$Cl;
    const o = $34c890d2bba8533a$var$c(i) ? void 0 : i._$litDirective$;
    return h?.constructor !== o && (h?._$AO?.(!1), void 0 === o ? h = void 0 : (h = new o(t), h._$AT(t, s, e)), void 0 !== e ? (s._$Co ??= [])[e] = h : s._$Cl = h), void 0 !== h && (i = $34c890d2bba8533a$var$S(t, h._$AS(t, i.values), h, e)), i;
}
class $34c890d2bba8533a$var$M {
    constructor(t, i){
        this._$AV = [], this._$AN = void 0, this._$AD = t, this._$AM = i;
    }
    get parentNode() {
        return this._$AM.parentNode;
    }
    get _$AU() {
        return this._$AM._$AU;
    }
    u(t) {
        const { el: { content: i }, parts: s } = this._$AD, e = (t?.creationScope ?? $34c890d2bba8533a$var$r).importNode(i, !0);
        $34c890d2bba8533a$var$C.currentNode = e;
        let h = $34c890d2bba8533a$var$C.nextNode(), o = 0, n = 0, l = s[0];
        for(; void 0 !== l;){
            if (o === l.index) {
                let i;
                2 === l.type ? i = new $34c890d2bba8533a$var$R(h, h.nextSibling, this, t) : 1 === l.type ? i = new l.ctor(h, l.name, l.strings, this, t) : 6 === l.type && (i = new $34c890d2bba8533a$var$z(h, this, t)), this._$AV.push(i), l = s[++n];
            }
            o !== l?.index && (h = $34c890d2bba8533a$var$C.nextNode(), o++);
        }
        return $34c890d2bba8533a$var$C.currentNode = $34c890d2bba8533a$var$r, e;
    }
    p(t) {
        let i = 0;
        for (const s of this._$AV)void 0 !== s && (void 0 !== s.strings ? (s._$AI(t, s, i), i += s.strings.length - 2) : s._$AI(t[i])), i++;
    }
}
class $34c890d2bba8533a$var$R {
    get _$AU() {
        return this._$AM?._$AU ?? this._$Cv;
    }
    constructor(t, i, s, e){
        this.type = 2, this._$AH = $34c890d2bba8533a$export$45b790e32b2810ee, this._$AN = void 0, this._$AA = t, this._$AB = i, this._$AM = s, this.options = e, this._$Cv = e?.isConnected ?? !0;
    }
    get parentNode() {
        let t = this._$AA.parentNode;
        const i = this._$AM;
        return void 0 !== i && 11 === t?.nodeType && (t = i.parentNode), t;
    }
    get startNode() {
        return this._$AA;
    }
    get endNode() {
        return this._$AB;
    }
    _$AI(t, i = this) {
        t = $34c890d2bba8533a$var$S(this, t, i), $34c890d2bba8533a$var$c(t) ? t === $34c890d2bba8533a$export$45b790e32b2810ee || null == t || "" === t ? (this._$AH !== $34c890d2bba8533a$export$45b790e32b2810ee && this._$AR(), this._$AH = $34c890d2bba8533a$export$45b790e32b2810ee) : t !== this._$AH && t !== $34c890d2bba8533a$export$9c068ae9cc5db4e8 && this._(t) : void 0 !== t._$litType$ ? this.$(t) : void 0 !== t.nodeType ? this.T(t) : $34c890d2bba8533a$var$u(t) ? this.k(t) : this._(t);
    }
    O(t) {
        return this._$AA.parentNode.insertBefore(t, this._$AB);
    }
    T(t) {
        this._$AH !== t && (this._$AR(), this._$AH = this.O(t));
    }
    _(t) {
        this._$AH !== $34c890d2bba8533a$export$45b790e32b2810ee && $34c890d2bba8533a$var$c(this._$AH) ? this._$AA.nextSibling.data = t : this.T($34c890d2bba8533a$var$r.createTextNode(t)), this._$AH = t;
    }
    $(t) {
        const { values: i, _$litType$: s } = t, e = "number" == typeof s ? this._$AC(t) : (void 0 === s.el && (s.el = $34c890d2bba8533a$var$N.createElement($34c890d2bba8533a$var$P(s.h, s.h[0]), this.options)), s);
        if (this._$AH?._$AD === e) this._$AH.p(i);
        else {
            const t = new $34c890d2bba8533a$var$M(e, this), s = t.u(this.options);
            t.p(i), this.T(s), this._$AH = t;
        }
    }
    _$AC(t) {
        let i = $34c890d2bba8533a$var$A.get(t.strings);
        return void 0 === i && $34c890d2bba8533a$var$A.set(t.strings, i = new $34c890d2bba8533a$var$N(t)), i;
    }
    k(t) {
        $34c890d2bba8533a$var$a(this._$AH) || (this._$AH = [], this._$AR());
        const i = this._$AH;
        let s, e = 0;
        for (const h of t)e === i.length ? i.push(s = new $34c890d2bba8533a$var$R(this.O($34c890d2bba8533a$var$l()), this.O($34c890d2bba8533a$var$l()), this, this.options)) : s = i[e], s._$AI(h), e++;
        e < i.length && (this._$AR(s && s._$AB.nextSibling, e), i.length = e);
    }
    _$AR(t = this._$AA.nextSibling, i) {
        for(this._$AP?.(!1, !0, i); t && t !== this._$AB;){
            const i = t.nextSibling;
            t.remove(), t = i;
        }
    }
    setConnected(t) {
        void 0 === this._$AM && (this._$Cv = t, this._$AP?.(t));
    }
}
class $34c890d2bba8533a$var$k {
    get tagName() {
        return this.element.tagName;
    }
    get _$AU() {
        return this._$AM._$AU;
    }
    constructor(t, i, s, e, h){
        this.type = 1, this._$AH = $34c890d2bba8533a$export$45b790e32b2810ee, this._$AN = void 0, this.element = t, this.name = i, this._$AM = e, this.options = h, s.length > 2 || "" !== s[0] || "" !== s[1] ? (this._$AH = Array(s.length - 1).fill(new String), this.strings = s) : this._$AH = $34c890d2bba8533a$export$45b790e32b2810ee;
    }
    _$AI(t, i = this, s, e) {
        const h = this.strings;
        let o = !1;
        if (void 0 === h) t = $34c890d2bba8533a$var$S(this, t, i, 0), o = !$34c890d2bba8533a$var$c(t) || t !== this._$AH && t !== $34c890d2bba8533a$export$9c068ae9cc5db4e8, o && (this._$AH = t);
        else {
            const e = t;
            let n, r;
            for(t = h[0], n = 0; n < h.length - 1; n++)r = $34c890d2bba8533a$var$S(this, e[s + n], i, n), r === $34c890d2bba8533a$export$9c068ae9cc5db4e8 && (r = this._$AH[n]), o ||= !$34c890d2bba8533a$var$c(r) || r !== this._$AH[n], r === $34c890d2bba8533a$export$45b790e32b2810ee ? t = $34c890d2bba8533a$export$45b790e32b2810ee : t !== $34c890d2bba8533a$export$45b790e32b2810ee && (t += (r ?? "") + h[n + 1]), this._$AH[n] = r;
        }
        o && !e && this.j(t);
    }
    j(t) {
        t === $34c890d2bba8533a$export$45b790e32b2810ee ? this.element.removeAttribute(this.name) : this.element.setAttribute(this.name, t ?? "");
    }
}
class $34c890d2bba8533a$var$H extends $34c890d2bba8533a$var$k {
    constructor(){
        super(...arguments), this.type = 3;
    }
    j(t) {
        this.element[this.name] = t === $34c890d2bba8533a$export$45b790e32b2810ee ? void 0 : t;
    }
}
class $34c890d2bba8533a$var$I extends $34c890d2bba8533a$var$k {
    constructor(){
        super(...arguments), this.type = 4;
    }
    j(t) {
        this.element.toggleAttribute(this.name, !!t && t !== $34c890d2bba8533a$export$45b790e32b2810ee);
    }
}
class $34c890d2bba8533a$var$L extends $34c890d2bba8533a$var$k {
    constructor(t, i, s, e, h){
        super(t, i, s, e, h), this.type = 5;
    }
    _$AI(t, i = this) {
        if ((t = $34c890d2bba8533a$var$S(this, t, i, 0) ?? $34c890d2bba8533a$export$45b790e32b2810ee) === $34c890d2bba8533a$export$9c068ae9cc5db4e8) return;
        const s = this._$AH, e = t === $34c890d2bba8533a$export$45b790e32b2810ee && s !== $34c890d2bba8533a$export$45b790e32b2810ee || t.capture !== s.capture || t.once !== s.once || t.passive !== s.passive, h = t !== $34c890d2bba8533a$export$45b790e32b2810ee && (s === $34c890d2bba8533a$export$45b790e32b2810ee || e);
        e && this.element.removeEventListener(this.name, this, s), h && this.element.addEventListener(this.name, this, t), this._$AH = t;
    }
    handleEvent(t) {
        "function" == typeof this._$AH ? this._$AH.call(this.options?.host ?? this.element, t) : this._$AH.handleEvent(t);
    }
}
class $34c890d2bba8533a$var$z {
    constructor(t, i, s){
        this.element = t, this.type = 6, this._$AN = void 0, this._$AM = i, this.options = s;
    }
    get _$AU() {
        return this._$AM._$AU;
    }
    _$AI(t) {
        $34c890d2bba8533a$var$S(this, t);
    }
}
const $34c890d2bba8533a$export$8613d1ca9052b22e = {
    M: $34c890d2bba8533a$var$e,
    P: $34c890d2bba8533a$var$h,
    A: $34c890d2bba8533a$var$o,
    C: 1,
    L: $34c890d2bba8533a$var$V,
    R: $34c890d2bba8533a$var$M,
    D: $34c890d2bba8533a$var$u,
    V: $34c890d2bba8533a$var$S,
    I: $34c890d2bba8533a$var$R,
    H: $34c890d2bba8533a$var$k,
    N: $34c890d2bba8533a$var$I,
    U: $34c890d2bba8533a$var$L,
    B: $34c890d2bba8533a$var$H,
    F: $34c890d2bba8533a$var$z
}, $34c890d2bba8533a$var$j = $34c890d2bba8533a$var$t.litHtmlPolyfillSupport;
$34c890d2bba8533a$var$j?.($34c890d2bba8533a$var$N, $34c890d2bba8533a$var$R), ($34c890d2bba8533a$var$t.litHtmlVersions ??= []).push("3.2.1");
const $34c890d2bba8533a$export$b3890eb0ae9dca99 = (t, i, s)=>{
    const e = s?.renderBefore ?? i;
    let h = e._$litPart$;
    if (void 0 === h) {
        const t = s?.renderBefore ?? null;
        e._$litPart$ = h = new $34c890d2bba8533a$var$R(i.insertBefore($34c890d2bba8533a$var$l(), t), t, void 0, s ?? {});
    }
    return h._$AI(t), h;
};


/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ class $d812c34aed91105d$export$3f2f9f5909897157 extends (0, $03b44d016d05e4a8$export$c7c07a37856565d) {
    constructor(){
        super(...arguments), this.renderOptions = {
            host: this
        }, this._$Do = void 0;
    }
    createRenderRoot() {
        const t = super.createRenderRoot();
        return this.renderOptions.renderBefore ??= t.firstChild, t;
    }
    update(t) {
        const s = this.render();
        this.hasUpdated || (this.renderOptions.isConnected = this.isConnected), super.update(t), this._$Do = (0, $34c890d2bba8533a$export$b3890eb0ae9dca99)(s, this.renderRoot, this.renderOptions);
    }
    connectedCallback() {
        super.connectedCallback(), this._$Do?.setConnected(!0);
    }
    disconnectedCallback() {
        super.disconnectedCallback(), this._$Do?.setConnected(!1);
    }
    render() {
        return 0, $34c890d2bba8533a$export$9c068ae9cc5db4e8;
    }
}
$d812c34aed91105d$export$3f2f9f5909897157._$litElement$ = !0, $d812c34aed91105d$export$3f2f9f5909897157["finalized"] = !0, globalThis.litElementHydrateSupport?.({
    LitElement: $d812c34aed91105d$export$3f2f9f5909897157
});
const $d812c34aed91105d$var$i = globalThis.litElementPolyfillSupport;
$d812c34aed91105d$var$i?.({
    LitElement: $d812c34aed91105d$export$3f2f9f5909897157
});
const $d812c34aed91105d$export$f5c524615a7708d6 = {
    _$AK: (t, e, s)=>{
        t._$AK(e, s);
    },
    _$AL: (t)=>t._$AL
};
(globalThis.litElementVersions ??= []).push("4.1.1");



/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ function* $2df088f3943a4311$export$871de8747c9eaa88(o, f) {
    if (void 0 !== o) {
        let i = 0;
        for (const t of o)yield f(t, i++);
    }
}


/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ const $36ba9077c37f6d69$export$7877a478dd30fd3d = (r, o, t)=>{
    for (const t of o)if (t[0] === r) return (0, t[1])();
    return t?.();
};


/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */ function $5114a2a7e9d58c35$export$a55877ca9db47377(n, r, t) {
    return n ? r(n) : t?.(n);
}





function $9a10e2e209e09f92$export$f47f8d932ddd1f76(superClass) {
    class Mixin_addEventHandlers_Class extends superClass {
        // noinspection JSUnusedGlobalSymbols
        updated(changedProperties) {
            super.updated?.(changedProperties);
            const definition = (0, $a6578a6f2ac293b9$export$6dac8c184f86ad18)(this);
            const events = definition.declaration.hooks?.events;
            if (!events) return;
            if (events instanceof Array) for (const customaryEvent of events){
                const selector = customaryEvent.selector;
                const type = customaryEvent.type;
                const listener = customaryEvent.listener;
                this.addEventHandler(selector, type, listener);
            }
            else for (const [selector, listener] of Object.entries(events)){
                const type = undefined;
                this.addEventHandler(selector, type, listener);
            }
        }
        addEventHandler(selector, type, listener) {
            if (!selector) {
                this.addCustomEventListener(this, type, listener);
                return;
            }
            const parent = this.shadowRoot ?? this;
            const elements = parent.querySelectorAll(selector);
            for (const element of elements)this.addCustomEventListener(element, type, listener);
        }
        addCustomEventListener(element, type, listener) {
            const listeners = element.__customary_listeners ??= [];
            if (listeners.includes(listener)) return;
            const tagName = element.tagName;
            element.addEventListener(type ?? $9a10e2e209e09f92$var$DEFAULT_EVENT_TYPES[tagName] ?? (()=>{
                throw new Error(`${this.tagName.toLowerCase()}: ${tagName} elements` + ' require you to provide an event type' + ' because Customary has not defined a default yet');
            })(), (event)=>listener(this, event));
            listeners.push(listener);
        }
    }
    return Mixin_addEventHandlers_Class;
}
const $9a10e2e209e09f92$var$DEFAULT_EVENT_TYPES = {
    'A': 'click',
    'BUTTON': 'click',
    'FORM': 'submit',
    'INPUT': 'input',
    'SELECT': 'input',
    'TABLE': 'click',
    'TEXTAREA': 'input'
};



function $d1f471c42208303b$export$3bf0fa7e728730a3(superClass) {
    class Mixin_adoptStyleSheet_Class extends superClass {
        // noinspection JSUnusedGlobalSymbols
        firstUpdated(changedProperties) {
            super.firstUpdated?.(changedProperties);
            const definition = (0, $a6578a6f2ac293b9$export$6dac8c184f86ad18)(this);
            const { cssStyleSheet: cssStyleSheet } = definition;
            if (!cssStyleSheet) return;
            const adopter = this.shadowRoot ?? document;
            adopter.adoptedStyleSheets.push(cssStyleSheet);
        }
    }
    return Mixin_adoptStyleSheet_Class;
}



function $2f505a9241dbdaaf$export$38b25fab905694b5(superClass) {
    class Mixin_attributeChangedCallback_Class extends superClass {
        // noinspection JSUnusedGlobalSymbols
        attributeChangedCallback(name, oldValue, newValue) {
            super.attributeChangedCallback(name, oldValue, newValue);
            const definition = (0, $a6578a6f2ac293b9$export$6dac8c184f86ad18)(this);
            definition.declaration.hooks?.dom?.attributeChangedCallback?.(this, name, oldValue, newValue);
        }
    }
    return Mixin_attributeChangedCallback_Class;
}



function $68c41a7f90dfd20d$export$d321c1d718f409fd(superClass) {
    class Mixin_connected_Class extends superClass {
        // noinspection JSUnusedGlobalSymbols
        connectedCallback() {
            super.connectedCallback?.();
            const definition = (0, $a6578a6f2ac293b9$export$6dac8c184f86ad18)(this);
            definition.declaration.hooks?.lifecycle?.connected?.(this);
        }
    }
    return Mixin_connected_Class;
}



function $fd54020cbaa519b8$export$2cfc5030c386ebbd(superClass) {
    class Mixin_disconnected_Class extends superClass {
        // noinspection JSUnusedGlobalSymbols
        disconnectedCallback() {
            super.disconnectedCallback?.();
            const definition = (0, $a6578a6f2ac293b9$export$6dac8c184f86ad18)(this);
            definition.declaration.hooks?.lifecycle?.disconnected?.(this);
        }
    }
    return Mixin_disconnected_Class;
}



function $d2c535d050b19a85$export$768be97ad3d2f262(superClass) {
    class Mixin_firstUpdated_Class extends superClass {
        // noinspection JSUnusedGlobalSymbols
        firstUpdated(changedProperties) {
            super.firstUpdated?.(changedProperties);
            const definition = (0, $a6578a6f2ac293b9$export$6dac8c184f86ad18)(this);
            const { lifecycle: lifecycle, changes: changes } = definition.declaration.hooks ?? {};
            lifecycle?.firstUpdated?.(this, changedProperties);
            if (changes instanceof Array) for (const change of changes){
                const { name: name, firstUpdated: firstUpdated } = change;
                if (firstUpdated && changedProperties.has(name)) firstUpdated(this, this[name], changedProperties.get(name));
            }
        }
    }
    return Mixin_firstUpdated_Class;
}




function $f3d00108616e5be0$export$b1f65ab33c708f24(superClass) {
    class Mixin_renderFromTemplate_Class extends superClass {
        // noinspection JSUnusedGlobalSymbols
        render() {
            const definition = (0, $a6578a6f2ac293b9$export$6dac8c184f86ad18)(this);
            const templateResult = $f3d00108616e5be0$var$render_lit_html_TemplateResult(this, definition.immutable_htmlString, this.state);
            this.reuse_immutable_TemplateStringsArray(templateResult);
            return templateResult;
        }
        reuse_immutable_TemplateStringsArray(templateResult) {
            const templateStringsArray = templateResult.strings;
            if (!this.immutable_templateStringsArray) {
                this.immutable_templateStringsArray = templateStringsArray;
                return;
            }
            for(let i = 0; i < templateStringsArray.length; i++){
                if (templateStringsArray[i] !== this.immutable_templateStringsArray[i]) throw new Error(`
Original html first registered only once from named template tag in page
(or first registered only once from external html file)
could not have possibly changed structure inbetween calls to render.... tampering??
(see https://github.com/lit/lit/pull/3987)
`);
            }
            templateResult.strings = this.immutable_templateStringsArray;
        }
        immutable_templateStringsArray;
    }
    return Mixin_renderFromTemplate_Class;
}
/**
 lit "html" is a tag function.
 at runtime, the tagged template comes from htmlString.
 only JS compilation can parse the tagged template into a proper function call,
 so we need JS compilation to happen at runtime.
 https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#tagged_templates
*/ function $f3d00108616e5be0$var$render_lit_html_TemplateResult(element, htmlString, state) {
    const thisArg = element;
    const fn = new Function('state', 'html', 'map', 'choose', 'when', '"use strict"; return html\`' + htmlString + '\`');
    return fn.call(thisArg, state, (0, $34c890d2bba8533a$export$c0bb0b647f701bb5), (0, $2df088f3943a4311$export$871de8747c9eaa88), (0, $36ba9077c37f6d69$export$7877a478dd30fd3d), (0, $5114a2a7e9d58c35$export$a55877ca9db47377));
}



function $adb7a522f246ac7a$export$2b1301cd2cb0c945(superClass) {
    class Mixin_slotChange_Class extends superClass {
        // noinspection JSUnusedGlobalSymbols
        firstUpdated(changedProperties) {
            super.firstUpdated(changedProperties);
            const element = this;
            const definition = (0, $a6578a6f2ac293b9$export$6dac8c184f86ad18)(element);
            const slotchange = definition.declaration.hooks?.slots?.slotchange;
            if (!slotchange) return;
            // on first render, execute once for the first time without an event
            slotchange(element);
            /*
					https://stackoverflow.com/questions/67332635/slots-does-not-work-on-a-html-web-component-without-shadow-dom
					*/ element.shadowRoot.addEventListener('slotchange', (event)=>slotchange(element, event));
        }
    }
    return Mixin_slotChange_Class;
}



function $e62fef1729ff12df$export$73d040748d682301(superClass) {
    class Mixin_state_Class extends superClass {
        constructor(...args){
            super(args);
            const definition = (0, $a6578a6f2ac293b9$export$6dac8c184f86ad18)(this);
            const { values: values } = definition.declaration;
            if (!values) return;
            Object.assign(this, values);
        }
        // noinspection JSUnusedGlobalSymbols
        setState(state_or_fn) {
            $e62fef1729ff12df$var$_setState(state_or_fn, ()=>this.state, (state)=>this.state = state);
        }
    }
    return Mixin_state_Class;
}
function $e62fef1729ff12df$var$_setState(state_or_fn, getStateFn, setStateFn) {
    if (state_or_fn === null || state_or_fn === undefined) return;
    const _state = getStateFn();
    const state = state_or_fn instanceof Function ? state_or_fn(_state) : state_or_fn;
    setStateFn(typeof _state === 'object' ? {
        ..._state,
        ...state
    } : state);
}



function $16ab248eb66956f2$export$2c20b62da00ad27c(superClass) {
    class Mixin_updated_Class extends superClass {
        // noinspection JSUnusedGlobalSymbols
        updated(changedProperties) {
            super.updated?.(changedProperties);
            const definition = (0, $a6578a6f2ac293b9$export$6dac8c184f86ad18)(this);
            const { lifecycle: lifecycle, changes: changes } = definition.declaration.hooks ?? {};
            lifecycle?.updated?.(this, changedProperties);
            if (changes instanceof Array) for (const change of changes){
                const { name: name, updated: updated } = change;
                if (updated && changedProperties.has(name)) updated(this, this[name], changedProperties.get(name));
            }
            else for(const name in changes){
                const updated = changes[name];
                if (changedProperties.has(name)) updated(this, this[name], changedProperties.get(name));
            }
        }
    }
    return Mixin_updated_Class;
}



function $a4f30597a6143fad$export$441bf0c9f46b950d(superClass) {
    class Mixin_willUpdate_Class extends superClass {
        // noinspection JSUnusedGlobalSymbols
        willUpdate(changedProperties) {
            super.willUpdate?.(changedProperties);
            const definition = (0, $a6578a6f2ac293b9$export$6dac8c184f86ad18)(this);
            const { lifecycle: lifecycle, changes: changes } = definition.declaration.hooks ?? {};
            lifecycle?.willUpdate?.(this, changedProperties);
            if (changes instanceof Array) for (const change of changes){
                const { name: name, willUpdate: willUpdate } = change;
                if (willUpdate && changedProperties.has(name)) willUpdate(this, this[name], changedProperties.get(name));
            }
        }
    }
    return Mixin_willUpdate_Class;
}


class $98d0f6a447871cb0$export$4a183080d2c522d7 extends (0, $9a10e2e209e09f92$export$f47f8d932ddd1f76)((0, $d1f471c42208303b$export$3bf0fa7e728730a3)((0, $2f505a9241dbdaaf$export$38b25fab905694b5)((0, $68c41a7f90dfd20d$export$d321c1d718f409fd)((0, $fd54020cbaa519b8$export$2cfc5030c386ebbd)((0, $d2c535d050b19a85$export$768be97ad3d2f262)((0, $f3d00108616e5be0$export$b1f65ab33c708f24)((0, $adb7a522f246ac7a$export$2b1301cd2cb0c945)((0, $e62fef1729ff12df$export$73d040748d682301)((0, $16ab248eb66956f2$export$2c20b62da00ad27c)((0, $a4f30597a6143fad$export$441bf0c9f46b950d)((0, $d812c34aed91105d$export$3f2f9f5909897157)))))))))))) {
    constructor(){
        try {
            super();
        } catch (error) {
            if (error instanceof TypeError) {
                if (error.message.startsWith("Illegal constructor")) throw new Error("Custom element must be fully defined before you can instantiate it. Try this:\n    await Customary.untilDefined(MyCustomElement);\n    const element = new MyCustomElement();", {
                    cause: error
                });
            }
            throw error;
        }
    }
}


class $dc3eede01c452bc5$export$7d556906c4a5f4a7 {
    // noinspection JSUnusedGlobalSymbols
    static async autodetect() {
        await this.detect();
        const customaryRegistry = (0, $d29bea016259bab1$export$d37a9068d840d1de).singleton();
        await customaryRegistry.settle();
    }
    // noinspection JSUnusedGlobalSymbols
    static declare(constructor) {
        const customaryRegistry = (0, $d29bea016259bab1$export$d37a9068d840d1de).singleton();
        customaryRegistry.declare(constructor, constructor?.customary);
    }
    // noinspection JSUnusedGlobalSymbols
    static async untilDefined(constructor) {
        const customaryRegistry = (0, $d29bea016259bab1$export$d37a9068d840d1de).singleton();
        return await customaryRegistry.untilDefined(constructor);
    }
    static async detect() {
        const customaryRegistry = (0, $d29bea016259bab1$export$d37a9068d840d1de).singleton();
        const detector = new (0, $16878b9af4c78a4c$export$2bcc17fb5433cbbf)(document, globalThis);
        const declarations = detector.detect();
        const promises = declarations.map((declaration)=>customaryRegistry.declare(class EphemeralCustomaryElement extends (0, $98d0f6a447871cb0$export$4a183080d2c522d7) {
            }, declaration));
        await Promise.all(promises);
    }
}




$parcel$exportWildcard($07201b47c5f8d57a$exports, $6b52b5e2005fdcd9$exports);


document.addEventListener("DOMContentLoaded", (event)=>{
    if (!globalThis[`customary-options:autodetect-dont`]) (0, $dc3eede01c452bc5$export$7d556906c4a5f4a7).autodetect();
});


export {$dc3eede01c452bc5$export$7d556906c4a5f4a7 as Customary, $98d0f6a447871cb0$export$4a183080d2c522d7 as CustomaryElement, $d812c34aed91105d$export$3f2f9f5909897157 as LitElement, $34c890d2bba8533a$export$c0bb0b647f701bb5 as html, $2df088f3943a4311$export$871de8747c9eaa88 as map, $36ba9077c37f6d69$export$7877a478dd30fd3d as choose, $5114a2a7e9d58c35$export$a55877ca9db47377 as when};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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c3JjL2luZGV4LnRzIiwic3JjL0N1c3RvbWFyeS50cyIsInNyYy9DdXN0b21hcnlEZXRlY3Rvci50cyIsInNyYy9yZWdpc3RyeS9DdXN0b21hcnlSZWdpc3RyeS50cyIsInNyYy9DdXN0b21hcnlEZWZpbml0aW9uLnRzIiwic3JjL0N1c3RvbWFyeURlZmluZS50cyIsInNyYy9jc3NzdHlsZXNoZWV0L0NTU1N0eWxlU2hlZXRBZG9wdGVyLnRzIiwic3JjL2Nzc3N0eWxlc2hlZXQvQ1NTU3R5bGVTaGVldEltcG9ydGVyLnRzIiwic3JjL2ZldGNoL0ZldGNoVGV4dC50cyIsInNyYy9leHRlcm5hbC9FeHRlcm5hbExvYWRlci50cyIsInNyYy9kaXJlY3RpdmVzL0RpcmVjdGl2ZV9mb3IudHMiLCJzcmMvZGlyZWN0aXZlcy9zZXRfb3V0ZXJIVE1MLmpzIiwic3JjL2RpcmVjdGl2ZXMvc2V0X291dGVySFRNTC50cyIsInNyYy9kaXJlY3RpdmVzL0RpcmVjdGl2ZV9pZi50cyIsInNyYy9kaXJlY3RpdmVzL0RpcmVjdGl2ZV9pbnNpZGUudHMiLCJzcmMvZGlyZWN0aXZlcy9EaXJlY3RpdmVfc3dpdGNoLnRzIiwic3JjL2F0dHJpYnV0ZXMvQXR0cmlidXRlUHJvcGVydGllcy50cyIsInNyYy9wcm9wZXJ0aWVzL1Byb3BlcnRpZXNJbmplY3Rvci50cyIsInNyYy9zdGF0ZS9TdGF0ZVByb3BlcnRpZXMudHMiLCJzcmMvcHJvcGVydGllcy9Qcm9wZXJ0aWVzUHJvcGVydGllcy50cyIsInNyYy9DdXN0b21hcnlFbGVtZW50LnRzIiwic3JjL2xpdC9pbmRleC50cyIsIm5vZGVfbW9kdWxlcy9saXQtZWxlbWVudC9saXQtZWxlbWVudC5qcyIsIm5vZGVfbW9kdWxlcy9saXQtZWxlbWVudC9zcmMvbGl0LWVsZW1lbnQudHMiLCJub2RlX21vZHVsZXMvQGxpdC9yZWFjdGl2ZS1lbGVtZW50L3JlYWN0aXZlLWVsZW1lbnQuanMiLCJub2RlX21vZHVsZXMvQGxpdC9yZWFjdGl2ZS1lbGVtZW50L3NyYy9yZWFjdGl2ZS1lbGVtZW50LnRzIiwibm9kZV9tb2R1bGVzL0BsaXQvcmVhY3RpdmUtZWxlbWVudC9jc3MtdGFnLmpzIiwibm9kZV9tb2R1bGVzL0BsaXQvcmVhY3RpdmUtZWxlbWVudC9zcmMvY3NzLXRhZy50cyIsIm5vZGVfbW9kdWxlcy9saXQtaHRtbC9saXQtaHRtbC5qcyIsIm5vZGVfbW9kdWxlcy9saXQtaHRtbC9zcmMvbGl0LWh0bWwudHMiLCJub2RlX21vZHVsZXMvbGl0LWh0bWwvZGlyZWN0aXZlcy9tYXAuanMiLCJub2RlX21vZHVsZXMvbGl0LWh0bWwvc3JjL2RpcmVjdGl2ZXMvbWFwLnRzIiwibm9kZV9tb2R1bGVzL2xpdC1odG1sL2RpcmVjdGl2ZXMvY2hvb3NlLmpzIiwibm9kZV9tb2R1bGVzL2xpdC1odG1sL3NyYy9kaXJlY3RpdmVzL2Nob29zZS50cyIsIm5vZGVfbW9kdWxlcy9saXQtaHRtbC9kaXJlY3RpdmVzL3doZW4uanMiLCJub2RlX21vZHVsZXMvbGl0LWh0bWwvc3JjL2RpcmVjdGl2ZXMvd2hlbi50cyIsInNyYy9ldmVudHMvTWl4aW5fYWRkRXZlbnRIYW5kbGVycy50cyIsInNyYy9zdHlsZS9NaXhpbl9hZG9wdFN0eWxlU2hlZXQudHMiLCJzcmMvYXR0cmlidXRlcy9NaXhpbl9hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sudHMiLCJzcmMvbGlmZWN5Y2xlL2Nvbm5lY3RlZC9NaXhpbl9jb25uZWN0ZWQudHMiLCJzcmMvbGlmZWN5Y2xlL2Rpc2Nvbm5lY3RlZC9NaXhpbl9kaXNjb25uZWN0ZWQudHMiLCJzcmMvbGlmZWN5Y2xlL2ZpcnN0VXBkYXRlZC9NaXhpbl9maXJzdFVwZGF0ZWQudHMiLCJzcmMvcmVuZGVyL01peGluX3JlbmRlckZyb21UZW1wbGF0ZS50cyIsInNyYy9zbG90cy9NaXhpbl9zbG90Q2hhbmdlLnRzIiwic3JjL3N0YXRlL01peGluX3N0YXRlLnRzIiwic3JjL2xpZmVjeWNsZS91cGRhdGVkL01peGluX3VwZGF0ZWQudHMiLCJzcmMvbGlmZWN5Y2xlL3dpbGxVcGRhdGUvTWl4aW5fd2lsbFVwZGF0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0N1c3RvbWFyeX0gZnJvbSBcIiNjdXN0b21hcnkvaW5kZXguanNcIjtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKGV2ZW50KSA9PiB7XG5cdGlmICghKGdsb2JhbFRoaXMgYXMgYW55KVtgY3VzdG9tYXJ5LW9wdGlvbnM6YXV0b2RldGVjdC1kb250YF0pIHtcblx0XHR2b2lkIEN1c3RvbWFyeS5hdXRvZGV0ZWN0KCk7XG5cdH1cbn0pO1xuXG5leHBvcnQgKiBmcm9tICcjY3VzdG9tYXJ5L2luZGV4LmpzJztcbiIsImltcG9ydCB7Q3VzdG9tYXJ5fSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnkuanNcIjtcbmltcG9ydCB0eXBlIHtDdXN0b21hcnlEZWNsYXJhdGlvbiBhcyBDfSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlEZWNsYXJhdGlvblwiO1xuaW1wb3J0IHtDdXN0b21hcnlFbGVtZW50fSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlFbGVtZW50LmpzXCI7XG5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wYXJjZWwtYnVuZGxlci9wYXJjZWwvaXNzdWVzLzQ3OTYjaXNzdWVjb21tZW50LTY2MDM1NjA2MlxuLy8gbm9pbnNwZWN0aW9uIEpTVW51c2VkR2xvYmFsU3ltYm9sc1xuZXhwb3J0IHR5cGUgQ3VzdG9tYXJ5RGVjbGFyYXRpb248VCBleHRlbmRzIEhUTUxFbGVtZW50PiA9IEM8VD47XG5cbmV4cG9ydCAqIGZyb20gXCIjY3VzdG9tYXJ5L2xpdFwiO1xuZXhwb3J0IHtDdXN0b21hcnksIEN1c3RvbWFyeUVsZW1lbnR9O1xuIiwiaW1wb3J0IHtDdXN0b21hcnlEZXRlY3Rvcn0gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5RGV0ZWN0b3IuanNcIjtcbmltcG9ydCB7Q3VzdG9tYXJ5RGVjbGFyYXRpb259IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeURlY2xhcmF0aW9uLmpzXCI7XG5pbXBvcnQge0N1c3RvbWFyeVJlZ2lzdHJ5fSBmcm9tIFwiI2N1c3RvbWFyeS9yZWdpc3RyeS9DdXN0b21hcnlSZWdpc3RyeS5qc1wiO1xuaW1wb3J0IHtDdXN0b21hcnlFbGVtZW50fSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlFbGVtZW50LmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBDdXN0b21hcnlcbntcblx0Ly8gbm9pbnNwZWN0aW9uIEpTVW51c2VkR2xvYmFsU3ltYm9sc1xuXHRzdGF0aWMgYXN5bmMgYXV0b2RldGVjdCgpIHtcblx0XHRhd2FpdCB0aGlzLmRldGVjdCgpO1xuXG5cdFx0Y29uc3QgY3VzdG9tYXJ5UmVnaXN0cnkgPSBDdXN0b21hcnlSZWdpc3RyeS5zaW5nbGV0b24oKTtcblx0XHRhd2FpdCBjdXN0b21hcnlSZWdpc3RyeS5zZXR0bGUoKTtcblx0fVxuXG5cdC8vIG5vaW5zcGVjdGlvbiBKU1VudXNlZEdsb2JhbFN5bWJvbHNcblx0c3RhdGljIGRlY2xhcmU8VCBleHRlbmRzIEhUTUxFbGVtZW50Pihjb25zdHJ1Y3RvcjogQ3VzdG9tRWxlbWVudENvbnN0cnVjdG9yKVxuXHR7XG5cdFx0Y29uc3QgY3VzdG9tYXJ5UmVnaXN0cnkgPSBDdXN0b21hcnlSZWdpc3RyeS5zaW5nbGV0b24oKTtcblx0XHR2b2lkIGN1c3RvbWFyeVJlZ2lzdHJ5LmRlY2xhcmUoXG5cdFx0XHRcdGNvbnN0cnVjdG9yLFxuXHRcdFx0XHQoY29uc3RydWN0b3IgYXMgYW55KT8uY3VzdG9tYXJ5IGFzIEN1c3RvbWFyeURlY2xhcmF0aW9uPFQ+XG5cdFx0KTtcblx0fVxuXG5cdC8vIG5vaW5zcGVjdGlvbiBKU1VudXNlZEdsb2JhbFN5bWJvbHNcblx0c3RhdGljIGFzeW5jIHVudGlsRGVmaW5lZChjb25zdHJ1Y3RvcjogQ3VzdG9tRWxlbWVudENvbnN0cnVjdG9yKTogUHJvbWlzZTxDdXN0b21FbGVtZW50Q29uc3RydWN0b3I+IHtcblx0XHRjb25zdCBjdXN0b21hcnlSZWdpc3RyeSA9IEN1c3RvbWFyeVJlZ2lzdHJ5LnNpbmdsZXRvbigpO1xuXHRcdHJldHVybiBhd2FpdCBjdXN0b21hcnlSZWdpc3RyeS51bnRpbERlZmluZWQoY29uc3RydWN0b3IpO1xuXHR9XG5cblx0cHJpdmF0ZSBzdGF0aWMgYXN5bmMgZGV0ZWN0KCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGNvbnN0IGN1c3RvbWFyeVJlZ2lzdHJ5ID0gQ3VzdG9tYXJ5UmVnaXN0cnkuc2luZ2xldG9uKCk7XG5cdFx0Y29uc3QgZGV0ZWN0b3IgPSBuZXcgQ3VzdG9tYXJ5RGV0ZWN0b3IoZG9jdW1lbnQsIGdsb2JhbFRoaXMpO1xuXHRcdGNvbnN0IGRlY2xhcmF0aW9uczogQ3VzdG9tYXJ5RGVjbGFyYXRpb248YW55PltdID0gZGV0ZWN0b3IuZGV0ZWN0KCk7XG5cdFx0Y29uc3QgcHJvbWlzZXMgPSBkZWNsYXJhdGlvbnMubWFwKGRlY2xhcmF0aW9uID0+XG5cdFx0XHRcdGN1c3RvbWFyeVJlZ2lzdHJ5LmRlY2xhcmUoXG5cdFx0XHRcdFx0XHRjbGFzcyBFcGhlbWVyYWxDdXN0b21hcnlFbGVtZW50IGV4dGVuZHMgQ3VzdG9tYXJ5RWxlbWVudCB7fSxcblx0XHRcdFx0XHRcdGRlY2xhcmF0aW9uXG5cdFx0XHRcdClcblx0XHQpO1xuXHRcdGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcblx0fVxufVxuIiwiaW1wb3J0IHtDdXN0b21hcnlEZWNsYXJhdGlvbn0gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5RGVjbGFyYXRpb25cIjtcblxuZXhwb3J0IGNsYXNzIEN1c3RvbWFyeURldGVjdG9yIHtcblx0Y29uc3RydWN0b3IoXG5cdFx0XHRwcml2YXRlIHJlYWRvbmx5IGRvY3VtZW50OiBEb2N1bWVudCxcblx0XHRcdHByaXZhdGUgcmVhZG9ubHkgZ2xvYmFsVGhpczogYW55XG5cdCkge31cblxuXHRkZXRlY3QoKTogQ3VzdG9tYXJ5RGVjbGFyYXRpb248YW55PltdIHtcblx0XHRyZXR1cm4gdGhpcy5kZXRlY3RFbGVtZW50TmFtZXMoKS5tYXAobmFtZSA9PiB0aGlzLmRldGVjdERlY2xhcmF0aW9uKG5hbWUpKTtcblx0fVxuXG5cdHByaXZhdGUgZGV0ZWN0RWxlbWVudE5hbWVzKCk6IHN0cmluZ1tdIHtcblx0XHRjb25zdCBhdHRyaWJ1dGUgPSAnZGF0YS1jdXN0b21hcnktbmFtZSc7XG5cdFx0Y29uc3QgZnJvbURvY3VtZW50ID0gWy4uLnRoaXMuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgdGVtcGxhdGVbJHthdHRyaWJ1dGV9XWApXVxuXHRcdFx0XHQubWFwKHRlbXBsYXRlID0+IHRlbXBsYXRlLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGUpISk7XG5cblx0XHRjb25zdCBwcmVmaXggPSAnY3VzdG9tYXJ5Oic7XG5cdFx0Y29uc3QgZnJvbUdsb2JhbFNjb3BlID0gT2JqZWN0LmtleXModGhpcy5nbG9iYWxUaGlzKVxuXHRcdFx0XHQuZmlsdGVyKG5hbWUgPT4gbmFtZS5zdGFydHNXaXRoKHByZWZpeCkpXG5cdFx0XHRcdC5tYXAobmFtZSA9PiBuYW1lLnN1YnN0cmluZyhwcmVmaXgubGVuZ3RoKSk7XG5cblx0XHRyZXR1cm4gWy4uLm5ldyBTZXQoWy4uLmZyb21Eb2N1bWVudCwgLi4uZnJvbUdsb2JhbFNjb3BlXSldO1xuXHR9XG5cblx0cHJpdmF0ZSBkZXRlY3REZWNsYXJhdGlvbihuYW1lOiBzdHJpbmcpOiBDdXN0b21hcnlEZWNsYXJhdGlvbjxhbnk+IHtcblx0XHRjb25zdCBmcm9tR2xvYmFsU2NvcGU6IFBhcnRpYWw8Q3VzdG9tYXJ5RGVjbGFyYXRpb248YW55Pj4gPSB0aGlzLmdsb2JhbFRoaXNbYGN1c3RvbWFyeToke25hbWV9YF07XG5cblx0XHRjb25zdCBjb25maWcgPSBmcm9tR2xvYmFsU2NvcGU/LmNvbmZpZztcblx0XHRjb25zdCBob29rcyA9IGZyb21HbG9iYWxTY29wZT8uaG9va3M7XG5cdFx0Y29uc3QgdmFsdWVzID0gZnJvbUdsb2JhbFNjb3BlPy52YWx1ZXMgPz8gdGhpcy5kZXRlY3RWYWx1ZXMobmFtZSk7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0bmFtZSxcblx0XHRcdC4uLihjb25maWcgPyB7Y29uZmlnfSA6IHt9KSxcblx0XHRcdC4uLihob29rcyA/IHtob29rc30gOiB7fSksXG5cdFx0XHQuLi4odmFsdWVzID8ge3ZhbHVlc30gOiB7fSksXG5cdFx0fTtcblx0fVxuXG5cdHByaXZhdGUgZGV0ZWN0VmFsdWVzKG5hbWU6IHN0cmluZyk6IFJlY29yZDxzdHJpbmcsIG9iamVjdCB8IG9iamVjdFtdPiB8IHVuZGVmaW5lZCB7XG5cdFx0Y29uc3QgZWxlbWVudHMgPSB0aGlzLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXG5cdFx0XHRcdGBzY3JpcHRbdHlwZT1cImFwcGxpY2F0aW9uL2pzb25cIl1bZGF0YS1jdXN0b21hcnktbmFtZT0nJHtuYW1lfSddYFxuXHRcdCk7XG5cdFx0aWYgKGVsZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0Y29uc3QgcmVzdWx0OiBSZWNvcmQ8c3RyaW5nLCBvYmplY3QgfCBvYmplY3RbXT4gPSB7fTtcblx0XHRmb3IgKGNvbnN0IGVsZW1lbnQgb2YgZWxlbWVudHMpIHtcblx0XHRcdGlmIChlbGVtZW50LnRleHRDb250ZW50KSB7XG5cdFx0XHRcdC8vIFRPRE8gUmVxdWlyZSBhIGtleSBhbmQgcmV0aXJlIGRlZmF1bHQgJ3N0YXRlJ1xuXHRcdFx0XHRjb25zdCBrZXkgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1jdXN0b21hcnktdmFsdWUnKSA/PyAnc3RhdGUnO1xuXHRcdFx0XHRyZXN1bHRba2V5XSA9IEpTT04ucGFyc2UoZWxlbWVudC50ZXh0Q29udGVudCk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH1cbn1cbiIsImltcG9ydCB7Q3VzdG9tYXJ5RGVmaW5pdGlvbiwgaGFzRGVmaW5pdGlvbiwgc2V0RGVmaW5pdGlvbn0gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5RGVmaW5pdGlvbi5qc1wiO1xuaW1wb3J0IHtDdXN0b21hcnlEZWNsYXJhdGlvbn0gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5RGVjbGFyYXRpb24uanNcIjtcbmltcG9ydCB7Q3VzdG9tYXJ5RGVmaW5lfSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlEZWZpbmUuanNcIjtcblxuY29uc3QgV0FJVF9UT19ERUZJTkVfRVZFUllUSElOR19JTl9USEVfRU5EID0gZmFsc2U7XG5cbmV4cG9ydCBjbGFzcyBDdXN0b21hcnlSZWdpc3RyeVxue1xuICAgIHN0YXRpYyBzaW5nbGV0b24oKTogQ3VzdG9tYXJ5UmVnaXN0cnkge1xuICAgICAgICByZXR1cm4gQ3VzdG9tYXJ5UmVnaXN0cnkuQ3VzdG9tYXJ5UmVnaXN0cnlfc2luZ2xldG9uXG4gICAgfVxuXG4gICAgYXN5bmMgZGVjbGFyZShcbiAgICAgICAgY29uc3RydWN0b3I6IEN1c3RvbUVsZW1lbnRDb25zdHJ1Y3RvcixcbiAgICAgICAgZGVjbGFyYXRpb246IEN1c3RvbWFyeURlY2xhcmF0aW9uPGFueT5cbiAgICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgaWYgKCFkZWNsYXJhdGlvbi5uYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgbmFtZSBtdXN0IGJlIHByb3ZpZGVkIHRvIGRlZmluZSBhIGN1c3RvbSBlbGVtZW50LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFXQUlUX1RPX0RFRklORV9FVkVSWVRISU5HX0lOX1RIRV9FTkQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGVmaW5lKGNvbnN0cnVjdG9yLCBkZWNsYXJhdGlvbik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRlY2xhcmF0aW9ucy5zZXQoY29uc3RydWN0b3IsIGRlY2xhcmF0aW9uKTtcbiAgICB9XG5cbiAgICBhc3luYyBzZXR0bGUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICghV0FJVF9UT19ERUZJTkVfRVZFUllUSElOR19JTl9USEVfRU5EKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbnRyaWVzID0gWy4uLnRoaXMuZGVjbGFyYXRpb25zLmVudHJpZXMoKV07XG5cbiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBlbnRyaWVzLm1hcChcbiAgICAgICAgICAgIGVudHJ5ID0+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3RcbiAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yLCBkZWNsYXJhdGlvblxuICAgICAgICAgICAgICAgIF06IFtcbiAgICAgICAgICAgICAgICBDdXN0b21FbGVtZW50Q29uc3RydWN0b3IsIEN1c3RvbWFyeURlY2xhcmF0aW9uPGFueT5cbiAgICAgICAgICAgIF0gPSBlbnRyeTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZpbmUoY29uc3RydWN0b3IsIGRlY2xhcmF0aW9uKVxuICAgICAgICAgICAgfVxuICAgICAgICApO1xuXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICB9XG5cbiAgICBhc3luYyB1bnRpbERlZmluZWQoY29uc3RydWN0b3I6IEN1c3RvbUVsZW1lbnRDb25zdHJ1Y3Rvcik6IFByb21pc2U8Q3VzdG9tRWxlbWVudENvbnN0cnVjdG9yPiB7XG4gICAgICAgIGNvbnN0IG5hbWU6IHN0cmluZyB8IHVuZGVmaW5lZCA9IChjb25zdHJ1Y3RvciBhcyBhbnkpLmN1c3RvbWFyeT8ubmFtZTtcblxuICAgICAgICBpZiAobmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NsYXNzIG11c3QgaGF2ZSB0aGUgXCJjdXN0b21hcnlcIiBkZWNsYXJhdGlvbiB3aXRoIGEgXCJuYW1lXCIgcHJvcGVydHkuJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5kb21fY3VzdG9tRWxlbWVudFJlZ2lzdHJ5LndoZW5EZWZpbmVkKG5hbWUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZGVmaW5lPFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4oXG4gICAgICAgIGNvbnN0cnVjdG9yOiBDdXN0b21FbGVtZW50Q29uc3RydWN0b3IsXG4gICAgICAgIGRlY2xhcmF0aW9uOiBDdXN0b21hcnlEZWNsYXJhdGlvbjxhbnk+XG4gICAgKTogUHJvbWlzZTx2b2lkPlxuICAgIHtcbiAgICAgICAgaWYgKGhhc0RlZmluaXRpb24oY29uc3RydWN0b3IpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKGAke2NvbnN0cnVjdG9yLm5hbWV9OiBlbGVtZW50IGFscmVhZHkgZGVmaW5lZCwgc2tpcHBpbmcuLi5gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRlZmluaXRpb246IEN1c3RvbWFyeURlZmluaXRpb248VD4gPVxuICAgICAgICAgICAgYXdhaXQgbmV3IEN1c3RvbWFyeURlZmluZShkZWNsYXJhdGlvbikuZGVmaW5lKGNvbnN0cnVjdG9yKTtcblxuICAgICAgICBzZXREZWZpbml0aW9uKGNvbnN0cnVjdG9yLCBkZWZpbml0aW9uKTtcblxuICAgICAgICB0aGlzLmRvbV9jdXN0b21FbGVtZW50UmVnaXN0cnkuZGVmaW5lKFxuICAgICAgICAgICAgZGVjbGFyYXRpb24ubmFtZSEsIGNvbnN0cnVjdG9yLFxuICAgICAgICAgICAgZGVjbGFyYXRpb24uaG9va3M/LmRvbT8uZGVmaW5lPy5vcHRpb25zXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBkb21fY3VzdG9tRWxlbWVudFJlZ2lzdHJ5OiBDdXN0b21FbGVtZW50UmVnaXN0cnkpIHt9XG5cbiAgICBwcml2YXRlIHJlYWRvbmx5IGRlY2xhcmF0aW9uczogTWFwPEN1c3RvbUVsZW1lbnRDb25zdHJ1Y3RvciwgQ3VzdG9tYXJ5RGVjbGFyYXRpb248YW55Pj4gPSBuZXcgTWFwKCk7XG5cbiAgICBwcml2YXRlIHN0YXRpYyByZWFkb25seSBDdXN0b21hcnlSZWdpc3RyeV9zaW5nbGV0b246IEN1c3RvbWFyeVJlZ2lzdHJ5ID0gbmV3IEN1c3RvbWFyeVJlZ2lzdHJ5KGN1c3RvbUVsZW1lbnRzKTtcbn1cbiIsImltcG9ydCB7Q3VzdG9tYXJ5RGVjbGFyYXRpb259IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeURlY2xhcmF0aW9uXCI7XG5cbmV4cG9ydCB0eXBlIEN1c3RvbWFyeURlZmluaXRpb248VCBleHRlbmRzIEhUTUxFbGVtZW50PiA9XG57XG4gICAgcmVhZG9ubHkgZGVjbGFyYXRpb246IEN1c3RvbWFyeURlY2xhcmF0aW9uPFQ+O1xuICAgIHJlYWRvbmx5IGNzc1N0eWxlU2hlZXQ/OiBDU1NTdHlsZVNoZWV0O1xuICAgIHJlYWRvbmx5IGltbXV0YWJsZV9odG1sU3RyaW5nOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNEZWZpbml0aW9uKFxuICAgIGNvbnN0cnVjdG9yOiBDdXN0b21FbGVtZW50Q29uc3RydWN0b3JcbilcbntcbiAgICByZXR1cm4gZGVmaW5pdGlvbl9wcm9wZXJ0eSBpbiBjb25zdHJ1Y3Rvcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldERlZmluaXRpb248VCBleHRlbmRzIEhUTUxFbGVtZW50PihcbiAgICBjb25zdHJ1Y3RvcjogQ3VzdG9tRWxlbWVudENvbnN0cnVjdG9yLCBkZWZpbml0aW9uOiBDdXN0b21hcnlEZWZpbml0aW9uPFQ+XG4pXG57XG4gICAgKGNvbnN0cnVjdG9yIGFzIGFueSlbZGVmaW5pdGlvbl9wcm9wZXJ0eV0gPSBkZWZpbml0aW9uO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmaW5pdGlvbjxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KGVsZW1lbnQ6IFQpOiBDdXN0b21hcnlEZWZpbml0aW9uPFQ+XG57XG4gICAgY29uc3QgY29uc3RydWN0b3IgPSBlbGVtZW50LmNvbnN0cnVjdG9yO1xuICAgIHJldHVybiAoY29uc3RydWN0b3IgYXMgYW55KVtkZWZpbml0aW9uX3Byb3BlcnR5XSA/PyAoKCkgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Y29uc3RydWN0b3IubmFtZX06IGVsZW1lbnQgbmV2ZXIgZGVmaW5lZGApXG4gICAgfSkoKTtcbn1cblxuY29uc3QgZGVmaW5pdGlvbl9wcm9wZXJ0eSA9ICdjdXN0b21hcnlfZGVmaW5pdGlvbic7XG4iLCJpbXBvcnQge0NTU1N0eWxlU2hlZXRBZG9wdGVyfSBmcm9tIFwiI2N1c3RvbWFyeS9jc3NzdHlsZXNoZWV0L0NTU1N0eWxlU2hlZXRBZG9wdGVyLmpzXCI7XG5pbXBvcnQge0N1c3RvbWFyeURlZmluaXRpb259IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeURlZmluaXRpb24uanNcIjtcbmltcG9ydCB7Q3VzdG9tYXJ5RGVjbGFyYXRpb259IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeURlY2xhcmF0aW9uLmpzXCI7XG5pbXBvcnQge0V4dGVybmFsTG9hZGVyfSBmcm9tIFwiI2N1c3RvbWFyeS9leHRlcm5hbC9FeHRlcm5hbExvYWRlci5qc1wiO1xuaW1wb3J0IHtGZXRjaFRleHQsIEZldGNoVGV4dF9ET01fc2luZ2xldG9ufSBmcm9tIFwiI2N1c3RvbWFyeS9mZXRjaC9GZXRjaFRleHQuanNcIjtcbmltcG9ydCB7Q1NTU3R5bGVTaGVldEltcG9ydGVyfSBmcm9tIFwiI2N1c3RvbWFyeS9jc3NzdHlsZXNoZWV0L0NTU1N0eWxlU2hlZXRJbXBvcnRlci5qc1wiO1xuaW1wb3J0IHtEaXJlY3RpdmVfZm9yfSBmcm9tIFwiI2N1c3RvbWFyeS9kaXJlY3RpdmVzL0RpcmVjdGl2ZV9mb3IuanNcIjtcbmltcG9ydCB7RGlyZWN0aXZlX2lmfSBmcm9tIFwiI2N1c3RvbWFyeS9kaXJlY3RpdmVzL0RpcmVjdGl2ZV9pZi5qc1wiO1xuaW1wb3J0IHtEaXJlY3RpdmVfaW5zaWRlfSBmcm9tIFwiI2N1c3RvbWFyeS9kaXJlY3RpdmVzL0RpcmVjdGl2ZV9pbnNpZGUuanNcIjtcbmltcG9ydCB7RGlyZWN0aXZlX3N3aXRjaH0gZnJvbSBcIiNjdXN0b21hcnkvZGlyZWN0aXZlcy9EaXJlY3RpdmVfc3dpdGNoLmpzXCI7XG5pbXBvcnQge0F0dHJpYnV0ZVByb3BlcnRpZXN9IGZyb20gXCIjY3VzdG9tYXJ5L2F0dHJpYnV0ZXMvQXR0cmlidXRlUHJvcGVydGllcy5qc1wiO1xuaW1wb3J0IHtTdGF0ZVByb3BlcnRpZXN9IGZyb20gXCIjY3VzdG9tYXJ5L3N0YXRlL1N0YXRlUHJvcGVydGllcy5qc1wiO1xuaW1wb3J0IHtQcm9wZXJ0aWVzUHJvcGVydGllc30gZnJvbSBcIiNjdXN0b21hcnkvcHJvcGVydGllcy9Qcm9wZXJ0aWVzUHJvcGVydGllcy5qc1wiO1xuaW1wb3J0IHtMaXRFbGVtZW50fSBmcm9tIFwiI2N1c3RvbWFyeS9saXRcIjtcblxuZXhwb3J0IGNsYXNzIEN1c3RvbWFyeURlZmluZTxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+IHtcblxuXHRhc3luYyBkZWZpbmUoY29uc3RydWN0b3I6IEN1c3RvbUVsZW1lbnRDb25zdHJ1Y3Rvcik6IFByb21pc2U8Q3VzdG9tYXJ5RGVmaW5pdGlvbjxUPj4ge1xuXHRcdGNvbnN0IFtkZWZpbml0aW9uLCBdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuXHRcdFx0dGhpcy5idWlsZERlZmluaXRpb24oY29uc3RydWN0b3IpLFxuXHRcdFx0dGhpcy5hZG9wdF9mb250X2Nzc1N0eWxlU2hlZXRzKCksXG5cdFx0XSlcblx0XHRyZXR1cm4gZGVmaW5pdGlvbjtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgYnVpbGREZWZpbml0aW9uKFxuXHRcdFx0Y29uc3RydWN0b3I6IEN1c3RvbUVsZW1lbnRDb25zdHJ1Y3RvclxuXHQpOiBQcm9taXNlPEN1c3RvbWFyeURlZmluaXRpb248VD4+XG5cdHtcblx0XHRjb25zdCB7dGVtcGxhdGUsIHRlbXBsYXRlSW5Eb2N1bWVudH0gPVxuXHRcdFx0XHRhd2FpdCB0aGlzLnJlc29sdmVIVE1MVGVtcGxhdGVFbGVtZW50KHRoaXMubmFtZSk7XG5cblx0XHR0aGlzLmFkZFByb3BlcnRpZXMoY29uc3RydWN0b3IgYXMgdHlwZW9mIExpdEVsZW1lbnQsIHRlbXBsYXRlKTtcblxuXHRcdGNvbnN0IGNzc1N0eWxlU2hlZXQ6IENTU1N0eWxlU2hlZXQgfCB1bmRlZmluZWQgPSB0ZW1wbGF0ZUluRG9jdW1lbnRcblx0XHRcdFx0PyB1bmRlZmluZWQgOiBhd2FpdCB0aGlzLmxvYWRFeHRlcm5hbENTU1N0eWxlU2hlZXQoKTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRpbW11dGFibGVfaHRtbFN0cmluZzogdGhpcy5nZXRIdG1sU3RyaW5nKHRlbXBsYXRlKSxcblx0XHRcdC4uLihjc3NTdHlsZVNoZWV0ID8ge2Nzc1N0eWxlU2hlZXR9IDoge30pLFxuXHRcdFx0ZGVjbGFyYXRpb246IHRoaXMuZGVjbGFyYXRpb24sXG5cdFx0fTtcblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgcmVzb2x2ZUhUTUxUZW1wbGF0ZUVsZW1lbnQoXG5cdFx0XHRuYW1lOiBzdHJpbmdcblx0KTogUHJvbWlzZTx7XG5cdFx0dGVtcGxhdGVJbkRvY3VtZW50OiBIVE1MVGVtcGxhdGVFbGVtZW50IHwgdW5kZWZpbmVkO1xuXHRcdHRlbXBsYXRlOiBIVE1MVGVtcGxhdGVFbGVtZW50O1xuXHR9PiB7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IHRlbXBsYXRlSW5Eb2N1bWVudDogSFRNTFRlbXBsYXRlRWxlbWVudCB8IHVuZGVmaW5lZCA9XG5cdFx0XHRcdFx0ZmluZEhUTUxUZW1wbGF0ZUVsZW1lbnQobmFtZSwgZG9jdW1lbnQpO1xuXG5cdFx0XHRpZiAodGVtcGxhdGVJbkRvY3VtZW50KSByZXR1cm4ge1xuXHRcdFx0XHR0ZW1wbGF0ZTogdGVtcGxhdGVJbkRvY3VtZW50LFxuXHRcdFx0XHR0ZW1wbGF0ZUluRG9jdW1lbnQsXG5cdFx0XHR9O1xuXG5cdFx0XHRjb25zdCB0ZW1wbGF0ZUluRXh0ZXJuYWxGaWxlOiBIVE1MVGVtcGxhdGVFbGVtZW50ID1cblx0XHRcdFx0XHRhd2FpdCB0aGlzLmZpbmRIVE1MVGVtcGxhdGVFbGVtZW50SW5FeHRlcm5hbEZpbGUobmFtZSk7XG5cblx0XHRcdHJldHVybiB7XG5cdFx0XHRcdHRlbXBsYXRlOiB0ZW1wbGF0ZUluRXh0ZXJuYWxGaWxlLFxuXHRcdFx0XHR0ZW1wbGF0ZUluRG9jdW1lbnQ6IHVuZGVmaW5lZCxcblx0XHRcdH1cblx0XHR9XG5cdFx0Y2F0Y2ggKGVycm9yKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXG5cdFx0XHRcdFx0J3RlbXBsYXRlIHVucmVzb2x2YWJsZSBmcm9tIGN1cnJlbnQgcGFnZSBvciBleHRlcm5hbCBodG1sJyxcblx0XHRcdFx0XHR7Y2F1c2U6IGVycm9yfVxuXHRcdFx0KTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFkZFByb3BlcnRpZXMoXG5cdFx0XHRjb25zdHJ1Y3RvcjogdHlwZW9mIExpdEVsZW1lbnQsXG5cdFx0XHR0ZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudFxuXHQpXG5cdHtcblx0XHRBdHRyaWJ1dGVQcm9wZXJ0aWVzLmFkZFByb3BlcnRpZXMoY29uc3RydWN0b3IsIHRoaXMuZGVjbGFyYXRpb24sIHRlbXBsYXRlKTtcblx0XHRTdGF0ZVByb3BlcnRpZXMuYWRkUHJvcGVydGllcyhjb25zdHJ1Y3RvciwgdGhpcy5kZWNsYXJhdGlvbik7XG5cdFx0UHJvcGVydGllc1Byb3BlcnRpZXMuYWRkUHJvcGVydGllcyhjb25zdHJ1Y3RvciwgdGhpcy5kZWNsYXJhdGlvbik7XG5cdH1cblxuXHRwcml2YXRlIGdldEh0bWxTdHJpbmcodGVtcGxhdGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnQpOiBzdHJpbmdcblx0e1xuXHRcdERpcmVjdGl2ZV9mb3IuaHlkcmF0ZSh0ZW1wbGF0ZSk7XG5cdFx0RGlyZWN0aXZlX2lmLmh5ZHJhdGUodGVtcGxhdGUpO1xuXHRcdERpcmVjdGl2ZV9zd2l0Y2guaHlkcmF0ZSh0ZW1wbGF0ZSk7XG5cblx0XHQvLyBtdXN0IGJlIGxhc3QgdG8gYWNjb21tb2RhdGUgYWxsIG90aGVyIGRpcmVjdGl2ZXNcblx0XHREaXJlY3RpdmVfaW5zaWRlLmh5ZHJhdGUodGVtcGxhdGUpO1xuXG5cdFx0cmV0dXJuIHJlY29kZSh0ZW1wbGF0ZS5pbm5lckhUTUwpO1xuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBmaW5kSFRNTFRlbXBsYXRlRWxlbWVudEluRXh0ZXJuYWxGaWxlKFxuXHRcdFx0bmFtZTogc3RyaW5nXG5cdCk6IFByb21pc2U8SFRNTFRlbXBsYXRlRWxlbWVudD4ge1xuXHRcdGNvbnN0IGh0bWxTdHJpbmcgPSBhd2FpdCB0aGlzLmxvYWRFeHRlcm5hbEh0bWwoKTtcblx0XHRjb25zdCB0ZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG5cdFx0dGVtcGxhdGUuaW5uZXJIVE1MID0gaHRtbFN0cmluZztcblx0XHRyZXR1cm4gZmluZEhUTUxUZW1wbGF0ZUVsZW1lbnQobmFtZSwgdGVtcGxhdGUuY29udGVudCkgPz8gdGVtcGxhdGU7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGxvYWRFeHRlcm5hbEh0bWwoKTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHR0cnkge1xuXHRcdFx0cmV0dXJuIGF3YWl0IChhd2FpdCB0aGlzLmV4dGVybmFsTG9hZGVyKS5sb2FkSHRtbCgpO1xuXHRcdH1cblx0XHRjYXRjaCAoZXJyb3IpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignRXh0ZXJuYWwgaHRtbCBmaWxlIG91dCBvZiByZWFjaC4nLCB7Y2F1c2U6IGVycm9yfSk7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBsb2FkRXh0ZXJuYWxDU1NTdHlsZVNoZWV0KCk6IFByb21pc2U8dW5kZWZpbmVkIHwgQ1NTU3R5bGVTaGVldD4ge1xuXHRcdGlmICh0aGlzLmRlY2xhcmF0aW9uLmhvb2tzPy5leHRlcm5hbExvYWRlcj8uY3NzX2RvbnQpIHJldHVybiB1bmRlZmluZWQ7XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBhd2FpdCAoYXdhaXQgdGhpcy5leHRlcm5hbExvYWRlcikubG9hZENzc1N0eWxlU2hlZXQoKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5kZWJ1ZygnRXh0ZXJuYWwgY3NzIGZpbGUgb3V0IG9mIHJlYWNoLicsIHtjYXVzZTogZXJyb3J9KTtcblx0XHRcdHJldHVybiB1bmRlZmluZWQ7XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSBhc3luYyBhZG9wdF9mb250X2Nzc1N0eWxlU2hlZXRzKCkge1xuXHRcdGNvbnN0IGxvY2F0aW9ucyA9ICgoYTogc3RyaW5nW10pID0+IGEubGVuZ3RoID4gMCA/IGEgOiB1bmRlZmluZWQpKFxuXHRcdFx0XHRbXG5cdFx0XHRcdFx0dGhpcy5kZWNsYXJhdGlvbi5jb25maWc/LmRlZmluZT8uZm9udExvY2F0aW9uLFxuXHRcdFx0XHRcdC4uLih0aGlzLmRlY2xhcmF0aW9uLmNvbmZpZz8uZGVmaW5lPy5mb250TG9jYXRpb25zID8/IFtdKSxcblx0XHRcdFx0XVxuXHRcdFx0XHRcdFx0LmZpbHRlcihsb2NhdGlvbiA9PiBsb2NhdGlvbiAhPSB1bmRlZmluZWQpXG5cdFx0KTtcblx0XHRpZiAoIWxvY2F0aW9ucykgcmV0dXJuO1xuXHRcdHJldHVybiBhd2FpdCAoYXdhaXQgdGhpcy5jc3NTdHlsZVNoZWV0QWRvcHRlcikuYWRvcHRDU1NTdHlsZXNoZWV0cyguLi5sb2NhdGlvbnMpO1xuXHR9XG5cblx0Y29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBkZWNsYXJhdGlvbjogQ3VzdG9tYXJ5RGVjbGFyYXRpb248YW55Pikge31cblx0cHJpdmF0ZSByZWFkb25seSBuYW1lOiBzdHJpbmcgPSB0aGlzLmRlY2xhcmF0aW9uLm5hbWUhO1xuXG5cdHByaXZhdGUgZ2V0IGNzc1N0eWxlU2hlZXRJbXBvcnRlcigpOiBQcm9taXNlPENTU1N0eWxlU2hlZXRJbXBvcnRlcj4ge1xuXHRcdHJldHVybiB0aGlzLl9jc3NTdHlsZVNoZWV0SW1wb3J0ZXIgPz89IGxvYWRDc3NTdHlsZVNoZWV0SW1wb3J0ZXIodGhpcy5mZXRjaFRleHQpO1xuXHR9XG5cblx0cHJpdmF0ZSBfY3NzU3R5bGVTaGVldEltcG9ydGVyOiBQcm9taXNlPENTU1N0eWxlU2hlZXRJbXBvcnRlcj4gfCB1bmRlZmluZWQ7XG5cblx0cHJpdmF0ZSBnZXQgY3NzU3R5bGVTaGVldEFkb3B0ZXIoKTogUHJvbWlzZTxDU1NTdHlsZVNoZWV0QWRvcHRlcj4ge1xuXHRcdHJldHVybiB0aGlzLl9jc3NTdHlsZVNoZWV0QWRvcHRlciA/Pz0gbG9hZENzc1N0eWxlU2hlZXRBZG9wdGVyKHRoaXMuY3NzU3R5bGVTaGVldEltcG9ydGVyKTtcblx0fVxuXG5cdHByaXZhdGUgX2Nzc1N0eWxlU2hlZXRBZG9wdGVyOiBQcm9taXNlPENTU1N0eWxlU2hlZXRBZG9wdGVyPiB8IHVuZGVmaW5lZDtcblxuXHRwcml2YXRlIGdldCBleHRlcm5hbExvYWRlcigpOiBQcm9taXNlPEV4dGVybmFsTG9hZGVyPiB7XG5cdFx0cmV0dXJuIHRoaXMuX2V4dGVybmFsTG9hZGVyID8/PSBjcmVhdGVFeHRlcm5hbExvYWRlcihcblx0XHRcdFx0dGhpcy5mZXRjaFRleHQsXG5cdFx0XHRcdHRoaXMuY3NzU3R5bGVTaGVldEltcG9ydGVyLFxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bmFtZTogdGhpcy5uYW1lLFxuXHRcdFx0XHRcdGltcG9ydF9tZXRhOiB0aGlzLmdldF9pbXBvcnRfbWV0YSgpLFxuXHRcdFx0XHR9XG5cdFx0KTtcblx0fVxuXG5cdHByaXZhdGUgZ2V0X2ltcG9ydF9tZXRhKCkge1xuXHRcdHJldHVybiB0aGlzLmRlY2xhcmF0aW9uLmhvb2tzPy5leHRlcm5hbExvYWRlcj8uaW1wb3J0X21ldGEgPz8gKCgpID0+IHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgJHt0aGlzLm5hbWV9OiBDdXN0b21hcnkgbmVlZHMgXCJpbXBvcnQubWV0YVwiIGlmIHRoZSBjdXN0b20gZWxlbWVudCB0ZW1wbGF0ZSBgICtcblx0XHRcdFx0XHQnaXMgdG8gYmUgbG9hZGVkIGZyb20gYW4gZXh0ZXJuYWwgZmlsZS4gJyArXG5cdFx0XHRcdFx0Jyhkb2N1bWVudCBkaWQgbm90IGhhdmUgYSBuYW1lZCB0ZW1wbGF0ZSBlbGVtZW50LCBhbmQgYW4gaHRtbCBzdHJpbmcgd2FzIG5vdCBwcm92aWRlZC4pJylcblx0XHR9KSgpO1xuXHR9XG5cblx0cHJpdmF0ZSBfZXh0ZXJuYWxMb2FkZXI6IFByb21pc2U8RXh0ZXJuYWxMb2FkZXI+IHwgdW5kZWZpbmVkO1xuXG5cdHByaXZhdGUgZ2V0IGZldGNoVGV4dCgpOiBQcm9taXNlPEZldGNoVGV4dD4ge1xuXHRcdHJldHVybiB0aGlzLl9mZXRjaFRleHQgPz89IGxvYWRGZXRjaFRleHQoKTtcblx0fVxuXG5cdHByaXZhdGUgX2ZldGNoVGV4dDogUHJvbWlzZTxGZXRjaFRleHQ+IHwgdW5kZWZpbmVkO1xuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxvYWRDc3NTdHlsZVNoZWV0QWRvcHRlcihjc3NTdHlsZVNoZWV0SW1wb3J0ZXI6IFByb21pc2U8Q1NTU3R5bGVTaGVldEltcG9ydGVyPik6IFByb21pc2U8Q1NTU3R5bGVTaGVldEFkb3B0ZXI+IHtcblx0cmV0dXJuIG5ldyBDU1NTdHlsZVNoZWV0QWRvcHRlcihhd2FpdCBjc3NTdHlsZVNoZWV0SW1wb3J0ZXIgYXMgYW55LCBkb2N1bWVudCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxvYWRDc3NTdHlsZVNoZWV0SW1wb3J0ZXIoZmV0Y2hUZXh0OiBQcm9taXNlPEZldGNoVGV4dD4pOiBQcm9taXNlPENTU1N0eWxlU2hlZXRJbXBvcnRlcj4ge1xuXHRyZXR1cm4gbmV3IENTU1N0eWxlU2hlZXRJbXBvcnRlcihhd2FpdCBmZXRjaFRleHQpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVFeHRlcm5hbExvYWRlcihcblx0XHRmZXRjaFRleHQ6IFByb21pc2U8RmV0Y2hUZXh0Pixcblx0XHRjc3NTdHlsZVNoZWV0SW1wb3J0ZXI6IFByb21pc2U8Q1NTU3R5bGVTaGVldEltcG9ydGVyPixcblx0XHRvcHRpb25zOiB7XG5cdFx0XHRuYW1lOiBzdHJpbmcsXG5cdFx0XHRpbXBvcnRfbWV0YTogSW1wb3J0TWV0YTtcblx0XHR9XG4pOiBQcm9taXNlPEV4dGVybmFsTG9hZGVyPiB7XG5cdHJldHVybiBuZXcgRXh0ZXJuYWxMb2FkZXIoXG5cdFx0XHRhd2FpdCBmZXRjaFRleHQsXG5cdFx0XHRhd2FpdCBjc3NTdHlsZVNoZWV0SW1wb3J0ZXIsXG5cdFx0XHRvcHRpb25zXG5cdCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxvYWRGZXRjaFRleHQoKTogUHJvbWlzZTxGZXRjaFRleHQ+IHtcblx0cmV0dXJuIEZldGNoVGV4dF9ET01fc2luZ2xldG9uO1xufVxuXG5mdW5jdGlvbiBmaW5kSFRNTFRlbXBsYXRlRWxlbWVudChuYW1lOiBzdHJpbmcsIG5vZGU6IFBhcmVudE5vZGUpOiBIVE1MVGVtcGxhdGVFbGVtZW50IHwgdW5kZWZpbmVkIHtcblx0cmV0dXJuIG5vZGUucXVlcnlTZWxlY3RvcihgdGVtcGxhdGVbZGF0YS1jdXN0b21hcnktbmFtZT0nJHtuYW1lfSddYCkgYXMgSFRNTFRlbXBsYXRlRWxlbWVudCA/PyB1bmRlZmluZWQ7XG59XG5cbi8qKlxuIGlubmVySFRNTCBlbmNvZGVzIHNvbWUgY2hhcmFjdGVycyB1c2VkIGJ5IGxpdCBkaXJlY3RpdmVzXG4gc28gd2UgbXVzdCBkZWNvZGUgdGhlbSBiYWNrIGludG8gdGhlIEhUTUwgc3RyaW5nLlxuIG92ZXIgdGltZSB0aGUgbmVlZCB0byBkbyB0aGlzIHNob3VsZCBkaXNhcHBlYXIsXG4gYXMgd2UgYWRkIGRpcmVjdGl2ZSBtYXJrdXAgZm9yIGEgbGFyZ2VyIG51bWJlciBvZiBsaXQgZGlyZWN0aXZlcy5cbiAqL1xuZnVuY3Rpb24gcmVjb2RlKGh0bWxTdHJpbmc6IHN0cmluZykge1xuXHQvLyBsaXQgZGlyZWN0aXZlcyBleHByZXNzZWQgYXMgYXJyb3cgZnVuY3Rpb25zXG5cdHJldHVybiBodG1sU3RyaW5nLnJlcGxhY2VBbGwoJz0mZ3Q7JywgJz0+Jyk7XG59XG4iLCJpbXBvcnQge0NTU1N0eWxlU2hlZXRJbXBvcnRlcn0gZnJvbSBcIiNjdXN0b21hcnkvY3Nzc3R5bGVzaGVldC9DU1NTdHlsZVNoZWV0SW1wb3J0ZXIuanNcIjtcbmltcG9ydCB7RmV0Y2hUZXh0X0RPTV9zaW5nbGV0b259IGZyb20gXCIjY3VzdG9tYXJ5L2ZldGNoL0ZldGNoVGV4dC5qc1wiO1xuXG4vLyBub2luc3BlY3Rpb24gSlNVbnVzZWRHbG9iYWxTeW1ib2xzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRvcHRDU1NTdHlsZXNoZWV0cyguLi5sb2NhdGlvbnM6IHN0cmluZ1tdKSB7XG4gICAgYXdhaXQgbmV3IENTU1N0eWxlU2hlZXRBZG9wdGVyKFxuICAgICAgICBuZXcgQ1NTU3R5bGVTaGVldEltcG9ydGVyKEZldGNoVGV4dF9ET01fc2luZ2xldG9uKSwgZG9jdW1lbnRcbiAgICApLmFkb3B0Q1NTU3R5bGVzaGVldHMoLi4ubG9jYXRpb25zKTtcbn1cblxuZXhwb3J0IGNsYXNzIENTU1N0eWxlU2hlZXRBZG9wdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBjc3NTdHlsZVNoZWV0SW1wb3J0ZXI6IENTU1N0eWxlU2hlZXRJbXBvcnRlcixcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBkb2N1bWVudDogRG9jdW1lbnQsXG4gICAgKSB7fVxuXG4gICAgcHVibGljIGFzeW5jIGFkb3B0Q1NTU3R5bGVzaGVldHMoLi4ubG9jYXRpb25zOiBzdHJpbmdbXSkge1xuICAgICAgICBjb25zdCBjc3NTdHlsZVNoZWV0c01heWJlOiAoQ1NTU3R5bGVTaGVldCB8IHVuZGVmaW5lZClbXSA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgICAgbG9jYXRpb25zLm1hcChsb2NhdGlvbiA9PiB0aGlzLmNzc1N0eWxlU2hlZXRJbXBvcnRlci5nZXRDU1NTdHlsZVNoZWV0KGxvY2F0aW9uKSlcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgY3NzU3R5bGVTaGVldHM6IENTU1N0eWxlU2hlZXRbXSA9IGNzc1N0eWxlU2hlZXRzTWF5YmUuZmlsdGVyKFxuICAgICAgICAgICAgY3NzU3R5bGVTaGVldCA9PiAhIWNzc1N0eWxlU2hlZXRcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGNzc1N0eWxlU2hlZXRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuYWRvcHRlZFN0eWxlU2hlZXRzX3B1c2goY3NzU3R5bGVTaGVldHMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogYWRvcHRlciBvZiBmb250IHN0eWxlc2hlZXRzIGNhbiBvbmx5IGJlIHRoZSByb290IGRvY3VtZW50IGRvbSwgbm90IHRoZSBzaGFkb3cgZG9tLlxuICAgICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC92c2NvZGUvaXNzdWVzLzE1OTg3NyNpc3N1ZWNvbW1lbnQtMTI2Mjg0Mzk1MlxuICAgICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21kbi9pbnRlcmFjdGl2ZS1leGFtcGxlcy9pc3N1ZXMvODg3I2lzc3VlY29tbWVudC00MzI2MDY5MjVcbiAgICAgKi9cbiAgICBwcml2YXRlIGFkb3B0ZWRTdHlsZVNoZWV0c19wdXNoKGNzc1N0eWxlU2hlZXRzOiBDU1NTdHlsZVNoZWV0W10pIHtcbiAgICAgICAgdGhpcy5kb2N1bWVudC5hZG9wdGVkU3R5bGVTaGVldHMucHVzaCguLi5jc3NTdHlsZVNoZWV0cyk7XG4gICAgfVxuXG59IiwiaW1wb3J0IHtGZXRjaFRleHQsIEZldGNoVGV4dF9ET01fc2luZ2xldG9ufSBmcm9tIFwiI2N1c3RvbWFyeS9mZXRjaC9GZXRjaFRleHQuanNcIjtcblxuZXhwb3J0IGNsYXNzIENTU1N0eWxlU2hlZXRJbXBvcnRlciB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGZldGNoVGV4dDogRmV0Y2hUZXh0ID0gRmV0Y2hUZXh0X0RPTV9zaW5nbGV0b24pIHt9XG5cbiAgICBhc3luYyBnZXRDU1NTdHlsZVNoZWV0KGxvY2F0aW9uOiBzdHJpbmcpOiBQcm9taXNlPENTU1N0eWxlU2hlZXQgfCB1bmRlZmluZWQ+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZmV0Y2hDU1NTdHlsZVNoZWV0KGxvY2F0aW9uKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIGZldGNoQ1NTU3R5bGVTaGVldChsb2NhdGlvbjogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IHRleHQ6IHN0cmluZyA9IGF3YWl0IHRoaXMuZmV0Y2hUZXh0LmZldGNoVGV4dChsb2NhdGlvbik7XG4gICAgICAgIGNvbnN0IGNzc1N0eWxlU2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCh7YmFzZVVSTDogbG9jYXRpb259KTtcbiAgICAgICAgcmV0dXJuIGNzc1N0eWxlU2hlZXQucmVwbGFjZSh0ZXh0KTtcbiAgICB9XG59XG4iLCJleHBvcnQgaW50ZXJmYWNlIEZldGNoVGV4dCB7XG4gICAgZmV0Y2hUZXh0KGlucHV0OiBSZXF1ZXN0SW5mbyB8IFVSTCk6IFByb21pc2U8c3RyaW5nPjtcbn1cblxuY2xhc3MgRmV0Y2hUZXh0X0RPTSBpbXBsZW1lbnRzIEZldGNoVGV4dCB7XG4gICAgcHVibGljIGFzeW5jIGZldGNoVGV4dChpbnB1dDogUmVxdWVzdEluZm8gfCBVUkwpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zb2xlLmRlYnVnKCdmZXRjaDogJyArIGlucHV0KTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChpbnB1dCk7XG4gICAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2Uuc3RhdHVzVGV4dCwge2NhdXNlOiByZXNwb25zZX0pO1xuICAgIH1cbn1cblxuZXhwb3J0IGNvbnN0IEZldGNoVGV4dF9ET01fc2luZ2xldG9uID0gbmV3IEZldGNoVGV4dF9ET00oKTtcbiIsImltcG9ydCB7RmV0Y2hUZXh0fSBmcm9tIFwiI2N1c3RvbWFyeS9mZXRjaC9GZXRjaFRleHQuanNcIjtcblxuaW50ZXJmYWNlIENTU1N0eWxlU2hlZXRJbXBvcnRlciB7XG4gICAgZ2V0Q1NTU3R5bGVTaGVldChsb2NhdGlvbjogc3RyaW5nKTogUHJvbWlzZTxDU1NTdHlsZVNoZWV0IHwgdW5kZWZpbmVkPjtcbn1cblxuZXhwb3J0IGNsYXNzIEV4dGVybmFsTG9hZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBmZXRjaFRleHQ6IEZldGNoVGV4dCxcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBjc3NTdHlsZVNoZWV0SW1wb3J0ZXI6IENTU1N0eWxlU2hlZXRJbXBvcnRlcixcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBvcHRpb25zOiB7XG4gICAgICAgICAgICBuYW1lOiBzdHJpbmcsXG4gICAgICAgICAgICBpbXBvcnRfbWV0YTogSW1wb3J0TWV0YTtcbiAgICAgICAgfVxuICAgICkge31cblxuICAgIGFzeW5jIGxvYWRIdG1sKCk6IFByb21pc2U8c3RyaW5nPlxuICAgIHtcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLnJlc29sdmVSZXNvdXJjZUxvY2F0aW9uKCdodG1sJyk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmZldGNoVGV4dC5mZXRjaFRleHQobG9jYXRpb24pO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRDc3NTdHlsZVNoZWV0KCk6IFByb21pc2U8dW5kZWZpbmVkIHwgQ1NTU3R5bGVTaGVldD5cbiAgICB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5yZXNvbHZlUmVzb3VyY2VMb2NhdGlvbignY3NzJyk7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNzc1N0eWxlU2hlZXRJbXBvcnRlci5nZXRDU1NTdHlsZVNoZWV0KGxvY2F0aW9uKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlc29sdmVSZXNvdXJjZUxvY2F0aW9uKGV4dGVuc2lvbjogc3RyaW5nKTogc3RyaW5nXG4gICAge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLmltcG9ydF9tZXRhLnJlc29sdmUoYC4vJHt0aGlzLm9wdGlvbnMubmFtZX0uJHtleHRlbnNpb259YCk7XG4gICAgfVxuXG59XG4iLCJpbXBvcnQge3NldF9vdXRlckhUTUx9IGZyb20gXCIuL3NldF9vdXRlckhUTUwuanNcIjtcblxuZXhwb3J0IGNsYXNzIERpcmVjdGl2ZV9mb3Jcbntcblx0c3RhdGljIGh5ZHJhdGUodGVtcGxhdGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnQpIHtcblx0XHR0aGlzLmh5ZHJhdGVUcmVlKHRlbXBsYXRlLmNvbnRlbnQsIHRlbXBsYXRlKTtcblx0fVxuXG5cdHByaXZhdGUgc3RhdGljIGh5ZHJhdGVUcmVlKG5vZGU6IFBhcmVudE5vZGUsIHRlbXBsYXRlOiBIVE1MVGVtcGxhdGVFbGVtZW50KVxuXHR7XG5cdFx0d2hpbGUgKHRydWUpIHtcblx0XHRcdGNvbnN0IHRhZyA9IG5vZGUucXVlcnlTZWxlY3RvcignZm9yLS0nKTtcblx0XHRcdGlmICghdGFnKSByZXR1cm47XG5cblx0XHRcdHRoaXMuaHlkcmF0ZVRyZWUodGFnLCB0ZW1wbGF0ZSk7XG5cblx0XHRcdGNvbnN0IGl0ZW1zID0gdGFnLmdldEF0dHJpYnV0ZSgnaXRlbXMnKSA/P1xuXHRcdFx0XHRcdCgoKT0+e1xuXHRcdFx0XHRcdFx0dGhyb3cgRXJyb3IoJ0F0dHJpYnV0ZSBcIml0ZW1zXCIgaXMgcmVxdWlyZWQgZm9yIFwiZm9yLS1cIiBtYXJrdXAnKVxuXHRcdFx0XHRcdH0pKCk7XG5cblx0XHRcdGNvbnN0IHZhbHVlID0gdGFnLmdldEF0dHJpYnV0ZSgndmFsdWUnKSA/PyAndmFsdWUnO1xuXG5cdFx0XHRjb25zdCBpbmRleCA9IHRhZy5nZXRBdHRyaWJ1dGUoJ2luZGV4Jyk7XG5cdFx0XHRjb25zdCBhcmdzID0gaW5kZXggPyBgKCR7dmFsdWV9LCAke2luZGV4fSlgIDogdmFsdWU7XG5cblx0XHRcdGNvbnN0IGJvZHkgPSB0YWcuaW5uZXJIVE1MO1xuXG5cdFx0XHRjb25zdCBkaXJlY3RpdmUgPSBgXFwke21hcCgke2l0ZW1zfSwgJHthcmdzfSA9PiBodG1sXFxgJHtib2R5fVxcYCl9YDtcblxuXHRcdFx0c2V0X291dGVySFRNTCh0YWcsIGRpcmVjdGl2ZSwgdGVtcGxhdGUpO1xuXHRcdH1cblx0fVxuXG59IiwiZXhwb3J0IGZ1bmN0aW9uIHNldF9vdXRlckhUTUwodGFnLCB2YWx1ZSwgdGVtcGxhdGUpIHtcbiAgICB0cnkge1xuICAgICAgICB0YWcub3V0ZXJIVE1MID0gdmFsdWU7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zdCBjaHJvbWUgPSBcIkZhaWxlZCB0byBzZXQgdGhlICdvdXRlckhUTUwnIHByb3BlcnR5IG9uICdFbGVtZW50JzogXCIgK1xuICAgICAgICAgICAgXCJUaGlzIGVsZW1lbnQncyBwYXJlbnQgaXMgb2YgdHlwZSAnI2RvY3VtZW50LWZyYWdtZW50Jywgd2hpY2ggaXMgbm90IGFuIGVsZW1lbnQgbm9kZS5cIjtcbiAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UgPT09IGNocm9tZSkge1xuICAgICAgICAgICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXRfb3V0ZXJIVE1MLmpzLm1hcCIsImV4cG9ydCBmdW5jdGlvbiBzZXRfb3V0ZXJIVE1MKFxuXHRcdHRhZzogRWxlbWVudCwgdmFsdWU6IHN0cmluZywgdGVtcGxhdGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnRcbikge1xuXHR0cnkge1xuXHRcdHRhZy5vdXRlckhUTUwgPSB2YWx1ZTtcblx0fVxuXHRjYXRjaCAoZXJyb3I6IGFueSkge1xuXHRcdGNvbnN0IGNocm9tZSA9XG5cdFx0XHRcdFwiRmFpbGVkIHRvIHNldCB0aGUgJ291dGVySFRNTCcgcHJvcGVydHkgb24gJ0VsZW1lbnQnOiBcIiArXG5cdFx0XHRcdFwiVGhpcyBlbGVtZW50J3MgcGFyZW50IGlzIG9mIHR5cGUgJyNkb2N1bWVudC1mcmFnbWVudCcsIHdoaWNoIGlzIG5vdCBhbiBlbGVtZW50IG5vZGUuXCI7XG5cdFx0aWYgKGVycm9yLm1lc3NhZ2UgPT09IGNocm9tZSkge1xuXHRcdFx0dGVtcGxhdGUuaW5uZXJIVE1MID0gdmFsdWU7XG5cdFx0fVxuXHR9XG59IiwiaW1wb3J0IHtzZXRfb3V0ZXJIVE1MfSBmcm9tIFwiLi9zZXRfb3V0ZXJIVE1MLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBEaXJlY3RpdmVfaWZcbntcblx0c3RhdGljIGh5ZHJhdGUodGVtcGxhdGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnQpIHtcblx0XHR0aGlzLmh5ZHJhdGVUcmVlKHRlbXBsYXRlLmNvbnRlbnQsIHRlbXBsYXRlKTtcblx0fVxuXG5cdHByaXZhdGUgc3RhdGljIGh5ZHJhdGVUcmVlKG5vZGU6IFBhcmVudE5vZGUsIHRlbXBsYXRlOiBIVE1MVGVtcGxhdGVFbGVtZW50KVxuXHR7XG5cdFx0d2hpbGUgKHRydWUpIHtcblx0XHRcdGNvbnN0IHRhZyA9IG5vZGUucXVlcnlTZWxlY3RvcignaWYtLScpO1xuXHRcdFx0aWYgKCF0YWcpIHJldHVybjtcblxuXHRcdFx0dGhpcy5oeWRyYXRlVHJlZSh0YWcsIHRlbXBsYXRlKTtcblxuXHRcdFx0Y29uc3QgY29uZGl0aW9uID0gdGFnLmdldEF0dHJpYnV0ZSgnY29uZGl0aW9uJykgPz9cblx0XHRcdFx0XHQoKCk9Pntcblx0XHRcdFx0XHRcdHRocm93IEVycm9yKCdBdHRyaWJ1dGUgXCJjb25kaXRpb25cIiBpcyByZXF1aXJlZCBmb3IgXCJpZi0tXCIgbWFya3VwJylcblx0XHRcdFx0XHR9KSgpO1xuXG5cdFx0XHRjb25zdCB0cnVlRWxlbWVudHMgPSBbLi4udGFnLnF1ZXJ5U2VsZWN0b3JBbGwoJzpzY29wZSA+IHRydWUtLScpXTtcblx0XHRcdGlmICh0cnVlRWxlbWVudHMubGVuZ3RoID4gMSkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignT25seSBvbmUgXCJ0cnVlLS1cIiBpcyBhbGxvd2VkIGZvciBcImlmLS1cIiBtYXJrdXAnKTtcblx0XHRcdH1cblx0XHRcdGNvbnN0IHRydWVFbGVtZW50OiBFbGVtZW50IHwgdW5kZWZpbmVkID0gdHJ1ZUVsZW1lbnRzWzBdO1xuXG5cdFx0XHRjb25zdCBmYWxzZUVsZW1lbnRzID0gWy4uLnRhZy5xdWVyeVNlbGVjdG9yQWxsKCc6c2NvcGUgPiBmYWxzZS0tJyldO1xuXHRcdFx0aWYgKGZhbHNlRWxlbWVudHMubGVuZ3RoID4gMSkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignT25seSBvbmUgXCJmYWxzZS0tXCIgaXMgYWxsb3dlZCBmb3IgXCJpZi0tXCIgbWFya3VwJyk7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCBmYWxzZUVsZW1lbnQ6IEVsZW1lbnQgfCB1bmRlZmluZWQgPSBmYWxzZUVsZW1lbnRzWzBdO1xuXG5cdFx0XHRpZiAoZmFsc2VFbGVtZW50ICYmICF0cnVlRWxlbWVudCkge1xuXHRcdFx0XHR0aHJvdyBFcnJvcignT25lIFwidHJ1ZVwiIGlzIHJlcXVpcmVkIGlmIFwiZmFsc2VcIiBwcmVzZW50IGZvciBcImlmLS1cIiBtYXJrdXAnKTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgdHJ1ZUNhc2UgPSBgKCkgPT4gaHRtbFxcYCR7dHJ1ZUVsZW1lbnQ/LmlubmVySFRNTCA/PyB0YWcuaW5uZXJIVE1MfVxcYGA7XG5cblx0XHRcdGNvbnN0IGZhbHNlQ2FzZSA9IGZhbHNlRWxlbWVudCA/IGAsICgpID0+IGh0bWxcXGAke2ZhbHNlRWxlbWVudC5pbm5lckhUTUx9XFxgYCA6ICcnO1xuXG5cdFx0XHRjb25zdCBkaXJlY3RpdmUgPSBgXFwke3doZW4oJHtjb25kaXRpb259LCAke3RydWVDYXNlfSR7ZmFsc2VDYXNlfSl9YDtcblxuXHRcdFx0c2V0X291dGVySFRNTCh0YWcsIGRpcmVjdGl2ZSwgdGVtcGxhdGUpO1xuXHRcdH1cblx0fVxufSIsImV4cG9ydCBjbGFzcyBEaXJlY3RpdmVfaW5zaWRlXG57XG5cdHN0YXRpYyBoeWRyYXRlKHRlbXBsYXRlOiBIVE1MVGVtcGxhdGVFbGVtZW50KSB7XG5cdFx0dGhpcy5oeWRyYXRlVHJlZSh0ZW1wbGF0ZS5jb250ZW50LCB0ZW1wbGF0ZSk7XG5cdH1cblxuXHRwcml2YXRlIHN0YXRpYyBoeWRyYXRlVHJlZShub2RlOiBQYXJlbnROb2RlLCB0ZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudClcblx0e1xuXHRcdHdoaWxlICh0cnVlKSB7XG5cdFx0XHRjb25zdCBtYXJrdXAgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoJ2luc2lkZS0tJyk7XG5cdFx0XHRpZiAoIW1hcmt1cCkgcmV0dXJuO1xuXG5cdFx0XHR0aGlzLmh5ZHJhdGVUcmVlKG1hcmt1cCwgdGVtcGxhdGUpO1xuXG5cdFx0XHRjb25zdCBzZWxlY3RvcnMgPSBtYXJrdXAuZ2V0QXR0cmlidXRlKCd0YXJnZXQnKTtcblx0XHRcdGlmICghc2VsZWN0b3JzKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignQXR0cmlidXRlIFwidGFyZ2V0XCIgaXMgcmVxdWlyZWQgZm9yIFwiaW5zaWRlLS1cIiBtYXJrdXAnKTtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3QgdGFyZ2V0ID0gbm9kZS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycyk7XG5cdFx0XHRpZiAoIXRhcmdldCkge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoYE5vIGVsZW1lbnQgbWF0Y2hpbmcgJHtzZWxlY3RvcnN9YCk7XG5cdFx0XHR9XG5cblx0XHRcdHRhcmdldC5pbm5lckhUTUwgPSBtYXJrdXAuaW5uZXJIVE1MO1xuXG5cdFx0XHRtYXJrdXAucGFyZW50Tm9kZSEucmVtb3ZlQ2hpbGQobWFya3VwKTtcblx0XHR9XG5cdH1cbn0iLCJpbXBvcnQge3NldF9vdXRlckhUTUx9IGZyb20gXCIuL3NldF9vdXRlckhUTUwuanNcIjtcblxuZXhwb3J0IGNsYXNzIERpcmVjdGl2ZV9zd2l0Y2hcbntcblx0c3RhdGljIGh5ZHJhdGUodGVtcGxhdGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnQpXG5cdHtcblx0XHR0aGlzLmh5ZHJhdGVUcmVlKHRlbXBsYXRlLmNvbnRlbnQsIHRlbXBsYXRlKTtcblx0fVxuXG5cdHByaXZhdGUgc3RhdGljIGh5ZHJhdGVUcmVlKG5vZGU6IFBhcmVudE5vZGUsIHRlbXBsYXRlOiBIVE1MVGVtcGxhdGVFbGVtZW50KVxuXHR7XG5cdFx0d2hpbGUgKHRydWUpIHtcblx0XHRcdGNvbnN0IHRhZyA9IG5vZGUucXVlcnlTZWxlY3Rvcignc3dpdGNoLS0nKTtcblx0XHRcdGlmICghdGFnKSByZXR1cm47XG5cblx0XHRcdHRoaXMuaHlkcmF0ZVRyZWUodGFnLCB0ZW1wbGF0ZSk7XG5cblx0XHRcdGNvbnN0IHZhbHVlID0gdGFnLmdldEF0dHJpYnV0ZSgndmFsdWUnKSA/P1xuXHRcdFx0XHRcdCgoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aHJvdyBFcnJvcignQXR0cmlidXRlIFwidmFsdWVcIiBpcyByZXF1aXJlZCBmb3IgXCJzd2l0Y2gtLVwiIG1hcmt1cCcpXG5cdFx0XHRcdFx0fSkoKTtcblxuXHRcdFx0Y29uc3QgY2FzZXMgPSB0aGlzLnRvQ2FzZXMoWy4uLnRhZy5xdWVyeVNlbGVjdG9yQWxsKCc6c2NvcGUgPiBjYXNlLS0nKV0pO1xuXG5cdFx0XHRjb25zdCB2YWx1ZUNhc2VzID0gY2FzZXMudmFsdWVDYXNlcy5qb2luKCcsXFxuJyk7XG5cblx0XHRcdGNvbnN0IGRlZmF1bHRDYXNlID0gY2FzZXMuZGVmYXVsdENhc2UgPyBgLFxcbiR7Y2FzZXMuZGVmYXVsdENhc2V9YCA6ICcnO1xuXG5cdFx0XHRjb25zdCBkaXJlY3RpdmUgPSBgXFwke2Nob29zZSgke3ZhbHVlfSxcXG5bJHt2YWx1ZUNhc2VzfV0ke2RlZmF1bHRDYXNlfSl9YDtcblxuXHRcdFx0c2V0X291dGVySFRNTCh0YWcsIGRpcmVjdGl2ZSwgdGVtcGxhdGUpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc3RhdGljIHRvQ2FzZXMoY2FzZXM6IEVsZW1lbnRbXSk6IHtcblx0XHR2YWx1ZUNhc2VzOiBzdHJpbmdbXTtcblx0XHRkZWZhdWx0Q2FzZT86IHN0cmluZ1xuXHR9IHtcblx0XHRpZiAoY2FzZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHR0aHJvdyBFcnJvcignQXQgbGVhc3Qgb25lIFwiY2FzZS0tXCIgaXMgcmVxdWlyZWQgZm9yIFwiY2hvb3NlLS1cIiBtYXJrdXAnKTtcblx0XHR9XG5cblx0XHRjb25zdCBkZWZhdWx0RWxlbWVudHMgPVxuXHRcdFx0XHRjYXNlcy5maWx0ZXIoY2FzZUVsZW1lbnQgPT4gIWNhc2VFbGVtZW50Lmhhc0F0dHJpYnV0ZSgndmFsdWUnKSk7XG5cdFx0aWYgKGRlZmF1bHRFbGVtZW50cy5sZW5ndGggPiAxKSB7XG5cdFx0XHR0aHJvdyBFcnJvcignT25seSBvbmUgZGVmYXVsdCBcImNhc2UtLVwiIGlzIGFsbG93ZWQgZm9yIFwiY2hvb3NlLS1cIiBtYXJrdXAnKTtcblx0XHR9XG5cdFx0Y29uc3QgZGVmYXVsdEVsZW1lbnQgPSBkZWZhdWx0RWxlbWVudHNbMF07XG5cdFx0Y29uc3QgZGVmYXVsdENhc2UgPSBgKCkgPT4gaHRtbFxcYCR7ZGVmYXVsdEVsZW1lbnQ/LmlubmVySFRNTH1cXGBgO1xuXG5cdFx0Y29uc3QgdmFsdWVFbGVtZW50cyA9XG5cdFx0XHRcdGNhc2VzLmZpbHRlcihjYXNlRWxlbWVudCA9PiBjYXNlRWxlbWVudC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykpO1xuXHRcdGNvbnN0IHZhbHVlQ2FzZXMgPSB2YWx1ZUVsZW1lbnRzLm1hcChjYXNlRWxlbWVudCA9PiB7XG5cdFx0XHRjb25zdCB2YWx1ZSA9IGNhc2VFbGVtZW50LmdldEF0dHJpYnV0ZSgndmFsdWUnKSE7XG5cdFx0XHRyZXR1cm4gYFsnJHt2YWx1ZX0nLCAoKSA9PiBodG1sXFxgJHtjYXNlRWxlbWVudC5pbm5lckhUTUx9XFxgXWA7XG5cdFx0fSlcblxuXHRcdHJldHVybiB7dmFsdWVDYXNlcywgZGVmYXVsdENhc2V9O1xuXHR9XG59IiwiaW1wb3J0IHtMaXRFbGVtZW50fSBmcm9tIFwiI2N1c3RvbWFyeS9saXRcIjtcbmltcG9ydCB7UHJvcGVydGllc0luamVjdG9yfSBmcm9tIFwiI2N1c3RvbWFyeS9wcm9wZXJ0aWVzL1Byb3BlcnRpZXNJbmplY3Rvci5qc1wiO1xuaW1wb3J0IHtDdXN0b21hcnlEZWNsYXJhdGlvbn0gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5RGVjbGFyYXRpb25cIjtcblxuZXhwb3J0IGNsYXNzIEF0dHJpYnV0ZVByb3BlcnRpZXNcbntcblx0c3RhdGljIGFkZFByb3BlcnRpZXM8VCBleHRlbmRzIEhUTUxFbGVtZW50Pihcblx0XHRcdGNvbnN0cnVjdG9yOiB0eXBlb2YgTGl0RWxlbWVudCxcblx0XHRcdGRlY2xhcmF0aW9uOiBDdXN0b21hcnlEZWNsYXJhdGlvbjxUPixcblx0XHRcdHRlbXBsYXRlOiBIVE1MVGVtcGxhdGVFbGVtZW50XG5cdClcblx0e1xuXHRcdGNvbnN0IGZyb21EZWNsYXJhdGlvbiA9IGRlY2xhcmF0aW9uLmNvbmZpZz8uYXR0cmlidXRlcyA/PyBbXTtcblx0XHRjb25zdCBmcm9tVGVtcGxhdGUgPVxuXHRcdFx0XHR0ZW1wbGF0ZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtY3VzdG9tYXJ5LWF0dHJpYnV0ZXMnKT8uXG5cdFx0XHRcdHNwbGl0KCcsJykubWFwKHMgPT4gcy50cmltKCkpID8/IFtdO1xuXHRcdGNvbnN0IG5hbWVzID0gWy4uLm5ldyBTZXQoWy4uLmZyb21EZWNsYXJhdGlvbiwgLi4uZnJvbVRlbXBsYXRlXSldO1xuXHRcdFByb3BlcnRpZXNJbmplY3Rvci5pbmplY3RQcm9wZXJ0aWVzKGNvbnN0cnVjdG9yLCB7cmVmbGVjdDogdHJ1ZX0sIG5hbWVzKTtcblx0fVxufVxuIiwiaW1wb3J0IHtMaXRFbGVtZW50fSBmcm9tIFwiI2N1c3RvbWFyeS9saXRcIjtcbmltcG9ydCB7UHJvcGVydHlEZWNsYXJhdGlvbiwgUHJvcGVydHlEZWNsYXJhdGlvbnN9IGZyb20gXCJAbGl0L3JlYWN0aXZlLWVsZW1lbnRcIjtcblxuZXhwb3J0IGNsYXNzIFByb3BlcnRpZXNJbmplY3RvciB7XG5cdHN0YXRpYyBpbmplY3RQcm9wZXJ0aWVzKFxuXHRcdFx0Y29uc3RydWN0b3I6IHR5cGVvZiBMaXRFbGVtZW50LFxuXHRcdFx0cHJvcGVydHlEZWNsYXJhdGlvbjogUHJvcGVydHlEZWNsYXJhdGlvbixcblx0XHRcdG5hbWVzOiBzdHJpbmdbXVxuXHQpIHtcblx0XHRpZiAoIW5hbWVzLmxlbmd0aCkgcmV0dXJuO1xuXHRcdGNvbnN0IHByb3BlcnRpZXM6IFdyaXRhYmxlPFByb3BlcnR5RGVjbGFyYXRpb25zPiA9IGNvbnN0cnVjdG9yLnByb3BlcnRpZXMgPz89IHt9O1xuXHRcdGZvciAoY29uc3Qga2V5IG9mIG5hbWVzKSB7XG5cdFx0XHRpZiAoa2V5IGluIHByb3BlcnRpZXMpIHRocm93IG5ldyBFcnJvcihgJHtrZXl9OiBwcm9wZXJ0eSBhbHJlYWR5IGV4aXN0cy5gKTtcblx0XHRcdHByb3BlcnRpZXNba2V5XSA9IHByb3BlcnR5RGVjbGFyYXRpb247XG5cdFx0fVxuXHR9XG59XG5cbnR5cGUgV3JpdGFibGU8VD4gPSB7LXJlYWRvbmx5IFtQIGluIGtleW9mIFRdOiBUW1BdfTtcbiIsImltcG9ydCB7TGl0RWxlbWVudH0gZnJvbSBcIiNjdXN0b21hcnkvbGl0XCI7XG5pbXBvcnQge0N1c3RvbWFyeURlZmluaXRpb259IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeURlZmluaXRpb24uanNcIjtcbmltcG9ydCB7UHJvcGVydGllc0luamVjdG9yfSBmcm9tIFwiI2N1c3RvbWFyeS9wcm9wZXJ0aWVzL1Byb3BlcnRpZXNJbmplY3Rvci5qc1wiO1xuaW1wb3J0IHtDdXN0b21hcnlEZWNsYXJhdGlvbn0gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5RGVjbGFyYXRpb25cIjtcblxuZXhwb3J0IGNsYXNzIFN0YXRlUHJvcGVydGllcyB7XG5cblx0c3RhdGljIGFkZFByb3BlcnRpZXM8VCBleHRlbmRzIEhUTUxFbGVtZW50Pihcblx0XHRcdGNvbnN0cnVjdG9yOiB0eXBlb2YgTGl0RWxlbWVudCxcblx0XHRcdGRlY2xhcmF0aW9uOiBDdXN0b21hcnlEZWNsYXJhdGlvbjxUPlxuXHQpXG5cdHtcblx0XHRjb25zdCBmcm9tRGVjbGFyYXRpb24gPSBkZWNsYXJhdGlvbi5jb25maWc/LnN0YXRlID8/IFtdO1xuXHRcdGNvbnN0IGZyb21MZWdhY3kgPSBbJ3N0YXRlJ107XG5cdFx0Y29uc3QgbmFtZXMgPSBbLi4ubmV3IFNldChbLi4uZnJvbURlY2xhcmF0aW9uLCAuLi5mcm9tTGVnYWN5XSldO1xuXHRcdFByb3BlcnRpZXNJbmplY3Rvci5pbmplY3RQcm9wZXJ0aWVzKGNvbnN0cnVjdG9yLCB7c3RhdGU6IHRydWV9LCBuYW1lcyk7XG5cdH1cblxufVxuIiwiaW1wb3J0IHtMaXRFbGVtZW50fSBmcm9tIFwiI2N1c3RvbWFyeS9saXRcIjtcbmltcG9ydCB7Q3VzdG9tYXJ5RGVmaW5pdGlvbn0gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5RGVmaW5pdGlvbi5qc1wiO1xuaW1wb3J0IHtQcm9wZXJ0aWVzSW5qZWN0b3J9IGZyb20gXCIjY3VzdG9tYXJ5L3Byb3BlcnRpZXMvUHJvcGVydGllc0luamVjdG9yLmpzXCI7XG5pbXBvcnQge1Byb3BlcnR5RGVjbGFyYXRpb259IGZyb20gXCJAbGl0L3JlYWN0aXZlLWVsZW1lbnRcIjtcbmltcG9ydCB7Q3VzdG9tYXJ5RGVjbGFyYXRpb259IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeURlY2xhcmF0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBQcm9wZXJ0aWVzUHJvcGVydGllc1xue1xuXHRzdGF0aWMgYWRkUHJvcGVydGllczxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KFxuXHRcdFx0Y29uc3RydWN0b3I6IHR5cGVvZiBMaXRFbGVtZW50LFxuXHRcdFx0ZGVjbGFyYXRpb246IEN1c3RvbWFyeURlY2xhcmF0aW9uPFQ+XG5cdCkge1xuXHRcdGNvbnN0IGhvb2tzID0gZGVjbGFyYXRpb24uaG9va3M/LnByb3BlcnRpZXM7XG5cdFx0Y29uc3QgaG9va3NBcnJheTogQXR0cmliW10gPSBob29rcyBpbnN0YW5jZW9mIEFycmF5ID8gaG9va3MgYXMgQXR0cmliW10gOiBbXTtcblx0XHRjb25zdCBob29rc1JlY29yZCA9IGhvb2tzICYmICEoaG9va3MgaW5zdGFuY2VvZiBBcnJheSkgPyBob29rcyA6IHt9O1xuXG5cdFx0Y29uc3QgZnJvbUFycmF5OiBzdHJpbmdbXSA9IGhvb2tzQXJyYXkubWFwKG8gPT4gby5uYW1lKTtcblx0XHRjb25zdCBmcm9tUmVjb3JkOiBzdHJpbmdbXSA9IE9iamVjdC5rZXlzKGhvb2tzUmVjb3JkKTtcblxuXHRcdGNvbnN0IG5hbWVzID0gWy4uLm5ldyBTZXQoWy4uLmZyb21BcnJheSwgLi4uZnJvbVJlY29yZF0pXTtcblxuXHRcdGZvciAoY29uc3Qga2V5IG9mIG5hbWVzKSB7XG5cdFx0XHRQcm9wZXJ0aWVzSW5qZWN0b3IuaW5qZWN0UHJvcGVydGllcyhjb25zdHJ1Y3Rvcixcblx0XHRcdFx0XHRob29rc0FycmF5LmZpbmQodmFsdWUgPT4gdmFsdWUubmFtZSA9PT0ga2V5KT8ucHJvcGVydHlEZWNsYXJhdGlvblxuXHRcdFx0XHRcdD8/IGhvb2tzUmVjb3JkW2tleV0sXG5cdFx0XHRcdFx0W2tleV0pO1xuXHRcdH1cblx0fVxufVxuXG50eXBlIEF0dHJpYiA9IHtuYW1lOiBzdHJpbmcsIHByb3BlcnR5RGVjbGFyYXRpb246IFByb3BlcnR5RGVjbGFyYXRpb259O1xuIiwiaW1wb3J0IHtMaXRFbGVtZW50fSBmcm9tIFwiI2N1c3RvbWFyeS9saXRcIjtcbmltcG9ydCB7TWl4aW5fYWRkRXZlbnRIYW5kbGVyc30gZnJvbSBcIiNjdXN0b21hcnkvZXZlbnRzL01peGluX2FkZEV2ZW50SGFuZGxlcnMuanNcIjtcbmltcG9ydCB7TWl4aW5fYWRvcHRTdHlsZVNoZWV0fSBmcm9tIFwiI2N1c3RvbWFyeS9zdHlsZS9NaXhpbl9hZG9wdFN0eWxlU2hlZXQuanNcIjtcbmltcG9ydCB7TWl4aW5fYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrfSBmcm9tIFwiI2N1c3RvbWFyeS9hdHRyaWJ1dGVzL01peGluX2F0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjay5qc1wiO1xuaW1wb3J0IHtNaXhpbl9jb25uZWN0ZWR9IGZyb20gXCIjY3VzdG9tYXJ5L2xpZmVjeWNsZS9jb25uZWN0ZWQvTWl4aW5fY29ubmVjdGVkLmpzXCI7XG5pbXBvcnQge01peGluX2Rpc2Nvbm5lY3RlZH0gZnJvbSBcIiNjdXN0b21hcnkvbGlmZWN5Y2xlL2Rpc2Nvbm5lY3RlZC9NaXhpbl9kaXNjb25uZWN0ZWQuanNcIjtcbmltcG9ydCB7TWl4aW5fZmlyc3RVcGRhdGVkfSBmcm9tIFwiI2N1c3RvbWFyeS9saWZlY3ljbGUvZmlyc3RVcGRhdGVkL01peGluX2ZpcnN0VXBkYXRlZC5qc1wiO1xuaW1wb3J0IHtNaXhpbl9yZW5kZXJGcm9tVGVtcGxhdGV9IGZyb20gXCIjY3VzdG9tYXJ5L3JlbmRlci9NaXhpbl9yZW5kZXJGcm9tVGVtcGxhdGUuanNcIjtcbmltcG9ydCB7TWl4aW5fc2xvdENoYW5nZX0gZnJvbSBcIiNjdXN0b21hcnkvc2xvdHMvTWl4aW5fc2xvdENoYW5nZS5qc1wiO1xuaW1wb3J0IHtNaXhpbl9zdGF0ZX0gZnJvbSBcIiNjdXN0b21hcnkvc3RhdGUvTWl4aW5fc3RhdGUuanNcIjtcbmltcG9ydCB7TWl4aW5fdXBkYXRlZH0gZnJvbSBcIiNjdXN0b21hcnkvbGlmZWN5Y2xlL3VwZGF0ZWQvTWl4aW5fdXBkYXRlZC5qc1wiO1xuaW1wb3J0IHtNaXhpbl93aWxsVXBkYXRlfSBmcm9tIFwiI2N1c3RvbWFyeS9saWZlY3ljbGUvd2lsbFVwZGF0ZS9NaXhpbl93aWxsVXBkYXRlLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBDdXN0b21hcnlFbGVtZW50XG5cdFx0ZXh0ZW5kc1xuXHRcdFx0XHRNaXhpbl9hZGRFdmVudEhhbmRsZXJzKFxuXHRcdFx0XHRNaXhpbl9hZG9wdFN0eWxlU2hlZXQoXG5cdFx0XHRcdE1peGluX2F0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhcblx0XHRcdFx0TWl4aW5fY29ubmVjdGVkKFxuXHRcdFx0XHRNaXhpbl9kaXNjb25uZWN0ZWQoXG5cdFx0XHRcdE1peGluX2ZpcnN0VXBkYXRlZChcblx0XHRcdFx0TWl4aW5fcmVuZGVyRnJvbVRlbXBsYXRlKFxuXHRcdFx0XHRNaXhpbl9zbG90Q2hhbmdlKFxuXHRcdFx0XHRNaXhpbl9zdGF0ZShcblx0XHRcdFx0TWl4aW5fdXBkYXRlZChcblx0XHRcdFx0TWl4aW5fd2lsbFVwZGF0ZShcblx0XHRcdFx0XHRcdExpdEVsZW1lbnRcblx0XHRcdFx0KSkpKSkpKSkpKSlcbntcblx0Y29uc3RydWN0b3IoKSB7XG5cdFx0dHJ5IHtcblx0XHRcdHN1cGVyKCk7XG5cdFx0fVxuXHRcdGNhdGNoIChlcnJvcikge1xuXHRcdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgVHlwZUVycm9yKSB7XG5cdFx0XHRcdGlmIChlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoXCJJbGxlZ2FsIGNvbnN0cnVjdG9yXCIpKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFxuXHRcdFx0XHRcdFx0XHRcIkN1c3RvbSBlbGVtZW50IG11c3QgYmUgZnVsbHkgZGVmaW5lZCBiZWZvcmUgeW91IGNhbiBpbnN0YW50aWF0ZSBpdC4gVHJ5IHRoaXM6XFxuXCIgK1xuXHRcdFx0XHRcdFx0XHRcIiAgICBhd2FpdCBDdXN0b21hcnkudW50aWxEZWZpbmVkKE15Q3VzdG9tRWxlbWVudCk7XFxuXCIgK1xuXHRcdFx0XHRcdFx0XHRcIiAgICBjb25zdCBlbGVtZW50ID0gbmV3IE15Q3VzdG9tRWxlbWVudCgpO1wiLFxuXHRcdFx0XHRcdFx0XHR7Y2F1c2U6IGVycm9yfVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHRocm93IGVycm9yO1xuXHRcdH1cblx0fVxufVxuIiwiaW1wb3J0IHtMaXRFbGVtZW50fSBmcm9tIFwibGl0LWVsZW1lbnQvbGl0LWVsZW1lbnQuanNcIjtcbmltcG9ydCB7aHRtbH0gZnJvbSBcImxpdC1odG1sXCI7XG5pbXBvcnQge21hcH0gZnJvbSAnbGl0LWh0bWwvZGlyZWN0aXZlcy9tYXAuanMnO1xuaW1wb3J0IHtjaG9vc2V9IGZyb20gJ2xpdC1odG1sL2RpcmVjdGl2ZXMvY2hvb3NlLmpzJztcbmltcG9ydCB7d2hlbn0gZnJvbSAnbGl0LWh0bWwvZGlyZWN0aXZlcy93aGVuLmpzJztcblxuZXhwb3J0IHtMaXRFbGVtZW50LCBodG1sLCBtYXAsIGNob29zZSwgd2hlbn07XG4iLCJpbXBvcnR7UmVhY3RpdmVFbGVtZW50IGFzIHR9ZnJvbVwiQGxpdC9yZWFjdGl2ZS1lbGVtZW50XCI7ZXhwb3J0KmZyb21cIkBsaXQvcmVhY3RpdmUtZWxlbWVudFwiO2ltcG9ydHtyZW5kZXIgYXMgZSxub0NoYW5nZSBhcyBzfWZyb21cImxpdC1odG1sXCI7ZXhwb3J0KmZyb21cImxpdC1odG1sXCI7XG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9jbGFzcyByIGV4dGVuZHMgdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5yZW5kZXJPcHRpb25zPXtob3N0OnRoaXN9LHRoaXMuXyREbz12b2lkIDB9Y3JlYXRlUmVuZGVyUm9vdCgpe2NvbnN0IHQ9c3VwZXIuY3JlYXRlUmVuZGVyUm9vdCgpO3JldHVybiB0aGlzLnJlbmRlck9wdGlvbnMucmVuZGVyQmVmb3JlPz89dC5maXJzdENoaWxkLHR9dXBkYXRlKHQpe2NvbnN0IHM9dGhpcy5yZW5kZXIoKTt0aGlzLmhhc1VwZGF0ZWR8fCh0aGlzLnJlbmRlck9wdGlvbnMuaXNDb25uZWN0ZWQ9dGhpcy5pc0Nvbm5lY3RlZCksc3VwZXIudXBkYXRlKHQpLHRoaXMuXyREbz1lKHMsdGhpcy5yZW5kZXJSb290LHRoaXMucmVuZGVyT3B0aW9ucyl9Y29ubmVjdGVkQ2FsbGJhY2soKXtzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpLHRoaXMuXyREbz8uc2V0Q29ubmVjdGVkKCEwKX1kaXNjb25uZWN0ZWRDYWxsYmFjaygpe3N1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCksdGhpcy5fJERvPy5zZXRDb25uZWN0ZWQoITEpfXJlbmRlcigpe3JldHVybiBzfX1yLl8kbGl0RWxlbWVudCQ9ITAscltcImZpbmFsaXplZFwiXT0hMCxnbG9iYWxUaGlzLmxpdEVsZW1lbnRIeWRyYXRlU3VwcG9ydD8uKHtMaXRFbGVtZW50OnJ9KTtjb25zdCBpPWdsb2JhbFRoaXMubGl0RWxlbWVudFBvbHlmaWxsU3VwcG9ydDtpPy4oe0xpdEVsZW1lbnQ6cn0pO2NvbnN0IG89e18kQUs6KHQsZSxzKT0+e3QuXyRBSyhlLHMpfSxfJEFMOnQ9PnQuXyRBTH07KGdsb2JhbFRoaXMubGl0RWxlbWVudFZlcnNpb25zPz89W10pLnB1c2goXCI0LjEuMVwiKTtleHBvcnR7ciBhcyBMaXRFbGVtZW50LG8gYXMgXyRMRX07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1saXQtZWxlbWVudC5qcy5tYXBcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBCU0QtMy1DbGF1c2VcbiAqL1xuXG4vKipcbiAqIFRoZSBtYWluIExpdEVsZW1lbnQgbW9kdWxlLCB3aGljaCBkZWZpbmVzIHRoZSB7QGxpbmtjb2RlIExpdEVsZW1lbnR9IGJhc2VcbiAqIGNsYXNzIGFuZCByZWxhdGVkIEFQSXMuXG4gKlxuICogTGl0RWxlbWVudCBjb21wb25lbnRzIGNhbiBkZWZpbmUgYSB0ZW1wbGF0ZSBhbmQgYSBzZXQgb2Ygb2JzZXJ2ZWRcbiAqIHByb3BlcnRpZXMuIENoYW5naW5nIGFuIG9ic2VydmVkIHByb3BlcnR5IHRyaWdnZXJzIGEgcmUtcmVuZGVyIG9mIHRoZVxuICogZWxlbWVudC5cbiAqXG4gKiBJbXBvcnQge0BsaW5rY29kZSBMaXRFbGVtZW50fSBhbmQge0BsaW5rY29kZSBodG1sfSBmcm9tIHRoaXMgbW9kdWxlIHRvXG4gKiBjcmVhdGUgYSBjb21wb25lbnQ6XG4gKlxuICogIGBgYGpzXG4gKiBpbXBvcnQge0xpdEVsZW1lbnQsIGh0bWx9IGZyb20gJ2xpdC1lbGVtZW50JztcbiAqXG4gKiBjbGFzcyBNeUVsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAqXG4gKiAgIC8vIERlY2xhcmUgb2JzZXJ2ZWQgcHJvcGVydGllc1xuICogICBzdGF0aWMgZ2V0IHByb3BlcnRpZXMoKSB7XG4gKiAgICAgcmV0dXJuIHtcbiAqICAgICAgIGFkamVjdGl2ZToge31cbiAqICAgICB9XG4gKiAgIH1cbiAqXG4gKiAgIGNvbnN0cnVjdG9yKCkge1xuICogICAgIHRoaXMuYWRqZWN0aXZlID0gJ2F3ZXNvbWUnO1xuICogICB9XG4gKlxuICogICAvLyBEZWZpbmUgdGhlIGVsZW1lbnQncyB0ZW1wbGF0ZVxuICogICByZW5kZXIoKSB7XG4gKiAgICAgcmV0dXJuIGh0bWxgPHA+eW91ciAke2FkamVjdGl2ZX0gdGVtcGxhdGUgaGVyZTwvcD5gO1xuICogICB9XG4gKiB9XG4gKlxuICogY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdteS1lbGVtZW50JywgTXlFbGVtZW50KTtcbiAqIGBgYFxuICpcbiAqIGBMaXRFbGVtZW50YCBleHRlbmRzIHtAbGlua2NvZGUgUmVhY3RpdmVFbGVtZW50fSBhbmQgYWRkcyBsaXQtaHRtbFxuICogdGVtcGxhdGluZy4gVGhlIGBSZWFjdGl2ZUVsZW1lbnRgIGNsYXNzIGlzIHByb3ZpZGVkIGZvciB1c2VycyB0aGF0IHdhbnQgdG9cbiAqIGJ1aWxkIHRoZWlyIG93biBjdXN0b20gZWxlbWVudCBiYXNlIGNsYXNzZXMgdGhhdCBkb24ndCB1c2UgbGl0LWh0bWwuXG4gKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKi9cbmltcG9ydCB7UHJvcGVydHlWYWx1ZXMsIFJlYWN0aXZlRWxlbWVudH0gZnJvbSAnQGxpdC9yZWFjdGl2ZS1lbGVtZW50JztcbmltcG9ydCB7cmVuZGVyLCBSZW5kZXJPcHRpb25zLCBub0NoYW5nZSwgUm9vdFBhcnR9IGZyb20gJ2xpdC1odG1sJztcbmV4cG9ydCAqIGZyb20gJ0BsaXQvcmVhY3RpdmUtZWxlbWVudCc7XG5leHBvcnQgKiBmcm9tICdsaXQtaHRtbCc7XG5cbmltcG9ydCB7TGl0VW5zdGFibGV9IGZyb20gJ2xpdC1odG1sJztcbmltcG9ydCB7UmVhY3RpdmVVbnN0YWJsZX0gZnJvbSAnQGxpdC9yZWFjdGl2ZS1lbGVtZW50JztcblxuLyoqXG4gKiBDb250YWlucyB0eXBlcyB0aGF0IGFyZSBwYXJ0IG9mIHRoZSB1bnN0YWJsZSBkZWJ1ZyBBUEkuXG4gKlxuICogRXZlcnl0aGluZyBpbiB0aGlzIEFQSSBpcyBub3Qgc3RhYmxlIGFuZCBtYXkgY2hhbmdlIG9yIGJlIHJlbW92ZWQgaW4gdGhlIGZ1dHVyZSxcbiAqIGV2ZW4gb24gcGF0Y2ggcmVsZWFzZXMuXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIFVuc3RhYmxlIHtcbiAgLyoqXG4gICAqIFdoZW4gTGl0IGlzIHJ1bm5pbmcgaW4gZGV2IG1vZGUgYW5kIGB3aW5kb3cuZW1pdExpdERlYnVnTG9nRXZlbnRzYCBpcyB0cnVlLFxuICAgKiB3ZSB3aWxsIGVtaXQgJ2xpdC1kZWJ1ZycgZXZlbnRzIHRvIHdpbmRvdywgd2l0aCBsaXZlIGRldGFpbHMgYWJvdXQgdGhlIHVwZGF0ZSBhbmQgcmVuZGVyXG4gICAqIGxpZmVjeWNsZS4gVGhlc2UgY2FuIGJlIHVzZWZ1bCBmb3Igd3JpdGluZyBkZWJ1ZyB0b29saW5nIGFuZCB2aXN1YWxpemF0aW9ucy5cbiAgICpcbiAgICogUGxlYXNlIGJlIGF3YXJlIHRoYXQgcnVubmluZyB3aXRoIHdpbmRvdy5lbWl0TGl0RGVidWdMb2dFdmVudHMgaGFzIHBlcmZvcm1hbmNlIG92ZXJoZWFkLFxuICAgKiBtYWtpbmcgY2VydGFpbiBvcGVyYXRpb25zIHRoYXQgYXJlIG5vcm1hbGx5IHZlcnkgY2hlYXAgKGxpa2UgYSBuby1vcCByZW5kZXIpIG11Y2ggc2xvd2VyLFxuICAgKiBiZWNhdXNlIHdlIG11c3QgY29weSBkYXRhIGFuZCBkaXNwYXRjaCBldmVudHMuXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuICBleHBvcnQgbmFtZXNwYWNlIERlYnVnTG9nIHtcbiAgICBleHBvcnQgdHlwZSBFbnRyeSA9XG4gICAgICB8IExpdFVuc3RhYmxlLkRlYnVnTG9nLkVudHJ5XG4gICAgICB8IFJlYWN0aXZlVW5zdGFibGUuRGVidWdMb2cuRW50cnk7XG4gIH1cbn1cbi8qXG4gKiBXaGVuIHVzaW5nIENsb3N1cmUgQ29tcGlsZXIsIEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkocHJvcGVydHksIG9iamVjdCkgaXNcbiAqIHJlcGxhY2VkIGF0IGNvbXBpbGUgdGltZSBieSB0aGUgbXVuZ2VkIG5hbWUgZm9yIG9iamVjdFtwcm9wZXJ0eV0uIFdlIGNhbm5vdFxuICogYWxpYXMgdGhpcyBmdW5jdGlvbiwgc28gd2UgaGF2ZSB0byB1c2UgYSBzbWFsbCBzaGltIHRoYXQgaGFzIHRoZSBzYW1lXG4gKiBiZWhhdmlvciB3aGVuIG5vdCBjb21waWxpbmcuXG4gKi9cbi8qQF9fSU5MSU5FX18qL1xuY29uc3QgSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSA9IDxQIGV4dGVuZHMgUHJvcGVydHlLZXk+KFxuICBwcm9wOiBQLFxuICBfb2JqOiB1bmtub3duXG4pOiBQID0+IHByb3A7XG5cbmNvbnN0IERFVl9NT0RFID0gdHJ1ZTtcblxubGV0IGlzc3VlV2FybmluZzogKGNvZGU6IHN0cmluZywgd2FybmluZzogc3RyaW5nKSA9PiB2b2lkO1xuXG5pZiAoREVWX01PREUpIHtcbiAgLy8gRW5zdXJlIHdhcm5pbmdzIGFyZSBpc3N1ZWQgb25seSAxeCwgZXZlbiBpZiBtdWx0aXBsZSB2ZXJzaW9ucyBvZiBMaXRcbiAgLy8gYXJlIGxvYWRlZC5cbiAgY29uc3QgaXNzdWVkV2FybmluZ3M6IFNldDxzdHJpbmcgfCB1bmRlZmluZWQ+ID1cbiAgICAoZ2xvYmFsVGhpcy5saXRJc3N1ZWRXYXJuaW5ncyA/Pz0gbmV3IFNldCgpKTtcblxuICAvLyBJc3N1ZSBhIHdhcm5pbmcsIGlmIHdlIGhhdmVuJ3QgYWxyZWFkeS5cbiAgaXNzdWVXYXJuaW5nID0gKGNvZGU6IHN0cmluZywgd2FybmluZzogc3RyaW5nKSA9PiB7XG4gICAgd2FybmluZyArPSBgIFNlZSBodHRwczovL2xpdC5kZXYvbXNnLyR7Y29kZX0gZm9yIG1vcmUgaW5mb3JtYXRpb24uYDtcbiAgICBpZiAoIWlzc3VlZFdhcm5pbmdzLmhhcyh3YXJuaW5nKSkge1xuICAgICAgY29uc29sZS53YXJuKHdhcm5pbmcpO1xuICAgICAgaXNzdWVkV2FybmluZ3MuYWRkKHdhcm5pbmcpO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBCYXNlIGVsZW1lbnQgY2xhc3MgdGhhdCBtYW5hZ2VzIGVsZW1lbnQgcHJvcGVydGllcyBhbmQgYXR0cmlidXRlcywgYW5kXG4gKiByZW5kZXJzIGEgbGl0LWh0bWwgdGVtcGxhdGUuXG4gKlxuICogVG8gZGVmaW5lIGEgY29tcG9uZW50LCBzdWJjbGFzcyBgTGl0RWxlbWVudGAgYW5kIGltcGxlbWVudCBhXG4gKiBgcmVuZGVyYCBtZXRob2QgdG8gcHJvdmlkZSB0aGUgY29tcG9uZW50J3MgdGVtcGxhdGUuIERlZmluZSBwcm9wZXJ0aWVzXG4gKiB1c2luZyB0aGUge0BsaW5rY29kZSBMaXRFbGVtZW50LnByb3BlcnRpZXMgcHJvcGVydGllc30gcHJvcGVydHkgb3IgdGhlXG4gKiB7QGxpbmtjb2RlIHByb3BlcnR5fSBkZWNvcmF0b3IuXG4gKi9cbmV4cG9ydCBjbGFzcyBMaXRFbGVtZW50IGV4dGVuZHMgUmVhY3RpdmVFbGVtZW50IHtcbiAgLy8gVGhpcyBwcm9wZXJ0eSBuZWVkcyB0byByZW1haW4gdW5taW5pZmllZC5cbiAgc3RhdGljIFsnXyRsaXRFbGVtZW50JCddID0gdHJ1ZTtcblxuICAvKipcbiAgICogQGNhdGVnb3J5IHJlbmRlcmluZ1xuICAgKi9cbiAgcmVhZG9ubHkgcmVuZGVyT3B0aW9uczogUmVuZGVyT3B0aW9ucyA9IHtob3N0OiB0aGlzfTtcblxuICBwcml2YXRlIF9fY2hpbGRQYXJ0OiBSb290UGFydCB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogQGNhdGVnb3J5IHJlbmRlcmluZ1xuICAgKi9cbiAgcHJvdGVjdGVkIG92ZXJyaWRlIGNyZWF0ZVJlbmRlclJvb3QoKSB7XG4gICAgY29uc3QgcmVuZGVyUm9vdCA9IHN1cGVyLmNyZWF0ZVJlbmRlclJvb3QoKTtcbiAgICAvLyBXaGVuIGFkb3B0ZWRTdHlsZVNoZWV0cyBhcmUgc2hpbW1lZCwgdGhleSBhcmUgaW5zZXJ0ZWQgaW50byB0aGVcbiAgICAvLyBzaGFkb3dSb290IGJ5IGNyZWF0ZVJlbmRlclJvb3QuIEFkanVzdCB0aGUgcmVuZGVyQmVmb3JlIG5vZGUgc28gdGhhdFxuICAgIC8vIGFueSBzdHlsZXMgaW4gTGl0IGNvbnRlbnQgcmVuZGVyIGJlZm9yZSBhZG9wdGVkU3R5bGVTaGVldHMuIFRoaXMgaXNcbiAgICAvLyBpbXBvcnRhbnQgc28gdGhhdCBhZG9wdGVkU3R5bGVTaGVldHMgaGF2ZSBwcmVjZWRlbmNlIG92ZXIgc3R5bGVzIGluXG4gICAgLy8gdGhlIHNoYWRvd1Jvb3QuXG4gICAgdGhpcy5yZW5kZXJPcHRpb25zLnJlbmRlckJlZm9yZSA/Pz0gcmVuZGVyUm9vdCEuZmlyc3RDaGlsZCBhcyBDaGlsZE5vZGU7XG4gICAgcmV0dXJuIHJlbmRlclJvb3Q7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgZWxlbWVudC4gVGhpcyBtZXRob2QgcmVmbGVjdHMgcHJvcGVydHkgdmFsdWVzIHRvIGF0dHJpYnV0ZXNcbiAgICogYW5kIGNhbGxzIGByZW5kZXJgIHRvIHJlbmRlciBET00gdmlhIGxpdC1odG1sLiBTZXR0aW5nIHByb3BlcnRpZXMgaW5zaWRlXG4gICAqIHRoaXMgbWV0aG9kIHdpbGwgKm5vdCogdHJpZ2dlciBhbm90aGVyIHVwZGF0ZS5cbiAgICogQHBhcmFtIGNoYW5nZWRQcm9wZXJ0aWVzIE1hcCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgd2l0aCBvbGQgdmFsdWVzXG4gICAqIEBjYXRlZ29yeSB1cGRhdGVzXG4gICAqL1xuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdXBkYXRlKGNoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlcykge1xuICAgIC8vIFNldHRpbmcgcHJvcGVydGllcyBpbiBgcmVuZGVyYCBzaG91bGQgbm90IHRyaWdnZXIgYW4gdXBkYXRlLiBTaW5jZVxuICAgIC8vIHVwZGF0ZXMgYXJlIGFsbG93ZWQgYWZ0ZXIgc3VwZXIudXBkYXRlLCBpdCdzIGltcG9ydGFudCB0byBjYWxsIGByZW5kZXJgXG4gICAgLy8gYmVmb3JlIHRoYXQuXG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLnJlbmRlcigpO1xuICAgIGlmICghdGhpcy5oYXNVcGRhdGVkKSB7XG4gICAgICB0aGlzLnJlbmRlck9wdGlvbnMuaXNDb25uZWN0ZWQgPSB0aGlzLmlzQ29ubmVjdGVkO1xuICAgIH1cbiAgICBzdXBlci51cGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgIHRoaXMuX19jaGlsZFBhcnQgPSByZW5kZXIodmFsdWUsIHRoaXMucmVuZGVyUm9vdCwgdGhpcy5yZW5kZXJPcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBhZGRlZCB0byB0aGUgZG9jdW1lbnQncyBET00uXG4gICAqXG4gICAqIEluIGBjb25uZWN0ZWRDYWxsYmFjaygpYCB5b3Ugc2hvdWxkIHNldHVwIHRhc2tzIHRoYXQgc2hvdWxkIG9ubHkgb2NjdXIgd2hlblxuICAgKiB0aGUgZWxlbWVudCBpcyBjb25uZWN0ZWQgdG8gdGhlIGRvY3VtZW50LiBUaGUgbW9zdCBjb21tb24gb2YgdGhlc2UgaXNcbiAgICogYWRkaW5nIGV2ZW50IGxpc3RlbmVycyB0byBub2RlcyBleHRlcm5hbCB0byB0aGUgZWxlbWVudCwgbGlrZSBhIGtleWRvd25cbiAgICogZXZlbnQgaGFuZGxlciBhZGRlZCB0byB0aGUgd2luZG93LlxuICAgKlxuICAgKiBgYGB0c1xuICAgKiBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICogICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgKiAgIGFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVLZXlkb3duKTtcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogVHlwaWNhbGx5LCBhbnl0aGluZyBkb25lIGluIGBjb25uZWN0ZWRDYWxsYmFjaygpYCBzaG91bGQgYmUgdW5kb25lIHdoZW4gdGhlXG4gICAqIGVsZW1lbnQgaXMgZGlzY29ubmVjdGVkLCBpbiBgZGlzY29ubmVjdGVkQ2FsbGJhY2soKWAuXG4gICAqXG4gICAqIEBjYXRlZ29yeSBsaWZlY3ljbGVcbiAgICovXG4gIG92ZXJyaWRlIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgdGhpcy5fX2NoaWxkUGFydD8uc2V0Q29ubmVjdGVkKHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIHJlbW92ZWQgZnJvbSB0aGUgZG9jdW1lbnQncyBET00uXG4gICAqXG4gICAqIFRoaXMgY2FsbGJhY2sgaXMgdGhlIG1haW4gc2lnbmFsIHRvIHRoZSBlbGVtZW50IHRoYXQgaXQgbWF5IG5vIGxvbmdlciBiZVxuICAgKiB1c2VkLiBgZGlzY29ubmVjdGVkQ2FsbGJhY2soKWAgc2hvdWxkIGVuc3VyZSB0aGF0IG5vdGhpbmcgaXMgaG9sZGluZyBhXG4gICAqIHJlZmVyZW5jZSB0byB0aGUgZWxlbWVudCAoc3VjaCBhcyBldmVudCBsaXN0ZW5lcnMgYWRkZWQgdG8gbm9kZXMgZXh0ZXJuYWxcbiAgICogdG8gdGhlIGVsZW1lbnQpLCBzbyB0aGF0IGl0IGlzIGZyZWUgdG8gYmUgZ2FyYmFnZSBjb2xsZWN0ZWQuXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgKiAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAqICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVLZXlkb3duKTtcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogQW4gZWxlbWVudCBtYXkgYmUgcmUtY29ubmVjdGVkIGFmdGVyIGJlaW5nIGRpc2Nvbm5lY3RlZC5cbiAgICpcbiAgICogQGNhdGVnb3J5IGxpZmVjeWNsZVxuICAgKi9cbiAgb3ZlcnJpZGUgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB0aGlzLl9fY2hpbGRQYXJ0Py5zZXRDb25uZWN0ZWQoZmFsc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEludm9rZWQgb24gZWFjaCB1cGRhdGUgdG8gcGVyZm9ybSByZW5kZXJpbmcgdGFza3MuIFRoaXMgbWV0aG9kIG1heSByZXR1cm5cbiAgICogYW55IHZhbHVlIHJlbmRlcmFibGUgYnkgbGl0LWh0bWwncyBgQ2hpbGRQYXJ0YCAtIHR5cGljYWxseSBhXG4gICAqIGBUZW1wbGF0ZVJlc3VsdGAuIFNldHRpbmcgcHJvcGVydGllcyBpbnNpZGUgdGhpcyBtZXRob2Qgd2lsbCAqbm90KiB0cmlnZ2VyXG4gICAqIHRoZSBlbGVtZW50IHRvIHVwZGF0ZS5cbiAgICogQGNhdGVnb3J5IHJlbmRlcmluZ1xuICAgKi9cbiAgcHJvdGVjdGVkIHJlbmRlcigpOiB1bmtub3duIHtcbiAgICByZXR1cm4gbm9DaGFuZ2U7XG4gIH1cbn1cblxuLyoqXG4gKiBFbnN1cmUgdGhpcyBjbGFzcyBpcyBtYXJrZWQgYXMgYGZpbmFsaXplZGAgYXMgYW4gb3B0aW1pemF0aW9uIGVuc3VyaW5nXG4gKiBpdCB3aWxsIG5vdCBuZWVkbGVzc2x5IHRyeSB0byBgZmluYWxpemVgLlxuICpcbiAqIE5vdGUgdGhpcyBwcm9wZXJ0eSBuYW1lIGlzIGEgc3RyaW5nIHRvIHByZXZlbnQgYnJlYWtpbmcgQ2xvc3VyZSBKUyBDb21waWxlclxuICogb3B0aW1pemF0aW9ucy4gU2VlIEBsaXQvcmVhY3RpdmUtZWxlbWVudCBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqL1xuKExpdEVsZW1lbnQgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPilbXG4gIEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ2ZpbmFsaXplZCcsIExpdEVsZW1lbnQpXG5dID0gdHJ1ZTtcblxuLy8gSW5zdGFsbCBoeWRyYXRpb24gaWYgYXZhaWxhYmxlXG5nbG9iYWxUaGlzLmxpdEVsZW1lbnRIeWRyYXRlU3VwcG9ydD8uKHtMaXRFbGVtZW50fSk7XG5cbi8vIEFwcGx5IHBvbHlmaWxscyBpZiBhdmFpbGFibGVcbmNvbnN0IHBvbHlmaWxsU3VwcG9ydCA9IERFVl9NT0RFXG4gID8gZ2xvYmFsVGhpcy5saXRFbGVtZW50UG9seWZpbGxTdXBwb3J0RGV2TW9kZVxuICA6IGdsb2JhbFRoaXMubGl0RWxlbWVudFBvbHlmaWxsU3VwcG9ydDtcbnBvbHlmaWxsU3VwcG9ydD8uKHtMaXRFbGVtZW50fSk7XG5cbi8qKlxuICogRU5EIFVTRVJTIFNIT1VMRCBOT1QgUkVMWSBPTiBUSElTIE9CSkVDVC5cbiAqXG4gKiBQcml2YXRlIGV4cG9ydHMgZm9yIHVzZSBieSBvdGhlciBMaXQgcGFja2FnZXMsIG5vdCBpbnRlbmRlZCBmb3IgdXNlIGJ5XG4gKiBleHRlcm5hbCB1c2Vycy5cbiAqXG4gKiBXZSBjdXJyZW50bHkgZG8gbm90IG1ha2UgYSBtYW5nbGVkIHJvbGx1cCBidWlsZCBvZiB0aGUgbGl0LXNzciBjb2RlLiBJbiBvcmRlclxuICogdG8ga2VlcCBhIG51bWJlciBvZiAob3RoZXJ3aXNlIHByaXZhdGUpIHRvcC1sZXZlbCBleHBvcnRzICBtYW5nbGVkIGluIHRoZVxuICogY2xpZW50IHNpZGUgY29kZSwgd2UgZXhwb3J0IGEgXyRMRSBvYmplY3QgY29udGFpbmluZyB0aG9zZSBtZW1iZXJzIChvclxuICogaGVscGVyIG1ldGhvZHMgZm9yIGFjY2Vzc2luZyBwcml2YXRlIGZpZWxkcyBvZiB0aG9zZSBtZW1iZXJzKSwgYW5kIHRoZW5cbiAqIHJlLWV4cG9ydCB0aGVtIGZvciB1c2UgaW4gbGl0LXNzci4gVGhpcyBrZWVwcyBsaXQtc3NyIGFnbm9zdGljIHRvIHdoZXRoZXIgdGhlXG4gKiBjbGllbnQtc2lkZSBjb2RlIGlzIGJlaW5nIHVzZWQgaW4gYGRldmAgbW9kZSBvciBgcHJvZGAgbW9kZS5cbiAqXG4gKiBUaGlzIGhhcyBhIHVuaXF1ZSBuYW1lLCB0byBkaXNhbWJpZ3VhdGUgaXQgZnJvbSBwcml2YXRlIGV4cG9ydHMgaW5cbiAqIGxpdC1odG1sLCBzaW5jZSB0aGlzIG1vZHVsZSByZS1leHBvcnRzIGFsbCBvZiBsaXQtaHRtbC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY29uc3QgXyRMRSA9IHtcbiAgXyRhdHRyaWJ1dGVUb1Byb3BlcnR5OiAoXG4gICAgZWw6IExpdEVsZW1lbnQsXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIHZhbHVlOiBzdHJpbmcgfCBudWxsXG4gICkgPT4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgIChlbCBhcyBhbnkpLl8kYXR0cmlidXRlVG9Qcm9wZXJ0eShuYW1lLCB2YWx1ZSk7XG4gIH0sXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICBfJGNoYW5nZWRQcm9wZXJ0aWVzOiAoZWw6IExpdEVsZW1lbnQpID0+IChlbCBhcyBhbnkpLl8kY2hhbmdlZFByb3BlcnRpZXMsXG59O1xuXG4vLyBJTVBPUlRBTlQ6IGRvIG5vdCBjaGFuZ2UgdGhlIHByb3BlcnR5IG5hbWUgb3IgdGhlIGFzc2lnbm1lbnQgZXhwcmVzc2lvbi5cbi8vIFRoaXMgbGluZSB3aWxsIGJlIHVzZWQgaW4gcmVnZXhlcyB0byBzZWFyY2ggZm9yIExpdEVsZW1lbnQgdXNhZ2UuXG4oZ2xvYmFsVGhpcy5saXRFbGVtZW50VmVyc2lvbnMgPz89IFtdKS5wdXNoKCc0LjEuMScpO1xuaWYgKERFVl9NT0RFICYmIGdsb2JhbFRoaXMubGl0RWxlbWVudFZlcnNpb25zLmxlbmd0aCA+IDEpIHtcbiAgaXNzdWVXYXJuaW5nIShcbiAgICAnbXVsdGlwbGUtdmVyc2lvbnMnLFxuICAgIGBNdWx0aXBsZSB2ZXJzaW9ucyBvZiBMaXQgbG9hZGVkLiBMb2FkaW5nIG11bHRpcGxlIHZlcnNpb25zIGAgK1xuICAgICAgYGlzIG5vdCByZWNvbW1lbmRlZC5gXG4gICk7XG59XG4iLCJpbXBvcnR7Z2V0Q29tcGF0aWJsZVN0eWxlIGFzIHQsYWRvcHRTdHlsZXMgYXMgc31mcm9tXCIuL2Nzcy10YWcuanNcIjtleHBvcnR7Q1NTUmVzdWx0LGFkb3B0U3R5bGVzLGNzcyxnZXRDb21wYXRpYmxlU3R5bGUsc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzLHVuc2FmZUNTU31mcm9tXCIuL2Nzcy10YWcuanNcIjtcbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBCU0QtMy1DbGF1c2VcbiAqL2NvbnN0e2lzOmksZGVmaW5lUHJvcGVydHk6ZSxnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6cixnZXRPd25Qcm9wZXJ0eU5hbWVzOmgsZ2V0T3duUHJvcGVydHlTeW1ib2xzOm8sZ2V0UHJvdG90eXBlT2Y6bn09T2JqZWN0LGE9Z2xvYmFsVGhpcyxjPWEudHJ1c3RlZFR5cGVzLGw9Yz9jLmVtcHR5U2NyaXB0OlwiXCIscD1hLnJlYWN0aXZlRWxlbWVudFBvbHlmaWxsU3VwcG9ydCxkPSh0LHMpPT50LHU9e3RvQXR0cmlidXRlKHQscyl7c3dpdGNoKHMpe2Nhc2UgQm9vbGVhbjp0PXQ/bDpudWxsO2JyZWFrO2Nhc2UgT2JqZWN0OmNhc2UgQXJyYXk6dD1udWxsPT10P3Q6SlNPTi5zdHJpbmdpZnkodCl9cmV0dXJuIHR9LGZyb21BdHRyaWJ1dGUodCxzKXtsZXQgaT10O3N3aXRjaChzKXtjYXNlIEJvb2xlYW46aT1udWxsIT09dDticmVhaztjYXNlIE51bWJlcjppPW51bGw9PT10P251bGw6TnVtYmVyKHQpO2JyZWFrO2Nhc2UgT2JqZWN0OmNhc2UgQXJyYXk6dHJ5e2k9SlNPTi5wYXJzZSh0KX1jYXRjaCh0KXtpPW51bGx9fXJldHVybiBpfX0sZj0odCxzKT0+IWkodCxzKSx5PXthdHRyaWJ1dGU6ITAsdHlwZTpTdHJpbmcsY29udmVydGVyOnUscmVmbGVjdDohMSxoYXNDaGFuZ2VkOmZ9O1N5bWJvbC5tZXRhZGF0YT8/PVN5bWJvbChcIm1ldGFkYXRhXCIpLGEubGl0UHJvcGVydHlNZXRhZGF0YT8/PW5ldyBXZWFrTWFwO2NsYXNzIGIgZXh0ZW5kcyBIVE1MRWxlbWVudHtzdGF0aWMgYWRkSW5pdGlhbGl6ZXIodCl7dGhpcy5fJEVpKCksKHRoaXMubD8/PVtdKS5wdXNoKHQpfXN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCl7cmV0dXJuIHRoaXMuZmluYWxpemUoKSx0aGlzLl8kRWgmJlsuLi50aGlzLl8kRWgua2V5cygpXX1zdGF0aWMgY3JlYXRlUHJvcGVydHkodCxzPXkpe2lmKHMuc3RhdGUmJihzLmF0dHJpYnV0ZT0hMSksdGhpcy5fJEVpKCksdGhpcy5lbGVtZW50UHJvcGVydGllcy5zZXQodCxzKSwhcy5ub0FjY2Vzc29yKXtjb25zdCBpPVN5bWJvbCgpLHI9dGhpcy5nZXRQcm9wZXJ0eURlc2NyaXB0b3IodCxpLHMpO3ZvaWQgMCE9PXImJmUodGhpcy5wcm90b3R5cGUsdCxyKX19c3RhdGljIGdldFByb3BlcnR5RGVzY3JpcHRvcih0LHMsaSl7Y29uc3R7Z2V0OmUsc2V0Omh9PXIodGhpcy5wcm90b3R5cGUsdCk/P3tnZXQoKXtyZXR1cm4gdGhpc1tzXX0sc2V0KHQpe3RoaXNbc109dH19O3JldHVybntnZXQoKXtyZXR1cm4gZT8uY2FsbCh0aGlzKX0sc2V0KHMpe2NvbnN0IHI9ZT8uY2FsbCh0aGlzKTtoLmNhbGwodGhpcyxzKSx0aGlzLnJlcXVlc3RVcGRhdGUodCxyLGkpfSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH19c3RhdGljIGdldFByb3BlcnR5T3B0aW9ucyh0KXtyZXR1cm4gdGhpcy5lbGVtZW50UHJvcGVydGllcy5nZXQodCk/P3l9c3RhdGljIF8kRWkoKXtpZih0aGlzLmhhc093blByb3BlcnR5KGQoXCJlbGVtZW50UHJvcGVydGllc1wiKSkpcmV0dXJuO2NvbnN0IHQ9bih0aGlzKTt0LmZpbmFsaXplKCksdm9pZCAwIT09dC5sJiYodGhpcy5sPVsuLi50LmxdKSx0aGlzLmVsZW1lbnRQcm9wZXJ0aWVzPW5ldyBNYXAodC5lbGVtZW50UHJvcGVydGllcyl9c3RhdGljIGZpbmFsaXplKCl7aWYodGhpcy5oYXNPd25Qcm9wZXJ0eShkKFwiZmluYWxpemVkXCIpKSlyZXR1cm47aWYodGhpcy5maW5hbGl6ZWQ9ITAsdGhpcy5fJEVpKCksdGhpcy5oYXNPd25Qcm9wZXJ0eShkKFwicHJvcGVydGllc1wiKSkpe2NvbnN0IHQ9dGhpcy5wcm9wZXJ0aWVzLHM9Wy4uLmgodCksLi4ubyh0KV07Zm9yKGNvbnN0IGkgb2Ygcyl0aGlzLmNyZWF0ZVByb3BlcnR5KGksdFtpXSl9Y29uc3QgdD10aGlzW1N5bWJvbC5tZXRhZGF0YV07aWYobnVsbCE9PXQpe2NvbnN0IHM9bGl0UHJvcGVydHlNZXRhZGF0YS5nZXQodCk7aWYodm9pZCAwIT09cylmb3IoY29uc3RbdCxpXW9mIHMpdGhpcy5lbGVtZW50UHJvcGVydGllcy5zZXQodCxpKX10aGlzLl8kRWg9bmV3IE1hcDtmb3IoY29uc3RbdCxzXW9mIHRoaXMuZWxlbWVudFByb3BlcnRpZXMpe2NvbnN0IGk9dGhpcy5fJEV1KHQscyk7dm9pZCAwIT09aSYmdGhpcy5fJEVoLnNldChpLHQpfXRoaXMuZWxlbWVudFN0eWxlcz10aGlzLmZpbmFsaXplU3R5bGVzKHRoaXMuc3R5bGVzKX1zdGF0aWMgZmluYWxpemVTdHlsZXMocyl7Y29uc3QgaT1bXTtpZihBcnJheS5pc0FycmF5KHMpKXtjb25zdCBlPW5ldyBTZXQocy5mbGF0KDEvMCkucmV2ZXJzZSgpKTtmb3IoY29uc3QgcyBvZiBlKWkudW5zaGlmdCh0KHMpKX1lbHNlIHZvaWQgMCE9PXMmJmkucHVzaCh0KHMpKTtyZXR1cm4gaX1zdGF0aWMgXyRFdSh0LHMpe2NvbnN0IGk9cy5hdHRyaWJ1dGU7cmV0dXJuITE9PT1pP3ZvaWQgMDpcInN0cmluZ1wiPT10eXBlb2YgaT9pOlwic3RyaW5nXCI9PXR5cGVvZiB0P3QudG9Mb3dlckNhc2UoKTp2b2lkIDB9Y29uc3RydWN0b3IoKXtzdXBlcigpLHRoaXMuXyRFcD12b2lkIDAsdGhpcy5pc1VwZGF0ZVBlbmRpbmc9ITEsdGhpcy5oYXNVcGRhdGVkPSExLHRoaXMuXyRFbT1udWxsLHRoaXMuXyRFdigpfV8kRXYoKXt0aGlzLl8kRVM9bmV3IFByb21pc2UoKHQ9PnRoaXMuZW5hYmxlVXBkYXRpbmc9dCkpLHRoaXMuXyRBTD1uZXcgTWFwLHRoaXMuXyRFXygpLHRoaXMucmVxdWVzdFVwZGF0ZSgpLHRoaXMuY29uc3RydWN0b3IubD8uZm9yRWFjaCgodD0+dCh0aGlzKSkpfWFkZENvbnRyb2xsZXIodCl7KHRoaXMuXyRFTz8/PW5ldyBTZXQpLmFkZCh0KSx2b2lkIDAhPT10aGlzLnJlbmRlclJvb3QmJnRoaXMuaXNDb25uZWN0ZWQmJnQuaG9zdENvbm5lY3RlZD8uKCl9cmVtb3ZlQ29udHJvbGxlcih0KXt0aGlzLl8kRU8/LmRlbGV0ZSh0KX1fJEVfKCl7Y29uc3QgdD1uZXcgTWFwLHM9dGhpcy5jb25zdHJ1Y3Rvci5lbGVtZW50UHJvcGVydGllcztmb3IoY29uc3QgaSBvZiBzLmtleXMoKSl0aGlzLmhhc093blByb3BlcnR5KGkpJiYodC5zZXQoaSx0aGlzW2ldKSxkZWxldGUgdGhpc1tpXSk7dC5zaXplPjAmJih0aGlzLl8kRXA9dCl9Y3JlYXRlUmVuZGVyUm9vdCgpe2NvbnN0IHQ9dGhpcy5zaGFkb3dSb290Pz90aGlzLmF0dGFjaFNoYWRvdyh0aGlzLmNvbnN0cnVjdG9yLnNoYWRvd1Jvb3RPcHRpb25zKTtyZXR1cm4gcyh0LHRoaXMuY29uc3RydWN0b3IuZWxlbWVudFN0eWxlcyksdH1jb25uZWN0ZWRDYWxsYmFjaygpe3RoaXMucmVuZGVyUm9vdD8/PXRoaXMuY3JlYXRlUmVuZGVyUm9vdCgpLHRoaXMuZW5hYmxlVXBkYXRpbmcoITApLHRoaXMuXyRFTz8uZm9yRWFjaCgodD0+dC5ob3N0Q29ubmVjdGVkPy4oKSkpfWVuYWJsZVVwZGF0aW5nKHQpe31kaXNjb25uZWN0ZWRDYWxsYmFjaygpe3RoaXMuXyRFTz8uZm9yRWFjaCgodD0+dC5ob3N0RGlzY29ubmVjdGVkPy4oKSkpfWF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayh0LHMsaSl7dGhpcy5fJEFLKHQsaSl9XyRFQyh0LHMpe2NvbnN0IGk9dGhpcy5jb25zdHJ1Y3Rvci5lbGVtZW50UHJvcGVydGllcy5nZXQodCksZT10aGlzLmNvbnN0cnVjdG9yLl8kRXUodCxpKTtpZih2b2lkIDAhPT1lJiYhMD09PWkucmVmbGVjdCl7Y29uc3Qgcj0odm9pZCAwIT09aS5jb252ZXJ0ZXI/LnRvQXR0cmlidXRlP2kuY29udmVydGVyOnUpLnRvQXR0cmlidXRlKHMsaS50eXBlKTt0aGlzLl8kRW09dCxudWxsPT1yP3RoaXMucmVtb3ZlQXR0cmlidXRlKGUpOnRoaXMuc2V0QXR0cmlidXRlKGUsciksdGhpcy5fJEVtPW51bGx9fV8kQUsodCxzKXtjb25zdCBpPXRoaXMuY29uc3RydWN0b3IsZT1pLl8kRWguZ2V0KHQpO2lmKHZvaWQgMCE9PWUmJnRoaXMuXyRFbSE9PWUpe2NvbnN0IHQ9aS5nZXRQcm9wZXJ0eU9wdGlvbnMoZSkscj1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0LmNvbnZlcnRlcj97ZnJvbUF0dHJpYnV0ZTp0LmNvbnZlcnRlcn06dm9pZCAwIT09dC5jb252ZXJ0ZXI/LmZyb21BdHRyaWJ1dGU/dC5jb252ZXJ0ZXI6dTt0aGlzLl8kRW09ZSx0aGlzW2VdPXIuZnJvbUF0dHJpYnV0ZShzLHQudHlwZSksdGhpcy5fJEVtPW51bGx9fXJlcXVlc3RVcGRhdGUodCxzLGkpe2lmKHZvaWQgMCE9PXQpe2lmKGk/Pz10aGlzLmNvbnN0cnVjdG9yLmdldFByb3BlcnR5T3B0aW9ucyh0KSwhKGkuaGFzQ2hhbmdlZD8/ZikodGhpc1t0XSxzKSlyZXR1cm47dGhpcy5QKHQscyxpKX0hMT09PXRoaXMuaXNVcGRhdGVQZW5kaW5nJiYodGhpcy5fJEVTPXRoaXMuXyRFVCgpKX1QKHQscyxpKXt0aGlzLl8kQUwuaGFzKHQpfHx0aGlzLl8kQUwuc2V0KHQscyksITA9PT1pLnJlZmxlY3QmJnRoaXMuXyRFbSE9PXQmJih0aGlzLl8kRWo/Pz1uZXcgU2V0KS5hZGQodCl9YXN5bmMgXyRFVCgpe3RoaXMuaXNVcGRhdGVQZW5kaW5nPSEwO3RyeXthd2FpdCB0aGlzLl8kRVN9Y2F0Y2godCl7UHJvbWlzZS5yZWplY3QodCl9Y29uc3QgdD10aGlzLnNjaGVkdWxlVXBkYXRlKCk7cmV0dXJuIG51bGwhPXQmJmF3YWl0IHQsIXRoaXMuaXNVcGRhdGVQZW5kaW5nfXNjaGVkdWxlVXBkYXRlKCl7cmV0dXJuIHRoaXMucGVyZm9ybVVwZGF0ZSgpfXBlcmZvcm1VcGRhdGUoKXtpZighdGhpcy5pc1VwZGF0ZVBlbmRpbmcpcmV0dXJuO2lmKCF0aGlzLmhhc1VwZGF0ZWQpe2lmKHRoaXMucmVuZGVyUm9vdD8/PXRoaXMuY3JlYXRlUmVuZGVyUm9vdCgpLHRoaXMuXyRFcCl7Zm9yKGNvbnN0W3Qsc11vZiB0aGlzLl8kRXApdGhpc1t0XT1zO3RoaXMuXyRFcD12b2lkIDB9Y29uc3QgdD10aGlzLmNvbnN0cnVjdG9yLmVsZW1lbnRQcm9wZXJ0aWVzO2lmKHQuc2l6ZT4wKWZvcihjb25zdFtzLGldb2YgdCkhMCE9PWkud3JhcHBlZHx8dGhpcy5fJEFMLmhhcyhzKXx8dm9pZCAwPT09dGhpc1tzXXx8dGhpcy5QKHMsdGhpc1tzXSxpKX1sZXQgdD0hMTtjb25zdCBzPXRoaXMuXyRBTDt0cnl7dD10aGlzLnNob3VsZFVwZGF0ZShzKSx0Pyh0aGlzLndpbGxVcGRhdGUocyksdGhpcy5fJEVPPy5mb3JFYWNoKCh0PT50Lmhvc3RVcGRhdGU/LigpKSksdGhpcy51cGRhdGUocykpOnRoaXMuXyRFVSgpfWNhdGNoKHMpe3Rocm93IHQ9ITEsdGhpcy5fJEVVKCksc310JiZ0aGlzLl8kQUUocyl9d2lsbFVwZGF0ZSh0KXt9XyRBRSh0KXt0aGlzLl8kRU8/LmZvckVhY2goKHQ9PnQuaG9zdFVwZGF0ZWQ/LigpKSksdGhpcy5oYXNVcGRhdGVkfHwodGhpcy5oYXNVcGRhdGVkPSEwLHRoaXMuZmlyc3RVcGRhdGVkKHQpKSx0aGlzLnVwZGF0ZWQodCl9XyRFVSgpe3RoaXMuXyRBTD1uZXcgTWFwLHRoaXMuaXNVcGRhdGVQZW5kaW5nPSExfWdldCB1cGRhdGVDb21wbGV0ZSgpe3JldHVybiB0aGlzLmdldFVwZGF0ZUNvbXBsZXRlKCl9Z2V0VXBkYXRlQ29tcGxldGUoKXtyZXR1cm4gdGhpcy5fJEVTfXNob3VsZFVwZGF0ZSh0KXtyZXR1cm4hMH11cGRhdGUodCl7dGhpcy5fJEVqJiY9dGhpcy5fJEVqLmZvckVhY2goKHQ9PnRoaXMuXyRFQyh0LHRoaXNbdF0pKSksdGhpcy5fJEVVKCl9dXBkYXRlZCh0KXt9Zmlyc3RVcGRhdGVkKHQpe319Yi5lbGVtZW50U3R5bGVzPVtdLGIuc2hhZG93Um9vdE9wdGlvbnM9e21vZGU6XCJvcGVuXCJ9LGJbZChcImVsZW1lbnRQcm9wZXJ0aWVzXCIpXT1uZXcgTWFwLGJbZChcImZpbmFsaXplZFwiKV09bmV3IE1hcCxwPy4oe1JlYWN0aXZlRWxlbWVudDpifSksKGEucmVhY3RpdmVFbGVtZW50VmVyc2lvbnM/Pz1bXSkucHVzaChcIjIuMC40XCIpO2V4cG9ydHtiIGFzIFJlYWN0aXZlRWxlbWVudCx1IGFzIGRlZmF1bHRDb252ZXJ0ZXIsZiBhcyBub3RFcXVhbH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yZWFjdGl2ZS1lbGVtZW50LmpzLm1hcFxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEJTRC0zLUNsYXVzZVxuICovXG5cbi8qKlxuICogVXNlIHRoaXMgbW9kdWxlIGlmIHlvdSB3YW50IHRvIGNyZWF0ZSB5b3VyIG93biBiYXNlIGNsYXNzIGV4dGVuZGluZ1xuICoge0BsaW5rIFJlYWN0aXZlRWxlbWVudH0uXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqL1xuXG5pbXBvcnQge1xuICBnZXRDb21wYXRpYmxlU3R5bGUsXG4gIGFkb3B0U3R5bGVzLFxuICBDU1NSZXN1bHRHcm91cCxcbiAgQ1NTUmVzdWx0T3JOYXRpdmUsXG59IGZyb20gJy4vY3NzLXRhZy5qcyc7XG5pbXBvcnQgdHlwZSB7XG4gIFJlYWN0aXZlQ29udHJvbGxlcixcbiAgUmVhY3RpdmVDb250cm9sbGVySG9zdCxcbn0gZnJvbSAnLi9yZWFjdGl2ZS1jb250cm9sbGVyLmpzJztcblxuLy8gSW4gdGhlIE5vZGUgYnVpbGQsIHRoaXMgaW1wb3J0IHdpbGwgYmUgaW5qZWN0ZWQgYnkgUm9sbHVwOlxuLy8gaW1wb3J0IHtIVE1MRWxlbWVudCwgY3VzdG9tRWxlbWVudHN9IGZyb20gJ0BsaXQtbGFicy9zc3ItZG9tLXNoaW0nO1xuXG5leHBvcnQgKiBmcm9tICcuL2Nzcy10YWcuanMnO1xuZXhwb3J0IHR5cGUge1xuICBSZWFjdGl2ZUNvbnRyb2xsZXIsXG4gIFJlYWN0aXZlQ29udHJvbGxlckhvc3QsXG59IGZyb20gJy4vcmVhY3RpdmUtY29udHJvbGxlci5qcyc7XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgYHJlYWRvbmx5YCBtb2RpZmllciBmcm9tIHByb3BlcnRpZXMgaW4gdGhlIHVuaW9uIEsuXG4gKlxuICogVGhpcyBpcyBhIHNhZmVyIHdheSB0byBjYXN0IGEgdmFsdWUgdG8gYSB0eXBlIHdpdGggYSBtdXRhYmxlIHZlcnNpb24gb2YgYVxuICogcmVhZG9ubHkgZmllbGQsIHRoYW4gY2FzdGluZyB0byBhbiBpbnRlcmZhY2Ugd2l0aCB0aGUgZmllbGQgcmUtZGVjbGFyZWRcbiAqIGJlY2F1c2UgaXQgcHJlc2VydmVzIHRoZSB0eXBlIG9mIGFsbCB0aGUgZmllbGRzIGFuZCB3YXJucyBvbiB0eXBvcy5cbiAqL1xudHlwZSBNdXRhYmxlPFQsIEsgZXh0ZW5kcyBrZXlvZiBUPiA9IE9taXQ8VCwgSz4gJiB7XG4gIC1yZWFkb25seSBbUCBpbiBrZXlvZiBQaWNrPFQsIEs+XTogUCBleHRlbmRzIEsgPyBUW1BdIDogbmV2ZXI7XG59O1xuXG4vLyBUT0RPIChqdXN0aW5mYWduYW5pKTogQWRkIGBoYXNPd25gIGhlcmUgd2hlbiB3ZSBzaGlwIEVTMjAyMlxuY29uc3Qge1xuICBpcyxcbiAgZGVmaW5lUHJvcGVydHksXG4gIGdldE93blByb3BlcnR5RGVzY3JpcHRvcixcbiAgZ2V0T3duUHJvcGVydHlOYW1lcyxcbiAgZ2V0T3duUHJvcGVydHlTeW1ib2xzLFxuICBnZXRQcm90b3R5cGVPZixcbn0gPSBPYmplY3Q7XG5cbmNvbnN0IE5PREVfTU9ERSA9IGZhbHNlO1xuXG4vLyBMZXRzIGEgbWluaWZpZXIgcmVwbGFjZSBnbG9iYWxUaGlzIHJlZmVyZW5jZXMgd2l0aCBhIG1pbmlmaWVkIG5hbWVcbmNvbnN0IGdsb2JhbCA9IGdsb2JhbFRoaXM7XG5cbmlmIChOT0RFX01PREUpIHtcbiAgZ2xvYmFsLmN1c3RvbUVsZW1lbnRzID8/PSBjdXN0b21FbGVtZW50cztcbn1cblxuY29uc3QgREVWX01PREUgPSB0cnVlO1xuXG5sZXQgaXNzdWVXYXJuaW5nOiAoY29kZTogc3RyaW5nLCB3YXJuaW5nOiBzdHJpbmcpID0+IHZvaWQ7XG5cbmNvbnN0IHRydXN0ZWRUeXBlcyA9IChnbG9iYWwgYXMgdW5rbm93biBhcyB7dHJ1c3RlZFR5cGVzPzoge2VtcHR5U2NyaXB0OiAnJ319KVxuICAudHJ1c3RlZFR5cGVzO1xuXG4vLyBUZW1wb3Jhcnkgd29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9jcmJ1Zy5jb20vOTkzMjY4XG4vLyBDdXJyZW50bHksIGFueSBhdHRyaWJ1dGUgc3RhcnRpbmcgd2l0aCBcIm9uXCIgaXMgY29uc2lkZXJlZCB0byBiZSBhXG4vLyBUcnVzdGVkU2NyaXB0IHNvdXJjZS4gU3VjaCBib29sZWFuIGF0dHJpYnV0ZXMgbXVzdCBiZSBzZXQgdG8gdGhlIGVxdWl2YWxlbnRcbi8vIHRydXN0ZWQgZW1wdHlTY3JpcHQgdmFsdWUuXG5jb25zdCBlbXB0eVN0cmluZ0ZvckJvb2xlYW5BdHRyaWJ1dGUgPSB0cnVzdGVkVHlwZXNcbiAgPyAodHJ1c3RlZFR5cGVzLmVtcHR5U2NyaXB0IGFzIHVua25vd24gYXMgJycpXG4gIDogJyc7XG5cbmNvbnN0IHBvbHlmaWxsU3VwcG9ydCA9IERFVl9NT0RFXG4gID8gZ2xvYmFsLnJlYWN0aXZlRWxlbWVudFBvbHlmaWxsU3VwcG9ydERldk1vZGVcbiAgOiBnbG9iYWwucmVhY3RpdmVFbGVtZW50UG9seWZpbGxTdXBwb3J0O1xuXG5pZiAoREVWX01PREUpIHtcbiAgLy8gRW5zdXJlIHdhcm5pbmdzIGFyZSBpc3N1ZWQgb25seSAxeCwgZXZlbiBpZiBtdWx0aXBsZSB2ZXJzaW9ucyBvZiBMaXRcbiAgLy8gYXJlIGxvYWRlZC5cbiAgY29uc3QgaXNzdWVkV2FybmluZ3M6IFNldDxzdHJpbmcgfCB1bmRlZmluZWQ+ID0gKGdsb2JhbC5saXRJc3N1ZWRXYXJuaW5ncyA/Pz1cbiAgICBuZXcgU2V0KCkpO1xuXG4gIC8vIElzc3VlIGEgd2FybmluZywgaWYgd2UgaGF2ZW4ndCBhbHJlYWR5LlxuICBpc3N1ZVdhcm5pbmcgPSAoY29kZTogc3RyaW5nLCB3YXJuaW5nOiBzdHJpbmcpID0+IHtcbiAgICB3YXJuaW5nICs9IGAgU2VlIGh0dHBzOi8vbGl0LmRldi9tc2cvJHtjb2RlfSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5gO1xuICAgIGlmICghaXNzdWVkV2FybmluZ3MuaGFzKHdhcm5pbmcpKSB7XG4gICAgICBjb25zb2xlLndhcm4od2FybmluZyk7XG4gICAgICBpc3N1ZWRXYXJuaW5ncy5hZGQod2FybmluZyk7XG4gICAgfVxuICB9O1xuXG4gIGlzc3VlV2FybmluZyhcbiAgICAnZGV2LW1vZGUnLFxuICAgIGBMaXQgaXMgaW4gZGV2IG1vZGUuIE5vdCByZWNvbW1lbmRlZCBmb3IgcHJvZHVjdGlvbiFgXG4gICk7XG5cbiAgLy8gSXNzdWUgcG9seWZpbGwgc3VwcG9ydCB3YXJuaW5nLlxuICBpZiAoZ2xvYmFsLlNoYWR5RE9NPy5pblVzZSAmJiBwb2x5ZmlsbFN1cHBvcnQgPT09IHVuZGVmaW5lZCkge1xuICAgIGlzc3VlV2FybmluZyhcbiAgICAgICdwb2x5ZmlsbC1zdXBwb3J0LW1pc3NpbmcnLFxuICAgICAgYFNoYWRvdyBET00gaXMgYmVpbmcgcG9seWZpbGxlZCB2aWEgXFxgU2hhZHlET01cXGAgYnV0IGAgK1xuICAgICAgICBgdGhlIFxcYHBvbHlmaWxsLXN1cHBvcnRcXGAgbW9kdWxlIGhhcyBub3QgYmVlbiBsb2FkZWQuYFxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBDb250YWlucyB0eXBlcyB0aGF0IGFyZSBwYXJ0IG9mIHRoZSB1bnN0YWJsZSBkZWJ1ZyBBUEkuXG4gKlxuICogRXZlcnl0aGluZyBpbiB0aGlzIEFQSSBpcyBub3Qgc3RhYmxlIGFuZCBtYXkgY2hhbmdlIG9yIGJlIHJlbW92ZWQgaW4gdGhlIGZ1dHVyZSxcbiAqIGV2ZW4gb24gcGF0Y2ggcmVsZWFzZXMuXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIFJlYWN0aXZlVW5zdGFibGUge1xuICAvKipcbiAgICogV2hlbiBMaXQgaXMgcnVubmluZyBpbiBkZXYgbW9kZSBhbmQgYHdpbmRvdy5lbWl0TGl0RGVidWdMb2dFdmVudHNgIGlzIHRydWUsXG4gICAqIHdlIHdpbGwgZW1pdCAnbGl0LWRlYnVnJyBldmVudHMgdG8gd2luZG93LCB3aXRoIGxpdmUgZGV0YWlscyBhYm91dCB0aGUgdXBkYXRlIGFuZCByZW5kZXJcbiAgICogbGlmZWN5Y2xlLiBUaGVzZSBjYW4gYmUgdXNlZnVsIGZvciB3cml0aW5nIGRlYnVnIHRvb2xpbmcgYW5kIHZpc3VhbGl6YXRpb25zLlxuICAgKlxuICAgKiBQbGVhc2UgYmUgYXdhcmUgdGhhdCBydW5uaW5nIHdpdGggd2luZG93LmVtaXRMaXREZWJ1Z0xvZ0V2ZW50cyBoYXMgcGVyZm9ybWFuY2Ugb3ZlcmhlYWQsXG4gICAqIG1ha2luZyBjZXJ0YWluIG9wZXJhdGlvbnMgdGhhdCBhcmUgbm9ybWFsbHkgdmVyeSBjaGVhcCAobGlrZSBhIG5vLW9wIHJlbmRlcikgbXVjaCBzbG93ZXIsXG4gICAqIGJlY2F1c2Ugd2UgbXVzdCBjb3B5IGRhdGEgYW5kIGRpc3BhdGNoIGV2ZW50cy5cbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG4gIGV4cG9ydCBuYW1lc3BhY2UgRGVidWdMb2cge1xuICAgIGV4cG9ydCB0eXBlIEVudHJ5ID0gVXBkYXRlO1xuICAgIGV4cG9ydCBpbnRlcmZhY2UgVXBkYXRlIHtcbiAgICAgIGtpbmQ6ICd1cGRhdGUnO1xuICAgIH1cbiAgfVxufVxuXG5pbnRlcmZhY2UgRGVidWdMb2dnaW5nV2luZG93IHtcbiAgLy8gRXZlbiBpbiBkZXYgbW9kZSwgd2UgZ2VuZXJhbGx5IGRvbid0IHdhbnQgdG8gZW1pdCB0aGVzZSBldmVudHMsIGFzIHRoYXQnc1xuICAvLyBhbm90aGVyIGxldmVsIG9mIGNvc3QsIHNvIG9ubHkgZW1pdCB0aGVtIHdoZW4gREVWX01PREUgaXMgdHJ1ZSBfYW5kXyB3aGVuXG4gIC8vIHdpbmRvdy5lbWl0TGl0RGVidWdFdmVudHMgaXMgdHJ1ZS5cbiAgZW1pdExpdERlYnVnTG9nRXZlbnRzPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBVc2VmdWwgZm9yIHZpc3VhbGl6aW5nIGFuZCBsb2dnaW5nIGluc2lnaHRzIGludG8gd2hhdCB0aGUgTGl0IHRlbXBsYXRlIHN5c3RlbSBpcyBkb2luZy5cbiAqXG4gKiBDb21waWxlZCBvdXQgb2YgcHJvZCBtb2RlIGJ1aWxkcy5cbiAqL1xuY29uc3QgZGVidWdMb2dFdmVudCA9IERFVl9NT0RFXG4gID8gKGV2ZW50OiBSZWFjdGl2ZVVuc3RhYmxlLkRlYnVnTG9nLkVudHJ5KSA9PiB7XG4gICAgICBjb25zdCBzaG91bGRFbWl0ID0gKGdsb2JhbCBhcyB1bmtub3duIGFzIERlYnVnTG9nZ2luZ1dpbmRvdylcbiAgICAgICAgLmVtaXRMaXREZWJ1Z0xvZ0V2ZW50cztcbiAgICAgIGlmICghc2hvdWxkRW1pdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBnbG9iYWwuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgbmV3IEN1c3RvbUV2ZW50PFJlYWN0aXZlVW5zdGFibGUuRGVidWdMb2cuRW50cnk+KCdsaXQtZGVidWcnLCB7XG4gICAgICAgICAgZGV0YWlsOiBldmVudCxcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuICA6IHVuZGVmaW5lZDtcblxuLypcbiAqIFdoZW4gdXNpbmcgQ2xvc3VyZSBDb21waWxlciwgSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eShwcm9wZXJ0eSwgb2JqZWN0KSBpc1xuICogcmVwbGFjZWQgYXQgY29tcGlsZSB0aW1lIGJ5IHRoZSBtdW5nZWQgbmFtZSBmb3Igb2JqZWN0W3Byb3BlcnR5XS4gV2UgY2Fubm90XG4gKiBhbGlhcyB0aGlzIGZ1bmN0aW9uLCBzbyB3ZSBoYXZlIHRvIHVzZSBhIHNtYWxsIHNoaW0gdGhhdCBoYXMgdGhlIHNhbWVcbiAqIGJlaGF2aW9yIHdoZW4gbm90IGNvbXBpbGluZy5cbiAqL1xuLypAX19JTkxJTkVfXyovXG5jb25zdCBKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5ID0gPFAgZXh0ZW5kcyBQcm9wZXJ0eUtleT4oXG4gIHByb3A6IFAsXG4gIF9vYmo6IHVua25vd25cbik6IFAgPT4gcHJvcDtcblxuLyoqXG4gKiBDb252ZXJ0cyBwcm9wZXJ0eSB2YWx1ZXMgdG8gYW5kIGZyb20gYXR0cmlidXRlIHZhbHVlcy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDb21wbGV4QXR0cmlidXRlQ29udmVydGVyPFR5cGUgPSB1bmtub3duLCBUeXBlSGludCA9IHVua25vd24+IHtcbiAgLyoqXG4gICAqIENhbGxlZCB0byBjb252ZXJ0IGFuIGF0dHJpYnV0ZSB2YWx1ZSB0byBhIHByb3BlcnR5XG4gICAqIHZhbHVlLlxuICAgKi9cbiAgZnJvbUF0dHJpYnV0ZT8odmFsdWU6IHN0cmluZyB8IG51bGwsIHR5cGU/OiBUeXBlSGludCk6IFR5cGU7XG5cbiAgLyoqXG4gICAqIENhbGxlZCB0byBjb252ZXJ0IGEgcHJvcGVydHkgdmFsdWUgdG8gYW4gYXR0cmlidXRlXG4gICAqIHZhbHVlLlxuICAgKlxuICAgKiBJdCByZXR1cm5zIHVua25vd24gaW5zdGVhZCBvZiBzdHJpbmcsIHRvIGJlIGNvbXBhdGlibGUgd2l0aFxuICAgKiBodHRwczovL2dpdGh1Yi5jb20vV0lDRy90cnVzdGVkLXR5cGVzIChhbmQgc2ltaWxhciBlZmZvcnRzKS5cbiAgICovXG4gIHRvQXR0cmlidXRlPyh2YWx1ZTogVHlwZSwgdHlwZT86IFR5cGVIaW50KTogdW5rbm93bjtcbn1cblxudHlwZSBBdHRyaWJ1dGVDb252ZXJ0ZXI8VHlwZSA9IHVua25vd24sIFR5cGVIaW50ID0gdW5rbm93bj4gPVxuICB8IENvbXBsZXhBdHRyaWJ1dGVDb252ZXJ0ZXI8VHlwZT5cbiAgfCAoKHZhbHVlOiBzdHJpbmcgfCBudWxsLCB0eXBlPzogVHlwZUhpbnQpID0+IFR5cGUpO1xuXG4vKipcbiAqIERlZmluZXMgb3B0aW9ucyBmb3IgYSBwcm9wZXJ0eSBhY2Nlc3Nvci5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBQcm9wZXJ0eURlY2xhcmF0aW9uPFR5cGUgPSB1bmtub3duLCBUeXBlSGludCA9IHVua25vd24+IHtcbiAgLyoqXG4gICAqIFdoZW4gc2V0IHRvIGB0cnVlYCwgaW5kaWNhdGVzIHRoZSBwcm9wZXJ0eSBpcyBpbnRlcm5hbCBwcml2YXRlIHN0YXRlLiBUaGVcbiAgICogcHJvcGVydHkgc2hvdWxkIG5vdCBiZSBzZXQgYnkgdXNlcnMuIFdoZW4gdXNpbmcgVHlwZVNjcmlwdCwgdGhpcyBwcm9wZXJ0eVxuICAgKiBzaG91bGQgYmUgbWFya2VkIGFzIGBwcml2YXRlYCBvciBgcHJvdGVjdGVkYCwgYW5kIGl0IGlzIGFsc28gYSBjb21tb25cbiAgICogcHJhY3RpY2UgdG8gdXNlIGEgbGVhZGluZyBgX2AgaW4gdGhlIG5hbWUuIFRoZSBwcm9wZXJ0eSBpcyBub3QgYWRkZWQgdG9cbiAgICogYG9ic2VydmVkQXR0cmlidXRlc2AuXG4gICAqL1xuICByZWFkb25seSBzdGF0ZT86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEluZGljYXRlcyBob3cgYW5kIHdoZXRoZXIgdGhlIHByb3BlcnR5IGJlY29tZXMgYW4gb2JzZXJ2ZWQgYXR0cmlidXRlLlxuICAgKiBJZiB0aGUgdmFsdWUgaXMgYGZhbHNlYCwgdGhlIHByb3BlcnR5IGlzIG5vdCBhZGRlZCB0byBgb2JzZXJ2ZWRBdHRyaWJ1dGVzYC5cbiAgICogSWYgdHJ1ZSBvciBhYnNlbnQsIHRoZSBsb3dlcmNhc2VkIHByb3BlcnR5IG5hbWUgaXMgb2JzZXJ2ZWQgKGUuZy4gYGZvb0JhcmBcbiAgICogYmVjb21lcyBgZm9vYmFyYCkuIElmIGEgc3RyaW5nLCB0aGUgc3RyaW5nIHZhbHVlIGlzIG9ic2VydmVkIChlLmdcbiAgICogYGF0dHJpYnV0ZTogJ2Zvby1iYXInYCkuXG4gICAqL1xuICByZWFkb25seSBhdHRyaWJ1dGU/OiBib29sZWFuIHwgc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgdGhlIHR5cGUgb2YgdGhlIHByb3BlcnR5LiBUaGlzIGlzIHVzZWQgb25seSBhcyBhIGhpbnQgZm9yIHRoZVxuICAgKiBgY29udmVydGVyYCB0byBkZXRlcm1pbmUgaG93IHRvIGNvbnZlcnQgdGhlIGF0dHJpYnV0ZVxuICAgKiB0by9mcm9tIGEgcHJvcGVydHkuXG4gICAqL1xuICByZWFkb25seSB0eXBlPzogVHlwZUhpbnQ7XG5cbiAgLyoqXG4gICAqIEluZGljYXRlcyBob3cgdG8gY29udmVydCB0aGUgYXR0cmlidXRlIHRvL2Zyb20gYSBwcm9wZXJ0eS4gSWYgdGhpcyB2YWx1ZVxuICAgKiBpcyBhIGZ1bmN0aW9uLCBpdCBpcyB1c2VkIHRvIGNvbnZlcnQgdGhlIGF0dHJpYnV0ZSB2YWx1ZSBhIHRoZSBwcm9wZXJ0eVxuICAgKiB2YWx1ZS4gSWYgaXQncyBhbiBvYmplY3QsIGl0IGNhbiBoYXZlIGtleXMgZm9yIGBmcm9tQXR0cmlidXRlYCBhbmRcbiAgICogYHRvQXR0cmlidXRlYC4gSWYgbm8gYHRvQXR0cmlidXRlYCBmdW5jdGlvbiBpcyBwcm92aWRlZCBhbmRcbiAgICogYHJlZmxlY3RgIGlzIHNldCB0byBgdHJ1ZWAsIHRoZSBwcm9wZXJ0eSB2YWx1ZSBpcyBzZXQgZGlyZWN0bHkgdG8gdGhlXG4gICAqIGF0dHJpYnV0ZS4gQSBkZWZhdWx0IGBjb252ZXJ0ZXJgIGlzIHVzZWQgaWYgbm9uZSBpcyBwcm92aWRlZDsgaXQgc3VwcG9ydHNcbiAgICogYEJvb2xlYW5gLCBgU3RyaW5nYCwgYE51bWJlcmAsIGBPYmplY3RgLCBhbmQgYEFycmF5YC4gTm90ZSxcbiAgICogd2hlbiBhIHByb3BlcnR5IGNoYW5nZXMgYW5kIHRoZSBjb252ZXJ0ZXIgaXMgdXNlZCB0byB1cGRhdGUgdGhlIGF0dHJpYnV0ZSxcbiAgICogdGhlIHByb3BlcnR5IGlzIG5ldmVyIHVwZGF0ZWQgYWdhaW4gYXMgYSByZXN1bHQgb2YgdGhlIGF0dHJpYnV0ZSBjaGFuZ2luZyxcbiAgICogYW5kIHZpY2UgdmVyc2EuXG4gICAqL1xuICByZWFkb25seSBjb252ZXJ0ZXI/OiBBdHRyaWJ1dGVDb252ZXJ0ZXI8VHlwZSwgVHlwZUhpbnQ+O1xuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgaWYgdGhlIHByb3BlcnR5IHNob3VsZCByZWZsZWN0IHRvIGFuIGF0dHJpYnV0ZS5cbiAgICogSWYgYHRydWVgLCB3aGVuIHRoZSBwcm9wZXJ0eSBpcyBzZXQsIHRoZSBhdHRyaWJ1dGUgaXMgc2V0IHVzaW5nIHRoZVxuICAgKiBhdHRyaWJ1dGUgbmFtZSBkZXRlcm1pbmVkIGFjY29yZGluZyB0byB0aGUgcnVsZXMgZm9yIHRoZSBgYXR0cmlidXRlYFxuICAgKiBwcm9wZXJ0eSBvcHRpb24gYW5kIHRoZSB2YWx1ZSBvZiB0aGUgcHJvcGVydHkgY29udmVydGVkIHVzaW5nIHRoZSBydWxlc1xuICAgKiBmcm9tIHRoZSBgY29udmVydGVyYCBwcm9wZXJ0eSBvcHRpb24uXG4gICAqL1xuICByZWFkb25seSByZWZsZWN0PzogYm9vbGVhbjtcblxuICAvKipcbiAgICogQSBmdW5jdGlvbiB0aGF0IGluZGljYXRlcyBpZiBhIHByb3BlcnR5IHNob3VsZCBiZSBjb25zaWRlcmVkIGNoYW5nZWQgd2hlblxuICAgKiBpdCBpcyBzZXQuIFRoZSBmdW5jdGlvbiBzaG91bGQgdGFrZSB0aGUgYG5ld1ZhbHVlYCBhbmQgYG9sZFZhbHVlYCBhbmRcbiAgICogcmV0dXJuIGB0cnVlYCBpZiBhbiB1cGRhdGUgc2hvdWxkIGJlIHJlcXVlc3RlZC5cbiAgICovXG4gIGhhc0NoYW5nZWQ/KHZhbHVlOiBUeXBlLCBvbGRWYWx1ZTogVHlwZSk6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEluZGljYXRlcyB3aGV0aGVyIGFuIGFjY2Vzc29yIHdpbGwgYmUgY3JlYXRlZCBmb3IgdGhpcyBwcm9wZXJ0eS4gQnlcbiAgICogZGVmYXVsdCwgYW4gYWNjZXNzb3Igd2lsbCBiZSBnZW5lcmF0ZWQgZm9yIHRoaXMgcHJvcGVydHkgdGhhdCByZXF1ZXN0cyBhblxuICAgKiB1cGRhdGUgd2hlbiBzZXQuIElmIHRoaXMgZmxhZyBpcyBgdHJ1ZWAsIG5vIGFjY2Vzc29yIHdpbGwgYmUgY3JlYXRlZCwgYW5kXG4gICAqIGl0IHdpbGwgYmUgdGhlIHVzZXIncyByZXNwb25zaWJpbGl0eSB0byBjYWxsXG4gICAqIGB0aGlzLnJlcXVlc3RVcGRhdGUocHJvcGVydHlOYW1lLCBvbGRWYWx1ZSlgIHRvIHJlcXVlc3QgYW4gdXBkYXRlIHdoZW5cbiAgICogdGhlIHByb3BlcnR5IGNoYW5nZXMuXG4gICAqL1xuICByZWFkb25seSBub0FjY2Vzc29yPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogV2hldGhlciB0aGlzIHByb3BlcnR5IGlzIHdyYXBwaW5nIGFjY2Vzc29ycy4gVGhpcyBpcyBzZXQgYnkgYEBwcm9wZXJ0eWBcbiAgICogdG8gY29udHJvbCB0aGUgaW5pdGlhbCB2YWx1ZSBjaGFuZ2UgYW5kIHJlZmxlY3Rpb24gbG9naWMuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgd3JhcHBlZD86IGJvb2xlYW47XG59XG5cbi8qKlxuICogTWFwIG9mIHByb3BlcnRpZXMgdG8gUHJvcGVydHlEZWNsYXJhdGlvbiBvcHRpb25zLiBGb3IgZWFjaCBwcm9wZXJ0eSBhblxuICogYWNjZXNzb3IgaXMgbWFkZSwgYW5kIHRoZSBwcm9wZXJ0eSBpcyBwcm9jZXNzZWQgYWNjb3JkaW5nIHRvIHRoZVxuICogUHJvcGVydHlEZWNsYXJhdGlvbiBvcHRpb25zLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFByb3BlcnR5RGVjbGFyYXRpb25zIHtcbiAgcmVhZG9ubHkgW2tleTogc3RyaW5nXTogUHJvcGVydHlEZWNsYXJhdGlvbjtcbn1cblxudHlwZSBQcm9wZXJ0eURlY2xhcmF0aW9uTWFwID0gTWFwPFByb3BlcnR5S2V5LCBQcm9wZXJ0eURlY2xhcmF0aW9uPjtcblxudHlwZSBBdHRyaWJ1dGVNYXAgPSBNYXA8c3RyaW5nLCBQcm9wZXJ0eUtleT47XG5cbi8qKlxuICogQSBNYXAgb2YgcHJvcGVydHkga2V5cyB0byB2YWx1ZXMuXG4gKlxuICogVGFrZXMgYW4gb3B0aW9uYWwgdHlwZSBwYXJhbWV0ZXIgVCwgd2hpY2ggd2hlbiBzcGVjaWZpZWQgYXMgYSBub24tYW55LFxuICogbm9uLXVua25vd24gdHlwZSwgd2lsbCBtYWtlIHRoZSBNYXAgbW9yZSBzdHJvbmdseS10eXBlZCwgYXNzb2NpYXRpbmcgdGhlIG1hcFxuICoga2V5cyB3aXRoIHRoZWlyIGNvcnJlc3BvbmRpbmcgdmFsdWUgdHlwZSBvbiBULlxuICpcbiAqIFVzZSBgUHJvcGVydHlWYWx1ZXM8dGhpcz5gIHdoZW4gb3ZlcnJpZGluZyBSZWFjdGl2ZUVsZW1lbnQudXBkYXRlKCkgYW5kXG4gKiBvdGhlciBsaWZlY3ljbGUgbWV0aG9kcyBpbiBvcmRlciB0byBnZXQgc3Ryb25nZXIgdHlwZS1jaGVja2luZyBvbiBrZXlzXG4gKiBhbmQgdmFsdWVzLlxuICovXG4vLyBUaGlzIHR5cGUgaXMgY29uZGl0aW9uYWwgc28gdGhhdCBpZiB0aGUgcGFyYW1ldGVyIFQgaXMgbm90IHNwZWNpZmllZCwgb3Jcbi8vIGlzIGBhbnlgLCB0aGUgdHlwZSB3aWxsIGluY2x1ZGUgYE1hcDxQcm9wZXJ0eUtleSwgdW5rbm93bj5gLiBTaW5jZSBUIGlzIG5vdFxuLy8gZ2l2ZW4gaW4gdGhlIHVzZXMgb2YgUHJvcGVydHlWYWx1ZXMgaW4gdGhpcyBmaWxlLCBhbGwgdXNlcyBoZXJlIGZhbGxiYWNrIHRvXG4vLyBtZWFuaW5nIGBNYXA8UHJvcGVydHlLZXksIHVua25vd24+YCwgYnV0IGlmIGEgZGV2ZWxvcGVyIHVzZXNcbi8vIGBQcm9wZXJ0eVZhbHVlczx0aGlzPmAgKG9yIGFueSBvdGhlciB2YWx1ZSBmb3IgVCkgdGhleSB3aWxsIGdldCBhXG4vLyBzdHJvbmdseS10eXBlZCBNYXAgdHlwZS5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgdHlwZSBQcm9wZXJ0eVZhbHVlczxUID0gYW55PiA9IFQgZXh0ZW5kcyBvYmplY3RcbiAgPyBQcm9wZXJ0eVZhbHVlTWFwPFQ+XG4gIDogTWFwPFByb3BlcnR5S2V5LCB1bmtub3duPjtcblxuLyoqXG4gKiBEbyBub3QgdXNlLCBpbnN0ZWFkIHByZWZlciB7QGxpbmtjb2RlIFByb3BlcnR5VmFsdWVzfS5cbiAqL1xuLy8gVGhpcyB0eXBlIG11c3QgYmUgZXhwb3J0ZWQgc3VjaCB0aGF0IEphdmFTY3JpcHQgZ2VuZXJhdGVkIGJ5IHRoZSBHb29nbGVcbi8vIENsb3N1cmUgQ29tcGlsZXIgY2FuIGltcG9ydCBhIHR5cGUgcmVmZXJlbmNlLlxuZXhwb3J0IGludGVyZmFjZSBQcm9wZXJ0eVZhbHVlTWFwPFQ+IGV4dGVuZHMgTWFwPFByb3BlcnR5S2V5LCB1bmtub3duPiB7XG4gIGdldDxLIGV4dGVuZHMga2V5b2YgVD4oazogSyk6IFRbS10gfCB1bmRlZmluZWQ7XG4gIHNldDxLIGV4dGVuZHMga2V5b2YgVD4oa2V5OiBLLCB2YWx1ZTogVFtLXSk6IHRoaXM7XG4gIGhhczxLIGV4dGVuZHMga2V5b2YgVD4oazogSyk6IGJvb2xlYW47XG4gIGRlbGV0ZTxLIGV4dGVuZHMga2V5b2YgVD4oazogSyk6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0Q29udmVydGVyOiBDb21wbGV4QXR0cmlidXRlQ29udmVydGVyID0ge1xuICB0b0F0dHJpYnV0ZSh2YWx1ZTogdW5rbm93biwgdHlwZT86IHVua25vd24pOiB1bmtub3duIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgQm9vbGVhbjpcbiAgICAgICAgdmFsdWUgPSB2YWx1ZSA/IGVtcHR5U3RyaW5nRm9yQm9vbGVhbkF0dHJpYnV0ZSA6IG51bGw7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBPYmplY3Q6XG4gICAgICBjYXNlIEFycmF5OlxuICAgICAgICAvLyBpZiB0aGUgdmFsdWUgaXMgYG51bGxgIG9yIGB1bmRlZmluZWRgIHBhc3MgdGhpcyB0aHJvdWdoXG4gICAgICAgIC8vIHRvIGFsbG93IHJlbW92aW5nL25vIGNoYW5nZSBiZWhhdmlvci5cbiAgICAgICAgdmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gdmFsdWUgOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sXG5cbiAgZnJvbUF0dHJpYnV0ZSh2YWx1ZTogc3RyaW5nIHwgbnVsbCwgdHlwZT86IHVua25vd24pIHtcbiAgICBsZXQgZnJvbVZhbHVlOiB1bmtub3duID0gdmFsdWU7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIEJvb2xlYW46XG4gICAgICAgIGZyb21WYWx1ZSA9IHZhbHVlICE9PSBudWxsO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgTnVtYmVyOlxuICAgICAgICBmcm9tVmFsdWUgPSB2YWx1ZSA9PT0gbnVsbCA/IG51bGwgOiBOdW1iZXIodmFsdWUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgT2JqZWN0OlxuICAgICAgY2FzZSBBcnJheTpcbiAgICAgICAgLy8gRG8gKm5vdCogZ2VuZXJhdGUgZXhjZXB0aW9uIHdoZW4gaW52YWxpZCBKU09OIGlzIHNldCBhcyBlbGVtZW50c1xuICAgICAgICAvLyBkb24ndCBub3JtYWxseSBjb21wbGFpbiBvbiBiZWluZyBtaXMtY29uZmlndXJlZC5cbiAgICAgICAgLy8gVE9ETyhzb3J2ZWxsKTogRG8gZ2VuZXJhdGUgZXhjZXB0aW9uIGluICpkZXYgbW9kZSouXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gQXNzZXJ0IHRvIGFkaGVyZSB0byBCYXplbCdzIFwibXVzdCB0eXBlIGFzc2VydCBKU09OIHBhcnNlXCIgcnVsZS5cbiAgICAgICAgICBmcm9tVmFsdWUgPSBKU09OLnBhcnNlKHZhbHVlISkgYXMgdW5rbm93bjtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGZyb21WYWx1ZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBmcm9tVmFsdWU7XG4gIH0sXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEhhc0NoYW5nZWQge1xuICAodmFsdWU6IHVua25vd24sIG9sZDogdW5rbm93bik6IGJvb2xlYW47XG59XG5cbi8qKlxuICogQ2hhbmdlIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgZGlmZmVyZW50IGZyb20gYG9sZFZhbHVlYC5cbiAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgYXMgdGhlIGRlZmF1bHQgZm9yIGEgcHJvcGVydHkncyBgaGFzQ2hhbmdlZGAgZnVuY3Rpb24uXG4gKi9cbmV4cG9ydCBjb25zdCBub3RFcXVhbDogSGFzQ2hhbmdlZCA9ICh2YWx1ZTogdW5rbm93biwgb2xkOiB1bmtub3duKTogYm9vbGVhbiA9PlxuICAhaXModmFsdWUsIG9sZCk7XG5cbmNvbnN0IGRlZmF1bHRQcm9wZXJ0eURlY2xhcmF0aW9uOiBQcm9wZXJ0eURlY2xhcmF0aW9uID0ge1xuICBhdHRyaWJ1dGU6IHRydWUsXG4gIHR5cGU6IFN0cmluZyxcbiAgY29udmVydGVyOiBkZWZhdWx0Q29udmVydGVyLFxuICByZWZsZWN0OiBmYWxzZSxcbiAgaGFzQ2hhbmdlZDogbm90RXF1YWwsXG59O1xuXG4vKipcbiAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyBvbmUgb2YgdGhlIHN1cHBvcnRlZCBkZXYgbW9kZSB3YXJuaW5nIGNhdGVnb3JpZXMuXG4gKi9cbmV4cG9ydCB0eXBlIFdhcm5pbmdLaW5kID1cbiAgfCAnY2hhbmdlLWluLXVwZGF0ZSdcbiAgfCAnbWlncmF0aW9uJ1xuICB8ICdhc3luYy1wZXJmb3JtLXVwZGF0ZSc7XG5cbmV4cG9ydCB0eXBlIEluaXRpYWxpemVyID0gKGVsZW1lbnQ6IFJlYWN0aXZlRWxlbWVudCkgPT4gdm9pZDtcblxuLy8gVGVtcG9yYXJ5LCB1bnRpbCBnb29nbGUzIGlzIG9uIFR5cGVTY3JpcHQgNS4yXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBTeW1ib2xDb25zdHJ1Y3RvciB7XG4gICAgcmVhZG9ubHkgbWV0YWRhdGE6IHVuaXF1ZSBzeW1ib2w7XG4gIH1cbn1cblxuLy8gRW5zdXJlIG1ldGFkYXRhIGlzIGVuYWJsZWQuIFR5cGVTY3JpcHQgZG9lcyBub3QgcG9seWZpbGxcbi8vIFN5bWJvbC5tZXRhZGF0YSwgc28gd2UgbXVzdCBlbnN1cmUgdGhhdCBpdCBleGlzdHMuXG4oU3ltYm9sIGFzIHttZXRhZGF0YTogc3ltYm9sfSkubWV0YWRhdGEgPz89IFN5bWJvbCgnbWV0YWRhdGEnKTtcblxuZGVjbGFyZSBnbG9iYWwge1xuICAvLyBUaGlzIGlzIHB1YmxpYyBnbG9iYWwgQVBJLCBkbyBub3QgY2hhbmdlIVxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdmFyXG4gIHZhciBsaXRQcm9wZXJ0eU1ldGFkYXRhOiBXZWFrTWFwPFxuICAgIG9iamVjdCxcbiAgICBNYXA8UHJvcGVydHlLZXksIFByb3BlcnR5RGVjbGFyYXRpb24+XG4gID47XG59XG5cbi8vIE1hcCBmcm9tIGEgY2xhc3MncyBtZXRhZGF0YSBvYmplY3QgdG8gcHJvcGVydHkgb3B0aW9uc1xuLy8gTm90ZSB0aGF0IHdlIG11c3QgdXNlIG51bGxpc2gtY29hbGVzY2luZyBhc3NpZ25tZW50IHNvIHRoYXQgd2Ugb25seSB1c2Ugb25lXG4vLyBtYXAgZXZlbiBpZiB3ZSBsb2FkIG11bHRpcGxlIHZlcnNpb24gb2YgdGhpcyBtb2R1bGUuXG5nbG9iYWwubGl0UHJvcGVydHlNZXRhZGF0YSA/Pz0gbmV3IFdlYWtNYXA8XG4gIG9iamVjdCxcbiAgTWFwPFByb3BlcnR5S2V5LCBQcm9wZXJ0eURlY2xhcmF0aW9uPlxuPigpO1xuXG4vKipcbiAqIEJhc2UgZWxlbWVudCBjbGFzcyB3aGljaCBtYW5hZ2VzIGVsZW1lbnQgcHJvcGVydGllcyBhbmQgYXR0cmlidXRlcy4gV2hlblxuICogcHJvcGVydGllcyBjaGFuZ2UsIHRoZSBgdXBkYXRlYCBtZXRob2QgaXMgYXN5bmNocm9ub3VzbHkgY2FsbGVkLiBUaGlzIG1ldGhvZFxuICogc2hvdWxkIGJlIHN1cHBsaWVkIGJ5IHN1YmNsYXNzZXMgdG8gcmVuZGVyIHVwZGF0ZXMgYXMgZGVzaXJlZC5cbiAqIEBub0luaGVyaXREb2NcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFJlYWN0aXZlRWxlbWVudFxuICAvLyBJbiB0aGUgTm9kZSBidWlsZCwgdGhpcyBgZXh0ZW5kc2AgY2xhdXNlIHdpbGwgYmUgc3Vic3RpdHV0ZWQgd2l0aFxuICAvLyBgKGdsb2JhbFRoaXMuSFRNTEVsZW1lbnQgPz8gSFRNTEVsZW1lbnQpYC5cbiAgLy9cbiAgLy8gVGhpcyB3YXksIHdlIHdpbGwgZmlyc3QgcHJlZmVyIGFueSBnbG9iYWwgYEhUTUxFbGVtZW50YCBwb2x5ZmlsbCB0aGF0IHRoZVxuICAvLyB1c2VyIGhhcyBhc3NpZ25lZCwgYW5kIHRoZW4gZmFsbCBiYWNrIHRvIHRoZSBgSFRNTEVsZW1lbnRgIHNoaW0gd2hpY2ggaGFzXG4gIC8vIGJlZW4gaW1wb3J0ZWQgKHNlZSBub3RlIGF0IHRoZSB0b3Agb2YgdGhpcyBmaWxlIGFib3V0IGhvdyB0aGlzIGltcG9ydCBpc1xuICAvLyBnZW5lcmF0ZWQgYnkgUm9sbHVwKS4gTm90ZSB0aGF0IHRoZSBgSFRNTEVsZW1lbnRgIHZhcmlhYmxlIGhhcyBiZWVuXG4gIC8vIHNoYWRvd2VkIGJ5IHRoaXMgaW1wb3J0LCBzbyBpdCBubyBsb25nZXIgcmVmZXJzIHRvIHRoZSBnbG9iYWwuXG4gIGV4dGVuZHMgSFRNTEVsZW1lbnRcbiAgaW1wbGVtZW50cyBSZWFjdGl2ZUNvbnRyb2xsZXJIb3N0XG57XG4gIC8vIE5vdGU6IHRoZXNlIGFyZSBwYXRjaGVkIGluIG9ubHkgaW4gREVWX01PREUuXG4gIC8qKlxuICAgKiBSZWFkIG9yIHNldCBhbGwgdGhlIGVuYWJsZWQgd2FybmluZyBjYXRlZ29yaWVzIGZvciB0aGlzIGNsYXNzLlxuICAgKlxuICAgKiBUaGlzIHByb3BlcnR5IGlzIG9ubHkgdXNlZCBpbiBkZXZlbG9wbWVudCBidWlsZHMuXG4gICAqXG4gICAqIEBub2NvbGxhcHNlXG4gICAqIEBjYXRlZ29yeSBkZXYtbW9kZVxuICAgKi9cbiAgc3RhdGljIGVuYWJsZWRXYXJuaW5ncz86IFdhcm5pbmdLaW5kW107XG5cbiAgLyoqXG4gICAqIEVuYWJsZSB0aGUgZ2l2ZW4gd2FybmluZyBjYXRlZ29yeSBmb3IgdGhpcyBjbGFzcy5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgb25seSBleGlzdHMgaW4gZGV2ZWxvcG1lbnQgYnVpbGRzLCBzbyBpdCBzaG91bGQgYmUgYWNjZXNzZWRcbiAgICogd2l0aCBhIGd1YXJkIGxpa2U6XG4gICAqXG4gICAqIGBgYHRzXG4gICAqIC8vIEVuYWJsZSBmb3IgYWxsIFJlYWN0aXZlRWxlbWVudCBzdWJjbGFzc2VzXG4gICAqIFJlYWN0aXZlRWxlbWVudC5lbmFibGVXYXJuaW5nPy4oJ21pZ3JhdGlvbicpO1xuICAgKlxuICAgKiAvLyBFbmFibGUgZm9yIG9ubHkgTXlFbGVtZW50IGFuZCBzdWJjbGFzc2VzXG4gICAqIE15RWxlbWVudC5lbmFibGVXYXJuaW5nPy4oJ21pZ3JhdGlvbicpO1xuICAgKiBgYGBcbiAgICpcbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IGRldi1tb2RlXG4gICAqL1xuICBzdGF0aWMgZW5hYmxlV2FybmluZz86ICh3YXJuaW5nS2luZDogV2FybmluZ0tpbmQpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIERpc2FibGUgdGhlIGdpdmVuIHdhcm5pbmcgY2F0ZWdvcnkgZm9yIHRoaXMgY2xhc3MuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIG9ubHkgZXhpc3RzIGluIGRldmVsb3BtZW50IGJ1aWxkcywgc28gaXQgc2hvdWxkIGJlIGFjY2Vzc2VkXG4gICAqIHdpdGggYSBndWFyZCBsaWtlOlxuICAgKlxuICAgKiBgYGB0c1xuICAgKiAvLyBEaXNhYmxlIGZvciBhbGwgUmVhY3RpdmVFbGVtZW50IHN1YmNsYXNzZXNcbiAgICogUmVhY3RpdmVFbGVtZW50LmRpc2FibGVXYXJuaW5nPy4oJ21pZ3JhdGlvbicpO1xuICAgKlxuICAgKiAvLyBEaXNhYmxlIGZvciBvbmx5IE15RWxlbWVudCBhbmQgc3ViY2xhc3Nlc1xuICAgKiBNeUVsZW1lbnQuZGlzYWJsZVdhcm5pbmc/LignbWlncmF0aW9uJyk7XG4gICAqIGBgYFxuICAgKlxuICAgKiBAbm9jb2xsYXBzZVxuICAgKiBAY2F0ZWdvcnkgZGV2LW1vZGVcbiAgICovXG4gIHN0YXRpYyBkaXNhYmxlV2FybmluZz86ICh3YXJuaW5nS2luZDogV2FybmluZ0tpbmQpID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEFkZHMgYW4gaW5pdGlhbGl6ZXIgZnVuY3Rpb24gdG8gdGhlIGNsYXNzIHRoYXQgaXMgY2FsbGVkIGR1cmluZyBpbnN0YW5jZVxuICAgKiBjb25zdHJ1Y3Rpb24uXG4gICAqXG4gICAqIFRoaXMgaXMgdXNlZnVsIGZvciBjb2RlIHRoYXQgcnVucyBhZ2FpbnN0IGEgYFJlYWN0aXZlRWxlbWVudGBcbiAgICogc3ViY2xhc3MsIHN1Y2ggYXMgYSBkZWNvcmF0b3IsIHRoYXQgbmVlZHMgdG8gZG8gd29yayBmb3IgZWFjaFxuICAgKiBpbnN0YW5jZSwgc3VjaCBhcyBzZXR0aW5nIHVwIGEgYFJlYWN0aXZlQ29udHJvbGxlcmAuXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IG15RGVjb3JhdG9yID0gKHRhcmdldDogdHlwZW9mIFJlYWN0aXZlRWxlbWVudCwga2V5OiBzdHJpbmcpID0+IHtcbiAgICogICB0YXJnZXQuYWRkSW5pdGlhbGl6ZXIoKGluc3RhbmNlOiBSZWFjdGl2ZUVsZW1lbnQpID0+IHtcbiAgICogICAgIC8vIFRoaXMgaXMgcnVuIGR1cmluZyBjb25zdHJ1Y3Rpb24gb2YgdGhlIGVsZW1lbnRcbiAgICogICAgIG5ldyBNeUNvbnRyb2xsZXIoaW5zdGFuY2UpO1xuICAgKiAgIH0pO1xuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBEZWNvcmF0aW5nIGEgZmllbGQgd2lsbCB0aGVuIGNhdXNlIGVhY2ggaW5zdGFuY2UgdG8gcnVuIGFuIGluaXRpYWxpemVyXG4gICAqIHRoYXQgYWRkcyBhIGNvbnRyb2xsZXI6XG4gICAqXG4gICAqIGBgYHRzXG4gICAqIGNsYXNzIE15RWxlbWVudCBleHRlbmRzIExpdEVsZW1lbnQge1xuICAgKiAgIEBteURlY29yYXRvciBmb287XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIEluaXRpYWxpemVycyBhcmUgc3RvcmVkIHBlci1jb25zdHJ1Y3Rvci4gQWRkaW5nIGFuIGluaXRpYWxpemVyIHRvIGFcbiAgICogc3ViY2xhc3MgZG9lcyBub3QgYWRkIGl0IHRvIGEgc3VwZXJjbGFzcy4gU2luY2UgaW5pdGlhbGl6ZXJzIGFyZSBydW4gaW5cbiAgICogY29uc3RydWN0b3JzLCBpbml0aWFsaXplcnMgd2lsbCBydW4gaW4gb3JkZXIgb2YgdGhlIGNsYXNzIGhpZXJhcmNoeSxcbiAgICogc3RhcnRpbmcgd2l0aCBzdXBlcmNsYXNzZXMgYW5kIHByb2dyZXNzaW5nIHRvIHRoZSBpbnN0YW5jZSdzIGNsYXNzLlxuICAgKlxuICAgKiBAbm9jb2xsYXBzZVxuICAgKi9cbiAgc3RhdGljIGFkZEluaXRpYWxpemVyKGluaXRpYWxpemVyOiBJbml0aWFsaXplcikge1xuICAgIHRoaXMuX19wcmVwYXJlKCk7XG4gICAgKHRoaXMuX2luaXRpYWxpemVycyA/Pz0gW10pLnB1c2goaW5pdGlhbGl6ZXIpO1xuICB9XG5cbiAgc3RhdGljIF9pbml0aWFsaXplcnM/OiBJbml0aWFsaXplcltdO1xuXG4gIC8qXG4gICAqIER1ZSB0byBjbG9zdXJlIGNvbXBpbGVyIEVTNiBjb21waWxhdGlvbiBidWdzLCBAbm9jb2xsYXBzZSBpcyByZXF1aXJlZCBvblxuICAgKiBhbGwgc3RhdGljIG1ldGhvZHMgYW5kIHByb3BlcnRpZXMgd2l0aCBpbml0aWFsaXplcnMuICBSZWZlcmVuY2U6XG4gICAqIC0gaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWNvbXBpbGVyL2lzc3Vlcy8xNzc2XG4gICAqL1xuXG4gIC8qKlxuICAgKiBNYXBzIGF0dHJpYnV0ZSBuYW1lcyB0byBwcm9wZXJ0aWVzOyBmb3IgZXhhbXBsZSBgZm9vYmFyYCBhdHRyaWJ1dGUgdG9cbiAgICogYGZvb0JhcmAgcHJvcGVydHkuIENyZWF0ZWQgbGF6aWx5IG9uIHVzZXIgc3ViY2xhc3NlcyB3aGVuIGZpbmFsaXppbmcgdGhlXG4gICAqIGNsYXNzLlxuICAgKiBAbm9jb2xsYXBzZVxuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgX19hdHRyaWJ1dGVUb1Byb3BlcnR5TWFwOiBBdHRyaWJ1dGVNYXA7XG5cbiAgLyoqXG4gICAqIE1hcmtzIGNsYXNzIGFzIGhhdmluZyBiZWVuIGZpbmFsaXplZCwgd2hpY2ggaW5jbHVkZXMgY3JlYXRpbmcgcHJvcGVydGllc1xuICAgKiBmcm9tIGBzdGF0aWMgcHJvcGVydGllc2AsIGJ1dCBkb2VzICpub3QqIGluY2x1ZGUgYWxsIHByb3BlcnRpZXMgY3JlYXRlZFxuICAgKiBmcm9tIGRlY29yYXRvcnMuXG4gICAqIEBub2NvbGxhcHNlXG4gICAqL1xuICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsaXplZDogdHJ1ZSB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogTWVtb2l6ZWQgbGlzdCBvZiBhbGwgZWxlbWVudCBwcm9wZXJ0aWVzLCBpbmNsdWRpbmcgYW55IHN1cGVyY2xhc3NcbiAgICogcHJvcGVydGllcy4gQ3JlYXRlZCBsYXppbHkgb24gdXNlciBzdWJjbGFzc2VzIHdoZW4gZmluYWxpemluZyB0aGUgY2xhc3MuXG4gICAqXG4gICAqIEBub2NvbGxhcHNlXG4gICAqIEBjYXRlZ29yeSBwcm9wZXJ0aWVzXG4gICAqL1xuICBzdGF0aWMgZWxlbWVudFByb3BlcnRpZXM6IFByb3BlcnR5RGVjbGFyYXRpb25NYXA7XG5cbiAgLyoqXG4gICAqIFVzZXItc3VwcGxpZWQgb2JqZWN0IHRoYXQgbWFwcyBwcm9wZXJ0eSBuYW1lcyB0byBgUHJvcGVydHlEZWNsYXJhdGlvbmBcbiAgICogb2JqZWN0cyBjb250YWluaW5nIG9wdGlvbnMgZm9yIGNvbmZpZ3VyaW5nIHJlYWN0aXZlIHByb3BlcnRpZXMuIFdoZW5cbiAgICogYSByZWFjdGl2ZSBwcm9wZXJ0eSBpcyBzZXQgdGhlIGVsZW1lbnQgd2lsbCB1cGRhdGUgYW5kIHJlbmRlci5cbiAgICpcbiAgICogQnkgZGVmYXVsdCBwcm9wZXJ0aWVzIGFyZSBwdWJsaWMgZmllbGRzLCBhbmQgYXMgc3VjaCwgdGhleSBzaG91bGQgYmVcbiAgICogY29uc2lkZXJlZCBhcyBwcmltYXJpbHkgc2V0dGFibGUgYnkgZWxlbWVudCB1c2VycywgZWl0aGVyIHZpYSBhdHRyaWJ1dGUgb3JcbiAgICogdGhlIHByb3BlcnR5IGl0c2VsZi5cbiAgICpcbiAgICogR2VuZXJhbGx5LCBwcm9wZXJ0aWVzIHRoYXQgYXJlIGNoYW5nZWQgYnkgdGhlIGVsZW1lbnQgc2hvdWxkIGJlIHByaXZhdGUgb3JcbiAgICogcHJvdGVjdGVkIGZpZWxkcyBhbmQgc2hvdWxkIHVzZSB0aGUgYHN0YXRlOiB0cnVlYCBvcHRpb24uIFByb3BlcnRpZXNcbiAgICogbWFya2VkIGFzIGBzdGF0ZWAgZG8gbm90IHJlZmxlY3QgZnJvbSB0aGUgY29ycmVzcG9uZGluZyBhdHRyaWJ1dGVcbiAgICpcbiAgICogSG93ZXZlciwgc29tZXRpbWVzIGVsZW1lbnQgY29kZSBkb2VzIG5lZWQgdG8gc2V0IGEgcHVibGljIHByb3BlcnR5LiBUaGlzXG4gICAqIHNob3VsZCB0eXBpY2FsbHkgb25seSBiZSBkb25lIGluIHJlc3BvbnNlIHRvIHVzZXIgaW50ZXJhY3Rpb24sIGFuZCBhbiBldmVudFxuICAgKiBzaG91bGQgYmUgZmlyZWQgaW5mb3JtaW5nIHRoZSB1c2VyOyBmb3IgZXhhbXBsZSwgYSBjaGVja2JveCBzZXRzIGl0c1xuICAgKiBgY2hlY2tlZGAgcHJvcGVydHkgd2hlbiBjbGlja2VkIGFuZCBmaXJlcyBhIGBjaGFuZ2VkYCBldmVudC4gTXV0YXRpbmdcbiAgICogcHVibGljIHByb3BlcnRpZXMgc2hvdWxkIHR5cGljYWxseSBub3QgYmUgZG9uZSBmb3Igbm9uLXByaW1pdGl2ZSAob2JqZWN0IG9yXG4gICAqIGFycmF5KSBwcm9wZXJ0aWVzLiBJbiBvdGhlciBjYXNlcyB3aGVuIGFuIGVsZW1lbnQgbmVlZHMgdG8gbWFuYWdlIHN0YXRlLCBhXG4gICAqIHByaXZhdGUgcHJvcGVydHkgc2V0IHdpdGggdGhlIGBzdGF0ZTogdHJ1ZWAgb3B0aW9uIHNob3VsZCBiZSB1c2VkLiBXaGVuXG4gICAqIG5lZWRlZCwgc3RhdGUgcHJvcGVydGllcyBjYW4gYmUgaW5pdGlhbGl6ZWQgdmlhIHB1YmxpYyBwcm9wZXJ0aWVzIHRvXG4gICAqIGZhY2lsaXRhdGUgY29tcGxleCBpbnRlcmFjdGlvbnMuXG4gICAqIEBub2NvbGxhcHNlXG4gICAqIEBjYXRlZ29yeSBwcm9wZXJ0aWVzXG4gICAqL1xuICBzdGF0aWMgcHJvcGVydGllczogUHJvcGVydHlEZWNsYXJhdGlvbnM7XG5cbiAgLyoqXG4gICAqIE1lbW9pemVkIGxpc3Qgb2YgYWxsIGVsZW1lbnQgc3R5bGVzLlxuICAgKiBDcmVhdGVkIGxhemlseSBvbiB1c2VyIHN1YmNsYXNzZXMgd2hlbiBmaW5hbGl6aW5nIHRoZSBjbGFzcy5cbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IHN0eWxlc1xuICAgKi9cbiAgc3RhdGljIGVsZW1lbnRTdHlsZXM6IEFycmF5PENTU1Jlc3VsdE9yTmF0aXZlPiA9IFtdO1xuXG4gIC8qKlxuICAgKiBBcnJheSBvZiBzdHlsZXMgdG8gYXBwbHkgdG8gdGhlIGVsZW1lbnQuIFRoZSBzdHlsZXMgc2hvdWxkIGJlIGRlZmluZWRcbiAgICogdXNpbmcgdGhlIHtAbGlua2NvZGUgY3NzfSB0YWcgZnVuY3Rpb24sIHZpYSBjb25zdHJ1Y3RpYmxlIHN0eWxlc2hlZXRzLCBvclxuICAgKiBpbXBvcnRlZCBmcm9tIG5hdGl2ZSBDU1MgbW9kdWxlIHNjcmlwdHMuXG4gICAqXG4gICAqIE5vdGUgb24gQ29udGVudCBTZWN1cml0eSBQb2xpY3k6XG4gICAqXG4gICAqIEVsZW1lbnQgc3R5bGVzIGFyZSBpbXBsZW1lbnRlZCB3aXRoIGA8c3R5bGU+YCB0YWdzIHdoZW4gdGhlIGJyb3dzZXIgZG9lc24ndFxuICAgKiBzdXBwb3J0IGFkb3B0ZWQgU3R5bGVTaGVldHMuIFRvIHVzZSBzdWNoIGA8c3R5bGU+YCB0YWdzIHdpdGggdGhlIHN0eWxlLXNyY1xuICAgKiBDU1AgZGlyZWN0aXZlLCB0aGUgc3R5bGUtc3JjIHZhbHVlIG11c3QgZWl0aGVyIGluY2x1ZGUgJ3Vuc2FmZS1pbmxpbmUnIG9yXG4gICAqIGBub25jZS08YmFzZTY0LXZhbHVlPmAgd2l0aCBgPGJhc2U2NC12YWx1ZT5gIHJlcGxhY2VkIGJlIGEgc2VydmVyLWdlbmVyYXRlZFxuICAgKiBub25jZS5cbiAgICpcbiAgICogVG8gcHJvdmlkZSBhIG5vbmNlIHRvIHVzZSBvbiBnZW5lcmF0ZWQgYDxzdHlsZT5gIGVsZW1lbnRzLCBzZXRcbiAgICogYHdpbmRvdy5saXROb25jZWAgdG8gYSBzZXJ2ZXItZ2VuZXJhdGVkIG5vbmNlIGluIHlvdXIgcGFnZSdzIEhUTUwsIGJlZm9yZVxuICAgKiBsb2FkaW5nIGFwcGxpY2F0aW9uIGNvZGU6XG4gICAqXG4gICAqIGBgYGh0bWxcbiAgICogPHNjcmlwdD5cbiAgICogICAvLyBHZW5lcmF0ZWQgYW5kIHVuaXF1ZSBwZXIgcmVxdWVzdDpcbiAgICogICB3aW5kb3cubGl0Tm9uY2UgPSAnYTFiMmMzZDQnO1xuICAgKiA8L3NjcmlwdD5cbiAgICogYGBgXG4gICAqIEBub2NvbGxhcHNlXG4gICAqIEBjYXRlZ29yeSBzdHlsZXNcbiAgICovXG4gIHN0YXRpYyBzdHlsZXM/OiBDU1NSZXN1bHRHcm91cDtcblxuICAvKipcbiAgICogUmV0dXJucyBhIGxpc3Qgb2YgYXR0cmlidXRlcyBjb3JyZXNwb25kaW5nIHRvIHRoZSByZWdpc3RlcmVkIHByb3BlcnRpZXMuXG4gICAqIEBub2NvbGxhcHNlXG4gICAqIEBjYXRlZ29yeSBhdHRyaWJ1dGVzXG4gICAqL1xuICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAgICAvLyBFbnN1cmUgd2UndmUgY3JlYXRlZCBhbGwgcHJvcGVydGllc1xuICAgIHRoaXMuZmluYWxpemUoKTtcbiAgICAvLyB0aGlzLl9fYXR0cmlidXRlVG9Qcm9wZXJ0eU1hcCBpcyBvbmx5IHVuZGVmaW5lZCBhZnRlciBmaW5hbGl6ZSgpIGluXG4gICAgLy8gUmVhY3RpdmVFbGVtZW50IGl0c2VsZi4gUmVhY3RpdmVFbGVtZW50Lm9ic2VydmVkQXR0cmlidXRlcyBpcyBvbmx5XG4gICAgLy8gYWNjZXNzZWQgd2l0aCBSZWFjdGl2ZUVsZW1lbnQgYXMgdGhlIHJlY2VpdmVyIHdoZW4gYSBzdWJjbGFzcyBvciBtaXhpblxuICAgIC8vIGNhbGxzIHN1cGVyLm9ic2VydmVkQXR0cmlidXRlc1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLl9fYXR0cmlidXRlVG9Qcm9wZXJ0eU1hcCAmJiBbLi4udGhpcy5fX2F0dHJpYnV0ZVRvUHJvcGVydHlNYXAua2V5cygpXVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIF9faW5zdGFuY2VQcm9wZXJ0aWVzPzogUHJvcGVydHlWYWx1ZXMgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBwcm9wZXJ0eSBhY2Nlc3NvciBvbiB0aGUgZWxlbWVudCBwcm90b3R5cGUgaWYgb25lIGRvZXMgbm90IGV4aXN0XG4gICAqIGFuZCBzdG9yZXMgYSB7QGxpbmtjb2RlIFByb3BlcnR5RGVjbGFyYXRpb259IGZvciB0aGUgcHJvcGVydHkgd2l0aCB0aGVcbiAgICogZ2l2ZW4gb3B0aW9ucy4gVGhlIHByb3BlcnR5IHNldHRlciBjYWxscyB0aGUgcHJvcGVydHkncyBgaGFzQ2hhbmdlZGBcbiAgICogcHJvcGVydHkgb3B0aW9uIG9yIHVzZXMgYSBzdHJpY3QgaWRlbnRpdHkgY2hlY2sgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgb3Igbm90XG4gICAqIHRvIHJlcXVlc3QgYW4gdXBkYXRlLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBtYXkgYmUgb3ZlcnJpZGRlbiB0byBjdXN0b21pemUgcHJvcGVydGllczsgaG93ZXZlcixcbiAgICogd2hlbiBkb2luZyBzbywgaXQncyBpbXBvcnRhbnQgdG8gY2FsbCBgc3VwZXIuY3JlYXRlUHJvcGVydHlgIHRvIGVuc3VyZVxuICAgKiB0aGUgcHJvcGVydHkgaXMgc2V0dXAgY29ycmVjdGx5LiBUaGlzIG1ldGhvZCBjYWxsc1xuICAgKiBgZ2V0UHJvcGVydHlEZXNjcmlwdG9yYCBpbnRlcm5hbGx5IHRvIGdldCBhIGRlc2NyaXB0b3IgdG8gaW5zdGFsbC5cbiAgICogVG8gY3VzdG9taXplIHdoYXQgcHJvcGVydGllcyBkbyB3aGVuIHRoZXkgYXJlIGdldCBvciBzZXQsIG92ZXJyaWRlXG4gICAqIGBnZXRQcm9wZXJ0eURlc2NyaXB0b3JgLiBUbyBjdXN0b21pemUgdGhlIG9wdGlvbnMgZm9yIGEgcHJvcGVydHksXG4gICAqIGltcGxlbWVudCBgY3JlYXRlUHJvcGVydHlgIGxpa2UgdGhpczpcbiAgICpcbiAgICogYGBgdHNcbiAgICogc3RhdGljIGNyZWF0ZVByb3BlcnR5KG5hbWUsIG9wdGlvbnMpIHtcbiAgICogICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihvcHRpb25zLCB7bXlPcHRpb246IHRydWV9KTtcbiAgICogICBzdXBlci5jcmVhdGVQcm9wZXJ0eShuYW1lLCBvcHRpb25zKTtcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IHByb3BlcnRpZXNcbiAgICovXG4gIHN0YXRpYyBjcmVhdGVQcm9wZXJ0eShcbiAgICBuYW1lOiBQcm9wZXJ0eUtleSxcbiAgICBvcHRpb25zOiBQcm9wZXJ0eURlY2xhcmF0aW9uID0gZGVmYXVsdFByb3BlcnR5RGVjbGFyYXRpb25cbiAgKSB7XG4gICAgLy8gSWYgdGhpcyBpcyBhIHN0YXRlIHByb3BlcnR5LCBmb3JjZSB0aGUgYXR0cmlidXRlIHRvIGZhbHNlLlxuICAgIGlmIChvcHRpb25zLnN0YXRlKSB7XG4gICAgICAob3B0aW9ucyBhcyBNdXRhYmxlPFByb3BlcnR5RGVjbGFyYXRpb24sICdhdHRyaWJ1dGUnPikuYXR0cmlidXRlID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuX19wcmVwYXJlKCk7XG4gICAgdGhpcy5lbGVtZW50UHJvcGVydGllcy5zZXQobmFtZSwgb3B0aW9ucyk7XG4gICAgaWYgKCFvcHRpb25zLm5vQWNjZXNzb3IpIHtcbiAgICAgIGNvbnN0IGtleSA9IERFVl9NT0RFXG4gICAgICAgID8gLy8gVXNlIFN5bWJvbC5mb3IgaW4gZGV2IG1vZGUgdG8gbWFrZSBpdCBlYXNpZXIgdG8gbWFpbnRhaW4gc3RhdGVcbiAgICAgICAgICAvLyB3aGVuIGRvaW5nIEhNUi5cbiAgICAgICAgICBTeW1ib2wuZm9yKGAke1N0cmluZyhuYW1lKX0gKEBwcm9wZXJ0eSgpIGNhY2hlKWApXG4gICAgICAgIDogU3ltYm9sKCk7XG4gICAgICBjb25zdCBkZXNjcmlwdG9yID0gdGhpcy5nZXRQcm9wZXJ0eURlc2NyaXB0b3IobmFtZSwga2V5LCBvcHRpb25zKTtcbiAgICAgIGlmIChkZXNjcmlwdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZGVmaW5lUHJvcGVydHkodGhpcy5wcm90b3R5cGUsIG5hbWUsIGRlc2NyaXB0b3IpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvcGVydHkgZGVzY3JpcHRvciB0byBiZSBkZWZpbmVkIG9uIHRoZSBnaXZlbiBuYW1lZCBwcm9wZXJ0eS5cbiAgICogSWYgbm8gZGVzY3JpcHRvciBpcyByZXR1cm5lZCwgdGhlIHByb3BlcnR5IHdpbGwgbm90IGJlY29tZSBhbiBhY2Nlc3Nvci5cbiAgICogRm9yIGV4YW1wbGUsXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIGNsYXNzIE15RWxlbWVudCBleHRlbmRzIExpdEVsZW1lbnQge1xuICAgKiAgIHN0YXRpYyBnZXRQcm9wZXJ0eURlc2NyaXB0b3IobmFtZSwga2V5LCBvcHRpb25zKSB7XG4gICAqICAgICBjb25zdCBkZWZhdWx0RGVzY3JpcHRvciA9XG4gICAqICAgICAgICAgc3VwZXIuZ2V0UHJvcGVydHlEZXNjcmlwdG9yKG5hbWUsIGtleSwgb3B0aW9ucyk7XG4gICAqICAgICBjb25zdCBzZXR0ZXIgPSBkZWZhdWx0RGVzY3JpcHRvci5zZXQ7XG4gICAqICAgICByZXR1cm4ge1xuICAgKiAgICAgICBnZXQ6IGRlZmF1bHREZXNjcmlwdG9yLmdldCxcbiAgICogICAgICAgc2V0KHZhbHVlKSB7XG4gICAqICAgICAgICAgc2V0dGVyLmNhbGwodGhpcywgdmFsdWUpO1xuICAgKiAgICAgICAgIC8vIGN1c3RvbSBhY3Rpb24uXG4gICAqICAgICAgIH0sXG4gICAqICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICogICAgICAgZW51bWVyYWJsZTogdHJ1ZVxuICAgKiAgICAgfVxuICAgKiAgIH1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogQG5vY29sbGFwc2VcbiAgICogQGNhdGVnb3J5IHByb3BlcnRpZXNcbiAgICovXG4gIHByb3RlY3RlZCBzdGF0aWMgZ2V0UHJvcGVydHlEZXNjcmlwdG9yKFxuICAgIG5hbWU6IFByb3BlcnR5S2V5LFxuICAgIGtleTogc3RyaW5nIHwgc3ltYm9sLFxuICAgIG9wdGlvbnM6IFByb3BlcnR5RGVjbGFyYXRpb25cbiAgKTogUHJvcGVydHlEZXNjcmlwdG9yIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCB7Z2V0LCBzZXR9ID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRoaXMucHJvdG90eXBlLCBuYW1lKSA/PyB7XG4gICAgICBnZXQodGhpczogUmVhY3RpdmVFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzW2tleSBhcyBrZXlvZiB0eXBlb2YgdGhpc107XG4gICAgICB9LFxuICAgICAgc2V0KHRoaXM6IFJlYWN0aXZlRWxlbWVudCwgdjogdW5rbm93bikge1xuICAgICAgICAodGhpcyBhcyB1bmtub3duIGFzIFJlY29yZDxzdHJpbmcgfCBzeW1ib2wsIHVua25vd24+KVtrZXldID0gdjtcbiAgICAgIH0sXG4gICAgfTtcbiAgICBpZiAoREVWX01PREUgJiYgZ2V0ID09IG51bGwpIHtcbiAgICAgIGlmICgndmFsdWUnIGluIChnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGhpcy5wcm90b3R5cGUsIG5hbWUpID8/IHt9KSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYEZpZWxkICR7SlNPTi5zdHJpbmdpZnkoU3RyaW5nKG5hbWUpKX0gb24gYCArXG4gICAgICAgICAgICBgJHt0aGlzLm5hbWV9IHdhcyBkZWNsYXJlZCBhcyBhIHJlYWN0aXZlIHByb3BlcnR5IGAgK1xuICAgICAgICAgICAgYGJ1dCBpdCdzIGFjdHVhbGx5IGRlY2xhcmVkIGFzIGEgdmFsdWUgb24gdGhlIHByb3RvdHlwZS4gYCArXG4gICAgICAgICAgICBgVXN1YWxseSB0aGlzIGlzIGR1ZSB0byB1c2luZyBAcHJvcGVydHkgb3IgQHN0YXRlIG9uIGEgbWV0aG9kLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlzc3VlV2FybmluZyhcbiAgICAgICAgJ3JlYWN0aXZlLXByb3BlcnR5LXdpdGhvdXQtZ2V0dGVyJyxcbiAgICAgICAgYEZpZWxkICR7SlNPTi5zdHJpbmdpZnkoU3RyaW5nKG5hbWUpKX0gb24gYCArXG4gICAgICAgICAgYCR7dGhpcy5uYW1lfSB3YXMgZGVjbGFyZWQgYXMgYSByZWFjdGl2ZSBwcm9wZXJ0eSBgICtcbiAgICAgICAgICBgYnV0IGl0IGRvZXMgbm90IGhhdmUgYSBnZXR0ZXIuIFRoaXMgd2lsbCBiZSBhbiBlcnJvciBpbiBhIGAgK1xuICAgICAgICAgIGBmdXR1cmUgdmVyc2lvbiBvZiBMaXQuYFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGdldCh0aGlzOiBSZWFjdGl2ZUVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGdldD8uY2FsbCh0aGlzKTtcbiAgICAgIH0sXG4gICAgICBzZXQodGhpczogUmVhY3RpdmVFbGVtZW50LCB2YWx1ZTogdW5rbm93bikge1xuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IGdldD8uY2FsbCh0aGlzKTtcbiAgICAgICAgc2V0IS5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgdGhpcy5yZXF1ZXN0VXBkYXRlKG5hbWUsIG9sZFZhbHVlLCBvcHRpb25zKTtcbiAgICAgIH0sXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcHJvcGVydHkgb3B0aW9ucyBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgKiBUaGVzZSBvcHRpb25zIGFyZSBkZWZpbmVkIHdpdGggYSBgUHJvcGVydHlEZWNsYXJhdGlvbmAgdmlhIHRoZSBgcHJvcGVydGllc2BcbiAgICogb2JqZWN0IG9yIHRoZSBgQHByb3BlcnR5YCBkZWNvcmF0b3IgYW5kIGFyZSByZWdpc3RlcmVkIGluXG4gICAqIGBjcmVhdGVQcm9wZXJ0eSguLi4pYC5cbiAgICpcbiAgICogTm90ZSwgdGhpcyBtZXRob2Qgc2hvdWxkIGJlIGNvbnNpZGVyZWQgXCJmaW5hbFwiIGFuZCBub3Qgb3ZlcnJpZGRlbi4gVG9cbiAgICogY3VzdG9taXplIHRoZSBvcHRpb25zIGZvciBhIGdpdmVuIHByb3BlcnR5LCBvdmVycmlkZVxuICAgKiB7QGxpbmtjb2RlIGNyZWF0ZVByb3BlcnR5fS5cbiAgICpcbiAgICogQG5vY29sbGFwc2VcbiAgICogQGZpbmFsXG4gICAqIEBjYXRlZ29yeSBwcm9wZXJ0aWVzXG4gICAqL1xuICBzdGF0aWMgZ2V0UHJvcGVydHlPcHRpb25zKG5hbWU6IFByb3BlcnR5S2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudFByb3BlcnRpZXMuZ2V0KG5hbWUpID8/IGRlZmF1bHRQcm9wZXJ0eURlY2xhcmF0aW9uO1xuICB9XG5cbiAgLy8gVGVtcG9yYXJ5LCB1bnRpbCBnb29nbGUzIGlzIG9uIFR5cGVTY3JpcHQgNS4yXG4gIGRlY2xhcmUgc3RhdGljIFtTeW1ib2wubWV0YWRhdGFdOiBvYmplY3QgJiBSZWNvcmQ8UHJvcGVydHlLZXksIHVua25vd24+O1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyBzdGF0aWMgb3duIHByb3BlcnRpZXMgb2YgdGhlIGNsYXNzIHVzZWQgaW4gYm9va2tlZXBpbmdcbiAgICogZm9yIGVsZW1lbnQgcHJvcGVydGllcywgaW5pdGlhbGl6ZXJzLCBldGMuXG4gICAqXG4gICAqIENhbiBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMgYnkgY29kZSB0aGF0IG5lZWRzIHRvIGVuc3VyZSB0aGVzZVxuICAgKiBwcm9wZXJ0aWVzIGV4aXN0IGJlZm9yZSB1c2luZyB0aGVtLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBlbnN1cmVzIHRoZSBzdXBlcmNsYXNzIGlzIGZpbmFsaXplZCBzbyB0aGF0IGluaGVyaXRlZFxuICAgKiBwcm9wZXJ0eSBtZXRhZGF0YSBjYW4gYmUgY29waWVkIGRvd24uXG4gICAqIEBub2NvbGxhcHNlXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBfX3ByZXBhcmUoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdlbGVtZW50UHJvcGVydGllcycsIHRoaXMpKVxuICAgICkge1xuICAgICAgLy8gQWxyZWFkeSBwcmVwYXJlZFxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBGaW5hbGl6ZSBhbnkgc3VwZXJjbGFzc2VzXG4gICAgY29uc3Qgc3VwZXJDdG9yID0gZ2V0UHJvdG90eXBlT2YodGhpcykgYXMgdHlwZW9mIFJlYWN0aXZlRWxlbWVudDtcbiAgICBzdXBlckN0b3IuZmluYWxpemUoKTtcblxuICAgIC8vIENyZWF0ZSBvd24gc2V0IG9mIGluaXRpYWxpemVycyBmb3IgdGhpcyBjbGFzcyBpZiBhbnkgZXhpc3Qgb24gdGhlXG4gICAgLy8gc3VwZXJjbGFzcyBhbmQgY29weSB0aGVtIGRvd24uIE5vdGUsIGZvciBhIHNtYWxsIHBlcmYgYm9vc3QsIGF2b2lkXG4gICAgLy8gY3JlYXRpbmcgaW5pdGlhbGl6ZXJzIHVubGVzcyBuZWVkZWQuXG4gICAgaWYgKHN1cGVyQ3Rvci5faW5pdGlhbGl6ZXJzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuX2luaXRpYWxpemVycyA9IFsuLi5zdXBlckN0b3IuX2luaXRpYWxpemVyc107XG4gICAgfVxuICAgIC8vIEluaXRpYWxpemUgZWxlbWVudFByb3BlcnRpZXMgZnJvbSB0aGUgc3VwZXJjbGFzc1xuICAgIHRoaXMuZWxlbWVudFByb3BlcnRpZXMgPSBuZXcgTWFwKHN1cGVyQ3Rvci5lbGVtZW50UHJvcGVydGllcyk7XG4gIH1cblxuICAvKipcbiAgICogRmluaXNoZXMgc2V0dGluZyB1cCB0aGUgY2xhc3Mgc28gdGhhdCBpdCdzIHJlYWR5IHRvIGJlIHJlZ2lzdGVyZWRcbiAgICogYXMgYSBjdXN0b20gZWxlbWVudCBhbmQgaW5zdGFudGlhdGVkLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkgdGhlIFJlYWN0aXZlRWxlbWVudC5vYnNlcnZlZEF0dHJpYnV0ZXMgZ2V0dGVyLlxuICAgKiBJZiB5b3Ugb3ZlcnJpZGUgdGhlIG9ic2VydmVkQXR0cmlidXRlcyBnZXR0ZXIsIHlvdSBtdXN0IGVpdGhlciBjYWxsXG4gICAqIHN1cGVyLm9ic2VydmVkQXR0cmlidXRlcyB0byB0cmlnZ2VyIGZpbmFsaXphdGlvbiwgb3IgY2FsbCBmaW5hbGl6ZSgpXG4gICAqIHlvdXJzZWxmLlxuICAgKlxuICAgKiBAbm9jb2xsYXBzZVxuICAgKi9cbiAgcHJvdGVjdGVkIHN0YXRpYyBmaW5hbGl6ZSgpIHtcbiAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdmaW5hbGl6ZWQnLCB0aGlzKSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xuICAgIHRoaXMuX19wcmVwYXJlKCk7XG5cbiAgICAvLyBDcmVhdGUgcHJvcGVydGllcyBmcm9tIHRoZSBzdGF0aWMgcHJvcGVydGllcyBibG9jazpcbiAgICBpZiAodGhpcy5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdwcm9wZXJ0aWVzJywgdGhpcykpKSB7XG4gICAgICBjb25zdCBwcm9wcyA9IHRoaXMucHJvcGVydGllcztcbiAgICAgIGNvbnN0IHByb3BLZXlzID0gW1xuICAgICAgICAuLi5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb3BzKSxcbiAgICAgICAgLi4uZ2V0T3duUHJvcGVydHlTeW1ib2xzKHByb3BzKSxcbiAgICAgIF0gYXMgQXJyYXk8a2V5b2YgdHlwZW9mIHByb3BzPjtcbiAgICAgIGZvciAoY29uc3QgcCBvZiBwcm9wS2V5cykge1xuICAgICAgICB0aGlzLmNyZWF0ZVByb3BlcnR5KHAsIHByb3BzW3BdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgcHJvcGVydGllcyBmcm9tIHN0YW5kYXJkIGRlY29yYXRvciBtZXRhZGF0YTpcbiAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXNbU3ltYm9sLm1ldGFkYXRhXTtcbiAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBsaXRQcm9wZXJ0eU1ldGFkYXRhLmdldChtZXRhZGF0YSk7XG4gICAgICBpZiAocHJvcGVydGllcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGZvciAoY29uc3QgW3AsIG9wdGlvbnNdIG9mIHByb3BlcnRpZXMpIHtcbiAgICAgICAgICB0aGlzLmVsZW1lbnRQcm9wZXJ0aWVzLnNldChwLCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENyZWF0ZSB0aGUgYXR0cmlidXRlLXRvLXByb3BlcnR5IG1hcFxuICAgIHRoaXMuX19hdHRyaWJ1dGVUb1Byb3BlcnR5TWFwID0gbmV3IE1hcCgpO1xuICAgIGZvciAoY29uc3QgW3AsIG9wdGlvbnNdIG9mIHRoaXMuZWxlbWVudFByb3BlcnRpZXMpIHtcbiAgICAgIGNvbnN0IGF0dHIgPSB0aGlzLl9fYXR0cmlidXRlTmFtZUZvclByb3BlcnR5KHAsIG9wdGlvbnMpO1xuICAgICAgaWYgKGF0dHIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9fYXR0cmlidXRlVG9Qcm9wZXJ0eU1hcC5zZXQoYXR0ciwgcCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5lbGVtZW50U3R5bGVzID0gdGhpcy5maW5hbGl6ZVN0eWxlcyh0aGlzLnN0eWxlcyk7XG5cbiAgICBpZiAoREVWX01PREUpIHtcbiAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KCdjcmVhdGVQcm9wZXJ0eScpKSB7XG4gICAgICAgIGlzc3VlV2FybmluZyhcbiAgICAgICAgICAnbm8tb3ZlcnJpZGUtY3JlYXRlLXByb3BlcnR5JyxcbiAgICAgICAgICAnT3ZlcnJpZGluZyBSZWFjdGl2ZUVsZW1lbnQuY3JlYXRlUHJvcGVydHkoKSBpcyBkZXByZWNhdGVkLiAnICtcbiAgICAgICAgICAgICdUaGUgb3ZlcnJpZGUgd2lsbCBub3QgYmUgY2FsbGVkIHdpdGggc3RhbmRhcmQgZGVjb3JhdG9ycydcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KCdnZXRQcm9wZXJ0eURlc2NyaXB0b3InKSkge1xuICAgICAgICBpc3N1ZVdhcm5pbmcoXG4gICAgICAgICAgJ25vLW92ZXJyaWRlLWdldC1wcm9wZXJ0eS1kZXNjcmlwdG9yJyxcbiAgICAgICAgICAnT3ZlcnJpZGluZyBSZWFjdGl2ZUVsZW1lbnQuZ2V0UHJvcGVydHlEZXNjcmlwdG9yKCkgaXMgZGVwcmVjYXRlZC4gJyArXG4gICAgICAgICAgICAnVGhlIG92ZXJyaWRlIHdpbGwgbm90IGJlIGNhbGxlZCB3aXRoIHN0YW5kYXJkIGRlY29yYXRvcnMnXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE9wdGlvbnMgdXNlZCB3aGVuIGNhbGxpbmcgYGF0dGFjaFNoYWRvd2AuIFNldCB0aGlzIHByb3BlcnR5IHRvIGN1c3RvbWl6ZVxuICAgKiB0aGUgb3B0aW9ucyBmb3IgdGhlIHNoYWRvd1Jvb3Q7IGZvciBleGFtcGxlLCB0byBjcmVhdGUgYSBjbG9zZWRcbiAgICogc2hhZG93Um9vdDogYHttb2RlOiAnY2xvc2VkJ31gLlxuICAgKlxuICAgKiBOb3RlLCB0aGVzZSBvcHRpb25zIGFyZSB1c2VkIGluIGBjcmVhdGVSZW5kZXJSb290YC4gSWYgdGhpcyBtZXRob2RcbiAgICogaXMgY3VzdG9taXplZCwgb3B0aW9ucyBzaG91bGQgYmUgcmVzcGVjdGVkIGlmIHBvc3NpYmxlLlxuICAgKiBAbm9jb2xsYXBzZVxuICAgKiBAY2F0ZWdvcnkgcmVuZGVyaW5nXG4gICAqL1xuICBzdGF0aWMgc2hhZG93Um9vdE9wdGlvbnM6IFNoYWRvd1Jvb3RJbml0ID0ge21vZGU6ICdvcGVuJ307XG5cbiAgLyoqXG4gICAqIFRha2VzIHRoZSBzdHlsZXMgdGhlIHVzZXIgc3VwcGxpZWQgdmlhIHRoZSBgc3RhdGljIHN0eWxlc2AgcHJvcGVydHkgYW5kXG4gICAqIHJldHVybnMgdGhlIGFycmF5IG9mIHN0eWxlcyB0byBhcHBseSB0byB0aGUgZWxlbWVudC5cbiAgICogT3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gaW50ZWdyYXRlIGludG8gYSBzdHlsZSBtYW5hZ2VtZW50IHN5c3RlbS5cbiAgICpcbiAgICogU3R5bGVzIGFyZSBkZWR1cGxpY2F0ZWQgcHJlc2VydmluZyB0aGUgX2xhc3RfIGluc3RhbmNlIGluIHRoZSBsaXN0LiBUaGlzXG4gICAqIGlzIGEgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uIHRvIGF2b2lkIGR1cGxpY2F0ZWQgc3R5bGVzIHRoYXQgY2FuIG9jY3VyXG4gICAqIGVzcGVjaWFsbHkgd2hlbiBjb21wb3NpbmcgdmlhIHN1YmNsYXNzaW5nLiBUaGUgbGFzdCBpdGVtIGlzIGtlcHQgdG8gdHJ5XG4gICAqIHRvIHByZXNlcnZlIHRoZSBjYXNjYWRlIG9yZGVyIHdpdGggdGhlIGFzc3VtcHRpb24gdGhhdCBpdCdzIG1vc3QgaW1wb3J0YW50XG4gICAqIHRoYXQgbGFzdCBhZGRlZCBzdHlsZXMgb3ZlcnJpZGUgcHJldmlvdXMgc3R5bGVzLlxuICAgKlxuICAgKiBAbm9jb2xsYXBzZVxuICAgKiBAY2F0ZWdvcnkgc3R5bGVzXG4gICAqL1xuICBwcm90ZWN0ZWQgc3RhdGljIGZpbmFsaXplU3R5bGVzKFxuICAgIHN0eWxlcz86IENTU1Jlc3VsdEdyb3VwXG4gICk6IEFycmF5PENTU1Jlc3VsdE9yTmF0aXZlPiB7XG4gICAgY29uc3QgZWxlbWVudFN0eWxlcyA9IFtdO1xuICAgIGlmIChBcnJheS5pc0FycmF5KHN0eWxlcykpIHtcbiAgICAgIC8vIERlZHVwZSB0aGUgZmxhdHRlbmVkIGFycmF5IGluIHJldmVyc2Ugb3JkZXIgdG8gcHJlc2VydmUgdGhlIGxhc3QgaXRlbXMuXG4gICAgICAvLyBDYXN0aW5nIHRvIEFycmF5PHVua25vd24+IHdvcmtzIGFyb3VuZCBUUyBlcnJvciB0aGF0XG4gICAgICAvLyBhcHBlYXJzIHRvIGNvbWUgZnJvbSB0cnlpbmcgdG8gZmxhdHRlbiBhIHR5cGUgQ1NTUmVzdWx0QXJyYXkuXG4gICAgICBjb25zdCBzZXQgPSBuZXcgU2V0KChzdHlsZXMgYXMgQXJyYXk8dW5rbm93bj4pLmZsYXQoSW5maW5pdHkpLnJldmVyc2UoKSk7XG4gICAgICAvLyBUaGVuIHByZXNlcnZlIG9yaWdpbmFsIG9yZGVyIGJ5IGFkZGluZyB0aGUgc2V0IGl0ZW1zIGluIHJldmVyc2Ugb3JkZXIuXG4gICAgICBmb3IgKGNvbnN0IHMgb2Ygc2V0KSB7XG4gICAgICAgIGVsZW1lbnRTdHlsZXMudW5zaGlmdChnZXRDb21wYXRpYmxlU3R5bGUocyBhcyBDU1NSZXN1bHRPck5hdGl2ZSkpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc3R5bGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGVsZW1lbnRTdHlsZXMucHVzaChnZXRDb21wYXRpYmxlU3R5bGUoc3R5bGVzKSk7XG4gICAgfVxuICAgIHJldHVybiBlbGVtZW50U3R5bGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vZGUgb3IgU2hhZG93Um9vdCBpbnRvIHdoaWNoIGVsZW1lbnQgRE9NIHNob3VsZCBiZSByZW5kZXJlZC4gRGVmYXVsdHNcbiAgICogdG8gYW4gb3BlbiBzaGFkb3dSb290LlxuICAgKiBAY2F0ZWdvcnkgcmVuZGVyaW5nXG4gICAqL1xuICByZWFkb25seSByZW5kZXJSb290ITogSFRNTEVsZW1lbnQgfCBEb2N1bWVudEZyYWdtZW50O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBwcm9wZXJ0eSBuYW1lIGZvciB0aGUgZ2l2ZW4gYXR0cmlidXRlIGBuYW1lYC5cbiAgICogQG5vY29sbGFwc2VcbiAgICovXG4gIHByaXZhdGUgc3RhdGljIF9fYXR0cmlidXRlTmFtZUZvclByb3BlcnR5KFxuICAgIG5hbWU6IFByb3BlcnR5S2V5LFxuICAgIG9wdGlvbnM6IFByb3BlcnR5RGVjbGFyYXRpb25cbiAgKSB7XG4gICAgY29uc3QgYXR0cmlidXRlID0gb3B0aW9ucy5hdHRyaWJ1dGU7XG4gICAgcmV0dXJuIGF0dHJpYnV0ZSA9PT0gZmFsc2VcbiAgICAgID8gdW5kZWZpbmVkXG4gICAgICA6IHR5cGVvZiBhdHRyaWJ1dGUgPT09ICdzdHJpbmcnXG4gICAgICA/IGF0dHJpYnV0ZVxuICAgICAgOiB0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZydcbiAgICAgID8gbmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8vIEluaXRpYWxpemUgdG8gYW4gdW5yZXNvbHZlZCBQcm9taXNlIHNvIHdlIGNhbiBtYWtlIHN1cmUgdGhlIGVsZW1lbnQgaGFzXG4gIC8vIGNvbm5lY3RlZCBiZWZvcmUgZmlyc3QgdXBkYXRlLlxuICBwcml2YXRlIF9fdXBkYXRlUHJvbWlzZSE6IFByb21pc2U8Ym9vbGVhbj47XG5cbiAgLyoqXG4gICAqIFRydWUgaWYgdGhlcmUgaXMgYSBwZW5kaW5nIHVwZGF0ZSBhcyBhIHJlc3VsdCBvZiBjYWxsaW5nIGByZXF1ZXN0VXBkYXRlKClgLlxuICAgKiBTaG91bGQgb25seSBiZSByZWFkLlxuICAgKiBAY2F0ZWdvcnkgdXBkYXRlc1xuICAgKi9cbiAgaXNVcGRhdGVQZW5kaW5nID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIElzIHNldCB0byBgdHJ1ZWAgYWZ0ZXIgdGhlIGZpcnN0IHVwZGF0ZS4gVGhlIGVsZW1lbnQgY29kZSBjYW5ub3QgYXNzdW1lXG4gICAqIHRoYXQgYHJlbmRlclJvb3RgIGV4aXN0cyBiZWZvcmUgdGhlIGVsZW1lbnQgYGhhc1VwZGF0ZWRgLlxuICAgKiBAY2F0ZWdvcnkgdXBkYXRlc1xuICAgKi9cbiAgaGFzVXBkYXRlZCA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBNYXAgd2l0aCBrZXlzIGZvciBhbnkgcHJvcGVydGllcyB0aGF0IGhhdmUgY2hhbmdlZCBzaW5jZSB0aGUgbGFzdFxuICAgKiB1cGRhdGUgY3ljbGUgd2l0aCBwcmV2aW91cyB2YWx1ZXMuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgXyRjaGFuZ2VkUHJvcGVydGllcyE6IFByb3BlcnR5VmFsdWVzO1xuXG4gIC8qKlxuICAgKiBQcm9wZXJ0aWVzIHRoYXQgc2hvdWxkIGJlIHJlZmxlY3RlZCB3aGVuIHVwZGF0ZWQuXG4gICAqL1xuICBwcml2YXRlIF9fcmVmbGVjdGluZ1Byb3BlcnRpZXM/OiBTZXQ8UHJvcGVydHlLZXk+O1xuXG4gIC8qKlxuICAgKiBOYW1lIG9mIGN1cnJlbnRseSByZWZsZWN0aW5nIHByb3BlcnR5XG4gICAqL1xuICBwcml2YXRlIF9fcmVmbGVjdGluZ1Byb3BlcnR5OiBQcm9wZXJ0eUtleSB8IG51bGwgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBTZXQgb2YgY29udHJvbGxlcnMuXG4gICAqL1xuICBwcml2YXRlIF9fY29udHJvbGxlcnM/OiBTZXQ8UmVhY3RpdmVDb250cm9sbGVyPjtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX19pbml0aWFsaXplKCk7XG4gIH1cblxuICAvKipcbiAgICogSW50ZXJuYWwgb25seSBvdmVycmlkZSBwb2ludCBmb3IgY3VzdG9taXppbmcgd29yayBkb25lIHdoZW4gZWxlbWVudHNcbiAgICogYXJlIGNvbnN0cnVjdGVkLlxuICAgKi9cbiAgcHJpdmF0ZSBfX2luaXRpYWxpemUoKSB7XG4gICAgdGhpcy5fX3VwZGF0ZVByb21pc2UgPSBuZXcgUHJvbWlzZTxib29sZWFuPihcbiAgICAgIChyZXMpID0+ICh0aGlzLmVuYWJsZVVwZGF0aW5nID0gcmVzKVxuICAgICk7XG4gICAgdGhpcy5fJGNoYW5nZWRQcm9wZXJ0aWVzID0gbmV3IE1hcCgpO1xuICAgIC8vIFRoaXMgZW5xdWV1ZXMgYSBtaWNyb3Rhc2sgdGhhdCB1c3QgcnVuIGJlZm9yZSB0aGUgZmlyc3QgdXBkYXRlLCBzbyBpdFxuICAgIC8vIG11c3QgYmUgY2FsbGVkIGJlZm9yZSByZXF1ZXN0VXBkYXRlKClcbiAgICB0aGlzLl9fc2F2ZUluc3RhbmNlUHJvcGVydGllcygpO1xuICAgIC8vIGVuc3VyZXMgZmlyc3QgdXBkYXRlIHdpbGwgYmUgY2F1Z2h0IGJ5IGFuIGVhcmx5IGFjY2VzcyBvZlxuICAgIC8vIGB1cGRhdGVDb21wbGV0ZWBcbiAgICB0aGlzLnJlcXVlc3RVcGRhdGUoKTtcbiAgICAodGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50KS5faW5pdGlhbGl6ZXJzPy5mb3JFYWNoKChpKSA9PlxuICAgICAgaSh0aGlzKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgYFJlYWN0aXZlQ29udHJvbGxlcmAgdG8gcGFydGljaXBhdGUgaW4gdGhlIGVsZW1lbnQncyByZWFjdGl2ZVxuICAgKiB1cGRhdGUgY3ljbGUuIFRoZSBlbGVtZW50IGF1dG9tYXRpY2FsbHkgY2FsbHMgaW50byBhbnkgcmVnaXN0ZXJlZFxuICAgKiBjb250cm9sbGVycyBkdXJpbmcgaXRzIGxpZmVjeWNsZSBjYWxsYmFja3MuXG4gICAqXG4gICAqIElmIHRoZSBlbGVtZW50IGlzIGNvbm5lY3RlZCB3aGVuIGBhZGRDb250cm9sbGVyKClgIGlzIGNhbGxlZCwgdGhlXG4gICAqIGNvbnRyb2xsZXIncyBgaG9zdENvbm5lY3RlZCgpYCBjYWxsYmFjayB3aWxsIGJlIGltbWVkaWF0ZWx5IGNhbGxlZC5cbiAgICogQGNhdGVnb3J5IGNvbnRyb2xsZXJzXG4gICAqL1xuICBhZGRDb250cm9sbGVyKGNvbnRyb2xsZXI6IFJlYWN0aXZlQ29udHJvbGxlcikge1xuICAgICh0aGlzLl9fY29udHJvbGxlcnMgPz89IG5ldyBTZXQoKSkuYWRkKGNvbnRyb2xsZXIpO1xuICAgIC8vIElmIGEgY29udHJvbGxlciBpcyBhZGRlZCBhZnRlciB0aGUgZWxlbWVudCBoYXMgYmVlbiBjb25uZWN0ZWQsXG4gICAgLy8gY2FsbCBob3N0Q29ubmVjdGVkLiBOb3RlLCByZS11c2luZyBleGlzdGVuY2Ugb2YgYHJlbmRlclJvb3RgIGhlcmVcbiAgICAvLyAod2hpY2ggaXMgc2V0IGluIGNvbm5lY3RlZENhbGxiYWNrKSB0byBhdm9pZCB0aGUgbmVlZCB0byB0cmFjayBhXG4gICAgLy8gZmlyc3QgY29ubmVjdGVkIHN0YXRlLlxuICAgIGlmICh0aGlzLnJlbmRlclJvb3QgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmlzQ29ubmVjdGVkKSB7XG4gICAgICBjb250cm9sbGVyLmhvc3RDb25uZWN0ZWQ/LigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgYFJlYWN0aXZlQ29udHJvbGxlcmAgZnJvbSB0aGUgZWxlbWVudC5cbiAgICogQGNhdGVnb3J5IGNvbnRyb2xsZXJzXG4gICAqL1xuICByZW1vdmVDb250cm9sbGVyKGNvbnRyb2xsZXI6IFJlYWN0aXZlQ29udHJvbGxlcikge1xuICAgIHRoaXMuX19jb250cm9sbGVycz8uZGVsZXRlKGNvbnRyb2xsZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpeGVzIGFueSBwcm9wZXJ0aWVzIHNldCBvbiB0aGUgaW5zdGFuY2UgYmVmb3JlIHVwZ3JhZGUgdGltZS5cbiAgICogT3RoZXJ3aXNlIHRoZXNlIHdvdWxkIHNoYWRvdyB0aGUgYWNjZXNzb3IgYW5kIGJyZWFrIHRoZXNlIHByb3BlcnRpZXMuXG4gICAqIFRoZSBwcm9wZXJ0aWVzIGFyZSBzdG9yZWQgaW4gYSBNYXAgd2hpY2ggaXMgcGxheWVkIGJhY2sgYWZ0ZXIgdGhlXG4gICAqIGNvbnN0cnVjdG9yIHJ1bnMuIE5vdGUsIG9uIHZlcnkgb2xkIHZlcnNpb25zIG9mIFNhZmFyaSAoPD05KSBvciBDaHJvbWVcbiAgICogKDw9NDEpLCBwcm9wZXJ0aWVzIGNyZWF0ZWQgZm9yIG5hdGl2ZSBwbGF0Zm9ybSBwcm9wZXJ0aWVzIGxpa2UgKGBpZGAgb3JcbiAgICogYG5hbWVgKSBtYXkgbm90IGhhdmUgZGVmYXVsdCB2YWx1ZXMgc2V0IGluIHRoZSBlbGVtZW50IGNvbnN0cnVjdG9yLiBPblxuICAgKiB0aGVzZSBicm93c2VycyBuYXRpdmUgcHJvcGVydGllcyBhcHBlYXIgb24gaW5zdGFuY2VzIGFuZCB0aGVyZWZvcmUgdGhlaXJcbiAgICogZGVmYXVsdCB2YWx1ZSB3aWxsIG92ZXJ3cml0ZSBhbnkgZWxlbWVudCBkZWZhdWx0IChlLmcuIGlmIHRoZSBlbGVtZW50IHNldHNcbiAgICogdGhpcy5pZCA9ICdpZCcgaW4gdGhlIGNvbnN0cnVjdG9yLCB0aGUgJ2lkJyB3aWxsIGJlY29tZSAnJyBzaW5jZSB0aGlzIGlzXG4gICAqIHRoZSBuYXRpdmUgcGxhdGZvcm0gZGVmYXVsdCkuXG4gICAqL1xuICBwcml2YXRlIF9fc2F2ZUluc3RhbmNlUHJvcGVydGllcygpIHtcbiAgICBjb25zdCBpbnN0YW5jZVByb3BlcnRpZXMgPSBuZXcgTWFwPFByb3BlcnR5S2V5LCB1bmtub3duPigpO1xuICAgIGNvbnN0IGVsZW1lbnRQcm9wZXJ0aWVzID0gKHRoaXMuY29uc3RydWN0b3IgYXMgdHlwZW9mIFJlYWN0aXZlRWxlbWVudClcbiAgICAgIC5lbGVtZW50UHJvcGVydGllcztcbiAgICBmb3IgKGNvbnN0IHAgb2YgZWxlbWVudFByb3BlcnRpZXMua2V5cygpIGFzIEl0ZXJhYmxlSXRlcmF0b3I8a2V5b2YgdGhpcz4pIHtcbiAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KHApKSB7XG4gICAgICAgIGluc3RhbmNlUHJvcGVydGllcy5zZXQocCwgdGhpc1twXSk7XG4gICAgICAgIGRlbGV0ZSB0aGlzW3BdO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW5zdGFuY2VQcm9wZXJ0aWVzLnNpemUgPiAwKSB7XG4gICAgICB0aGlzLl9faW5zdGFuY2VQcm9wZXJ0aWVzID0gaW5zdGFuY2VQcm9wZXJ0aWVzO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBub2RlIGludG8gd2hpY2ggdGhlIGVsZW1lbnQgc2hvdWxkIHJlbmRlciBhbmQgYnkgZGVmYXVsdFxuICAgKiBjcmVhdGVzIGFuZCByZXR1cm5zIGFuIG9wZW4gc2hhZG93Um9vdC4gSW1wbGVtZW50IHRvIGN1c3RvbWl6ZSB3aGVyZSB0aGVcbiAgICogZWxlbWVudCdzIERPTSBpcyByZW5kZXJlZC4gRm9yIGV4YW1wbGUsIHRvIHJlbmRlciBpbnRvIHRoZSBlbGVtZW50J3NcbiAgICogY2hpbGROb2RlcywgcmV0dXJuIGB0aGlzYC5cbiAgICpcbiAgICogQHJldHVybiBSZXR1cm5zIGEgbm9kZSBpbnRvIHdoaWNoIHRvIHJlbmRlci5cbiAgICogQGNhdGVnb3J5IHJlbmRlcmluZ1xuICAgKi9cbiAgcHJvdGVjdGVkIGNyZWF0ZVJlbmRlclJvb3QoKTogSFRNTEVsZW1lbnQgfCBEb2N1bWVudEZyYWdtZW50IHtcbiAgICBjb25zdCByZW5kZXJSb290ID1cbiAgICAgIHRoaXMuc2hhZG93Um9vdCA/P1xuICAgICAgdGhpcy5hdHRhY2hTaGFkb3coXG4gICAgICAgICh0aGlzLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBSZWFjdGl2ZUVsZW1lbnQpLnNoYWRvd1Jvb3RPcHRpb25zXG4gICAgICApO1xuICAgIGFkb3B0U3R5bGVzKFxuICAgICAgcmVuZGVyUm9vdCxcbiAgICAgICh0aGlzLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBSZWFjdGl2ZUVsZW1lbnQpLmVsZW1lbnRTdHlsZXNcbiAgICApO1xuICAgIHJldHVybiByZW5kZXJSb290O1xuICB9XG5cbiAgLyoqXG4gICAqIE9uIGZpcnN0IGNvbm5lY3Rpb24sIGNyZWF0ZXMgdGhlIGVsZW1lbnQncyByZW5kZXJSb290LCBzZXRzIHVwXG4gICAqIGVsZW1lbnQgc3R5bGluZywgYW5kIGVuYWJsZXMgdXBkYXRpbmcuXG4gICAqIEBjYXRlZ29yeSBsaWZlY3ljbGVcbiAgICovXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIC8vIENyZWF0ZSByZW5kZXJSb290IGJlZm9yZSBjb250cm9sbGVycyBgaG9zdENvbm5lY3RlZGBcbiAgICAodGhpcyBhcyBNdXRhYmxlPHR5cGVvZiB0aGlzLCAncmVuZGVyUm9vdCc+KS5yZW5kZXJSb290ID8/PVxuICAgICAgdGhpcy5jcmVhdGVSZW5kZXJSb290KCk7XG4gICAgdGhpcy5lbmFibGVVcGRhdGluZyh0cnVlKTtcbiAgICB0aGlzLl9fY29udHJvbGxlcnM/LmZvckVhY2goKGMpID0+IGMuaG9zdENvbm5lY3RlZD8uKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vdGUsIHRoaXMgbWV0aG9kIHNob3VsZCBiZSBjb25zaWRlcmVkIGZpbmFsIGFuZCBub3Qgb3ZlcnJpZGRlbi4gSXQgaXNcbiAgICogb3ZlcnJpZGRlbiBvbiB0aGUgZWxlbWVudCBpbnN0YW5jZSB3aXRoIGEgZnVuY3Rpb24gdGhhdCB0cmlnZ2VycyB0aGUgZmlyc3RcbiAgICogdXBkYXRlLlxuICAgKiBAY2F0ZWdvcnkgdXBkYXRlc1xuICAgKi9cbiAgcHJvdGVjdGVkIGVuYWJsZVVwZGF0aW5nKF9yZXF1ZXN0ZWRVcGRhdGU6IGJvb2xlYW4pIHt9XG5cbiAgLyoqXG4gICAqIEFsbG93cyBmb3IgYHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKClgIGluIGV4dGVuc2lvbnMgd2hpbGVcbiAgICogcmVzZXJ2aW5nIHRoZSBwb3NzaWJpbGl0eSBvZiBtYWtpbmcgbm9uLWJyZWFraW5nIGZlYXR1cmUgYWRkaXRpb25zXG4gICAqIHdoZW4gZGlzY29ubmVjdGluZyBhdCBzb21lIHBvaW50IGluIHRoZSBmdXR1cmUuXG4gICAqIEBjYXRlZ29yeSBsaWZlY3ljbGVcbiAgICovXG4gIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHRoaXMuX19jb250cm9sbGVycz8uZm9yRWFjaCgoYykgPT4gYy5ob3N0RGlzY29ubmVjdGVkPy4oKSk7XG4gIH1cblxuICAvKipcbiAgICogU3luY2hyb25pemVzIHByb3BlcnR5IHZhbHVlcyB3aGVuIGF0dHJpYnV0ZXMgY2hhbmdlLlxuICAgKlxuICAgKiBTcGVjaWZpY2FsbHksIHdoZW4gYW4gYXR0cmlidXRlIGlzIHNldCwgdGhlIGNvcnJlc3BvbmRpbmcgcHJvcGVydHkgaXMgc2V0LlxuICAgKiBZb3Ugc2hvdWxkIHJhcmVseSBuZWVkIHRvIGltcGxlbWVudCB0aGlzIGNhbGxiYWNrLiBJZiB0aGlzIG1ldGhvZCBpc1xuICAgKiBvdmVycmlkZGVuLCBgc3VwZXIuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIF9vbGQsIHZhbHVlKWAgbXVzdCBiZVxuICAgKiBjYWxsZWQuXG4gICAqXG4gICAqIFNlZSBbdXNpbmcgdGhlIGxpZmVjeWNsZSBjYWxsYmFja3NdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL1dlYl9Db21wb25lbnRzL1VzaW5nX2N1c3RvbV9lbGVtZW50cyN1c2luZ190aGVfbGlmZWN5Y2xlX2NhbGxiYWNrcylcbiAgICogb24gTUROIGZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrYC5cbiAgICogQGNhdGVnb3J5IGF0dHJpYnV0ZXNcbiAgICovXG4gIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgX29sZDogc3RyaW5nIHwgbnVsbCxcbiAgICB2YWx1ZTogc3RyaW5nIHwgbnVsbFxuICApIHtcbiAgICB0aGlzLl8kYXR0cmlidXRlVG9Qcm9wZXJ0eShuYW1lLCB2YWx1ZSk7XG4gIH1cblxuICBwcml2YXRlIF9fcHJvcGVydHlUb0F0dHJpYnV0ZShuYW1lOiBQcm9wZXJ0eUtleSwgdmFsdWU6IHVua25vd24pIHtcbiAgICBjb25zdCBlbGVtUHJvcGVydGllczogUHJvcGVydHlEZWNsYXJhdGlvbk1hcCA9IChcbiAgICAgIHRoaXMuY29uc3RydWN0b3IgYXMgdHlwZW9mIFJlYWN0aXZlRWxlbWVudFxuICAgICkuZWxlbWVudFByb3BlcnRpZXM7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGVsZW1Qcm9wZXJ0aWVzLmdldChuYW1lKSE7XG4gICAgY29uc3QgYXR0ciA9IChcbiAgICAgIHRoaXMuY29uc3RydWN0b3IgYXMgdHlwZW9mIFJlYWN0aXZlRWxlbWVudFxuICAgICkuX19hdHRyaWJ1dGVOYW1lRm9yUHJvcGVydHkobmFtZSwgb3B0aW9ucyk7XG4gICAgaWYgKGF0dHIgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLnJlZmxlY3QgPT09IHRydWUpIHtcbiAgICAgIGNvbnN0IGNvbnZlcnRlciA9XG4gICAgICAgIChvcHRpb25zLmNvbnZlcnRlciBhcyBDb21wbGV4QXR0cmlidXRlQ29udmVydGVyKT8udG9BdHRyaWJ1dGUgIT09XG4gICAgICAgIHVuZGVmaW5lZFxuICAgICAgICAgID8gKG9wdGlvbnMuY29udmVydGVyIGFzIENvbXBsZXhBdHRyaWJ1dGVDb252ZXJ0ZXIpXG4gICAgICAgICAgOiBkZWZhdWx0Q29udmVydGVyO1xuICAgICAgY29uc3QgYXR0clZhbHVlID0gY29udmVydGVyLnRvQXR0cmlidXRlISh2YWx1ZSwgb3B0aW9ucy50eXBlKTtcbiAgICAgIGlmIChcbiAgICAgICAgREVWX01PREUgJiZcbiAgICAgICAgKHRoaXMuY29uc3RydWN0b3IgYXMgdHlwZW9mIFJlYWN0aXZlRWxlbWVudCkuZW5hYmxlZFdhcm5pbmdzIS5pbmNsdWRlcyhcbiAgICAgICAgICAnbWlncmF0aW9uJ1xuICAgICAgICApICYmXG4gICAgICAgIGF0dHJWYWx1ZSA9PT0gdW5kZWZpbmVkXG4gICAgICApIHtcbiAgICAgICAgaXNzdWVXYXJuaW5nKFxuICAgICAgICAgICd1bmRlZmluZWQtYXR0cmlidXRlLXZhbHVlJyxcbiAgICAgICAgICBgVGhlIGF0dHJpYnV0ZSB2YWx1ZSBmb3IgdGhlICR7bmFtZSBhcyBzdHJpbmd9IHByb3BlcnR5IGlzIGAgK1xuICAgICAgICAgICAgYHVuZGVmaW5lZCBvbiBlbGVtZW50ICR7dGhpcy5sb2NhbE5hbWV9LiBUaGUgYXR0cmlidXRlIHdpbGwgYmUgYCArXG4gICAgICAgICAgICBgcmVtb3ZlZCwgYnV0IGluIHRoZSBwcmV2aW91cyB2ZXJzaW9uIG9mIFxcYFJlYWN0aXZlRWxlbWVudFxcYCwgYCArXG4gICAgICAgICAgICBgdGhlIGF0dHJpYnV0ZSB3b3VsZCBub3QgaGF2ZSBjaGFuZ2VkLmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIC8vIFRyYWNrIGlmIHRoZSBwcm9wZXJ0eSBpcyBiZWluZyByZWZsZWN0ZWQgdG8gYXZvaWRcbiAgICAgIC8vIHNldHRpbmcgdGhlIHByb3BlcnR5IGFnYWluIHZpYSBgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrYC4gTm90ZTpcbiAgICAgIC8vIDEuIHRoaXMgdGFrZXMgYWR2YW50YWdlIG9mIHRoZSBmYWN0IHRoYXQgdGhlIGNhbGxiYWNrIGlzIHN5bmNocm9ub3VzLlxuICAgICAgLy8gMi4gd2lsbCBiZWhhdmUgaW5jb3JyZWN0bHkgaWYgbXVsdGlwbGUgYXR0cmlidXRlcyBhcmUgaW4gdGhlIHJlYWN0aW9uXG4gICAgICAvLyBzdGFjayBhdCB0aW1lIG9mIGNhbGxpbmcuIEhvd2V2ZXIsIHNpbmNlIHdlIHByb2Nlc3MgYXR0cmlidXRlc1xuICAgICAgLy8gaW4gYHVwZGF0ZWAgdGhpcyBzaG91bGQgbm90IGJlIHBvc3NpYmxlIChvciBhbiBleHRyZW1lIGNvcm5lciBjYXNlXG4gICAgICAvLyB0aGF0IHdlJ2QgbGlrZSB0byBkaXNjb3ZlcikuXG4gICAgICAvLyBtYXJrIHN0YXRlIHJlZmxlY3RpbmdcbiAgICAgIHRoaXMuX19yZWZsZWN0aW5nUHJvcGVydHkgPSBuYW1lO1xuICAgICAgaWYgKGF0dHJWYWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoYXR0ciwgYXR0clZhbHVlIGFzIHN0cmluZyk7XG4gICAgICB9XG4gICAgICAvLyBtYXJrIHN0YXRlIG5vdCByZWZsZWN0aW5nXG4gICAgICB0aGlzLl9fcmVmbGVjdGluZ1Byb3BlcnR5ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKiogQGludGVybmFsICovXG4gIF8kYXR0cmlidXRlVG9Qcm9wZXJ0eShuYW1lOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3IgYXMgdHlwZW9mIFJlYWN0aXZlRWxlbWVudDtcbiAgICAvLyBOb3RlLCBoaW50IHRoaXMgYXMgYW4gYEF0dHJpYnV0ZU1hcGAgc28gY2xvc3VyZSBjbGVhcmx5IHVuZGVyc3RhbmRzXG4gICAgLy8gdGhlIHR5cGU7IGl0IGhhcyBpc3N1ZXMgd2l0aCB0cmFja2luZyB0eXBlcyB0aHJvdWdoIHN0YXRpY3NcbiAgICBjb25zdCBwcm9wTmFtZSA9IChjdG9yLl9fYXR0cmlidXRlVG9Qcm9wZXJ0eU1hcCBhcyBBdHRyaWJ1dGVNYXApLmdldChuYW1lKTtcbiAgICAvLyBVc2UgdHJhY2tpbmcgaW5mbyB0byBhdm9pZCByZWZsZWN0aW5nIGEgcHJvcGVydHkgdmFsdWUgdG8gYW4gYXR0cmlidXRlXG4gICAgLy8gaWYgaXQgd2FzIGp1c3Qgc2V0IGJlY2F1c2UgdGhlIGF0dHJpYnV0ZSBjaGFuZ2VkLlxuICAgIGlmIChwcm9wTmFtZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuX19yZWZsZWN0aW5nUHJvcGVydHkgIT09IHByb3BOYW1lKSB7XG4gICAgICBjb25zdCBvcHRpb25zID0gY3Rvci5nZXRQcm9wZXJ0eU9wdGlvbnMocHJvcE5hbWUpO1xuICAgICAgY29uc3QgY29udmVydGVyID1cbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuY29udmVydGVyID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgPyB7ZnJvbUF0dHJpYnV0ZTogb3B0aW9ucy5jb252ZXJ0ZXJ9XG4gICAgICAgICAgOiBvcHRpb25zLmNvbnZlcnRlcj8uZnJvbUF0dHJpYnV0ZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgPyBvcHRpb25zLmNvbnZlcnRlclxuICAgICAgICAgIDogZGVmYXVsdENvbnZlcnRlcjtcbiAgICAgIC8vIG1hcmsgc3RhdGUgcmVmbGVjdGluZ1xuICAgICAgdGhpcy5fX3JlZmxlY3RpbmdQcm9wZXJ0eSA9IHByb3BOYW1lO1xuICAgICAgdGhpc1twcm9wTmFtZSBhcyBrZXlvZiB0aGlzXSA9IGNvbnZlcnRlci5mcm9tQXR0cmlidXRlIShcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIG9wdGlvbnMudHlwZVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgKSBhcyBhbnk7XG4gICAgICAvLyBtYXJrIHN0YXRlIG5vdCByZWZsZWN0aW5nXG4gICAgICB0aGlzLl9fcmVmbGVjdGluZ1Byb3BlcnR5ID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVxdWVzdHMgYW4gdXBkYXRlIHdoaWNoIGlzIHByb2Nlc3NlZCBhc3luY2hyb25vdXNseS4gVGhpcyBzaG91bGQgYmUgY2FsbGVkXG4gICAqIHdoZW4gYW4gZWxlbWVudCBzaG91bGQgdXBkYXRlIGJhc2VkIG9uIHNvbWUgc3RhdGUgbm90IHRyaWdnZXJlZCBieSBzZXR0aW5nXG4gICAqIGEgcmVhY3RpdmUgcHJvcGVydHkuIEluIHRoaXMgY2FzZSwgcGFzcyBubyBhcmd1bWVudHMuIEl0IHNob3VsZCBhbHNvIGJlXG4gICAqIGNhbGxlZCB3aGVuIG1hbnVhbGx5IGltcGxlbWVudGluZyBhIHByb3BlcnR5IHNldHRlci4gSW4gdGhpcyBjYXNlLCBwYXNzIHRoZVxuICAgKiBwcm9wZXJ0eSBgbmFtZWAgYW5kIGBvbGRWYWx1ZWAgdG8gZW5zdXJlIHRoYXQgYW55IGNvbmZpZ3VyZWQgcHJvcGVydHlcbiAgICogb3B0aW9ucyBhcmUgaG9ub3JlZC5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgbmFtZSBvZiByZXF1ZXN0aW5nIHByb3BlcnR5XG4gICAqIEBwYXJhbSBvbGRWYWx1ZSBvbGQgdmFsdWUgb2YgcmVxdWVzdGluZyBwcm9wZXJ0eVxuICAgKiBAcGFyYW0gb3B0aW9ucyBwcm9wZXJ0eSBvcHRpb25zIHRvIHVzZSBpbnN0ZWFkIG9mIHRoZSBwcmV2aW91c2x5XG4gICAqICAgICBjb25maWd1cmVkIG9wdGlvbnNcbiAgICogQGNhdGVnb3J5IHVwZGF0ZXNcbiAgICovXG4gIHJlcXVlc3RVcGRhdGUoXG4gICAgbmFtZT86IFByb3BlcnR5S2V5LFxuICAgIG9sZFZhbHVlPzogdW5rbm93bixcbiAgICBvcHRpb25zPzogUHJvcGVydHlEZWNsYXJhdGlvblxuICApOiB2b2lkIHtcbiAgICAvLyBJZiB3ZSBoYXZlIGEgcHJvcGVydHkga2V5LCBwZXJmb3JtIHByb3BlcnR5IHVwZGF0ZSBzdGVwcy5cbiAgICBpZiAobmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoREVWX01PREUgJiYgKG5hbWUgYXMgdW5rbm93bikgaW5zdGFuY2VvZiBFdmVudCkge1xuICAgICAgICBpc3N1ZVdhcm5pbmcoXG4gICAgICAgICAgYGAsXG4gICAgICAgICAgYFRoZSByZXF1ZXN0VXBkYXRlKCkgbWV0aG9kIHdhcyBjYWxsZWQgd2l0aCBhbiBFdmVudCBhcyB0aGUgcHJvcGVydHkgbmFtZS4gVGhpcyBpcyBwcm9iYWJseSBhIG1pc3Rha2UgY2F1c2VkIGJ5IGJpbmRpbmcgdGhpcy5yZXF1ZXN0VXBkYXRlIGFzIGFuIGV2ZW50IGxpc3RlbmVyLiBJbnN0ZWFkIGJpbmQgYSBmdW5jdGlvbiB0aGF0IHdpbGwgY2FsbCBpdCB3aXRoIG5vIGFyZ3VtZW50czogKCkgPT4gdGhpcy5yZXF1ZXN0VXBkYXRlKClgXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICBvcHRpb25zID8/PSAoXG4gICAgICAgIHRoaXMuY29uc3RydWN0b3IgYXMgdHlwZW9mIFJlYWN0aXZlRWxlbWVudFxuICAgICAgKS5nZXRQcm9wZXJ0eU9wdGlvbnMobmFtZSk7XG4gICAgICBjb25zdCBoYXNDaGFuZ2VkID0gb3B0aW9ucy5oYXNDaGFuZ2VkID8/IG5vdEVxdWFsO1xuICAgICAgY29uc3QgbmV3VmFsdWUgPSB0aGlzW25hbWUgYXMga2V5b2YgdGhpc107XG4gICAgICBpZiAoaGFzQ2hhbmdlZChuZXdWYWx1ZSwgb2xkVmFsdWUpKSB7XG4gICAgICAgIHRoaXMuXyRjaGFuZ2VQcm9wZXJ0eShuYW1lLCBvbGRWYWx1ZSwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBBYm9ydCB0aGUgcmVxdWVzdCBpZiB0aGUgcHJvcGVydHkgc2hvdWxkIG5vdCBiZSBjb25zaWRlcmVkIGNoYW5nZWQuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuaXNVcGRhdGVQZW5kaW5nID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5fX3VwZGF0ZVByb21pc2UgPSB0aGlzLl9fZW5xdWV1ZVVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF8kY2hhbmdlUHJvcGVydHkoXG4gICAgbmFtZTogUHJvcGVydHlLZXksXG4gICAgb2xkVmFsdWU6IHVua25vd24sXG4gICAgb3B0aW9uczogUHJvcGVydHlEZWNsYXJhdGlvblxuICApIHtcbiAgICAvLyBUT0RPIChqdXN0aW5mYWduYW5pKTogQ3JlYXRlIGEgYmVuY2htYXJrIG9mIE1hcC5oYXMoKSArIE1hcC5zZXQoXG4gICAgLy8gdnMganVzdCBNYXAuc2V0KClcbiAgICBpZiAoIXRoaXMuXyRjaGFuZ2VkUHJvcGVydGllcy5oYXMobmFtZSkpIHtcbiAgICAgIHRoaXMuXyRjaGFuZ2VkUHJvcGVydGllcy5zZXQobmFtZSwgb2xkVmFsdWUpO1xuICAgIH1cbiAgICAvLyBBZGQgdG8gcmVmbGVjdGluZyBwcm9wZXJ0aWVzIHNldC5cbiAgICAvLyBOb3RlLCBpdCdzIGltcG9ydGFudCB0aGF0IGV2ZXJ5IGNoYW5nZSBoYXMgYSBjaGFuY2UgdG8gYWRkIHRoZVxuICAgIC8vIHByb3BlcnR5IHRvIGBfX3JlZmxlY3RpbmdQcm9wZXJ0aWVzYC4gVGhpcyBlbnN1cmVzIHNldHRpbmdcbiAgICAvLyBhdHRyaWJ1dGUgKyBwcm9wZXJ0eSByZWZsZWN0cyBjb3JyZWN0bHkuXG4gICAgaWYgKG9wdGlvbnMucmVmbGVjdCA9PT0gdHJ1ZSAmJiB0aGlzLl9fcmVmbGVjdGluZ1Byb3BlcnR5ICE9PSBuYW1lKSB7XG4gICAgICAodGhpcy5fX3JlZmxlY3RpbmdQcm9wZXJ0aWVzID8/PSBuZXcgU2V0PFByb3BlcnR5S2V5PigpKS5hZGQobmFtZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdXAgdGhlIGVsZW1lbnQgdG8gYXN5bmNocm9ub3VzbHkgdXBkYXRlLlxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBfX2VucXVldWVVcGRhdGUoKSB7XG4gICAgdGhpcy5pc1VwZGF0ZVBlbmRpbmcgPSB0cnVlO1xuICAgIHRyeSB7XG4gICAgICAvLyBFbnN1cmUgYW55IHByZXZpb3VzIHVwZGF0ZSBoYXMgcmVzb2x2ZWQgYmVmb3JlIHVwZGF0aW5nLlxuICAgICAgLy8gVGhpcyBgYXdhaXRgIGFsc28gZW5zdXJlcyB0aGF0IHByb3BlcnR5IGNoYW5nZXMgYXJlIGJhdGNoZWQuXG4gICAgICBhd2FpdCB0aGlzLl9fdXBkYXRlUHJvbWlzZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBSZWZpcmUgYW55IHByZXZpb3VzIGVycm9ycyBhc3luYyBzbyB0aGV5IGRvIG5vdCBkaXNydXB0IHRoZSB1cGRhdGVcbiAgICAgIC8vIGN5Y2xlLiBFcnJvcnMgYXJlIHJlZmlyZWQgc28gZGV2ZWxvcGVycyBoYXZlIGEgY2hhbmNlIHRvIG9ic2VydmVcbiAgICAgIC8vIHRoZW0sIGFuZCB0aGlzIGNhbiBiZSBkb25lIGJ5IGltcGxlbWVudGluZ1xuICAgICAgLy8gYHdpbmRvdy5vbnVuaGFuZGxlZHJlamVjdGlvbmAuXG4gICAgICBQcm9taXNlLnJlamVjdChlKTtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zY2hlZHVsZVVwZGF0ZSgpO1xuICAgIC8vIElmIGBzY2hlZHVsZVVwZGF0ZWAgcmV0dXJucyBhIFByb21pc2UsIHdlIGF3YWl0IGl0LiBUaGlzIGlzIGRvbmUgdG9cbiAgICAvLyBlbmFibGUgY29vcmRpbmF0aW5nIHVwZGF0ZXMgd2l0aCBhIHNjaGVkdWxlci4gTm90ZSwgdGhlIHJlc3VsdCBpc1xuICAgIC8vIGNoZWNrZWQgdG8gYXZvaWQgZGVsYXlpbmcgYW4gYWRkaXRpb25hbCBtaWNyb3Rhc2sgdW5sZXNzIHdlIG5lZWQgdG8uXG4gICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7XG4gICAgICBhd2FpdCByZXN1bHQ7XG4gICAgfVxuICAgIHJldHVybiAhdGhpcy5pc1VwZGF0ZVBlbmRpbmc7XG4gIH1cblxuICAvKipcbiAgICogU2NoZWR1bGVzIGFuIGVsZW1lbnQgdXBkYXRlLiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIGNoYW5nZSB0aGVcbiAgICogdGltaW5nIG9mIHVwZGF0ZXMgYnkgcmV0dXJuaW5nIGEgUHJvbWlzZS4gVGhlIHVwZGF0ZSB3aWxsIGF3YWl0IHRoZVxuICAgKiByZXR1cm5lZCBQcm9taXNlLCBhbmQgeW91IHNob3VsZCByZXNvbHZlIHRoZSBQcm9taXNlIHRvIGFsbG93IHRoZSB1cGRhdGVcbiAgICogdG8gcHJvY2VlZC4gSWYgdGhpcyBtZXRob2QgaXMgb3ZlcnJpZGRlbiwgYHN1cGVyLnNjaGVkdWxlVXBkYXRlKClgXG4gICAqIG11c3QgYmUgY2FsbGVkLlxuICAgKlxuICAgKiBGb3IgaW5zdGFuY2UsIHRvIHNjaGVkdWxlIHVwZGF0ZXMgdG8gb2NjdXIganVzdCBiZWZvcmUgdGhlIG5leHQgZnJhbWU6XG4gICAqXG4gICAqIGBgYHRzXG4gICAqIG92ZXJyaWRlIHByb3RlY3RlZCBhc3luYyBzY2hlZHVsZVVwZGF0ZSgpOiBQcm9taXNlPHVua25vd24+IHtcbiAgICogICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHJlc29sdmUoKSkpO1xuICAgKiAgIHN1cGVyLnNjaGVkdWxlVXBkYXRlKCk7XG4gICAqIH1cbiAgICogYGBgXG4gICAqIEBjYXRlZ29yeSB1cGRhdGVzXG4gICAqL1xuICBwcm90ZWN0ZWQgc2NoZWR1bGVVcGRhdGUoKTogdm9pZCB8IFByb21pc2U8dW5rbm93bj4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucGVyZm9ybVVwZGF0ZSgpO1xuICAgIGlmIChcbiAgICAgIERFVl9NT0RFICYmXG4gICAgICAodGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50KS5lbmFibGVkV2FybmluZ3MhLmluY2x1ZGVzKFxuICAgICAgICAnYXN5bmMtcGVyZm9ybS11cGRhdGUnXG4gICAgICApICYmXG4gICAgICB0eXBlb2YgKHJlc3VsdCBhcyB1bmtub3duIGFzIFByb21pc2U8dW5rbm93bj4gfCB1bmRlZmluZWQpPy50aGVuID09PVxuICAgICAgICAnZnVuY3Rpb24nXG4gICAgKSB7XG4gICAgICBpc3N1ZVdhcm5pbmcoXG4gICAgICAgICdhc3luYy1wZXJmb3JtLXVwZGF0ZScsXG4gICAgICAgIGBFbGVtZW50ICR7dGhpcy5sb2NhbE5hbWV9IHJldHVybmVkIGEgUHJvbWlzZSBmcm9tIHBlcmZvcm1VcGRhdGUoKS4gYCArXG4gICAgICAgICAgYFRoaXMgYmVoYXZpb3IgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIGAgK1xuICAgICAgICAgIGB2ZXJzaW9uIG9mIFJlYWN0aXZlRWxlbWVudC5gXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGFuIGVsZW1lbnQgdXBkYXRlLiBOb3RlLCBpZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGR1cmluZyB0aGVcbiAgICogdXBkYXRlLCBgZmlyc3RVcGRhdGVkYCBhbmQgYHVwZGF0ZWRgIHdpbGwgbm90IGJlIGNhbGxlZC5cbiAgICpcbiAgICogQ2FsbCBgcGVyZm9ybVVwZGF0ZSgpYCB0byBpbW1lZGlhdGVseSBwcm9jZXNzIGEgcGVuZGluZyB1cGRhdGUuIFRoaXMgc2hvdWxkXG4gICAqIGdlbmVyYWxseSBub3QgYmUgbmVlZGVkLCBidXQgaXQgY2FuIGJlIGRvbmUgaW4gcmFyZSBjYXNlcyB3aGVuIHlvdSBuZWVkIHRvXG4gICAqIHVwZGF0ZSBzeW5jaHJvbm91c2x5LlxuICAgKlxuICAgKiBAY2F0ZWdvcnkgdXBkYXRlc1xuICAgKi9cbiAgcHJvdGVjdGVkIHBlcmZvcm1VcGRhdGUoKTogdm9pZCB7XG4gICAgLy8gQWJvcnQgYW55IHVwZGF0ZSBpZiBvbmUgaXMgbm90IHBlbmRpbmcgd2hlbiB0aGlzIGlzIGNhbGxlZC5cbiAgICAvLyBUaGlzIGNhbiBoYXBwZW4gaWYgYHBlcmZvcm1VcGRhdGVgIGlzIGNhbGxlZCBlYXJseSB0byBcImZsdXNoXCJcbiAgICAvLyB0aGUgdXBkYXRlLlxuICAgIGlmICghdGhpcy5pc1VwZGF0ZVBlbmRpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZGVidWdMb2dFdmVudD8uKHtraW5kOiAndXBkYXRlJ30pO1xuICAgIGlmICghdGhpcy5oYXNVcGRhdGVkKSB7XG4gICAgICAvLyBDcmVhdGUgcmVuZGVyUm9vdCBiZWZvcmUgZmlyc3QgdXBkYXRlLiBUaGlzIG9jY3VycyBpbiBgY29ubmVjdGVkQ2FsbGJhY2tgXG4gICAgICAvLyBidXQgaXMgZG9uZSBoZXJlIHRvIHN1cHBvcnQgb3V0IG9mIHRyZWUgY2FsbHMgdG8gYGVuYWJsZVVwZGF0aW5nYC9gcGVyZm9ybVVwZGF0ZWAuXG4gICAgICAodGhpcyBhcyBNdXRhYmxlPHR5cGVvZiB0aGlzLCAncmVuZGVyUm9vdCc+KS5yZW5kZXJSb290ID8/PVxuICAgICAgICB0aGlzLmNyZWF0ZVJlbmRlclJvb3QoKTtcbiAgICAgIGlmIChERVZfTU9ERSkge1xuICAgICAgICAvLyBQcm9kdWNlIHdhcm5pbmcgaWYgYW55IHJlYWN0aXZlIHByb3BlcnRpZXMgb24gdGhlIHByb3RvdHlwZSBhcmVcbiAgICAgICAgLy8gc2hhZG93ZWQgYnkgY2xhc3MgZmllbGRzLiBJbnN0YW5jZSBmaWVsZHMgc2V0IGJlZm9yZSB1cGdyYWRlIGFyZVxuICAgICAgICAvLyBkZWxldGVkIGJ5IHRoaXMgcG9pbnQsIHNvIGFueSBvd24gcHJvcGVydHkgaXMgY2F1c2VkIGJ5IGNsYXNzIGZpZWxkXG4gICAgICAgIC8vIGluaXRpYWxpemF0aW9uIGluIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICAgICAgY29uc3QgY3RvciA9IHRoaXMuY29uc3RydWN0b3IgYXMgdHlwZW9mIFJlYWN0aXZlRWxlbWVudDtcbiAgICAgICAgY29uc3Qgc2hhZG93ZWRQcm9wZXJ0aWVzID0gWy4uLmN0b3IuZWxlbWVudFByb3BlcnRpZXMua2V5cygpXS5maWx0ZXIoXG4gICAgICAgICAgKHApID0+IHRoaXMuaGFzT3duUHJvcGVydHkocCkgJiYgcCBpbiBnZXRQcm90b3R5cGVPZih0aGlzKVxuICAgICAgICApO1xuICAgICAgICBpZiAoc2hhZG93ZWRQcm9wZXJ0aWVzLmxlbmd0aCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBUaGUgZm9sbG93aW5nIHByb3BlcnRpZXMgb24gZWxlbWVudCAke3RoaXMubG9jYWxOYW1lfSB3aWxsIG5vdCBgICtcbiAgICAgICAgICAgICAgYHRyaWdnZXIgdXBkYXRlcyBhcyBleHBlY3RlZCBiZWNhdXNlIHRoZXkgYXJlIHNldCB1c2luZyBjbGFzcyBgICtcbiAgICAgICAgICAgICAgYGZpZWxkczogJHtzaGFkb3dlZFByb3BlcnRpZXMuam9pbignLCAnKX0uIGAgK1xuICAgICAgICAgICAgICBgTmF0aXZlIGNsYXNzIGZpZWxkcyBhbmQgc29tZSBjb21waWxlZCBvdXRwdXQgd2lsbCBvdmVyd3JpdGUgYCArXG4gICAgICAgICAgICAgIGBhY2Nlc3NvcnMgdXNlZCBmb3IgZGV0ZWN0aW5nIGNoYW5nZXMuIFNlZSBgICtcbiAgICAgICAgICAgICAgYGh0dHBzOi8vbGl0LmRldi9tc2cvY2xhc3MtZmllbGQtc2hhZG93aW5nIGAgK1xuICAgICAgICAgICAgICBgZm9yIG1vcmUgaW5mb3JtYXRpb24uYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIE1peGluIGluc3RhbmNlIHByb3BlcnRpZXMgb25jZSwgaWYgdGhleSBleGlzdC5cbiAgICAgIGlmICh0aGlzLl9faW5zdGFuY2VQcm9wZXJ0aWVzKSB7XG4gICAgICAgIC8vIFRPRE8gKGp1c3RpbmZhZ25hbmkpOiBzaG91bGQgd2UgdXNlIHRoZSBzdG9yZWQgdmFsdWU/IENvdWxkIGEgbmV3IHZhbHVlXG4gICAgICAgIC8vIGhhdmUgYmVlbiBzZXQgc2luY2Ugd2Ugc3RvcmVkIHRoZSBvd24gcHJvcGVydHkgdmFsdWU/XG4gICAgICAgIGZvciAoY29uc3QgW3AsIHZhbHVlXSBvZiB0aGlzLl9faW5zdGFuY2VQcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgdGhpc1twIGFzIGtleW9mIHRoaXNdID0gdmFsdWUgYXMgdGhpc1trZXlvZiB0aGlzXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9faW5zdGFuY2VQcm9wZXJ0aWVzID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgLy8gVHJpZ2dlciBpbml0aWFsIHZhbHVlIHJlZmxlY3Rpb24gYW5kIHBvcHVsYXRlIHRoZSBpbml0aWFsXG4gICAgICAvLyBjaGFuZ2VkUHJvcGVydGllcyBtYXAsIGJ1dCBvbmx5IGZvciB0aGUgY2FzZSBvZiBleHBlcmltZW50YWxcbiAgICAgIC8vIGRlY29yYXRvcnMgb24gYWNjZXNzb3JzLCB3aGljaCB3aWxsIG5vdCBoYXZlIGFscmVhZHkgcG9wdWxhdGVkIHRoZVxuICAgICAgLy8gY2hhbmdlZFByb3BlcnRpZXMgbWFwLiBXZSBjYW4ndCBrbm93IGlmIHRoZXNlIGFjY2Vzc29ycyBoYWRcbiAgICAgIC8vIGluaXRpYWxpemVycywgc28gd2UganVzdCBzZXQgdGhlbSBhbnl3YXkgLSBhIGRpZmZlcmVuY2UgZnJvbVxuICAgICAgLy8gZXhwZXJpbWVudGFsIGRlY29yYXRvcnMgb24gZmllbGRzIGFuZCBzdGFuZGFyZCBkZWNvcmF0b3JzIG9uXG4gICAgICAvLyBhdXRvLWFjY2Vzc29ycy5cbiAgICAgIC8vIEZvciBjb250ZXh0IHdoeSBleHBlcmltZW50YWxEZWNvcmF0b3JzIHdpdGggYXV0byBhY2Nlc3NvcnMgYXJlIGhhbmRsZWRcbiAgICAgIC8vIHNwZWNpZmljYWxseSBhbHNvIHNlZTpcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9saXQvbGl0L3B1bGwvNDE4MyNpc3N1ZWNvbW1lbnQtMTcxMTk1OTYzNVxuICAgICAgY29uc3QgZWxlbWVudFByb3BlcnRpZXMgPSAodGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUmVhY3RpdmVFbGVtZW50KVxuICAgICAgICAuZWxlbWVudFByb3BlcnRpZXM7XG4gICAgICBpZiAoZWxlbWVudFByb3BlcnRpZXMuc2l6ZSA+IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBbcCwgb3B0aW9uc10gb2YgZWxlbWVudFByb3BlcnRpZXMpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBvcHRpb25zLndyYXBwZWQgPT09IHRydWUgJiZcbiAgICAgICAgICAgICF0aGlzLl8kY2hhbmdlZFByb3BlcnRpZXMuaGFzKHApICYmXG4gICAgICAgICAgICB0aGlzW3AgYXMga2V5b2YgdGhpc10gIT09IHVuZGVmaW5lZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5fJGNoYW5nZVByb3BlcnR5KHAsIHRoaXNbcCBhcyBrZXlvZiB0aGlzXSwgb3B0aW9ucyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBzaG91bGRVcGRhdGUgPSBmYWxzZTtcbiAgICBjb25zdCBjaGFuZ2VkUHJvcGVydGllcyA9IHRoaXMuXyRjaGFuZ2VkUHJvcGVydGllcztcbiAgICB0cnkge1xuICAgICAgc2hvdWxkVXBkYXRlID0gdGhpcy5zaG91bGRVcGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgICB0aGlzLndpbGxVcGRhdGUoY2hhbmdlZFByb3BlcnRpZXMpO1xuICAgICAgICB0aGlzLl9fY29udHJvbGxlcnM/LmZvckVhY2goKGMpID0+IGMuaG9zdFVwZGF0ZT8uKCkpO1xuICAgICAgICB0aGlzLnVwZGF0ZShjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9fbWFya1VwZGF0ZWQoKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBQcmV2ZW50IGBmaXJzdFVwZGF0ZWRgIGFuZCBgdXBkYXRlZGAgZnJvbSBydW5uaW5nIHdoZW4gdGhlcmUncyBhblxuICAgICAgLy8gdXBkYXRlIGV4Y2VwdGlvbi5cbiAgICAgIHNob3VsZFVwZGF0ZSA9IGZhbHNlO1xuICAgICAgLy8gRW5zdXJlIGVsZW1lbnQgY2FuIGFjY2VwdCBhZGRpdGlvbmFsIHVwZGF0ZXMgYWZ0ZXIgYW4gZXhjZXB0aW9uLlxuICAgICAgdGhpcy5fX21hcmtVcGRhdGVkKCk7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgICAvLyBUaGUgdXBkYXRlIGlzIG5vIGxvbmdlciBjb25zaWRlcmVkIHBlbmRpbmcgYW5kIGZ1cnRoZXIgdXBkYXRlcyBhcmUgbm93IGFsbG93ZWQuXG4gICAgaWYgKHNob3VsZFVwZGF0ZSkge1xuICAgICAgdGhpcy5fJGRpZFVwZGF0ZShjaGFuZ2VkUHJvcGVydGllcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEludm9rZWQgYmVmb3JlIGB1cGRhdGUoKWAgdG8gY29tcHV0ZSB2YWx1ZXMgbmVlZGVkIGR1cmluZyB0aGUgdXBkYXRlLlxuICAgKlxuICAgKiBJbXBsZW1lbnQgYHdpbGxVcGRhdGVgIHRvIGNvbXB1dGUgcHJvcGVydHkgdmFsdWVzIHRoYXQgZGVwZW5kIG9uIG90aGVyXG4gICAqIHByb3BlcnRpZXMgYW5kIGFyZSB1c2VkIGluIHRoZSByZXN0IG9mIHRoZSB1cGRhdGUgcHJvY2Vzcy5cbiAgICpcbiAgICogYGBgdHNcbiAgICogd2lsbFVwZGF0ZShjaGFuZ2VkUHJvcGVydGllcykge1xuICAgKiAgIC8vIG9ubHkgbmVlZCB0byBjaGVjayBjaGFuZ2VkIHByb3BlcnRpZXMgZm9yIGFuIGV4cGVuc2l2ZSBjb21wdXRhdGlvbi5cbiAgICogICBpZiAoY2hhbmdlZFByb3BlcnRpZXMuaGFzKCdmaXJzdE5hbWUnKSB8fCBjaGFuZ2VkUHJvcGVydGllcy5oYXMoJ2xhc3ROYW1lJykpIHtcbiAgICogICAgIHRoaXMuc2hhID0gY29tcHV0ZVNIQShgJHt0aGlzLmZpcnN0TmFtZX0gJHt0aGlzLmxhc3ROYW1lfWApO1xuICAgKiAgIH1cbiAgICogfVxuICAgKlxuICAgKiByZW5kZXIoKSB7XG4gICAqICAgcmV0dXJuIGh0bWxgU0hBOiAke3RoaXMuc2hhfWA7XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIEBjYXRlZ29yeSB1cGRhdGVzXG4gICAqL1xuICBwcm90ZWN0ZWQgd2lsbFVwZGF0ZShfY2hhbmdlZFByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVzKTogdm9pZCB7fVxuXG4gIC8vIE5vdGUsIHRoaXMgaXMgYW4gb3ZlcnJpZGUgcG9pbnQgZm9yIHBvbHlmaWxsLXN1cHBvcnQuXG4gIC8vIEBpbnRlcm5hbFxuICBfJGRpZFVwZGF0ZShjaGFuZ2VkUHJvcGVydGllczogUHJvcGVydHlWYWx1ZXMpIHtcbiAgICB0aGlzLl9fY29udHJvbGxlcnM/LmZvckVhY2goKGMpID0+IGMuaG9zdFVwZGF0ZWQ/LigpKTtcbiAgICBpZiAoIXRoaXMuaGFzVXBkYXRlZCkge1xuICAgICAgdGhpcy5oYXNVcGRhdGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcbiAgICBpZiAoXG4gICAgICBERVZfTU9ERSAmJlxuICAgICAgdGhpcy5pc1VwZGF0ZVBlbmRpbmcgJiZcbiAgICAgICh0aGlzLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBSZWFjdGl2ZUVsZW1lbnQpLmVuYWJsZWRXYXJuaW5ncyEuaW5jbHVkZXMoXG4gICAgICAgICdjaGFuZ2UtaW4tdXBkYXRlJ1xuICAgICAgKVxuICAgICkge1xuICAgICAgaXNzdWVXYXJuaW5nKFxuICAgICAgICAnY2hhbmdlLWluLXVwZGF0ZScsXG4gICAgICAgIGBFbGVtZW50ICR7dGhpcy5sb2NhbE5hbWV9IHNjaGVkdWxlZCBhbiB1cGRhdGUgYCArXG4gICAgICAgICAgYChnZW5lcmFsbHkgYmVjYXVzZSBhIHByb3BlcnR5IHdhcyBzZXQpIGAgK1xuICAgICAgICAgIGBhZnRlciBhbiB1cGRhdGUgY29tcGxldGVkLCBjYXVzaW5nIGEgbmV3IHVwZGF0ZSB0byBiZSBzY2hlZHVsZWQuIGAgK1xuICAgICAgICAgIGBUaGlzIGlzIGluZWZmaWNpZW50IGFuZCBzaG91bGQgYmUgYXZvaWRlZCB1bmxlc3MgdGhlIG5leHQgdXBkYXRlIGAgK1xuICAgICAgICAgIGBjYW4gb25seSBiZSBzY2hlZHVsZWQgYXMgYSBzaWRlIGVmZmVjdCBvZiB0aGUgcHJldmlvdXMgdXBkYXRlLmBcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfX21hcmtVcGRhdGVkKCkge1xuICAgIHRoaXMuXyRjaGFuZ2VkUHJvcGVydGllcyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmlzVXBkYXRlUGVuZGluZyA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgZWxlbWVudCBoYXMgY29tcGxldGVkIHVwZGF0aW5nLlxuICAgKiBUaGUgUHJvbWlzZSB2YWx1ZSBpcyBhIGJvb2xlYW4gdGhhdCBpcyBgdHJ1ZWAgaWYgdGhlIGVsZW1lbnQgY29tcGxldGVkIHRoZVxuICAgKiB1cGRhdGUgd2l0aG91dCB0cmlnZ2VyaW5nIGFub3RoZXIgdXBkYXRlLiBUaGUgUHJvbWlzZSByZXN1bHQgaXMgYGZhbHNlYCBpZlxuICAgKiBhIHByb3BlcnR5IHdhcyBzZXQgaW5zaWRlIGB1cGRhdGVkKClgLiBJZiB0aGUgUHJvbWlzZSBpcyByZWplY3RlZCwgYW5cbiAgICogZXhjZXB0aW9uIHdhcyB0aHJvd24gZHVyaW5nIHRoZSB1cGRhdGUuXG4gICAqXG4gICAqIFRvIGF3YWl0IGFkZGl0aW9uYWwgYXN5bmNocm9ub3VzIHdvcmssIG92ZXJyaWRlIHRoZSBgZ2V0VXBkYXRlQ29tcGxldGVgXG4gICAqIG1ldGhvZC4gRm9yIGV4YW1wbGUsIGl0IGlzIHNvbWV0aW1lcyB1c2VmdWwgdG8gYXdhaXQgYSByZW5kZXJlZCBlbGVtZW50XG4gICAqIGJlZm9yZSBmdWxmaWxsaW5nIHRoaXMgUHJvbWlzZS4gVG8gZG8gdGhpcywgZmlyc3QgYXdhaXRcbiAgICogYHN1cGVyLmdldFVwZGF0ZUNvbXBsZXRlKClgLCB0aGVuIGFueSBzdWJzZXF1ZW50IHN0YXRlLlxuICAgKlxuICAgKiBAcmV0dXJuIEEgcHJvbWlzZSBvZiBhIGJvb2xlYW4gdGhhdCByZXNvbHZlcyB0byB0cnVlIGlmIHRoZSB1cGRhdGUgY29tcGxldGVkXG4gICAqICAgICB3aXRob3V0IHRyaWdnZXJpbmcgYW5vdGhlciB1cGRhdGUuXG4gICAqIEBjYXRlZ29yeSB1cGRhdGVzXG4gICAqL1xuICBnZXQgdXBkYXRlQ29tcGxldGUoKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0VXBkYXRlQ29tcGxldGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSBwb2ludCBmb3IgdGhlIGB1cGRhdGVDb21wbGV0ZWAgcHJvbWlzZS5cbiAgICpcbiAgICogSXQgaXMgbm90IHNhZmUgdG8gb3ZlcnJpZGUgdGhlIGB1cGRhdGVDb21wbGV0ZWAgZ2V0dGVyIGRpcmVjdGx5IGR1ZSB0byBhXG4gICAqIGxpbWl0YXRpb24gaW4gVHlwZVNjcmlwdCB3aGljaCBtZWFucyBpdCBpcyBub3QgcG9zc2libGUgdG8gY2FsbCBhXG4gICAqIHN1cGVyY2xhc3MgZ2V0dGVyIChlLmcuIGBzdXBlci51cGRhdGVDb21wbGV0ZS50aGVuKC4uLilgKSB3aGVuIHRoZSB0YXJnZXRcbiAgICogbGFuZ3VhZ2UgaXMgRVM1IChodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzMzOCkuXG4gICAqIFRoaXMgbWV0aG9kIHNob3VsZCBiZSBvdmVycmlkZGVuIGluc3RlYWQuIEZvciBleGFtcGxlOlxuICAgKlxuICAgKiBgYGB0c1xuICAgKiBjbGFzcyBNeUVsZW1lbnQgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgICogICBvdmVycmlkZSBhc3luYyBnZXRVcGRhdGVDb21wbGV0ZSgpIHtcbiAgICogICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN1cGVyLmdldFVwZGF0ZUNvbXBsZXRlKCk7XG4gICAqICAgICBhd2FpdCB0aGlzLl9teUNoaWxkLnVwZGF0ZUNvbXBsZXRlO1xuICAgKiAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICogICB9XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIEByZXR1cm4gQSBwcm9taXNlIG9mIGEgYm9vbGVhbiB0aGF0IHJlc29sdmVzIHRvIHRydWUgaWYgdGhlIHVwZGF0ZSBjb21wbGV0ZWRcbiAgICogICAgIHdpdGhvdXQgdHJpZ2dlcmluZyBhbm90aGVyIHVwZGF0ZS5cbiAgICogQGNhdGVnb3J5IHVwZGF0ZXNcbiAgICovXG4gIHByb3RlY3RlZCBnZXRVcGRhdGVDb21wbGV0ZSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gdGhpcy5fX3VwZGF0ZVByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogQ29udHJvbHMgd2hldGhlciBvciBub3QgYHVwZGF0ZSgpYCBzaG91bGQgYmUgY2FsbGVkIHdoZW4gdGhlIGVsZW1lbnQgcmVxdWVzdHNcbiAgICogYW4gdXBkYXRlLiBCeSBkZWZhdWx0LCB0aGlzIG1ldGhvZCBhbHdheXMgcmV0dXJucyBgdHJ1ZWAsIGJ1dCB0aGlzIGNhbiBiZVxuICAgKiBjdXN0b21pemVkIHRvIGNvbnRyb2wgd2hlbiB0byB1cGRhdGUuXG4gICAqXG4gICAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICogQGNhdGVnb3J5IHVwZGF0ZXNcbiAgICovXG4gIHByb3RlY3RlZCBzaG91bGRVcGRhdGUoX2NoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlcyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGVsZW1lbnQuIFRoaXMgbWV0aG9kIHJlZmxlY3RzIHByb3BlcnR5IHZhbHVlcyB0byBhdHRyaWJ1dGVzLlxuICAgKiBJdCBjYW4gYmUgb3ZlcnJpZGRlbiB0byByZW5kZXIgYW5kIGtlZXAgdXBkYXRlZCBlbGVtZW50IERPTS5cbiAgICogU2V0dGluZyBwcm9wZXJ0aWVzIGluc2lkZSB0aGlzIG1ldGhvZCB3aWxsICpub3QqIHRyaWdnZXJcbiAgICogYW5vdGhlciB1cGRhdGUuXG4gICAqXG4gICAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICogQGNhdGVnb3J5IHVwZGF0ZXNcbiAgICovXG4gIHByb3RlY3RlZCB1cGRhdGUoX2NoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlcykge1xuICAgIC8vIFRoZSBmb3JFYWNoKCkgZXhwcmVzc2lvbiB3aWxsIG9ubHkgcnVuIHdoZW4gd2hlbiBfX3JlZmxlY3RpbmdQcm9wZXJ0aWVzIGlzXG4gICAgLy8gZGVmaW5lZCwgYW5kIGl0IHJldHVybnMgdW5kZWZpbmVkLCBzZXR0aW5nIF9fcmVmbGVjdGluZ1Byb3BlcnRpZXMgdG9cbiAgICAvLyB1bmRlZmluZWRcbiAgICB0aGlzLl9fcmVmbGVjdGluZ1Byb3BlcnRpZXMgJiY9IHRoaXMuX19yZWZsZWN0aW5nUHJvcGVydGllcy5mb3JFYWNoKChwKSA9PlxuICAgICAgdGhpcy5fX3Byb3BlcnR5VG9BdHRyaWJ1dGUocCwgdGhpc1twIGFzIGtleW9mIHRoaXNdKVxuICAgICkgYXMgdW5kZWZpbmVkO1xuICAgIHRoaXMuX19tYXJrVXBkYXRlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbmV2ZXIgdGhlIGVsZW1lbnQgaXMgdXBkYXRlZC4gSW1wbGVtZW50IHRvIHBlcmZvcm1cbiAgICogcG9zdC11cGRhdGluZyB0YXNrcyB2aWEgRE9NIEFQSXMsIGZvciBleGFtcGxlLCBmb2N1c2luZyBhbiBlbGVtZW50LlxuICAgKlxuICAgKiBTZXR0aW5nIHByb3BlcnRpZXMgaW5zaWRlIHRoaXMgbWV0aG9kIHdpbGwgdHJpZ2dlciB0aGUgZWxlbWVudCB0byB1cGRhdGVcbiAgICogYWdhaW4gYWZ0ZXIgdGhpcyB1cGRhdGUgY3ljbGUgY29tcGxldGVzLlxuICAgKlxuICAgKiBAcGFyYW0gX2NoYW5nZWRQcm9wZXJ0aWVzIE1hcCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgd2l0aCBvbGQgdmFsdWVzXG4gICAqIEBjYXRlZ29yeSB1cGRhdGVzXG4gICAqL1xuICBwcm90ZWN0ZWQgdXBkYXRlZChfY2hhbmdlZFByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVzKSB7fVxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGVsZW1lbnQgaXMgZmlyc3QgdXBkYXRlZC4gSW1wbGVtZW50IHRvIHBlcmZvcm0gb25lIHRpbWVcbiAgICogd29yayBvbiB0aGUgZWxlbWVudCBhZnRlciB1cGRhdGUuXG4gICAqXG4gICAqIGBgYHRzXG4gICAqIGZpcnN0VXBkYXRlZCgpIHtcbiAgICogICB0aGlzLnJlbmRlclJvb3QuZ2V0RWxlbWVudEJ5SWQoJ215LXRleHQtYXJlYScpLmZvY3VzKCk7XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFNldHRpbmcgcHJvcGVydGllcyBpbnNpZGUgdGhpcyBtZXRob2Qgd2lsbCB0cmlnZ2VyIHRoZSBlbGVtZW50IHRvIHVwZGF0ZVxuICAgKiBhZ2FpbiBhZnRlciB0aGlzIHVwZGF0ZSBjeWNsZSBjb21wbGV0ZXMuXG4gICAqXG4gICAqIEBwYXJhbSBfY2hhbmdlZFByb3BlcnRpZXMgTWFwIG9mIGNoYW5nZWQgcHJvcGVydGllcyB3aXRoIG9sZCB2YWx1ZXNcbiAgICogQGNhdGVnb3J5IHVwZGF0ZXNcbiAgICovXG4gIHByb3RlY3RlZCBmaXJzdFVwZGF0ZWQoX2NoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlcykge31cbn1cbi8vIEFzc2lnbmVkIGhlcmUgdG8gd29yayBhcm91bmQgYSBqc2NvbXBpbGVyIGJ1ZyB3aXRoIHN0YXRpYyBmaWVsZHNcbi8vIHdoZW4gY29tcGlsaW5nIHRvIEVTNS5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1jb21waWxlci9pc3N1ZXMvMzE3N1xuKFJlYWN0aXZlRWxlbWVudCBhcyB1bmtub3duIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KVtcbiAgSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnZWxlbWVudFByb3BlcnRpZXMnLCBSZWFjdGl2ZUVsZW1lbnQpXG5dID0gbmV3IE1hcCgpO1xuKFJlYWN0aXZlRWxlbWVudCBhcyB1bmtub3duIGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KVtcbiAgSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnZmluYWxpemVkJywgUmVhY3RpdmVFbGVtZW50KVxuXSA9IG5ldyBNYXAoKTtcblxuLy8gQXBwbHkgcG9seWZpbGxzIGlmIGF2YWlsYWJsZVxucG9seWZpbGxTdXBwb3J0Py4oe1JlYWN0aXZlRWxlbWVudH0pO1xuXG4vLyBEZXYgbW9kZSB3YXJuaW5ncy4uLlxuaWYgKERFVl9NT0RFKSB7XG4gIC8vIERlZmF1bHQgd2FybmluZyBzZXQuXG4gIFJlYWN0aXZlRWxlbWVudC5lbmFibGVkV2FybmluZ3MgPSBbXG4gICAgJ2NoYW5nZS1pbi11cGRhdGUnLFxuICAgICdhc3luYy1wZXJmb3JtLXVwZGF0ZScsXG4gIF07XG4gIGNvbnN0IGVuc3VyZU93bldhcm5pbmdzID0gZnVuY3Rpb24gKGN0b3I6IHR5cGVvZiBSZWFjdGl2ZUVsZW1lbnQpIHtcbiAgICBpZiAoXG4gICAgICAhY3Rvci5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdlbmFibGVkV2FybmluZ3MnLCBjdG9yKSlcbiAgICApIHtcbiAgICAgIGN0b3IuZW5hYmxlZFdhcm5pbmdzID0gY3Rvci5lbmFibGVkV2FybmluZ3MhLnNsaWNlKCk7XG4gICAgfVxuICB9O1xuICBSZWFjdGl2ZUVsZW1lbnQuZW5hYmxlV2FybmluZyA9IGZ1bmN0aW9uIChcbiAgICB0aGlzOiB0eXBlb2YgUmVhY3RpdmVFbGVtZW50LFxuICAgIHdhcm5pbmc6IFdhcm5pbmdLaW5kXG4gICkge1xuICAgIGVuc3VyZU93bldhcm5pbmdzKHRoaXMpO1xuICAgIGlmICghdGhpcy5lbmFibGVkV2FybmluZ3MhLmluY2x1ZGVzKHdhcm5pbmcpKSB7XG4gICAgICB0aGlzLmVuYWJsZWRXYXJuaW5ncyEucHVzaCh3YXJuaW5nKTtcbiAgICB9XG4gIH07XG4gIFJlYWN0aXZlRWxlbWVudC5kaXNhYmxlV2FybmluZyA9IGZ1bmN0aW9uIChcbiAgICB0aGlzOiB0eXBlb2YgUmVhY3RpdmVFbGVtZW50LFxuICAgIHdhcm5pbmc6IFdhcm5pbmdLaW5kXG4gICkge1xuICAgIGVuc3VyZU93bldhcm5pbmdzKHRoaXMpO1xuICAgIGNvbnN0IGkgPSB0aGlzLmVuYWJsZWRXYXJuaW5ncyEuaW5kZXhPZih3YXJuaW5nKTtcbiAgICBpZiAoaSA+PSAwKSB7XG4gICAgICB0aGlzLmVuYWJsZWRXYXJuaW5ncyEuc3BsaWNlKGksIDEpO1xuICAgIH1cbiAgfTtcbn1cblxuLy8gSU1QT1JUQU5UOiBkbyBub3QgY2hhbmdlIHRoZSBwcm9wZXJ0eSBuYW1lIG9yIHRoZSBhc3NpZ25tZW50IGV4cHJlc3Npb24uXG4vLyBUaGlzIGxpbmUgd2lsbCBiZSB1c2VkIGluIHJlZ2V4ZXMgdG8gc2VhcmNoIGZvciBSZWFjdGl2ZUVsZW1lbnQgdXNhZ2UuXG4oZ2xvYmFsLnJlYWN0aXZlRWxlbWVudFZlcnNpb25zID8/PSBbXSkucHVzaCgnMi4wLjQnKTtcbmlmIChERVZfTU9ERSAmJiBnbG9iYWwucmVhY3RpdmVFbGVtZW50VmVyc2lvbnMubGVuZ3RoID4gMSkge1xuICBpc3N1ZVdhcm5pbmchKFxuICAgICdtdWx0aXBsZS12ZXJzaW9ucycsXG4gICAgYE11bHRpcGxlIHZlcnNpb25zIG9mIExpdCBsb2FkZWQuIExvYWRpbmcgbXVsdGlwbGUgdmVyc2lvbnMgYCArXG4gICAgICBgaXMgbm90IHJlY29tbWVuZGVkLmBcbiAgKTtcbn1cbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBCU0QtMy1DbGF1c2VcbiAqL1xuY29uc3QgdD1nbG9iYWxUaGlzLGU9dC5TaGFkb3dSb290JiYodm9pZCAwPT09dC5TaGFkeUNTU3x8dC5TaGFkeUNTUy5uYXRpdmVTaGFkb3cpJiZcImFkb3B0ZWRTdHlsZVNoZWV0c1wiaW4gRG9jdW1lbnQucHJvdG90eXBlJiZcInJlcGxhY2VcImluIENTU1N0eWxlU2hlZXQucHJvdG90eXBlLHM9U3ltYm9sKCksbz1uZXcgV2Vha01hcDtjbGFzcyBue2NvbnN0cnVjdG9yKHQsZSxvKXtpZih0aGlzLl8kY3NzUmVzdWx0JD0hMCxvIT09cyl0aHJvdyBFcnJvcihcIkNTU1Jlc3VsdCBpcyBub3QgY29uc3RydWN0YWJsZS4gVXNlIGB1bnNhZmVDU1NgIG9yIGBjc3NgIGluc3RlYWQuXCIpO3RoaXMuY3NzVGV4dD10LHRoaXMudD1lfWdldCBzdHlsZVNoZWV0KCl7bGV0IHQ9dGhpcy5vO2NvbnN0IHM9dGhpcy50O2lmKGUmJnZvaWQgMD09PXQpe2NvbnN0IGU9dm9pZCAwIT09cyYmMT09PXMubGVuZ3RoO2UmJih0PW8uZ2V0KHMpKSx2b2lkIDA9PT10JiYoKHRoaXMubz10PW5ldyBDU1NTdHlsZVNoZWV0KS5yZXBsYWNlU3luYyh0aGlzLmNzc1RleHQpLGUmJm8uc2V0KHMsdCkpfXJldHVybiB0fXRvU3RyaW5nKCl7cmV0dXJuIHRoaXMuY3NzVGV4dH19Y29uc3Qgcj10PT5uZXcgbihcInN0cmluZ1wiPT10eXBlb2YgdD90OnQrXCJcIix2b2lkIDAscyksaT0odCwuLi5lKT0+e2NvbnN0IG89MT09PXQubGVuZ3RoP3RbMF06ZS5yZWR1Y2UoKChlLHMsbyk9PmUrKHQ9PntpZighMD09PXQuXyRjc3NSZXN1bHQkKXJldHVybiB0LmNzc1RleHQ7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpcmV0dXJuIHQ7dGhyb3cgRXJyb3IoXCJWYWx1ZSBwYXNzZWQgdG8gJ2NzcycgZnVuY3Rpb24gbXVzdCBiZSBhICdjc3MnIGZ1bmN0aW9uIHJlc3VsdDogXCIrdCtcIi4gVXNlICd1bnNhZmVDU1MnIHRvIHBhc3Mgbm9uLWxpdGVyYWwgdmFsdWVzLCBidXQgdGFrZSBjYXJlIHRvIGVuc3VyZSBwYWdlIHNlY3VyaXR5LlwiKX0pKHMpK3RbbysxXSksdFswXSk7cmV0dXJuIG5ldyBuKG8sdCxzKX0sUz0ocyxvKT0+e2lmKGUpcy5hZG9wdGVkU3R5bGVTaGVldHM9by5tYXAoKHQ9PnQgaW5zdGFuY2VvZiBDU1NTdHlsZVNoZWV0P3Q6dC5zdHlsZVNoZWV0KSk7ZWxzZSBmb3IoY29uc3QgZSBvZiBvKXtjb25zdCBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKSxuPXQubGl0Tm9uY2U7dm9pZCAwIT09biYmby5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLG4pLG8udGV4dENvbnRlbnQ9ZS5jc3NUZXh0LHMuYXBwZW5kQ2hpbGQobyl9fSxjPWU/dD0+dDp0PT50IGluc3RhbmNlb2YgQ1NTU3R5bGVTaGVldD8odD0+e2xldCBlPVwiXCI7Zm9yKGNvbnN0IHMgb2YgdC5jc3NSdWxlcyllKz1zLmNzc1RleHQ7cmV0dXJuIHIoZSl9KSh0KTp0O2V4cG9ydHtuIGFzIENTU1Jlc3VsdCxTIGFzIGFkb3B0U3R5bGVzLGkgYXMgY3NzLGMgYXMgZ2V0Q29tcGF0aWJsZVN0eWxlLGUgYXMgc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzLHIgYXMgdW5zYWZlQ1NTfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNzcy10YWcuanMubWFwXG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9cblxuY29uc3QgTk9ERV9NT0RFID0gZmFsc2U7XG5cbi8vIEFsbG93cyBtaW5pZmllcnMgdG8gcmVuYW1lIHJlZmVyZW5jZXMgdG8gZ2xvYmFsVGhpc1xuY29uc3QgZ2xvYmFsID0gZ2xvYmFsVGhpcztcblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBjdXJyZW50IGJyb3dzZXIgc3VwcG9ydHMgYGFkb3B0ZWRTdHlsZVNoZWV0c2AuXG4gKi9cbmV4cG9ydCBjb25zdCBzdXBwb3J0c0Fkb3B0aW5nU3R5bGVTaGVldHM6IGJvb2xlYW4gPVxuICBnbG9iYWwuU2hhZG93Um9vdCAmJlxuICAoZ2xvYmFsLlNoYWR5Q1NTID09PSB1bmRlZmluZWQgfHwgZ2xvYmFsLlNoYWR5Q1NTLm5hdGl2ZVNoYWRvdykgJiZcbiAgJ2Fkb3B0ZWRTdHlsZVNoZWV0cycgaW4gRG9jdW1lbnQucHJvdG90eXBlICYmXG4gICdyZXBsYWNlJyBpbiBDU1NTdHlsZVNoZWV0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBBIENTU1Jlc3VsdCBvciBuYXRpdmUgQ1NTU3R5bGVTaGVldC5cbiAqXG4gKiBJbiBicm93c2VycyB0aGF0IHN1cHBvcnQgY29uc3RydWN0aWJsZSBDU1Mgc3R5bGUgc2hlZXRzLCBDU1NTdHlsZVNoZWV0XG4gKiBvYmplY3QgY2FuIGJlIHVzZWQgZm9yIHN0eWxpbmcgYWxvbmcgc2lkZSBDU1NSZXN1bHQgZnJvbSB0aGUgYGNzc2BcbiAqIHRlbXBsYXRlIHRhZy5cbiAqL1xuZXhwb3J0IHR5cGUgQ1NTUmVzdWx0T3JOYXRpdmUgPSBDU1NSZXN1bHQgfCBDU1NTdHlsZVNoZWV0O1xuXG5leHBvcnQgdHlwZSBDU1NSZXN1bHRBcnJheSA9IEFycmF5PENTU1Jlc3VsdE9yTmF0aXZlIHwgQ1NTUmVzdWx0QXJyYXk+O1xuXG4vKipcbiAqIEEgc2luZ2xlIENTU1Jlc3VsdCwgQ1NTU3R5bGVTaGVldCwgb3IgYW4gYXJyYXkgb3IgbmVzdGVkIGFycmF5cyBvZiB0aG9zZS5cbiAqL1xuZXhwb3J0IHR5cGUgQ1NTUmVzdWx0R3JvdXAgPSBDU1NSZXN1bHRPck5hdGl2ZSB8IENTU1Jlc3VsdEFycmF5O1xuXG5jb25zdCBjb25zdHJ1Y3Rpb25Ub2tlbiA9IFN5bWJvbCgpO1xuXG5jb25zdCBjc3NUYWdDYWNoZSA9IG5ldyBXZWFrTWFwPFRlbXBsYXRlU3RyaW5nc0FycmF5LCBDU1NTdHlsZVNoZWV0PigpO1xuXG4vKipcbiAqIEEgY29udGFpbmVyIGZvciBhIHN0cmluZyBvZiBDU1MgdGV4dCwgdGhhdCBtYXkgYmUgdXNlZCB0byBjcmVhdGUgYSBDU1NTdHlsZVNoZWV0LlxuICpcbiAqIENTU1Jlc3VsdCBpcyB0aGUgcmV0dXJuIHZhbHVlIG9mIGBjc3NgLXRhZ2dlZCB0ZW1wbGF0ZSBsaXRlcmFscyBhbmRcbiAqIGB1bnNhZmVDU1MoKWAuIEluIG9yZGVyIHRvIGVuc3VyZSB0aGF0IENTU1Jlc3VsdHMgYXJlIG9ubHkgY3JlYXRlZCB2aWEgdGhlXG4gKiBgY3NzYCB0YWcgYW5kIGB1bnNhZmVDU1MoKWAsIENTU1Jlc3VsdCBjYW5ub3QgYmUgY29uc3RydWN0ZWQgZGlyZWN0bHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBDU1NSZXN1bHQge1xuICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICBbJ18kY3NzUmVzdWx0JCddID0gdHJ1ZTtcbiAgcmVhZG9ubHkgY3NzVGV4dDogc3RyaW5nO1xuICBwcml2YXRlIF9zdHlsZVNoZWV0PzogQ1NTU3R5bGVTaGVldDtcbiAgcHJpdmF0ZSBfc3RyaW5nczogVGVtcGxhdGVTdHJpbmdzQXJyYXkgfCB1bmRlZmluZWQ7XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3RvcihcbiAgICBjc3NUZXh0OiBzdHJpbmcsXG4gICAgc3RyaW5nczogVGVtcGxhdGVTdHJpbmdzQXJyYXkgfCB1bmRlZmluZWQsXG4gICAgc2FmZVRva2VuOiBzeW1ib2xcbiAgKSB7XG4gICAgaWYgKHNhZmVUb2tlbiAhPT0gY29uc3RydWN0aW9uVG9rZW4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0NTU1Jlc3VsdCBpcyBub3QgY29uc3RydWN0YWJsZS4gVXNlIGB1bnNhZmVDU1NgIG9yIGBjc3NgIGluc3RlYWQuJ1xuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5jc3NUZXh0ID0gY3NzVGV4dDtcbiAgICB0aGlzLl9zdHJpbmdzID0gc3RyaW5ncztcbiAgfVxuXG4gIC8vIFRoaXMgaXMgYSBnZXR0ZXIgc28gdGhhdCBpdCdzIGxhenkuIEluIHByYWN0aWNlLCB0aGlzIG1lYW5zIHN0eWxlc2hlZXRzXG4gIC8vIGFyZSBub3QgY3JlYXRlZCB1bnRpbCB0aGUgZmlyc3QgZWxlbWVudCBpbnN0YW5jZSBpcyBtYWRlLlxuICBnZXQgc3R5bGVTaGVldCgpOiBDU1NTdHlsZVNoZWV0IHwgdW5kZWZpbmVkIHtcbiAgICAvLyBJZiBgc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzYCBpcyB0cnVlIHRoZW4gd2UgYXNzdW1lIENTU1N0eWxlU2hlZXQgaXNcbiAgICAvLyBjb25zdHJ1Y3RhYmxlLlxuICAgIGxldCBzdHlsZVNoZWV0ID0gdGhpcy5fc3R5bGVTaGVldDtcbiAgICBjb25zdCBzdHJpbmdzID0gdGhpcy5fc3RyaW5ncztcbiAgICBpZiAoc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzICYmIHN0eWxlU2hlZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgY2FjaGVhYmxlID0gc3RyaW5ncyAhPT0gdW5kZWZpbmVkICYmIHN0cmluZ3MubGVuZ3RoID09PSAxO1xuICAgICAgaWYgKGNhY2hlYWJsZSkge1xuICAgICAgICBzdHlsZVNoZWV0ID0gY3NzVGFnQ2FjaGUuZ2V0KHN0cmluZ3MpO1xuICAgICAgfVxuICAgICAgaWYgKHN0eWxlU2hlZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAodGhpcy5fc3R5bGVTaGVldCA9IHN0eWxlU2hlZXQgPSBuZXcgQ1NTU3R5bGVTaGVldCgpKS5yZXBsYWNlU3luYyhcbiAgICAgICAgICB0aGlzLmNzc1RleHRcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGNhY2hlYWJsZSkge1xuICAgICAgICAgIGNzc1RhZ0NhY2hlLnNldChzdHJpbmdzLCBzdHlsZVNoZWV0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3R5bGVTaGVldDtcbiAgfVxuXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuY3NzVGV4dDtcbiAgfVxufVxuXG50eXBlIENvbnN0cnVjdGFibGVDU1NSZXN1bHQgPSBDU1NSZXN1bHQgJiB7XG4gIG5ldyAoXG4gICAgY3NzVGV4dDogc3RyaW5nLFxuICAgIHN0cmluZ3M6IFRlbXBsYXRlU3RyaW5nc0FycmF5IHwgdW5kZWZpbmVkLFxuICAgIHNhZmVUb2tlbjogc3ltYm9sXG4gICk6IENTU1Jlc3VsdDtcbn07XG5cbmNvbnN0IHRleHRGcm9tQ1NTUmVzdWx0ID0gKHZhbHVlOiBDU1NSZXN1bHRHcm91cCB8IG51bWJlcikgPT4ge1xuICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICBpZiAoKHZhbHVlIGFzIENTU1Jlc3VsdClbJ18kY3NzUmVzdWx0JCddID09PSB0cnVlKSB7XG4gICAgcmV0dXJuICh2YWx1ZSBhcyBDU1NSZXN1bHQpLmNzc1RleHQ7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgVmFsdWUgcGFzc2VkIHRvICdjc3MnIGZ1bmN0aW9uIG11c3QgYmUgYSAnY3NzJyBmdW5jdGlvbiByZXN1bHQ6IGAgK1xuICAgICAgICBgJHt2YWx1ZX0uIFVzZSAndW5zYWZlQ1NTJyB0byBwYXNzIG5vbi1saXRlcmFsIHZhbHVlcywgYnV0IHRha2UgY2FyZSBgICtcbiAgICAgICAgYHRvIGVuc3VyZSBwYWdlIHNlY3VyaXR5LmBcbiAgICApO1xuICB9XG59O1xuXG4vKipcbiAqIFdyYXAgYSB2YWx1ZSBmb3IgaW50ZXJwb2xhdGlvbiBpbiBhIHtAbGlua2NvZGUgY3NzfSB0YWdnZWQgdGVtcGxhdGUgbGl0ZXJhbC5cbiAqXG4gKiBUaGlzIGlzIHVuc2FmZSBiZWNhdXNlIHVudHJ1c3RlZCBDU1MgdGV4dCBjYW4gYmUgdXNlZCB0byBwaG9uZSBob21lXG4gKiBvciBleGZpbHRyYXRlIGRhdGEgdG8gYW4gYXR0YWNrZXIgY29udHJvbGxlZCBzaXRlLiBUYWtlIGNhcmUgdG8gb25seSB1c2VcbiAqIHRoaXMgd2l0aCB0cnVzdGVkIGlucHV0LlxuICovXG5leHBvcnQgY29uc3QgdW5zYWZlQ1NTID0gKHZhbHVlOiB1bmtub3duKSA9PlxuICBuZXcgKENTU1Jlc3VsdCBhcyBDb25zdHJ1Y3RhYmxlQ1NTUmVzdWx0KShcbiAgICB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBTdHJpbmcodmFsdWUpLFxuICAgIHVuZGVmaW5lZCxcbiAgICBjb25zdHJ1Y3Rpb25Ub2tlblxuICApO1xuXG4vKipcbiAqIEEgdGVtcGxhdGUgbGl0ZXJhbCB0YWcgd2hpY2ggY2FuIGJlIHVzZWQgd2l0aCBMaXRFbGVtZW50J3NcbiAqIHtAbGlua2NvZGUgTGl0RWxlbWVudC5zdHlsZXN9IHByb3BlcnR5IHRvIHNldCBlbGVtZW50IHN0eWxlcy5cbiAqXG4gKiBGb3Igc2VjdXJpdHkgcmVhc29ucywgb25seSBsaXRlcmFsIHN0cmluZyB2YWx1ZXMgYW5kIG51bWJlciBtYXkgYmUgdXNlZCBpblxuICogZW1iZWRkZWQgZXhwcmVzc2lvbnMuIFRvIGluY29ycG9yYXRlIG5vbi1saXRlcmFsIHZhbHVlcyB7QGxpbmtjb2RlIHVuc2FmZUNTU31cbiAqIG1heSBiZSB1c2VkIGluc2lkZSBhbiBleHByZXNzaW9uLlxuICovXG5leHBvcnQgY29uc3QgY3NzID0gKFxuICBzdHJpbmdzOiBUZW1wbGF0ZVN0cmluZ3NBcnJheSxcbiAgLi4udmFsdWVzOiAoQ1NTUmVzdWx0R3JvdXAgfCBudW1iZXIpW11cbik6IENTU1Jlc3VsdCA9PiB7XG4gIGNvbnN0IGNzc1RleHQgPVxuICAgIHN0cmluZ3MubGVuZ3RoID09PSAxXG4gICAgICA/IHN0cmluZ3NbMF1cbiAgICAgIDogdmFsdWVzLnJlZHVjZShcbiAgICAgICAgICAoYWNjLCB2LCBpZHgpID0+IGFjYyArIHRleHRGcm9tQ1NTUmVzdWx0KHYpICsgc3RyaW5nc1tpZHggKyAxXSxcbiAgICAgICAgICBzdHJpbmdzWzBdXG4gICAgICAgICk7XG4gIHJldHVybiBuZXcgKENTU1Jlc3VsdCBhcyBDb25zdHJ1Y3RhYmxlQ1NTUmVzdWx0KShcbiAgICBjc3NUZXh0LFxuICAgIHN0cmluZ3MsXG4gICAgY29uc3RydWN0aW9uVG9rZW5cbiAgKTtcbn07XG5cbi8qKlxuICogQXBwbGllcyB0aGUgZ2l2ZW4gc3R5bGVzIHRvIGEgYHNoYWRvd1Jvb3RgLiBXaGVuIFNoYWRvdyBET00gaXNcbiAqIGF2YWlsYWJsZSBidXQgYGFkb3B0ZWRTdHlsZVNoZWV0c2AgaXMgbm90LCBzdHlsZXMgYXJlIGFwcGVuZGVkIHRvIHRoZVxuICogYHNoYWRvd1Jvb3RgIHRvIFttaW1pYyBzcGVjIGJlaGF2aW9yXShodHRwczovL3dpY2cuZ2l0aHViLmlvL2NvbnN0cnVjdC1zdHlsZXNoZWV0cy8jdXNpbmctY29uc3RydWN0ZWQtc3R5bGVzaGVldHMpLlxuICogTm90ZSwgd2hlbiBzaGltbWluZyBpcyB1c2VkLCBhbnkgc3R5bGVzIHRoYXQgYXJlIHN1YnNlcXVlbnRseSBwbGFjZWQgaW50b1xuICogdGhlIHNoYWRvd1Jvb3Qgc2hvdWxkIGJlIHBsYWNlZCAqYmVmb3JlKiBhbnkgc2hpbW1lZCBhZG9wdGVkIHN0eWxlcy4gVGhpc1xuICogd2lsbCBtYXRjaCBzcGVjIGJlaGF2aW9yIHRoYXQgZ2l2ZXMgYWRvcHRlZCBzaGVldHMgcHJlY2VkZW5jZSBvdmVyIHN0eWxlcyBpblxuICogc2hhZG93Um9vdC5cbiAqL1xuZXhwb3J0IGNvbnN0IGFkb3B0U3R5bGVzID0gKFxuICByZW5kZXJSb290OiBTaGFkb3dSb290LFxuICBzdHlsZXM6IEFycmF5PENTU1Jlc3VsdE9yTmF0aXZlPlxuKSA9PiB7XG4gIGlmIChzdXBwb3J0c0Fkb3B0aW5nU3R5bGVTaGVldHMpIHtcbiAgICAocmVuZGVyUm9vdCBhcyBTaGFkb3dSb290KS5hZG9wdGVkU3R5bGVTaGVldHMgPSBzdHlsZXMubWFwKChzKSA9PlxuICAgICAgcyBpbnN0YW5jZW9mIENTU1N0eWxlU2hlZXQgPyBzIDogcy5zdHlsZVNoZWV0IVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgZm9yIChjb25zdCBzIG9mIHN0eWxlcykge1xuICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgIGNvbnN0IG5vbmNlID0gKGdsb2JhbCBhcyBhbnkpWydsaXROb25jZSddO1xuICAgICAgaWYgKG5vbmNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc3R5bGUuc2V0QXR0cmlidXRlKCdub25jZScsIG5vbmNlKTtcbiAgICAgIH1cbiAgICAgIHN0eWxlLnRleHRDb250ZW50ID0gKHMgYXMgQ1NTUmVzdWx0KS5jc3NUZXh0O1xuICAgICAgcmVuZGVyUm9vdC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgfVxuICB9XG59O1xuXG5jb25zdCBjc3NSZXN1bHRGcm9tU3R5bGVTaGVldCA9IChzaGVldDogQ1NTU3R5bGVTaGVldCkgPT4ge1xuICBsZXQgY3NzVGV4dCA9ICcnO1xuICBmb3IgKGNvbnN0IHJ1bGUgb2Ygc2hlZXQuY3NzUnVsZXMpIHtcbiAgICBjc3NUZXh0ICs9IHJ1bGUuY3NzVGV4dDtcbiAgfVxuICByZXR1cm4gdW5zYWZlQ1NTKGNzc1RleHQpO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldENvbXBhdGlibGVTdHlsZSA9XG4gIHN1cHBvcnRzQWRvcHRpbmdTdHlsZVNoZWV0cyB8fFxuICAoTk9ERV9NT0RFICYmIGdsb2JhbC5DU1NTdHlsZVNoZWV0ID09PSB1bmRlZmluZWQpXG4gICAgPyAoczogQ1NTUmVzdWx0T3JOYXRpdmUpID0+IHNcbiAgICA6IChzOiBDU1NSZXN1bHRPck5hdGl2ZSkgPT5cbiAgICAgICAgcyBpbnN0YW5jZW9mIENTU1N0eWxlU2hlZXQgPyBjc3NSZXN1bHRGcm9tU3R5bGVTaGVldChzKSA6IHM7XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9cbmNvbnN0IHQ9Z2xvYmFsVGhpcyxpPXQudHJ1c3RlZFR5cGVzLHM9aT9pLmNyZWF0ZVBvbGljeShcImxpdC1odG1sXCIse2NyZWF0ZUhUTUw6dD0+dH0pOnZvaWQgMCxlPVwiJGxpdCRcIixoPWBsaXQkJHtNYXRoLnJhbmRvbSgpLnRvRml4ZWQoOSkuc2xpY2UoMil9JGAsbz1cIj9cIitoLG49YDwke299PmAscj1kb2N1bWVudCxsPSgpPT5yLmNyZWF0ZUNvbW1lbnQoXCJcIiksYz10PT5udWxsPT09dHx8XCJvYmplY3RcIiE9dHlwZW9mIHQmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHQsYT1BcnJheS5pc0FycmF5LHU9dD0+YSh0KXx8XCJmdW5jdGlvblwiPT10eXBlb2YgdD8uW1N5bWJvbC5pdGVyYXRvcl0sZD1cIlsgXFx0XFxuXFxmXFxyXVwiLGY9LzwoPzooIS0tfFxcL1teYS16QS1aXSl8KFxcLz9bYS16QS1aXVtePlxcc10qKXwoXFwvPyQpKS9nLHY9Ly0tPi9nLF89Lz4vZyxtPVJlZ0V4cChgPnwke2R9KD86KFteXFxcXHNcIic+PS9dKykoJHtkfSo9JHtkfSooPzpbXiBcXHRcXG5cXGZcXHJcIidcXGA8Pj1dfChcInwnKXwpKXwkKWAsXCJnXCIpLHA9LycvZyxnPS9cIi9nLCQ9L14oPzpzY3JpcHR8c3R5bGV8dGV4dGFyZWF8dGl0bGUpJC9pLHk9dD0+KGksLi4ucyk9Pih7XyRsaXRUeXBlJDp0LHN0cmluZ3M6aSx2YWx1ZXM6c30pLHg9eSgxKSxiPXkoMiksdz15KDMpLFQ9U3ltYm9sLmZvcihcImxpdC1ub0NoYW5nZVwiKSxFPVN5bWJvbC5mb3IoXCJsaXQtbm90aGluZ1wiKSxBPW5ldyBXZWFrTWFwLEM9ci5jcmVhdGVUcmVlV2Fsa2VyKHIsMTI5KTtmdW5jdGlvbiBQKHQsaSl7aWYoIWEodCl8fCF0Lmhhc093blByb3BlcnR5KFwicmF3XCIpKXRocm93IEVycm9yKFwiaW52YWxpZCB0ZW1wbGF0ZSBzdHJpbmdzIGFycmF5XCIpO3JldHVybiB2b2lkIDAhPT1zP3MuY3JlYXRlSFRNTChpKTppfWNvbnN0IFY9KHQsaSk9Pntjb25zdCBzPXQubGVuZ3RoLTEsbz1bXTtsZXQgcixsPTI9PT1pP1wiPHN2Zz5cIjozPT09aT9cIjxtYXRoPlwiOlwiXCIsYz1mO2ZvcihsZXQgaT0wO2k8cztpKyspe2NvbnN0IHM9dFtpXTtsZXQgYSx1LGQ9LTEseT0wO2Zvcig7eTxzLmxlbmd0aCYmKGMubGFzdEluZGV4PXksdT1jLmV4ZWMocyksbnVsbCE9PXUpOyl5PWMubGFzdEluZGV4LGM9PT1mP1wiIS0tXCI9PT11WzFdP2M9djp2b2lkIDAhPT11WzFdP2M9Xzp2b2lkIDAhPT11WzJdPygkLnRlc3QodVsyXSkmJihyPVJlZ0V4cChcIjwvXCIrdVsyXSxcImdcIikpLGM9bSk6dm9pZCAwIT09dVszXSYmKGM9bSk6Yz09PW0/XCI+XCI9PT11WzBdPyhjPXI/P2YsZD0tMSk6dm9pZCAwPT09dVsxXT9kPS0yOihkPWMubGFzdEluZGV4LXVbMl0ubGVuZ3RoLGE9dVsxXSxjPXZvaWQgMD09PXVbM10/bTonXCInPT09dVszXT9nOnApOmM9PT1nfHxjPT09cD9jPW06Yz09PXZ8fGM9PT1fP2M9ZjooYz1tLHI9dm9pZCAwKTtjb25zdCB4PWM9PT1tJiZ0W2krMV0uc3RhcnRzV2l0aChcIi8+XCIpP1wiIFwiOlwiXCI7bCs9Yz09PWY/cytuOmQ+PTA/KG8ucHVzaChhKSxzLnNsaWNlKDAsZCkrZStzLnNsaWNlKGQpK2greCk6cytoKygtMj09PWQ/aTp4KX1yZXR1cm5bUCh0LGwrKHRbc118fFwiPD8+XCIpKygyPT09aT9cIjwvc3ZnPlwiOjM9PT1pP1wiPC9tYXRoPlwiOlwiXCIpKSxvXX07Y2xhc3MgTntjb25zdHJ1Y3Rvcih7c3RyaW5nczp0LF8kbGl0VHlwZSQ6c30sbil7bGV0IHI7dGhpcy5wYXJ0cz1bXTtsZXQgYz0wLGE9MDtjb25zdCB1PXQubGVuZ3RoLTEsZD10aGlzLnBhcnRzLFtmLHZdPVYodCxzKTtpZih0aGlzLmVsPU4uY3JlYXRlRWxlbWVudChmLG4pLEMuY3VycmVudE5vZGU9dGhpcy5lbC5jb250ZW50LDI9PT1zfHwzPT09cyl7Y29uc3QgdD10aGlzLmVsLmNvbnRlbnQuZmlyc3RDaGlsZDt0LnJlcGxhY2VXaXRoKC4uLnQuY2hpbGROb2Rlcyl9Zm9yKDtudWxsIT09KHI9Qy5uZXh0Tm9kZSgpKSYmZC5sZW5ndGg8dTspe2lmKDE9PT1yLm5vZGVUeXBlKXtpZihyLmhhc0F0dHJpYnV0ZXMoKSlmb3IoY29uc3QgdCBvZiByLmdldEF0dHJpYnV0ZU5hbWVzKCkpaWYodC5lbmRzV2l0aChlKSl7Y29uc3QgaT12W2ErK10scz1yLmdldEF0dHJpYnV0ZSh0KS5zcGxpdChoKSxlPS8oWy4/QF0pPyguKikvLmV4ZWMoaSk7ZC5wdXNoKHt0eXBlOjEsaW5kZXg6YyxuYW1lOmVbMl0sc3RyaW5nczpzLGN0b3I6XCIuXCI9PT1lWzFdP0g6XCI/XCI9PT1lWzFdP0k6XCJAXCI9PT1lWzFdP0w6a30pLHIucmVtb3ZlQXR0cmlidXRlKHQpfWVsc2UgdC5zdGFydHNXaXRoKGgpJiYoZC5wdXNoKHt0eXBlOjYsaW5kZXg6Y30pLHIucmVtb3ZlQXR0cmlidXRlKHQpKTtpZigkLnRlc3Qoci50YWdOYW1lKSl7Y29uc3QgdD1yLnRleHRDb250ZW50LnNwbGl0KGgpLHM9dC5sZW5ndGgtMTtpZihzPjApe3IudGV4dENvbnRlbnQ9aT9pLmVtcHR5U2NyaXB0OlwiXCI7Zm9yKGxldCBpPTA7aTxzO2krKylyLmFwcGVuZCh0W2ldLGwoKSksQy5uZXh0Tm9kZSgpLGQucHVzaCh7dHlwZToyLGluZGV4OisrY30pO3IuYXBwZW5kKHRbc10sbCgpKX19fWVsc2UgaWYoOD09PXIubm9kZVR5cGUpaWYoci5kYXRhPT09bylkLnB1c2goe3R5cGU6MixpbmRleDpjfSk7ZWxzZXtsZXQgdD0tMTtmb3IoOy0xIT09KHQ9ci5kYXRhLmluZGV4T2YoaCx0KzEpKTspZC5wdXNoKHt0eXBlOjcsaW5kZXg6Y30pLHQrPWgubGVuZ3RoLTF9YysrfX1zdGF0aWMgY3JlYXRlRWxlbWVudCh0LGkpe2NvbnN0IHM9ci5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7cmV0dXJuIHMuaW5uZXJIVE1MPXQsc319ZnVuY3Rpb24gUyh0LGkscz10LGUpe2lmKGk9PT1UKXJldHVybiBpO2xldCBoPXZvaWQgMCE9PWU/cy5fJENvPy5bZV06cy5fJENsO2NvbnN0IG89YyhpKT92b2lkIDA6aS5fJGxpdERpcmVjdGl2ZSQ7cmV0dXJuIGg/LmNvbnN0cnVjdG9yIT09byYmKGg/Ll8kQU8/LighMSksdm9pZCAwPT09bz9oPXZvaWQgMDooaD1uZXcgbyh0KSxoLl8kQVQodCxzLGUpKSx2b2lkIDAhPT1lPyhzLl8kQ28/Pz1bXSlbZV09aDpzLl8kQ2w9aCksdm9pZCAwIT09aCYmKGk9Uyh0LGguXyRBUyh0LGkudmFsdWVzKSxoLGUpKSxpfWNsYXNzIE17Y29uc3RydWN0b3IodCxpKXt0aGlzLl8kQVY9W10sdGhpcy5fJEFOPXZvaWQgMCx0aGlzLl8kQUQ9dCx0aGlzLl8kQU09aX1nZXQgcGFyZW50Tm9kZSgpe3JldHVybiB0aGlzLl8kQU0ucGFyZW50Tm9kZX1nZXQgXyRBVSgpe3JldHVybiB0aGlzLl8kQU0uXyRBVX11KHQpe2NvbnN0e2VsOntjb250ZW50Oml9LHBhcnRzOnN9PXRoaXMuXyRBRCxlPSh0Py5jcmVhdGlvblNjb3BlPz9yKS5pbXBvcnROb2RlKGksITApO0MuY3VycmVudE5vZGU9ZTtsZXQgaD1DLm5leHROb2RlKCksbz0wLG49MCxsPXNbMF07Zm9yKDt2b2lkIDAhPT1sOyl7aWYobz09PWwuaW5kZXgpe2xldCBpOzI9PT1sLnR5cGU/aT1uZXcgUihoLGgubmV4dFNpYmxpbmcsdGhpcyx0KToxPT09bC50eXBlP2k9bmV3IGwuY3RvcihoLGwubmFtZSxsLnN0cmluZ3MsdGhpcyx0KTo2PT09bC50eXBlJiYoaT1uZXcgeihoLHRoaXMsdCkpLHRoaXMuXyRBVi5wdXNoKGkpLGw9c1srK25dfW8hPT1sPy5pbmRleCYmKGg9Qy5uZXh0Tm9kZSgpLG8rKyl9cmV0dXJuIEMuY3VycmVudE5vZGU9cixlfXAodCl7bGV0IGk9MDtmb3IoY29uc3QgcyBvZiB0aGlzLl8kQVYpdm9pZCAwIT09cyYmKHZvaWQgMCE9PXMuc3RyaW5ncz8ocy5fJEFJKHQscyxpKSxpKz1zLnN0cmluZ3MubGVuZ3RoLTIpOnMuXyRBSSh0W2ldKSksaSsrfX1jbGFzcyBSe2dldCBfJEFVKCl7cmV0dXJuIHRoaXMuXyRBTT8uXyRBVT8/dGhpcy5fJEN2fWNvbnN0cnVjdG9yKHQsaSxzLGUpe3RoaXMudHlwZT0yLHRoaXMuXyRBSD1FLHRoaXMuXyRBTj12b2lkIDAsdGhpcy5fJEFBPXQsdGhpcy5fJEFCPWksdGhpcy5fJEFNPXMsdGhpcy5vcHRpb25zPWUsdGhpcy5fJEN2PWU/LmlzQ29ubmVjdGVkPz8hMH1nZXQgcGFyZW50Tm9kZSgpe2xldCB0PXRoaXMuXyRBQS5wYXJlbnROb2RlO2NvbnN0IGk9dGhpcy5fJEFNO3JldHVybiB2b2lkIDAhPT1pJiYxMT09PXQ/Lm5vZGVUeXBlJiYodD1pLnBhcmVudE5vZGUpLHR9Z2V0IHN0YXJ0Tm9kZSgpe3JldHVybiB0aGlzLl8kQUF9Z2V0IGVuZE5vZGUoKXtyZXR1cm4gdGhpcy5fJEFCfV8kQUkodCxpPXRoaXMpe3Q9Uyh0aGlzLHQsaSksYyh0KT90PT09RXx8bnVsbD09dHx8XCJcIj09PXQ/KHRoaXMuXyRBSCE9PUUmJnRoaXMuXyRBUigpLHRoaXMuXyRBSD1FKTp0IT09dGhpcy5fJEFIJiZ0IT09VCYmdGhpcy5fKHQpOnZvaWQgMCE9PXQuXyRsaXRUeXBlJD90aGlzLiQodCk6dm9pZCAwIT09dC5ub2RlVHlwZT90aGlzLlQodCk6dSh0KT90aGlzLmsodCk6dGhpcy5fKHQpfU8odCl7cmV0dXJuIHRoaXMuXyRBQS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0LHRoaXMuXyRBQil9VCh0KXt0aGlzLl8kQUghPT10JiYodGhpcy5fJEFSKCksdGhpcy5fJEFIPXRoaXMuTyh0KSl9Xyh0KXt0aGlzLl8kQUghPT1FJiZjKHRoaXMuXyRBSCk/dGhpcy5fJEFBLm5leHRTaWJsaW5nLmRhdGE9dDp0aGlzLlQoci5jcmVhdGVUZXh0Tm9kZSh0KSksdGhpcy5fJEFIPXR9JCh0KXtjb25zdHt2YWx1ZXM6aSxfJGxpdFR5cGUkOnN9PXQsZT1cIm51bWJlclwiPT10eXBlb2Ygcz90aGlzLl8kQUModCk6KHZvaWQgMD09PXMuZWwmJihzLmVsPU4uY3JlYXRlRWxlbWVudChQKHMuaCxzLmhbMF0pLHRoaXMub3B0aW9ucykpLHMpO2lmKHRoaXMuXyRBSD8uXyRBRD09PWUpdGhpcy5fJEFILnAoaSk7ZWxzZXtjb25zdCB0PW5ldyBNKGUsdGhpcykscz10LnUodGhpcy5vcHRpb25zKTt0LnAoaSksdGhpcy5UKHMpLHRoaXMuXyRBSD10fX1fJEFDKHQpe2xldCBpPUEuZ2V0KHQuc3RyaW5ncyk7cmV0dXJuIHZvaWQgMD09PWkmJkEuc2V0KHQuc3RyaW5ncyxpPW5ldyBOKHQpKSxpfWsodCl7YSh0aGlzLl8kQUgpfHwodGhpcy5fJEFIPVtdLHRoaXMuXyRBUigpKTtjb25zdCBpPXRoaXMuXyRBSDtsZXQgcyxlPTA7Zm9yKGNvbnN0IGggb2YgdCllPT09aS5sZW5ndGg/aS5wdXNoKHM9bmV3IFIodGhpcy5PKGwoKSksdGhpcy5PKGwoKSksdGhpcyx0aGlzLm9wdGlvbnMpKTpzPWlbZV0scy5fJEFJKGgpLGUrKztlPGkubGVuZ3RoJiYodGhpcy5fJEFSKHMmJnMuXyRBQi5uZXh0U2libGluZyxlKSxpLmxlbmd0aD1lKX1fJEFSKHQ9dGhpcy5fJEFBLm5leHRTaWJsaW5nLGkpe2Zvcih0aGlzLl8kQVA/LighMSwhMCxpKTt0JiZ0IT09dGhpcy5fJEFCOyl7Y29uc3QgaT10Lm5leHRTaWJsaW5nO3QucmVtb3ZlKCksdD1pfX1zZXRDb25uZWN0ZWQodCl7dm9pZCAwPT09dGhpcy5fJEFNJiYodGhpcy5fJEN2PXQsdGhpcy5fJEFQPy4odCkpfX1jbGFzcyBre2dldCB0YWdOYW1lKCl7cmV0dXJuIHRoaXMuZWxlbWVudC50YWdOYW1lfWdldCBfJEFVKCl7cmV0dXJuIHRoaXMuXyRBTS5fJEFVfWNvbnN0cnVjdG9yKHQsaSxzLGUsaCl7dGhpcy50eXBlPTEsdGhpcy5fJEFIPUUsdGhpcy5fJEFOPXZvaWQgMCx0aGlzLmVsZW1lbnQ9dCx0aGlzLm5hbWU9aSx0aGlzLl8kQU09ZSx0aGlzLm9wdGlvbnM9aCxzLmxlbmd0aD4yfHxcIlwiIT09c1swXXx8XCJcIiE9PXNbMV0/KHRoaXMuXyRBSD1BcnJheShzLmxlbmd0aC0xKS5maWxsKG5ldyBTdHJpbmcpLHRoaXMuc3RyaW5ncz1zKTp0aGlzLl8kQUg9RX1fJEFJKHQsaT10aGlzLHMsZSl7Y29uc3QgaD10aGlzLnN0cmluZ3M7bGV0IG89ITE7aWYodm9pZCAwPT09aCl0PVModGhpcyx0LGksMCksbz0hYyh0KXx8dCE9PXRoaXMuXyRBSCYmdCE9PVQsbyYmKHRoaXMuXyRBSD10KTtlbHNle2NvbnN0IGU9dDtsZXQgbixyO2Zvcih0PWhbMF0sbj0wO248aC5sZW5ndGgtMTtuKyspcj1TKHRoaXMsZVtzK25dLGksbikscj09PVQmJihyPXRoaXMuXyRBSFtuXSksb3x8PSFjKHIpfHxyIT09dGhpcy5fJEFIW25dLHI9PT1FP3Q9RTp0IT09RSYmKHQrPShyPz9cIlwiKStoW24rMV0pLHRoaXMuXyRBSFtuXT1yfW8mJiFlJiZ0aGlzLmoodCl9aih0KXt0PT09RT90aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKHRoaXMubmFtZSk6dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSh0aGlzLm5hbWUsdD8/XCJcIil9fWNsYXNzIEggZXh0ZW5kcyBre2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnR5cGU9M31qKHQpe3RoaXMuZWxlbWVudFt0aGlzLm5hbWVdPXQ9PT1FP3ZvaWQgMDp0fX1jbGFzcyBJIGV4dGVuZHMga3tjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy50eXBlPTR9aih0KXt0aGlzLmVsZW1lbnQudG9nZ2xlQXR0cmlidXRlKHRoaXMubmFtZSwhIXQmJnQhPT1FKX19Y2xhc3MgTCBleHRlbmRzIGt7Y29uc3RydWN0b3IodCxpLHMsZSxoKXtzdXBlcih0LGkscyxlLGgpLHRoaXMudHlwZT01fV8kQUkodCxpPXRoaXMpe2lmKCh0PVModGhpcyx0LGksMCk/P0UpPT09VClyZXR1cm47Y29uc3Qgcz10aGlzLl8kQUgsZT10PT09RSYmcyE9PUV8fHQuY2FwdHVyZSE9PXMuY2FwdHVyZXx8dC5vbmNlIT09cy5vbmNlfHx0LnBhc3NpdmUhPT1zLnBhc3NpdmUsaD10IT09RSYmKHM9PT1FfHxlKTtlJiZ0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLm5hbWUsdGhpcyxzKSxoJiZ0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLm5hbWUsdGhpcyx0KSx0aGlzLl8kQUg9dH1oYW5kbGVFdmVudCh0KXtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLl8kQUg/dGhpcy5fJEFILmNhbGwodGhpcy5vcHRpb25zPy5ob3N0Pz90aGlzLmVsZW1lbnQsdCk6dGhpcy5fJEFILmhhbmRsZUV2ZW50KHQpfX1jbGFzcyB6e2NvbnN0cnVjdG9yKHQsaSxzKXt0aGlzLmVsZW1lbnQ9dCx0aGlzLnR5cGU9Nix0aGlzLl8kQU49dm9pZCAwLHRoaXMuXyRBTT1pLHRoaXMub3B0aW9ucz1zfWdldCBfJEFVKCl7cmV0dXJuIHRoaXMuXyRBTS5fJEFVfV8kQUkodCl7Uyh0aGlzLHQpfX1jb25zdCBaPXtNOmUsUDpoLEE6byxDOjEsTDpWLFI6TSxEOnUsVjpTLEk6UixIOmssTjpJLFU6TCxCOkgsRjp6fSxqPXQubGl0SHRtbFBvbHlmaWxsU3VwcG9ydDtqPy4oTixSKSwodC5saXRIdG1sVmVyc2lvbnM/Pz1bXSkucHVzaChcIjMuMi4xXCIpO2NvbnN0IEI9KHQsaSxzKT0+e2NvbnN0IGU9cz8ucmVuZGVyQmVmb3JlPz9pO2xldCBoPWUuXyRsaXRQYXJ0JDtpZih2b2lkIDA9PT1oKXtjb25zdCB0PXM/LnJlbmRlckJlZm9yZT8/bnVsbDtlLl8kbGl0UGFydCQ9aD1uZXcgUihpLmluc2VydEJlZm9yZShsKCksdCksdCx2b2lkIDAscz8/e30pfXJldHVybiBoLl8kQUkodCksaH07ZXhwb3J0e1ogYXMgXyRMSCx4IGFzIGh0bWwsdyBhcyBtYXRobWwsVCBhcyBub0NoYW5nZSxFIGFzIG5vdGhpbmcsQiBhcyByZW5kZXIsYiBhcyBzdmd9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bGl0LWh0bWwuanMubWFwXG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9cblxuLy8gSU1QT1JUQU5UOiB0aGVzZSBpbXBvcnRzIG11c3QgYmUgdHlwZS1vbmx5XG5pbXBvcnQgdHlwZSB7RGlyZWN0aXZlLCBEaXJlY3RpdmVSZXN1bHQsIFBhcnRJbmZvfSBmcm9tICcuL2RpcmVjdGl2ZS5qcyc7XG5pbXBvcnQgdHlwZSB7VHJ1c3RlZEhUTUwsIFRydXN0ZWRUeXBlc1dpbmRvd30gZnJvbSAndHJ1c3RlZC10eXBlcy9saWInO1xuXG5jb25zdCBERVZfTU9ERSA9IHRydWU7XG5jb25zdCBFTkFCTEVfRVhUUkFfU0VDVVJJVFlfSE9PS1MgPSB0cnVlO1xuY29uc3QgRU5BQkxFX1NIQURZRE9NX05PUEFUQ0ggPSB0cnVlO1xuY29uc3QgTk9ERV9NT0RFID0gZmFsc2U7XG5cbi8vIEFsbG93cyBtaW5pZmllcnMgdG8gcmVuYW1lIHJlZmVyZW5jZXMgdG8gZ2xvYmFsVGhpc1xuY29uc3QgZ2xvYmFsID0gZ2xvYmFsVGhpcztcblxuLyoqXG4gKiBDb250YWlucyB0eXBlcyB0aGF0IGFyZSBwYXJ0IG9mIHRoZSB1bnN0YWJsZSBkZWJ1ZyBBUEkuXG4gKlxuICogRXZlcnl0aGluZyBpbiB0aGlzIEFQSSBpcyBub3Qgc3RhYmxlIGFuZCBtYXkgY2hhbmdlIG9yIGJlIHJlbW92ZWQgaW4gdGhlIGZ1dHVyZSxcbiAqIGV2ZW4gb24gcGF0Y2ggcmVsZWFzZXMuXG4gKi9cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbmFtZXNwYWNlXG5leHBvcnQgbmFtZXNwYWNlIExpdFVuc3RhYmxlIHtcbiAgLyoqXG4gICAqIFdoZW4gTGl0IGlzIHJ1bm5pbmcgaW4gZGV2IG1vZGUgYW5kIGB3aW5kb3cuZW1pdExpdERlYnVnTG9nRXZlbnRzYCBpcyB0cnVlLFxuICAgKiB3ZSB3aWxsIGVtaXQgJ2xpdC1kZWJ1ZycgZXZlbnRzIHRvIHdpbmRvdywgd2l0aCBsaXZlIGRldGFpbHMgYWJvdXQgdGhlIHVwZGF0ZSBhbmQgcmVuZGVyXG4gICAqIGxpZmVjeWNsZS4gVGhlc2UgY2FuIGJlIHVzZWZ1bCBmb3Igd3JpdGluZyBkZWJ1ZyB0b29saW5nIGFuZCB2aXN1YWxpemF0aW9ucy5cbiAgICpcbiAgICogUGxlYXNlIGJlIGF3YXJlIHRoYXQgcnVubmluZyB3aXRoIHdpbmRvdy5lbWl0TGl0RGVidWdMb2dFdmVudHMgaGFzIHBlcmZvcm1hbmNlIG92ZXJoZWFkLFxuICAgKiBtYWtpbmcgY2VydGFpbiBvcGVyYXRpb25zIHRoYXQgYXJlIG5vcm1hbGx5IHZlcnkgY2hlYXAgKGxpa2UgYSBuby1vcCByZW5kZXIpIG11Y2ggc2xvd2VyLFxuICAgKiBiZWNhdXNlIHdlIG11c3QgY29weSBkYXRhIGFuZCBkaXNwYXRjaCBldmVudHMuXG4gICAqL1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZVxuICBleHBvcnQgbmFtZXNwYWNlIERlYnVnTG9nIHtcbiAgICBleHBvcnQgdHlwZSBFbnRyeSA9XG4gICAgICB8IFRlbXBsYXRlUHJlcFxuICAgICAgfCBUZW1wbGF0ZUluc3RhbnRpYXRlZFxuICAgICAgfCBUZW1wbGF0ZUluc3RhbnRpYXRlZEFuZFVwZGF0ZWRcbiAgICAgIHwgVGVtcGxhdGVVcGRhdGluZ1xuICAgICAgfCBCZWdpblJlbmRlclxuICAgICAgfCBFbmRSZW5kZXJcbiAgICAgIHwgQ29tbWl0UGFydEVudHJ5XG4gICAgICB8IFNldFBhcnRWYWx1ZTtcbiAgICBleHBvcnQgaW50ZXJmYWNlIFRlbXBsYXRlUHJlcCB7XG4gICAgICBraW5kOiAndGVtcGxhdGUgcHJlcCc7XG4gICAgICB0ZW1wbGF0ZTogVGVtcGxhdGU7XG4gICAgICBzdHJpbmdzOiBUZW1wbGF0ZVN0cmluZ3NBcnJheTtcbiAgICAgIGNsb25hYmxlVGVtcGxhdGU6IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XG4gICAgICBwYXJ0czogVGVtcGxhdGVQYXJ0W107XG4gICAgfVxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQmVnaW5SZW5kZXIge1xuICAgICAga2luZDogJ2JlZ2luIHJlbmRlcic7XG4gICAgICBpZDogbnVtYmVyO1xuICAgICAgdmFsdWU6IHVua25vd247XG4gICAgICBjb250YWluZXI6IEhUTUxFbGVtZW50IHwgRG9jdW1lbnRGcmFnbWVudDtcbiAgICAgIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgICBwYXJ0OiBDaGlsZFBhcnQgfCB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGV4cG9ydCBpbnRlcmZhY2UgRW5kUmVuZGVyIHtcbiAgICAgIGtpbmQ6ICdlbmQgcmVuZGVyJztcbiAgICAgIGlkOiBudW1iZXI7XG4gICAgICB2YWx1ZTogdW5rbm93bjtcbiAgICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBEb2N1bWVudEZyYWdtZW50O1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICAgIHBhcnQ6IENoaWxkUGFydDtcbiAgICB9XG4gICAgZXhwb3J0IGludGVyZmFjZSBUZW1wbGF0ZUluc3RhbnRpYXRlZCB7XG4gICAgICBraW5kOiAndGVtcGxhdGUgaW5zdGFudGlhdGVkJztcbiAgICAgIHRlbXBsYXRlOiBUZW1wbGF0ZSB8IENvbXBpbGVkVGVtcGxhdGU7XG4gICAgICBpbnN0YW5jZTogVGVtcGxhdGVJbnN0YW5jZTtcbiAgICAgIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgICBmcmFnbWVudDogTm9kZTtcbiAgICAgIHBhcnRzOiBBcnJheTxQYXJ0IHwgdW5kZWZpbmVkPjtcbiAgICAgIHZhbHVlczogdW5rbm93bltdO1xuICAgIH1cbiAgICBleHBvcnQgaW50ZXJmYWNlIFRlbXBsYXRlSW5zdGFudGlhdGVkQW5kVXBkYXRlZCB7XG4gICAgICBraW5kOiAndGVtcGxhdGUgaW5zdGFudGlhdGVkIGFuZCB1cGRhdGVkJztcbiAgICAgIHRlbXBsYXRlOiBUZW1wbGF0ZSB8IENvbXBpbGVkVGVtcGxhdGU7XG4gICAgICBpbnN0YW5jZTogVGVtcGxhdGVJbnN0YW5jZTtcbiAgICAgIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgICBmcmFnbWVudDogTm9kZTtcbiAgICAgIHBhcnRzOiBBcnJheTxQYXJ0IHwgdW5kZWZpbmVkPjtcbiAgICAgIHZhbHVlczogdW5rbm93bltdO1xuICAgIH1cbiAgICBleHBvcnQgaW50ZXJmYWNlIFRlbXBsYXRlVXBkYXRpbmcge1xuICAgICAga2luZDogJ3RlbXBsYXRlIHVwZGF0aW5nJztcbiAgICAgIHRlbXBsYXRlOiBUZW1wbGF0ZSB8IENvbXBpbGVkVGVtcGxhdGU7XG4gICAgICBpbnN0YW5jZTogVGVtcGxhdGVJbnN0YW5jZTtcbiAgICAgIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgICBwYXJ0czogQXJyYXk8UGFydCB8IHVuZGVmaW5lZD47XG4gICAgICB2YWx1ZXM6IHVua25vd25bXTtcbiAgICB9XG4gICAgZXhwb3J0IGludGVyZmFjZSBTZXRQYXJ0VmFsdWUge1xuICAgICAga2luZDogJ3NldCBwYXJ0JztcbiAgICAgIHBhcnQ6IFBhcnQ7XG4gICAgICB2YWx1ZTogdW5rbm93bjtcbiAgICAgIHZhbHVlSW5kZXg6IG51bWJlcjtcbiAgICAgIHZhbHVlczogdW5rbm93bltdO1xuICAgICAgdGVtcGxhdGVJbnN0YW5jZTogVGVtcGxhdGVJbnN0YW5jZTtcbiAgICB9XG5cbiAgICBleHBvcnQgdHlwZSBDb21taXRQYXJ0RW50cnkgPVxuICAgICAgfCBDb21taXROb3RoaW5nVG9DaGlsZEVudHJ5XG4gICAgICB8IENvbW1pdFRleHRcbiAgICAgIHwgQ29tbWl0Tm9kZVxuICAgICAgfCBDb21taXRBdHRyaWJ1dGVcbiAgICAgIHwgQ29tbWl0UHJvcGVydHlcbiAgICAgIHwgQ29tbWl0Qm9vbGVhbkF0dHJpYnV0ZVxuICAgICAgfCBDb21taXRFdmVudExpc3RlbmVyXG4gICAgICB8IENvbW1pdFRvRWxlbWVudEJpbmRpbmc7XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIENvbW1pdE5vdGhpbmdUb0NoaWxkRW50cnkge1xuICAgICAga2luZDogJ2NvbW1pdCBub3RoaW5nIHRvIGNoaWxkJztcbiAgICAgIHN0YXJ0OiBDaGlsZE5vZGU7XG4gICAgICBlbmQ6IENoaWxkTm9kZSB8IG51bGw7XG4gICAgICBwYXJlbnQ6IERpc2Nvbm5lY3RhYmxlIHwgdW5kZWZpbmVkO1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIENvbW1pdFRleHQge1xuICAgICAga2luZDogJ2NvbW1pdCB0ZXh0JztcbiAgICAgIG5vZGU6IFRleHQ7XG4gICAgICB2YWx1ZTogdW5rbm93bjtcbiAgICAgIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBDb21taXROb2RlIHtcbiAgICAgIGtpbmQ6ICdjb21taXQgbm9kZSc7XG4gICAgICBzdGFydDogTm9kZTtcbiAgICAgIHBhcmVudDogRGlzY29ubmVjdGFibGUgfCB1bmRlZmluZWQ7XG4gICAgICB2YWx1ZTogTm9kZTtcbiAgICAgIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBDb21taXRBdHRyaWJ1dGUge1xuICAgICAga2luZDogJ2NvbW1pdCBhdHRyaWJ1dGUnO1xuICAgICAgZWxlbWVudDogRWxlbWVudDtcbiAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgIHZhbHVlOiB1bmtub3duO1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIENvbW1pdFByb3BlcnR5IHtcbiAgICAgIGtpbmQ6ICdjb21taXQgcHJvcGVydHknO1xuICAgICAgZWxlbWVudDogRWxlbWVudDtcbiAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgIHZhbHVlOiB1bmtub3duO1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIENvbW1pdEJvb2xlYW5BdHRyaWJ1dGUge1xuICAgICAga2luZDogJ2NvbW1pdCBib29sZWFuIGF0dHJpYnV0ZSc7XG4gICAgICBlbGVtZW50OiBFbGVtZW50O1xuICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgdmFsdWU6IGJvb2xlYW47XG4gICAgICBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQ29tbWl0RXZlbnRMaXN0ZW5lciB7XG4gICAgICBraW5kOiAnY29tbWl0IGV2ZW50IGxpc3RlbmVyJztcbiAgICAgIGVsZW1lbnQ6IEVsZW1lbnQ7XG4gICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICB2YWx1ZTogdW5rbm93bjtcbiAgICAgIG9sZExpc3RlbmVyOiB1bmtub3duO1xuICAgICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZDtcbiAgICAgIC8vIFRydWUgaWYgd2UncmUgcmVtb3ZpbmcgdGhlIG9sZCBldmVudCBsaXN0ZW5lciAoZS5nLiBiZWNhdXNlIHNldHRpbmdzIGNoYW5nZWQsIG9yIHZhbHVlIGlzIG5vdGhpbmcpXG4gICAgICByZW1vdmVMaXN0ZW5lcjogYm9vbGVhbjtcbiAgICAgIC8vIFRydWUgaWYgd2UncmUgYWRkaW5nIGEgbmV3IGV2ZW50IGxpc3RlbmVyIChlLmcuIGJlY2F1c2UgZmlyc3QgcmVuZGVyLCBvciBzZXR0aW5ncyBjaGFuZ2VkKVxuICAgICAgYWRkTGlzdGVuZXI6IGJvb2xlYW47XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBDb21taXRUb0VsZW1lbnRCaW5kaW5nIHtcbiAgICAgIGtpbmQ6ICdjb21taXQgdG8gZWxlbWVudCBiaW5kaW5nJztcbiAgICAgIGVsZW1lbnQ6IEVsZW1lbnQ7XG4gICAgICB2YWx1ZTogdW5rbm93bjtcbiAgICAgIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG59XG5cbmludGVyZmFjZSBEZWJ1Z0xvZ2dpbmdXaW5kb3cge1xuICAvLyBFdmVuIGluIGRldiBtb2RlLCB3ZSBnZW5lcmFsbHkgZG9uJ3Qgd2FudCB0byBlbWl0IHRoZXNlIGV2ZW50cywgYXMgdGhhdCdzXG4gIC8vIGFub3RoZXIgbGV2ZWwgb2YgY29zdCwgc28gb25seSBlbWl0IHRoZW0gd2hlbiBERVZfTU9ERSBpcyB0cnVlIF9hbmRfIHdoZW5cbiAgLy8gd2luZG93LmVtaXRMaXREZWJ1Z0V2ZW50cyBpcyB0cnVlLlxuICBlbWl0TGl0RGVidWdMb2dFdmVudHM/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFVzZWZ1bCBmb3IgdmlzdWFsaXppbmcgYW5kIGxvZ2dpbmcgaW5zaWdodHMgaW50byB3aGF0IHRoZSBMaXQgdGVtcGxhdGUgc3lzdGVtIGlzIGRvaW5nLlxuICpcbiAqIENvbXBpbGVkIG91dCBvZiBwcm9kIG1vZGUgYnVpbGRzLlxuICovXG5jb25zdCBkZWJ1Z0xvZ0V2ZW50ID0gREVWX01PREVcbiAgPyAoZXZlbnQ6IExpdFVuc3RhYmxlLkRlYnVnTG9nLkVudHJ5KSA9PiB7XG4gICAgICBjb25zdCBzaG91bGRFbWl0ID0gKGdsb2JhbCBhcyB1bmtub3duIGFzIERlYnVnTG9nZ2luZ1dpbmRvdylcbiAgICAgICAgLmVtaXRMaXREZWJ1Z0xvZ0V2ZW50cztcbiAgICAgIGlmICghc2hvdWxkRW1pdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBnbG9iYWwuZGlzcGF0Y2hFdmVudChcbiAgICAgICAgbmV3IEN1c3RvbUV2ZW50PExpdFVuc3RhYmxlLkRlYnVnTG9nLkVudHJ5PignbGl0LWRlYnVnJywge1xuICAgICAgICAgIGRldGFpbDogZXZlbnQsXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgOiB1bmRlZmluZWQ7XG4vLyBVc2VkIGZvciBjb25uZWN0aW5nIGJlZ2luUmVuZGVyIGFuZCBlbmRSZW5kZXIgZXZlbnRzIHdoZW4gdGhlcmUgYXJlIG5lc3RlZFxuLy8gcmVuZGVycyB3aGVuIGVycm9ycyBhcmUgdGhyb3duIHByZXZlbnRpbmcgYW4gZW5kUmVuZGVyIGV2ZW50IGZyb20gYmVpbmdcbi8vIGNhbGxlZC5cbmxldCBkZWJ1Z0xvZ1JlbmRlcklkID0gMDtcblxubGV0IGlzc3VlV2FybmluZzogKGNvZGU6IHN0cmluZywgd2FybmluZzogc3RyaW5nKSA9PiB2b2lkO1xuXG5pZiAoREVWX01PREUpIHtcbiAgZ2xvYmFsLmxpdElzc3VlZFdhcm5pbmdzID8/PSBuZXcgU2V0KCk7XG5cbiAgLy8gSXNzdWUgYSB3YXJuaW5nLCBpZiB3ZSBoYXZlbid0IGFscmVhZHkuXG4gIGlzc3VlV2FybmluZyA9IChjb2RlOiBzdHJpbmcsIHdhcm5pbmc6IHN0cmluZykgPT4ge1xuICAgIHdhcm5pbmcgKz0gY29kZVxuICAgICAgPyBgIFNlZSBodHRwczovL2xpdC5kZXYvbXNnLyR7Y29kZX0gZm9yIG1vcmUgaW5mb3JtYXRpb24uYFxuICAgICAgOiAnJztcbiAgICBpZiAoIWdsb2JhbC5saXRJc3N1ZWRXYXJuaW5ncyEuaGFzKHdhcm5pbmcpKSB7XG4gICAgICBjb25zb2xlLndhcm4od2FybmluZyk7XG4gICAgICBnbG9iYWwubGl0SXNzdWVkV2FybmluZ3MhLmFkZCh3YXJuaW5nKTtcbiAgICB9XG4gIH07XG5cbiAgaXNzdWVXYXJuaW5nKFxuICAgICdkZXYtbW9kZScsXG4gICAgYExpdCBpcyBpbiBkZXYgbW9kZS4gTm90IHJlY29tbWVuZGVkIGZvciBwcm9kdWN0aW9uIWBcbiAgKTtcbn1cblxuY29uc3Qgd3JhcCA9XG4gIEVOQUJMRV9TSEFEWURPTV9OT1BBVENIICYmXG4gIGdsb2JhbC5TaGFkeURPTT8uaW5Vc2UgJiZcbiAgZ2xvYmFsLlNoYWR5RE9NPy5ub1BhdGNoID09PSB0cnVlXG4gICAgPyAoZ2xvYmFsLlNoYWR5RE9NIS53cmFwIGFzIDxUIGV4dGVuZHMgTm9kZT4obm9kZTogVCkgPT4gVClcbiAgICA6IDxUIGV4dGVuZHMgTm9kZT4obm9kZTogVCkgPT4gbm9kZTtcblxuY29uc3QgdHJ1c3RlZFR5cGVzID0gKGdsb2JhbCBhcyB1bmtub3duIGFzIFRydXN0ZWRUeXBlc1dpbmRvdykudHJ1c3RlZFR5cGVzO1xuXG4vKipcbiAqIE91ciBUcnVzdGVkVHlwZVBvbGljeSBmb3IgSFRNTCB3aGljaCBpcyBkZWNsYXJlZCB1c2luZyB0aGUgaHRtbCB0ZW1wbGF0ZVxuICogdGFnIGZ1bmN0aW9uLlxuICpcbiAqIFRoYXQgSFRNTCBpcyBhIGRldmVsb3Blci1hdXRob3JlZCBjb25zdGFudCwgYW5kIGlzIHBhcnNlZCB3aXRoIGlubmVySFRNTFxuICogYmVmb3JlIGFueSB1bnRydXN0ZWQgZXhwcmVzc2lvbnMgaGF2ZSBiZWVuIG1peGVkIGluLiBUaGVyZWZvciBpdCBpc1xuICogY29uc2lkZXJlZCBzYWZlIGJ5IGNvbnN0cnVjdGlvbi5cbiAqL1xuY29uc3QgcG9saWN5ID0gdHJ1c3RlZFR5cGVzXG4gID8gdHJ1c3RlZFR5cGVzLmNyZWF0ZVBvbGljeSgnbGl0LWh0bWwnLCB7XG4gICAgICBjcmVhdGVIVE1MOiAocykgPT4gcyxcbiAgICB9KVxuICA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBVc2VkIHRvIHNhbml0aXplIGFueSB2YWx1ZSBiZWZvcmUgaXQgaXMgd3JpdHRlbiBpbnRvIHRoZSBET00uIFRoaXMgY2FuIGJlXG4gKiB1c2VkIHRvIGltcGxlbWVudCBhIHNlY3VyaXR5IHBvbGljeSBvZiBhbGxvd2VkIGFuZCBkaXNhbGxvd2VkIHZhbHVlcyBpblxuICogb3JkZXIgdG8gcHJldmVudCBYU1MgYXR0YWNrcy5cbiAqXG4gKiBPbmUgd2F5IG9mIHVzaW5nIHRoaXMgY2FsbGJhY2sgd291bGQgYmUgdG8gY2hlY2sgYXR0cmlidXRlcyBhbmQgcHJvcGVydGllc1xuICogYWdhaW5zdCBhIGxpc3Qgb2YgaGlnaCByaXNrIGZpZWxkcywgYW5kIHJlcXVpcmUgdGhhdCB2YWx1ZXMgd3JpdHRlbiB0byBzdWNoXG4gKiBmaWVsZHMgYmUgaW5zdGFuY2VzIG9mIGEgY2xhc3Mgd2hpY2ggaXMgc2FmZSBieSBjb25zdHJ1Y3Rpb24uIENsb3N1cmUncyBTYWZlXG4gKiBIVE1MIFR5cGVzIGlzIG9uZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIHRlY2huaXF1ZSAoXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL3NhZmUtaHRtbC10eXBlcy9ibG9iL21hc3Rlci9kb2Mvc2FmZWh0bWwtdHlwZXMubWQpLlxuICogVGhlIFRydXN0ZWRUeXBlcyBwb2x5ZmlsbCBpbiBBUEktb25seSBtb2RlIGNvdWxkIGFsc28gYmUgdXNlZCBhcyBhIGJhc2lzXG4gKiBmb3IgdGhpcyB0ZWNobmlxdWUgKGh0dHBzOi8vZ2l0aHViLmNvbS9XSUNHL3RydXN0ZWQtdHlwZXMpLlxuICpcbiAqIEBwYXJhbSBub2RlIFRoZSBIVE1MIG5vZGUgKHVzdWFsbHkgZWl0aGVyIGEgI3RleHQgbm9kZSBvciBhbiBFbGVtZW50KSB0aGF0XG4gKiAgICAgaXMgYmVpbmcgd3JpdHRlbiB0by4gTm90ZSB0aGF0IHRoaXMgaXMganVzdCBhbiBleGVtcGxhciBub2RlLCB0aGUgd3JpdGVcbiAqICAgICBtYXkgdGFrZSBwbGFjZSBhZ2FpbnN0IGFub3RoZXIgaW5zdGFuY2Ugb2YgdGhlIHNhbWUgY2xhc3Mgb2Ygbm9kZS5cbiAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIGFuIGF0dHJpYnV0ZSBvciBwcm9wZXJ0eSAoZm9yIGV4YW1wbGUsICdocmVmJykuXG4gKiBAcGFyYW0gdHlwZSBJbmRpY2F0ZXMgd2hldGhlciB0aGUgd3JpdGUgdGhhdCdzIGFib3V0IHRvIGJlIHBlcmZvcm1lZCB3aWxsXG4gKiAgICAgYmUgdG8gYSBwcm9wZXJ0eSBvciBhIG5vZGUuXG4gKiBAcmV0dXJuIEEgZnVuY3Rpb24gdGhhdCB3aWxsIHNhbml0aXplIHRoaXMgY2xhc3Mgb2Ygd3JpdGVzLlxuICovXG5leHBvcnQgdHlwZSBTYW5pdGl6ZXJGYWN0b3J5ID0gKFxuICBub2RlOiBOb2RlLFxuICBuYW1lOiBzdHJpbmcsXG4gIHR5cGU6ICdwcm9wZXJ0eScgfCAnYXR0cmlidXRlJ1xuKSA9PiBWYWx1ZVNhbml0aXplcjtcblxuLyoqXG4gKiBBIGZ1bmN0aW9uIHdoaWNoIGNhbiBzYW5pdGl6ZSB2YWx1ZXMgdGhhdCB3aWxsIGJlIHdyaXR0ZW4gdG8gYSBzcGVjaWZpYyBraW5kXG4gKiBvZiBET00gc2luay5cbiAqXG4gKiBTZWUgU2FuaXRpemVyRmFjdG9yeS5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIHNhbml0aXplLiBXaWxsIGJlIHRoZSBhY3R1YWwgdmFsdWUgcGFzc2VkIGludG9cbiAqICAgICB0aGUgbGl0LWh0bWwgdGVtcGxhdGUgbGl0ZXJhbCwgc28gdGhpcyBjb3VsZCBiZSBvZiBhbnkgdHlwZS5cbiAqIEByZXR1cm4gVGhlIHZhbHVlIHRvIHdyaXRlIHRvIHRoZSBET00uIFVzdWFsbHkgdGhlIHNhbWUgYXMgdGhlIGlucHV0IHZhbHVlLFxuICogICAgIHVubGVzcyBzYW5pdGl6YXRpb24gaXMgbmVlZGVkLlxuICovXG5leHBvcnQgdHlwZSBWYWx1ZVNhbml0aXplciA9ICh2YWx1ZTogdW5rbm93bikgPT4gdW5rbm93bjtcblxuY29uc3QgaWRlbnRpdHlGdW5jdGlvbjogVmFsdWVTYW5pdGl6ZXIgPSAodmFsdWU6IHVua25vd24pID0+IHZhbHVlO1xuY29uc3Qgbm9vcFNhbml0aXplcjogU2FuaXRpemVyRmFjdG9yeSA9IChcbiAgX25vZGU6IE5vZGUsXG4gIF9uYW1lOiBzdHJpbmcsXG4gIF90eXBlOiAncHJvcGVydHknIHwgJ2F0dHJpYnV0ZSdcbikgPT4gaWRlbnRpdHlGdW5jdGlvbjtcblxuLyoqIFNldHMgdGhlIGdsb2JhbCBzYW5pdGl6ZXIgZmFjdG9yeS4gKi9cbmNvbnN0IHNldFNhbml0aXplciA9IChuZXdTYW5pdGl6ZXI6IFNhbml0aXplckZhY3RvcnkpID0+IHtcbiAgaWYgKCFFTkFCTEVfRVhUUkFfU0VDVVJJVFlfSE9PS1MpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHNhbml0aXplckZhY3RvcnlJbnRlcm5hbCAhPT0gbm9vcFNhbml0aXplcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBBdHRlbXB0ZWQgdG8gb3ZlcndyaXRlIGV4aXN0aW5nIGxpdC1odG1sIHNlY3VyaXR5IHBvbGljeS5gICtcbiAgICAgICAgYCBzZXRTYW5pdGl6ZURPTVZhbHVlRmFjdG9yeSBzaG91bGQgYmUgY2FsbGVkIGF0IG1vc3Qgb25jZS5gXG4gICAgKTtcbiAgfVxuICBzYW5pdGl6ZXJGYWN0b3J5SW50ZXJuYWwgPSBuZXdTYW5pdGl6ZXI7XG59O1xuXG4vKipcbiAqIE9ubHkgdXNlZCBpbiBpbnRlcm5hbCB0ZXN0cywgbm90IGEgcGFydCBvZiB0aGUgcHVibGljIEFQSS5cbiAqL1xuY29uc3QgX3Rlc3RPbmx5Q2xlYXJTYW5pdGl6ZXJGYWN0b3J5RG9Ob3RDYWxsT3JFbHNlID0gKCkgPT4ge1xuICBzYW5pdGl6ZXJGYWN0b3J5SW50ZXJuYWwgPSBub29wU2FuaXRpemVyO1xufTtcblxuY29uc3QgY3JlYXRlU2FuaXRpemVyOiBTYW5pdGl6ZXJGYWN0b3J5ID0gKG5vZGUsIG5hbWUsIHR5cGUpID0+IHtcbiAgcmV0dXJuIHNhbml0aXplckZhY3RvcnlJbnRlcm5hbChub2RlLCBuYW1lLCB0eXBlKTtcbn07XG5cbi8vIEFkZGVkIHRvIGFuIGF0dHJpYnV0ZSBuYW1lIHRvIG1hcmsgdGhlIGF0dHJpYnV0ZSBhcyBib3VuZCBzbyB3ZSBjYW4gZmluZFxuLy8gaXQgZWFzaWx5LlxuY29uc3QgYm91bmRBdHRyaWJ1dGVTdWZmaXggPSAnJGxpdCQnO1xuXG4vLyBUaGlzIG1hcmtlciBpcyB1c2VkIGluIG1hbnkgc3ludGFjdGljIHBvc2l0aW9ucyBpbiBIVE1MLCBzbyBpdCBtdXN0IGJlXG4vLyBhIHZhbGlkIGVsZW1lbnQgbmFtZSBhbmQgYXR0cmlidXRlIG5hbWUuIFdlIGRvbid0IHN1cHBvcnQgZHluYW1pYyBuYW1lcyAoeWV0KVxuLy8gYnV0IHRoaXMgYXQgbGVhc3QgZW5zdXJlcyB0aGF0IHRoZSBwYXJzZSB0cmVlIGlzIGNsb3NlciB0byB0aGUgdGVtcGxhdGVcbi8vIGludGVudGlvbi5cbmNvbnN0IG1hcmtlciA9IGBsaXQkJHtNYXRoLnJhbmRvbSgpLnRvRml4ZWQoOSkuc2xpY2UoMil9JGA7XG5cbi8vIFN0cmluZyB1c2VkIHRvIHRlbGwgaWYgYSBjb21tZW50IGlzIGEgbWFya2VyIGNvbW1lbnRcbmNvbnN0IG1hcmtlck1hdGNoID0gJz8nICsgbWFya2VyO1xuXG4vLyBUZXh0IHVzZWQgdG8gaW5zZXJ0IGEgY29tbWVudCBtYXJrZXIgbm9kZS4gV2UgdXNlIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb25cbi8vIHN5bnRheCBiZWNhdXNlIGl0J3Mgc2xpZ2h0bHkgc21hbGxlciwgYnV0IHBhcnNlcyBhcyBhIGNvbW1lbnQgbm9kZS5cbmNvbnN0IG5vZGVNYXJrZXIgPSBgPCR7bWFya2VyTWF0Y2h9PmA7XG5cbmNvbnN0IGQgPVxuICBOT0RFX01PREUgJiYgZ2xvYmFsLmRvY3VtZW50ID09PSB1bmRlZmluZWRcbiAgICA/ICh7XG4gICAgICAgIGNyZWF0ZVRyZWVXYWxrZXIoKSB7XG4gICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9LFxuICAgICAgfSBhcyB1bmtub3duIGFzIERvY3VtZW50KVxuICAgIDogZG9jdW1lbnQ7XG5cbi8vIENyZWF0ZXMgYSBkeW5hbWljIG1hcmtlci4gV2UgbmV2ZXIgaGF2ZSB0byBzZWFyY2ggZm9yIHRoZXNlIGluIHRoZSBET00uXG5jb25zdCBjcmVhdGVNYXJrZXIgPSAoKSA9PiBkLmNyZWF0ZUNvbW1lbnQoJycpO1xuXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy10eXBlb2Ytb3BlcmF0b3JcbnR5cGUgUHJpbWl0aXZlID0gbnVsbCB8IHVuZGVmaW5lZCB8IGJvb2xlYW4gfCBudW1iZXIgfCBzdHJpbmcgfCBzeW1ib2wgfCBiaWdpbnQ7XG5jb25zdCBpc1ByaW1pdGl2ZSA9ICh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIFByaW1pdGl2ZSA9PlxuICB2YWx1ZSA9PT0gbnVsbCB8fCAodHlwZW9mIHZhbHVlICE9ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZSAhPSAnZnVuY3Rpb24nKTtcbmNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuY29uc3QgaXNJdGVyYWJsZSA9ICh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIEl0ZXJhYmxlPHVua25vd24+ID0+XG4gIGlzQXJyYXkodmFsdWUpIHx8XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gIHR5cGVvZiAodmFsdWUgYXMgYW55KT8uW1N5bWJvbC5pdGVyYXRvcl0gPT09ICdmdW5jdGlvbic7XG5cbmNvbnN0IFNQQUNFX0NIQVIgPSBgWyBcXHRcXG5cXGZcXHJdYDtcbmNvbnN0IEFUVFJfVkFMVUVfQ0hBUiA9IGBbXiBcXHRcXG5cXGZcXHJcIidcXGA8Pj1dYDtcbmNvbnN0IE5BTUVfQ0hBUiA9IGBbXlxcXFxzXCInPj0vXWA7XG5cbi8vIFRoZXNlIHJlZ2V4ZXMgcmVwcmVzZW50IHRoZSBmaXZlIHBhcnNpbmcgc3RhdGVzIHRoYXQgd2UgY2FyZSBhYm91dCBpbiB0aGVcbi8vIFRlbXBsYXRlJ3MgSFRNTCBzY2FubmVyLiBUaGV5IG1hdGNoIHRoZSAqZW5kKiBvZiB0aGUgc3RhdGUgdGhleSdyZSBuYW1lZFxuLy8gYWZ0ZXIuXG4vLyBEZXBlbmRpbmcgb24gdGhlIG1hdGNoLCB3ZSB0cmFuc2l0aW9uIHRvIGEgbmV3IHN0YXRlLiBJZiB0aGVyZSdzIG5vIG1hdGNoLFxuLy8gd2Ugc3RheSBpbiB0aGUgc2FtZSBzdGF0ZS5cbi8vIE5vdGUgdGhhdCB0aGUgcmVnZXhlcyBhcmUgc3RhdGVmdWwuIFdlIHV0aWxpemUgbGFzdEluZGV4IGFuZCBzeW5jIGl0XG4vLyBhY3Jvc3MgdGhlIG11bHRpcGxlIHJlZ2V4ZXMgdXNlZC4gSW4gYWRkaXRpb24gdG8gdGhlIGZpdmUgcmVnZXhlcyBiZWxvd1xuLy8gd2UgYWxzbyBkeW5hbWljYWxseSBjcmVhdGUgYSByZWdleCB0byBmaW5kIHRoZSBtYXRjaGluZyBlbmQgdGFncyBmb3IgcmF3XG4vLyB0ZXh0IGVsZW1lbnRzLlxuXG4vKipcbiAqIEVuZCBvZiB0ZXh0IGlzOiBgPGAgZm9sbG93ZWQgYnk6XG4gKiAgIChjb21tZW50IHN0YXJ0KSBvciAodGFnKSBvciAoZHluYW1pYyB0YWcgYmluZGluZylcbiAqL1xuY29uc3QgdGV4dEVuZFJlZ2V4ID0gLzwoPzooIS0tfFxcL1teYS16QS1aXSl8KFxcLz9bYS16QS1aXVtePlxcc10qKXwoXFwvPyQpKS9nO1xuY29uc3QgQ09NTUVOVF9TVEFSVCA9IDE7XG5jb25zdCBUQUdfTkFNRSA9IDI7XG5jb25zdCBEWU5BTUlDX1RBR19OQU1FID0gMztcblxuY29uc3QgY29tbWVudEVuZFJlZ2V4ID0gLy0tPi9nO1xuLyoqXG4gKiBDb21tZW50cyBub3Qgc3RhcnRlZCB3aXRoIDwhLS0sIGxpa2UgPC97LCBjYW4gYmUgZW5kZWQgYnkgYSBzaW5nbGUgYD5gXG4gKi9cbmNvbnN0IGNvbW1lbnQyRW5kUmVnZXggPSAvPi9nO1xuXG4vKipcbiAqIFRoZSB0YWdFbmQgcmVnZXggbWF0Y2hlcyB0aGUgZW5kIG9mIHRoZSBcImluc2lkZSBhbiBvcGVuaW5nXCIgdGFnIHN5bnRheFxuICogcG9zaXRpb24uIEl0IGVpdGhlciBtYXRjaGVzIGEgYD5gLCBhbiBhdHRyaWJ1dGUtbGlrZSBzZXF1ZW5jZSwgb3IgdGhlIGVuZFxuICogb2YgdGhlIHN0cmluZyBhZnRlciBhIHNwYWNlIChhdHRyaWJ1dGUtbmFtZSBwb3NpdGlvbiBlbmRpbmcpLlxuICpcbiAqIFNlZSBhdHRyaWJ1dGVzIGluIHRoZSBIVE1MIHNwZWM6XG4gKiBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvc3ludGF4Lmh0bWwjZWxlbWVudHMtYXR0cmlidXRlc1xuICpcbiAqIFwiIFxcdFxcblxcZlxcclwiIGFyZSBIVE1MIHNwYWNlIGNoYXJhY3RlcnM6XG4gKiBodHRwczovL2luZnJhLnNwZWMud2hhdHdnLm9yZy8jYXNjaWktd2hpdGVzcGFjZVxuICpcbiAqIFNvIGFuIGF0dHJpYnV0ZSBpczpcbiAqICAqIFRoZSBuYW1lOiBhbnkgY2hhcmFjdGVyIGV4Y2VwdCBhIHdoaXRlc3BhY2UgY2hhcmFjdGVyLCAoXCIpLCAoJyksIFwiPlwiLFxuICogICAgXCI9XCIsIG9yIFwiL1wiLiBOb3RlOiB0aGlzIGlzIGRpZmZlcmVudCBmcm9tIHRoZSBIVE1MIHNwZWMgd2hpY2ggYWxzbyBleGNsdWRlcyBjb250cm9sIGNoYXJhY3RlcnMuXG4gKiAgKiBGb2xsb3dlZCBieSB6ZXJvIG9yIG1vcmUgc3BhY2UgY2hhcmFjdGVyc1xuICogICogRm9sbG93ZWQgYnkgXCI9XCJcbiAqICAqIEZvbGxvd2VkIGJ5IHplcm8gb3IgbW9yZSBzcGFjZSBjaGFyYWN0ZXJzXG4gKiAgKiBGb2xsb3dlZCBieTpcbiAqICAgICogQW55IGNoYXJhY3RlciBleGNlcHQgc3BhY2UsICgnKSwgKFwiKSwgXCI8XCIsIFwiPlwiLCBcIj1cIiwgKGApLCBvclxuICogICAgKiAoXCIpIHRoZW4gYW55IG5vbi0oXCIpLCBvclxuICogICAgKiAoJykgdGhlbiBhbnkgbm9uLSgnKVxuICovXG5jb25zdCB0YWdFbmRSZWdleCA9IG5ldyBSZWdFeHAoXG4gIGA+fCR7U1BBQ0VfQ0hBUn0oPzooJHtOQU1FX0NIQVJ9KykoJHtTUEFDRV9DSEFSfSo9JHtTUEFDRV9DSEFSfSooPzoke0FUVFJfVkFMVUVfQ0hBUn18KFwifCcpfCkpfCQpYCxcbiAgJ2cnXG4pO1xuY29uc3QgRU5USVJFX01BVENIID0gMDtcbmNvbnN0IEFUVFJJQlVURV9OQU1FID0gMTtcbmNvbnN0IFNQQUNFU19BTkRfRVFVQUxTID0gMjtcbmNvbnN0IFFVT1RFX0NIQVIgPSAzO1xuXG5jb25zdCBzaW5nbGVRdW90ZUF0dHJFbmRSZWdleCA9IC8nL2c7XG5jb25zdCBkb3VibGVRdW90ZUF0dHJFbmRSZWdleCA9IC9cIi9nO1xuLyoqXG4gKiBNYXRjaGVzIHRoZSByYXcgdGV4dCBlbGVtZW50cy5cbiAqXG4gKiBDb21tZW50cyBhcmUgbm90IHBhcnNlZCB3aXRoaW4gcmF3IHRleHQgZWxlbWVudHMsIHNvIHdlIG5lZWQgdG8gc2VhcmNoIHRoZWlyXG4gKiB0ZXh0IGNvbnRlbnQgZm9yIG1hcmtlciBzdHJpbmdzLlxuICovXG5jb25zdCByYXdUZXh0RWxlbWVudCA9IC9eKD86c2NyaXB0fHN0eWxlfHRleHRhcmVhfHRpdGxlKSQvaTtcblxuLyoqIFRlbXBsYXRlUmVzdWx0IHR5cGVzICovXG5jb25zdCBIVE1MX1JFU1VMVCA9IDE7XG5jb25zdCBTVkdfUkVTVUxUID0gMjtcbmNvbnN0IE1BVEhNTF9SRVNVTFQgPSAzO1xuXG50eXBlIFJlc3VsdFR5cGUgPSB0eXBlb2YgSFRNTF9SRVNVTFQgfCB0eXBlb2YgU1ZHX1JFU1VMVCB8IHR5cGVvZiBNQVRITUxfUkVTVUxUO1xuXG4vLyBUZW1wbGF0ZVBhcnQgdHlwZXNcbi8vIElNUE9SVEFOVDogdGhlc2UgbXVzdCBtYXRjaCB0aGUgdmFsdWVzIGluIFBhcnRUeXBlXG5jb25zdCBBVFRSSUJVVEVfUEFSVCA9IDE7XG5jb25zdCBDSElMRF9QQVJUID0gMjtcbmNvbnN0IFBST1BFUlRZX1BBUlQgPSAzO1xuY29uc3QgQk9PTEVBTl9BVFRSSUJVVEVfUEFSVCA9IDQ7XG5jb25zdCBFVkVOVF9QQVJUID0gNTtcbmNvbnN0IEVMRU1FTlRfUEFSVCA9IDY7XG5jb25zdCBDT01NRU5UX1BBUlQgPSA3O1xuXG4vKipcbiAqIFRoZSByZXR1cm4gdHlwZSBvZiB0aGUgdGVtcGxhdGUgdGFnIGZ1bmN0aW9ucywge0BsaW5rY29kZSBodG1sfSBhbmRcbiAqIHtAbGlua2NvZGUgc3ZnfSB3aGVuIGl0IGhhc24ndCBiZWVuIGNvbXBpbGVkIGJ5IEBsaXQtbGFicy9jb21waWxlci5cbiAqXG4gKiBBIGBUZW1wbGF0ZVJlc3VsdGAgb2JqZWN0IGhvbGRzIGFsbCB0aGUgaW5mb3JtYXRpb24gYWJvdXQgYSB0ZW1wbGF0ZVxuICogZXhwcmVzc2lvbiByZXF1aXJlZCB0byByZW5kZXIgaXQ6IHRoZSB0ZW1wbGF0ZSBzdHJpbmdzLCBleHByZXNzaW9uIHZhbHVlcyxcbiAqIGFuZCB0eXBlIG9mIHRlbXBsYXRlIChodG1sIG9yIHN2ZykuXG4gKlxuICogYFRlbXBsYXRlUmVzdWx0YCBvYmplY3RzIGRvIG5vdCBjcmVhdGUgYW55IERPTSBvbiB0aGVpciBvd24uIFRvIGNyZWF0ZSBvclxuICogdXBkYXRlIERPTSB5b3UgbmVlZCB0byByZW5kZXIgdGhlIGBUZW1wbGF0ZVJlc3VsdGAuIFNlZVxuICogW1JlbmRlcmluZ10oaHR0cHM6Ly9saXQuZGV2L2RvY3MvY29tcG9uZW50cy9yZW5kZXJpbmcpIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqL1xuZXhwb3J0IHR5cGUgVW5jb21waWxlZFRlbXBsYXRlUmVzdWx0PFQgZXh0ZW5kcyBSZXN1bHRUeXBlID0gUmVzdWx0VHlwZT4gPSB7XG4gIC8vIFRoaXMgcHJvcGVydHkgbmVlZHMgdG8gcmVtYWluIHVubWluaWZpZWQuXG4gIFsnXyRsaXRUeXBlJCddOiBUO1xuICBzdHJpbmdzOiBUZW1wbGF0ZVN0cmluZ3NBcnJheTtcbiAgdmFsdWVzOiB1bmtub3duW107XG59O1xuXG4vKipcbiAqIFRoaXMgaXMgYSB0ZW1wbGF0ZSByZXN1bHQgdGhhdCBtYXkgYmUgZWl0aGVyIHVuY29tcGlsZWQgb3IgY29tcGlsZWQuXG4gKlxuICogSW4gdGhlIGZ1dHVyZSwgVGVtcGxhdGVSZXN1bHQgd2lsbCBiZSB0aGlzIHR5cGUuIElmIHlvdSB3YW50IHRvIGV4cGxpY2l0bHlcbiAqIG5vdGUgdGhhdCBhIHRlbXBsYXRlIHJlc3VsdCBpcyBwb3RlbnRpYWxseSBjb21waWxlZCwgeW91IGNhbiByZWZlcmVuY2UgdGhpc1xuICogdHlwZSBhbmQgaXQgd2lsbCBjb250aW51ZSB0byBiZWhhdmUgdGhlIHNhbWUgdGhyb3VnaCB0aGUgbmV4dCBtYWpvciB2ZXJzaW9uXG4gKiBvZiBMaXQuIFRoaXMgY2FuIGJlIHVzZWZ1bCBmb3IgY29kZSB0aGF0IHdhbnRzIHRvIHByZXBhcmUgZm9yIHRoZSBuZXh0XG4gKiBtYWpvciB2ZXJzaW9uIG9mIExpdC5cbiAqL1xuZXhwb3J0IHR5cGUgTWF5YmVDb21waWxlZFRlbXBsYXRlUmVzdWx0PFQgZXh0ZW5kcyBSZXN1bHRUeXBlID0gUmVzdWx0VHlwZT4gPVxuICB8IFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdDxUPlxuICB8IENvbXBpbGVkVGVtcGxhdGVSZXN1bHQ7XG5cbi8qKlxuICogVGhlIHJldHVybiB0eXBlIG9mIHRoZSB0ZW1wbGF0ZSB0YWcgZnVuY3Rpb25zLCB7QGxpbmtjb2RlIGh0bWx9IGFuZFxuICoge0BsaW5rY29kZSBzdmd9LlxuICpcbiAqIEEgYFRlbXBsYXRlUmVzdWx0YCBvYmplY3QgaG9sZHMgYWxsIHRoZSBpbmZvcm1hdGlvbiBhYm91dCBhIHRlbXBsYXRlXG4gKiBleHByZXNzaW9uIHJlcXVpcmVkIHRvIHJlbmRlciBpdDogdGhlIHRlbXBsYXRlIHN0cmluZ3MsIGV4cHJlc3Npb24gdmFsdWVzLFxuICogYW5kIHR5cGUgb2YgdGVtcGxhdGUgKGh0bWwgb3Igc3ZnKS5cbiAqXG4gKiBgVGVtcGxhdGVSZXN1bHRgIG9iamVjdHMgZG8gbm90IGNyZWF0ZSBhbnkgRE9NIG9uIHRoZWlyIG93bi4gVG8gY3JlYXRlIG9yXG4gKiB1cGRhdGUgRE9NIHlvdSBuZWVkIHRvIHJlbmRlciB0aGUgYFRlbXBsYXRlUmVzdWx0YC4gU2VlXG4gKiBbUmVuZGVyaW5nXShodHRwczovL2xpdC5kZXYvZG9jcy9jb21wb25lbnRzL3JlbmRlcmluZykgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogSW4gTGl0IDQsIHRoaXMgdHlwZSB3aWxsIGJlIGFuIGFsaWFzIG9mXG4gKiBNYXliZUNvbXBpbGVkVGVtcGxhdGVSZXN1bHQsIHNvIHRoYXQgY29kZSB3aWxsIGdldCB0eXBlIGVycm9ycyBpZiBpdCBhc3N1bWVzXG4gKiB0aGF0IExpdCB0ZW1wbGF0ZXMgYXJlIG5vdCBjb21waWxlZC4gV2hlbiBkZWxpYmVyYXRlbHkgd29ya2luZyB3aXRoIG9ubHlcbiAqIG9uZSwgdXNlIGVpdGhlciB7QGxpbmtjb2RlIENvbXBpbGVkVGVtcGxhdGVSZXN1bHR9IG9yXG4gKiB7QGxpbmtjb2RlIFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdH0gZXhwbGljaXRseS5cbiAqL1xuZXhwb3J0IHR5cGUgVGVtcGxhdGVSZXN1bHQ8VCBleHRlbmRzIFJlc3VsdFR5cGUgPSBSZXN1bHRUeXBlPiA9XG4gIFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdDxUPjtcblxuZXhwb3J0IHR5cGUgSFRNTFRlbXBsYXRlUmVzdWx0ID0gVGVtcGxhdGVSZXN1bHQ8dHlwZW9mIEhUTUxfUkVTVUxUPjtcblxuZXhwb3J0IHR5cGUgU1ZHVGVtcGxhdGVSZXN1bHQgPSBUZW1wbGF0ZVJlc3VsdDx0eXBlb2YgU1ZHX1JFU1VMVD47XG5cbmV4cG9ydCB0eXBlIE1hdGhNTFRlbXBsYXRlUmVzdWx0ID0gVGVtcGxhdGVSZXN1bHQ8dHlwZW9mIE1BVEhNTF9SRVNVTFQ+O1xuXG4vKipcbiAqIEEgVGVtcGxhdGVSZXN1bHQgdGhhdCBoYXMgYmVlbiBjb21waWxlZCBieSBAbGl0LWxhYnMvY29tcGlsZXIsIHNraXBwaW5nIHRoZVxuICogcHJlcGFyZSBzdGVwLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIENvbXBpbGVkVGVtcGxhdGVSZXN1bHQge1xuICAvLyBUaGlzIGlzIGEgZmFjdG9yeSBpbiBvcmRlciB0byBtYWtlIHRlbXBsYXRlIGluaXRpYWxpemF0aW9uIGxhenlcbiAgLy8gYW5kIGFsbG93IFNoYWR5UmVuZGVyT3B0aW9ucyBzY29wZSB0byBiZSBwYXNzZWQgaW4uXG4gIC8vIFRoaXMgcHJvcGVydHkgbmVlZHMgdG8gcmVtYWluIHVubWluaWZpZWQuXG4gIFsnXyRsaXRUeXBlJCddOiBDb21waWxlZFRlbXBsYXRlO1xuICB2YWx1ZXM6IHVua25vd25bXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21waWxlZFRlbXBsYXRlIGV4dGVuZHMgT21pdDxUZW1wbGF0ZSwgJ2VsJz4ge1xuICAvLyBlbCBpcyBvdmVycmlkZGVuIHRvIGJlIG9wdGlvbmFsLiBXZSBpbml0aWFsaXplIGl0IG9uIGZpcnN0IHJlbmRlclxuICBlbD86IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XG5cbiAgLy8gVGhlIHByZXBhcmVkIEhUTUwgc3RyaW5nIHRvIGNyZWF0ZSBhIHRlbXBsYXRlIGVsZW1lbnQgZnJvbS5cbiAgLy8gVGhlIHR5cGUgaXMgYSBUZW1wbGF0ZVN0cmluZ3NBcnJheSB0byBndWFyYW50ZWUgdGhhdCB0aGUgdmFsdWUgY2FtZSBmcm9tXG4gIC8vIHNvdXJjZSBjb2RlLCBwcmV2ZW50aW5nIGEgSlNPTiBpbmplY3Rpb24gYXR0YWNrLlxuICBoOiBUZW1wbGF0ZVN0cmluZ3NBcnJheTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSB0ZW1wbGF0ZSBsaXRlcmFsIHRhZyBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBUZW1wbGF0ZVJlc3VsdCB3aXRoXG4gKiB0aGUgZ2l2ZW4gcmVzdWx0IHR5cGUuXG4gKi9cbmNvbnN0IHRhZyA9XG4gIDxUIGV4dGVuZHMgUmVzdWx0VHlwZT4odHlwZTogVCkgPT5cbiAgKHN0cmluZ3M6IFRlbXBsYXRlU3RyaW5nc0FycmF5LCAuLi52YWx1ZXM6IHVua25vd25bXSk6IFRlbXBsYXRlUmVzdWx0PFQ+ID0+IHtcbiAgICAvLyBXYXJuIGFnYWluc3QgdGVtcGxhdGVzIG9jdGFsIGVzY2FwZSBzZXF1ZW5jZXNcbiAgICAvLyBXZSBkbyB0aGlzIGhlcmUgcmF0aGVyIHRoYW4gaW4gcmVuZGVyIHNvIHRoYXQgdGhlIHdhcm5pbmcgaXMgY2xvc2VyIHRvIHRoZVxuICAgIC8vIHRlbXBsYXRlIGRlZmluaXRpb24uXG4gICAgaWYgKERFVl9NT0RFICYmIHN0cmluZ3Muc29tZSgocykgPT4gcyA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnU29tZSB0ZW1wbGF0ZSBzdHJpbmdzIGFyZSB1bmRlZmluZWQuXFxuJyArXG4gICAgICAgICAgJ1RoaXMgaXMgcHJvYmFibHkgY2F1c2VkIGJ5IGlsbGVnYWwgb2N0YWwgZXNjYXBlIHNlcXVlbmNlcy4nXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoREVWX01PREUpIHtcbiAgICAgIC8vIEltcG9ydCBzdGF0aWMtaHRtbC5qcyByZXN1bHRzIGluIGEgY2lyY3VsYXIgZGVwZW5kZW5jeSB3aGljaCBnMyBkb2Vzbid0XG4gICAgICAvLyBoYW5kbGUuIEluc3RlYWQgd2Uga25vdyB0aGF0IHN0YXRpYyB2YWx1ZXMgbXVzdCBoYXZlIHRoZSBmaWVsZFxuICAgICAgLy8gYF8kbGl0U3RhdGljJGAuXG4gICAgICBpZiAoXG4gICAgICAgIHZhbHVlcy5zb21lKCh2YWwpID0+ICh2YWwgYXMge18kbGl0U3RhdGljJDogdW5rbm93bn0pPy5bJ18kbGl0U3RhdGljJCddKVxuICAgICAgKSB7XG4gICAgICAgIGlzc3VlV2FybmluZyhcbiAgICAgICAgICAnJyxcbiAgICAgICAgICBgU3RhdGljIHZhbHVlcyAnbGl0ZXJhbCcgb3IgJ3Vuc2FmZVN0YXRpYycgY2Fubm90IGJlIHVzZWQgYXMgdmFsdWVzIHRvIG5vbi1zdGF0aWMgdGVtcGxhdGVzLlxcbmAgK1xuICAgICAgICAgICAgYFBsZWFzZSB1c2UgdGhlIHN0YXRpYyAnaHRtbCcgdGFnIGZ1bmN0aW9uLiBTZWUgaHR0cHM6Ly9saXQuZGV2L2RvY3MvdGVtcGxhdGVzL2V4cHJlc3Npb25zLyNzdGF0aWMtZXhwcmVzc2lvbnNgXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICAgICAgWydfJGxpdFR5cGUkJ106IHR5cGUsXG4gICAgICBzdHJpbmdzLFxuICAgICAgdmFsdWVzLFxuICAgIH07XG4gIH07XG5cbi8qKlxuICogSW50ZXJwcmV0cyBhIHRlbXBsYXRlIGxpdGVyYWwgYXMgYW4gSFRNTCB0ZW1wbGF0ZSB0aGF0IGNhbiBlZmZpY2llbnRseVxuICogcmVuZGVyIHRvIGFuZCB1cGRhdGUgYSBjb250YWluZXIuXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IGhlYWRlciA9ICh0aXRsZTogc3RyaW5nKSA9PiBodG1sYDxoMT4ke3RpdGxlfTwvaDE+YDtcbiAqIGBgYFxuICpcbiAqIFRoZSBgaHRtbGAgdGFnIHJldHVybnMgYSBkZXNjcmlwdGlvbiBvZiB0aGUgRE9NIHRvIHJlbmRlciBhcyBhIHZhbHVlLiBJdCBpc1xuICogbGF6eSwgbWVhbmluZyBubyB3b3JrIGlzIGRvbmUgdW50aWwgdGhlIHRlbXBsYXRlIGlzIHJlbmRlcmVkLiBXaGVuIHJlbmRlcmluZyxcbiAqIGlmIGEgdGVtcGxhdGUgY29tZXMgZnJvbSB0aGUgc2FtZSBleHByZXNzaW9uIGFzIGEgcHJldmlvdXNseSByZW5kZXJlZCByZXN1bHQsXG4gKiBpdCdzIGVmZmljaWVudGx5IHVwZGF0ZWQgaW5zdGVhZCBvZiByZXBsYWNlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGh0bWwgPSB0YWcoSFRNTF9SRVNVTFQpO1xuXG4vKipcbiAqIEludGVycHJldHMgYSB0ZW1wbGF0ZSBsaXRlcmFsIGFzIGFuIFNWRyBmcmFnbWVudCB0aGF0IGNhbiBlZmZpY2llbnRseSByZW5kZXJcbiAqIHRvIGFuZCB1cGRhdGUgYSBjb250YWluZXIuXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHJlY3QgPSBzdmdgPHJlY3Qgd2lkdGg9XCIxMFwiIGhlaWdodD1cIjEwXCI+PC9yZWN0PmA7XG4gKlxuICogY29uc3QgbXlJbWFnZSA9IGh0bWxgXG4gKiAgIDxzdmcgdmlld0JveD1cIjAgMCAxMCAxMFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj5cbiAqICAgICAke3JlY3R9XG4gKiAgIDwvc3ZnPmA7XG4gKiBgYGBcbiAqXG4gKiBUaGUgYHN2Z2AgKnRhZyBmdW5jdGlvbiogc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgU1ZHIGZyYWdtZW50cywgb3IgZWxlbWVudHNcbiAqIHRoYXQgd291bGQgYmUgY29udGFpbmVkICoqaW5zaWRlKiogYW4gYDxzdmc+YCBIVE1MIGVsZW1lbnQuIEEgY29tbW9uIGVycm9yIGlzXG4gKiBwbGFjaW5nIGFuIGA8c3ZnPmAgKmVsZW1lbnQqIGluIGEgdGVtcGxhdGUgdGFnZ2VkIHdpdGggdGhlIGBzdmdgIHRhZ1xuICogZnVuY3Rpb24uIFRoZSBgPHN2Zz5gIGVsZW1lbnQgaXMgYW4gSFRNTCBlbGVtZW50IGFuZCBzaG91bGQgYmUgdXNlZCB3aXRoaW4gYVxuICogdGVtcGxhdGUgdGFnZ2VkIHdpdGggdGhlIHtAbGlua2NvZGUgaHRtbH0gdGFnIGZ1bmN0aW9uLlxuICpcbiAqIEluIExpdEVsZW1lbnQgdXNhZ2UsIGl0J3MgaW52YWxpZCB0byByZXR1cm4gYW4gU1ZHIGZyYWdtZW50IGZyb20gdGhlXG4gKiBgcmVuZGVyKClgIG1ldGhvZCwgYXMgdGhlIFNWRyBmcmFnbWVudCB3aWxsIGJlIGNvbnRhaW5lZCB3aXRoaW4gdGhlIGVsZW1lbnQnc1xuICogc2hhZG93IHJvb3QgYW5kIHRodXMgbm90IGJlIHByb3Blcmx5IGNvbnRhaW5lZCB3aXRoaW4gYW4gYDxzdmc+YCBIVE1MXG4gKiBlbGVtZW50LlxuICovXG5leHBvcnQgY29uc3Qgc3ZnID0gdGFnKFNWR19SRVNVTFQpO1xuXG4vKipcbiAqIEludGVycHJldHMgYSB0ZW1wbGF0ZSBsaXRlcmFsIGFzIE1hdGhNTCBmcmFnbWVudCB0aGF0IGNhbiBlZmZpY2llbnRseSByZW5kZXJcbiAqIHRvIGFuZCB1cGRhdGUgYSBjb250YWluZXIuXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IG51bSA9IG1hdGhtbGA8bW4+MTwvbW4+YDtcbiAqXG4gKiBjb25zdCBlcSA9IGh0bWxgXG4gKiAgIDxtYXRoPlxuICogICAgICR7bnVtfVxuICogICA8L21hdGg+YDtcbiAqIGBgYFxuICpcbiAqIFRoZSBgbWF0aG1sYCAqdGFnIGZ1bmN0aW9uKiBzaG91bGQgb25seSBiZSB1c2VkIGZvciBNYXRoTUwgZnJhZ21lbnRzLCBvclxuICogZWxlbWVudHMgdGhhdCB3b3VsZCBiZSBjb250YWluZWQgKippbnNpZGUqKiBhIGA8bWF0aD5gIEhUTUwgZWxlbWVudC4gQSBjb21tb25cbiAqIGVycm9yIGlzIHBsYWNpbmcgYSBgPG1hdGg+YCAqZWxlbWVudCogaW4gYSB0ZW1wbGF0ZSB0YWdnZWQgd2l0aCB0aGUgYG1hdGhtbGBcbiAqIHRhZyBmdW5jdGlvbi4gVGhlIGA8bWF0aD5gIGVsZW1lbnQgaXMgYW4gSFRNTCBlbGVtZW50IGFuZCBzaG91bGQgYmUgdXNlZFxuICogd2l0aGluIGEgdGVtcGxhdGUgdGFnZ2VkIHdpdGggdGhlIHtAbGlua2NvZGUgaHRtbH0gdGFnIGZ1bmN0aW9uLlxuICpcbiAqIEluIExpdEVsZW1lbnQgdXNhZ2UsIGl0J3MgaW52YWxpZCB0byByZXR1cm4gYW4gTWF0aE1MIGZyYWdtZW50IGZyb20gdGhlXG4gKiBgcmVuZGVyKClgIG1ldGhvZCwgYXMgdGhlIE1hdGhNTCBmcmFnbWVudCB3aWxsIGJlIGNvbnRhaW5lZCB3aXRoaW4gdGhlXG4gKiBlbGVtZW50J3Mgc2hhZG93IHJvb3QgYW5kIHRodXMgbm90IGJlIHByb3Blcmx5IGNvbnRhaW5lZCB3aXRoaW4gYSBgPG1hdGg+YFxuICogSFRNTCBlbGVtZW50LlxuICovXG5leHBvcnQgY29uc3QgbWF0aG1sID0gdGFnKE1BVEhNTF9SRVNVTFQpO1xuXG4vKipcbiAqIEEgc2VudGluZWwgdmFsdWUgdGhhdCBzaWduYWxzIHRoYXQgYSB2YWx1ZSB3YXMgaGFuZGxlZCBieSBhIGRpcmVjdGl2ZSBhbmRcbiAqIHNob3VsZCBub3QgYmUgd3JpdHRlbiB0byB0aGUgRE9NLlxuICovXG5leHBvcnQgY29uc3Qgbm9DaGFuZ2UgPSBTeW1ib2wuZm9yKCdsaXQtbm9DaGFuZ2UnKTtcblxuLyoqXG4gKiBBIHNlbnRpbmVsIHZhbHVlIHRoYXQgc2lnbmFscyBhIENoaWxkUGFydCB0byBmdWxseSBjbGVhciBpdHMgY29udGVudC5cbiAqXG4gKiBgYGB0c1xuICogY29uc3QgYnV0dG9uID0gaHRtbGAke1xuICogIHVzZXIuaXNBZG1pblxuICogICAgPyBodG1sYDxidXR0b24+REVMRVRFPC9idXR0b24+YFxuICogICAgOiBub3RoaW5nXG4gKiB9YDtcbiAqIGBgYFxuICpcbiAqIFByZWZlciB1c2luZyBgbm90aGluZ2Agb3ZlciBvdGhlciBmYWxzeSB2YWx1ZXMgYXMgaXQgcHJvdmlkZXMgYSBjb25zaXN0ZW50XG4gKiBiZWhhdmlvciBiZXR3ZWVuIHZhcmlvdXMgZXhwcmVzc2lvbiBiaW5kaW5nIGNvbnRleHRzLlxuICpcbiAqIEluIGNoaWxkIGV4cHJlc3Npb25zLCBgdW5kZWZpbmVkYCwgYG51bGxgLCBgJydgLCBhbmQgYG5vdGhpbmdgIGFsbCBiZWhhdmUgdGhlXG4gKiBzYW1lIGFuZCByZW5kZXIgbm8gbm9kZXMuIEluIGF0dHJpYnV0ZSBleHByZXNzaW9ucywgYG5vdGhpbmdgIF9yZW1vdmVzXyB0aGVcbiAqIGF0dHJpYnV0ZSwgd2hpbGUgYHVuZGVmaW5lZGAgYW5kIGBudWxsYCB3aWxsIHJlbmRlciBhbiBlbXB0eSBzdHJpbmcuIEluXG4gKiBwcm9wZXJ0eSBleHByZXNzaW9ucyBgbm90aGluZ2AgYmVjb21lcyBgdW5kZWZpbmVkYC5cbiAqL1xuZXhwb3J0IGNvbnN0IG5vdGhpbmcgPSBTeW1ib2wuZm9yKCdsaXQtbm90aGluZycpO1xuXG4vKipcbiAqIFRoZSBjYWNoZSBvZiBwcmVwYXJlZCB0ZW1wbGF0ZXMsIGtleWVkIGJ5IHRoZSB0YWdnZWQgVGVtcGxhdGVTdHJpbmdzQXJyYXlcbiAqIGFuZCBfbm90XyBhY2NvdW50aW5nIGZvciB0aGUgc3BlY2lmaWMgdGVtcGxhdGUgdGFnIHVzZWQuIFRoaXMgbWVhbnMgdGhhdFxuICogdGVtcGxhdGUgdGFncyBjYW5ub3QgYmUgZHluYW1pYyAtIHRoZXkgbXVzdCBzdGF0aWNhbGx5IGJlIG9uZSBvZiBodG1sLCBzdmcsXG4gKiBvciBhdHRyLiBUaGlzIHJlc3RyaWN0aW9uIHNpbXBsaWZpZXMgdGhlIGNhY2hlIGxvb2t1cCwgd2hpY2ggaXMgb24gdGhlIGhvdFxuICogcGF0aCBmb3IgcmVuZGVyaW5nLlxuICovXG5jb25zdCB0ZW1wbGF0ZUNhY2hlID0gbmV3IFdlYWtNYXA8VGVtcGxhdGVTdHJpbmdzQXJyYXksIFRlbXBsYXRlPigpO1xuXG4vKipcbiAqIE9iamVjdCBzcGVjaWZ5aW5nIG9wdGlvbnMgZm9yIGNvbnRyb2xsaW5nIGxpdC1odG1sIHJlbmRlcmluZy4gTm90ZSB0aGF0XG4gKiB3aGlsZSBgcmVuZGVyYCBtYXkgYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzIG9uIHRoZSBzYW1lIGBjb250YWluZXJgIChhbmRcbiAqIGByZW5kZXJCZWZvcmVgIHJlZmVyZW5jZSBub2RlKSB0byBlZmZpY2llbnRseSB1cGRhdGUgdGhlIHJlbmRlcmVkIGNvbnRlbnQsXG4gKiBvbmx5IHRoZSBvcHRpb25zIHBhc3NlZCBpbiBkdXJpbmcgdGhlIGZpcnN0IHJlbmRlciBhcmUgcmVzcGVjdGVkIGR1cmluZ1xuICogdGhlIGxpZmV0aW1lIG9mIHJlbmRlcnMgdG8gdGhhdCB1bmlxdWUgYGNvbnRhaW5lcmAgKyBgcmVuZGVyQmVmb3JlYFxuICogY29tYmluYXRpb24uXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUmVuZGVyT3B0aW9ucyB7XG4gIC8qKlxuICAgKiBBbiBvYmplY3QgdG8gdXNlIGFzIHRoZSBgdGhpc2AgdmFsdWUgZm9yIGV2ZW50IGxpc3RlbmVycy4gSXQncyBvZnRlblxuICAgKiB1c2VmdWwgdG8gc2V0IHRoaXMgdG8gdGhlIGhvc3QgY29tcG9uZW50IHJlbmRlcmluZyBhIHRlbXBsYXRlLlxuICAgKi9cbiAgaG9zdD86IG9iamVjdDtcbiAgLyoqXG4gICAqIEEgRE9NIG5vZGUgYmVmb3JlIHdoaWNoIHRvIHJlbmRlciBjb250ZW50IGluIHRoZSBjb250YWluZXIuXG4gICAqL1xuICByZW5kZXJCZWZvcmU/OiBDaGlsZE5vZGUgfCBudWxsO1xuICAvKipcbiAgICogTm9kZSB1c2VkIGZvciBjbG9uaW5nIHRoZSB0ZW1wbGF0ZSAoYGltcG9ydE5vZGVgIHdpbGwgYmUgY2FsbGVkIG9uIHRoaXNcbiAgICogbm9kZSkuIFRoaXMgY29udHJvbHMgdGhlIGBvd25lckRvY3VtZW50YCBvZiB0aGUgcmVuZGVyZWQgRE9NLCBhbG9uZyB3aXRoXG4gICAqIGFueSBpbmhlcml0ZWQgY29udGV4dC4gRGVmYXVsdHMgdG8gdGhlIGdsb2JhbCBgZG9jdW1lbnRgLlxuICAgKi9cbiAgY3JlYXRpb25TY29wZT86IHtpbXBvcnROb2RlKG5vZGU6IE5vZGUsIGRlZXA/OiBib29sZWFuKTogTm9kZX07XG4gIC8qKlxuICAgKiBUaGUgaW5pdGlhbCBjb25uZWN0ZWQgc3RhdGUgZm9yIHRoZSB0b3AtbGV2ZWwgcGFydCBiZWluZyByZW5kZXJlZC4gSWYgbm9cbiAgICogYGlzQ29ubmVjdGVkYCBvcHRpb24gaXMgc2V0LCBgQXN5bmNEaXJlY3RpdmVgcyB3aWxsIGJlIGNvbm5lY3RlZCBieVxuICAgKiBkZWZhdWx0LiBTZXQgdG8gYGZhbHNlYCBpZiB0aGUgaW5pdGlhbCByZW5kZXIgb2NjdXJzIGluIGEgZGlzY29ubmVjdGVkIHRyZWVcbiAgICogYW5kIGBBc3luY0RpcmVjdGl2ZWBzIHNob3VsZCBzZWUgYGlzQ29ubmVjdGVkID09PSBmYWxzZWAgZm9yIHRoZWlyIGluaXRpYWxcbiAgICogcmVuZGVyLiBUaGUgYHBhcnQuc2V0Q29ubmVjdGVkKClgIG1ldGhvZCBtdXN0IGJlIHVzZWQgc3Vic2VxdWVudCB0byBpbml0aWFsXG4gICAqIHJlbmRlciB0byBjaGFuZ2UgdGhlIGNvbm5lY3RlZCBzdGF0ZSBvZiB0aGUgcGFydC5cbiAgICovXG4gIGlzQ29ubmVjdGVkPzogYm9vbGVhbjtcbn1cblxuY29uc3Qgd2Fsa2VyID0gZC5jcmVhdGVUcmVlV2Fsa2VyKFxuICBkLFxuICAxMjkgLyogTm9kZUZpbHRlci5TSE9XX3tFTEVNRU5UfENPTU1FTlR9ICovXG4pO1xuXG5sZXQgc2FuaXRpemVyRmFjdG9yeUludGVybmFsOiBTYW5pdGl6ZXJGYWN0b3J5ID0gbm9vcFNhbml0aXplcjtcblxuLy9cbi8vIENsYXNzZXMgb25seSBiZWxvdyBoZXJlLCBjb25zdCB2YXJpYWJsZSBkZWNsYXJhdGlvbnMgb25seSBhYm92ZSBoZXJlLi4uXG4vL1xuLy8gS2VlcGluZyB2YXJpYWJsZSBkZWNsYXJhdGlvbnMgYW5kIGNsYXNzZXMgdG9nZXRoZXIgaW1wcm92ZXMgbWluaWZpY2F0aW9uLlxuLy8gSW50ZXJmYWNlcyBhbmQgdHlwZSBhbGlhc2VzIGNhbiBiZSBpbnRlcmxlYXZlZCBmcmVlbHkuXG4vL1xuXG4vLyBUeXBlIGZvciBjbGFzc2VzIHRoYXQgaGF2ZSBhIGBfZGlyZWN0aXZlYCBvciBgX2RpcmVjdGl2ZXNbXWAgZmllbGQsIHVzZWQgYnlcbi8vIGByZXNvbHZlRGlyZWN0aXZlYFxuZXhwb3J0IGludGVyZmFjZSBEaXJlY3RpdmVQYXJlbnQge1xuICBfJHBhcmVudD86IERpcmVjdGl2ZVBhcmVudDtcbiAgXyRpc0Nvbm5lY3RlZDogYm9vbGVhbjtcbiAgX19kaXJlY3RpdmU/OiBEaXJlY3RpdmU7XG4gIF9fZGlyZWN0aXZlcz86IEFycmF5PERpcmVjdGl2ZSB8IHVuZGVmaW5lZD47XG59XG5cbmZ1bmN0aW9uIHRydXN0RnJvbVRlbXBsYXRlU3RyaW5nKFxuICB0c2E6IFRlbXBsYXRlU3RyaW5nc0FycmF5LFxuICBzdHJpbmdGcm9tVFNBOiBzdHJpbmdcbik6IFRydXN0ZWRIVE1MIHtcbiAgLy8gQSBzZWN1cml0eSBjaGVjayB0byBwcmV2ZW50IHNwb29maW5nIG9mIExpdCB0ZW1wbGF0ZSByZXN1bHRzLlxuICAvLyBJbiB0aGUgZnV0dXJlLCB3ZSBtYXkgYmUgYWJsZSB0byByZXBsYWNlIHRoaXMgd2l0aCBBcnJheS5pc1RlbXBsYXRlT2JqZWN0LFxuICAvLyB0aG91Z2ggd2UgbWlnaHQgbmVlZCB0byBtYWtlIHRoYXQgY2hlY2sgaW5zaWRlIG9mIHRoZSBodG1sIGFuZCBzdmdcbiAgLy8gZnVuY3Rpb25zLCBiZWNhdXNlIHByZWNvbXBpbGVkIHRlbXBsYXRlcyBkb24ndCBjb21lIGluIGFzXG4gIC8vIFRlbXBsYXRlU3RyaW5nQXJyYXkgb2JqZWN0cy5cbiAgaWYgKCFpc0FycmF5KHRzYSkgfHwgIXRzYS5oYXNPd25Qcm9wZXJ0eSgncmF3JykpIHtcbiAgICBsZXQgbWVzc2FnZSA9ICdpbnZhbGlkIHRlbXBsYXRlIHN0cmluZ3MgYXJyYXknO1xuICAgIGlmIChERVZfTU9ERSkge1xuICAgICAgbWVzc2FnZSA9IGBcbiAgICAgICAgICBJbnRlcm5hbCBFcnJvcjogZXhwZWN0ZWQgdGVtcGxhdGUgc3RyaW5ncyB0byBiZSBhbiBhcnJheVxuICAgICAgICAgIHdpdGggYSAncmF3JyBmaWVsZC4gRmFraW5nIGEgdGVtcGxhdGUgc3RyaW5ncyBhcnJheSBieVxuICAgICAgICAgIGNhbGxpbmcgaHRtbCBvciBzdmcgbGlrZSBhbiBvcmRpbmFyeSBmdW5jdGlvbiBpcyBlZmZlY3RpdmVseVxuICAgICAgICAgIHRoZSBzYW1lIGFzIGNhbGxpbmcgdW5zYWZlSHRtbCBhbmQgY2FuIGxlYWQgdG8gbWFqb3Igc2VjdXJpdHlcbiAgICAgICAgICBpc3N1ZXMsIGUuZy4gb3BlbmluZyB5b3VyIGNvZGUgdXAgdG8gWFNTIGF0dGFja3MuXG4gICAgICAgICAgSWYgeW91J3JlIHVzaW5nIHRoZSBodG1sIG9yIHN2ZyB0YWdnZWQgdGVtcGxhdGUgZnVuY3Rpb25zIG5vcm1hbGx5XG4gICAgICAgICAgYW5kIHN0aWxsIHNlZWluZyB0aGlzIGVycm9yLCBwbGVhc2UgZmlsZSBhIGJ1ZyBhdFxuICAgICAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9saXQvbGl0L2lzc3Vlcy9uZXc/dGVtcGxhdGU9YnVnX3JlcG9ydC5tZFxuICAgICAgICAgIGFuZCBpbmNsdWRlIGluZm9ybWF0aW9uIGFib3V0IHlvdXIgYnVpbGQgdG9vbGluZywgaWYgYW55LlxuICAgICAgICBgXG4gICAgICAgIC50cmltKClcbiAgICAgICAgLnJlcGxhY2UoL1xcbiAqL2csICdcXG4nKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICB9XG4gIHJldHVybiBwb2xpY3kgIT09IHVuZGVmaW5lZFxuICAgID8gcG9saWN5LmNyZWF0ZUhUTUwoc3RyaW5nRnJvbVRTQSlcbiAgICA6IChzdHJpbmdGcm9tVFNBIGFzIHVua25vd24gYXMgVHJ1c3RlZEhUTUwpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gSFRNTCBzdHJpbmcgZm9yIHRoZSBnaXZlbiBUZW1wbGF0ZVN0cmluZ3NBcnJheSBhbmQgcmVzdWx0IHR5cGVcbiAqIChIVE1MIG9yIFNWRyksIGFsb25nIHdpdGggdGhlIGNhc2Utc2Vuc2l0aXZlIGJvdW5kIGF0dHJpYnV0ZSBuYW1lcyBpblxuICogdGVtcGxhdGUgb3JkZXIuIFRoZSBIVE1MIGNvbnRhaW5zIGNvbW1lbnQgbWFya2VycyBkZW5vdGluZyB0aGUgYENoaWxkUGFydGBzXG4gKiBhbmQgc3VmZml4ZXMgb24gYm91bmQgYXR0cmlidXRlcyBkZW5vdGluZyB0aGUgYEF0dHJpYnV0ZVBhcnRzYC5cbiAqXG4gKiBAcGFyYW0gc3RyaW5ncyB0ZW1wbGF0ZSBzdHJpbmdzIGFycmF5XG4gKiBAcGFyYW0gdHlwZSBIVE1MIG9yIFNWR1xuICogQHJldHVybiBBcnJheSBjb250YWluaW5nIGBbaHRtbCwgYXR0ck5hbWVzXWAgKGFycmF5IHJldHVybmVkIGZvciB0ZXJzZW5lc3MsXG4gKiAgICAgdG8gYXZvaWQgb2JqZWN0IGZpZWxkcyBzaW5jZSB0aGlzIGNvZGUgaXMgc2hhcmVkIHdpdGggbm9uLW1pbmlmaWVkIFNTUlxuICogICAgIGNvZGUpXG4gKi9cbmNvbnN0IGdldFRlbXBsYXRlSHRtbCA9IChcbiAgc3RyaW5nczogVGVtcGxhdGVTdHJpbmdzQXJyYXksXG4gIHR5cGU6IFJlc3VsdFR5cGVcbik6IFtUcnVzdGVkSFRNTCwgQXJyYXk8c3RyaW5nPl0gPT4ge1xuICAvLyBJbnNlcnQgbWFrZXJzIGludG8gdGhlIHRlbXBsYXRlIEhUTUwgdG8gcmVwcmVzZW50IHRoZSBwb3NpdGlvbiBvZlxuICAvLyBiaW5kaW5ncy4gVGhlIGZvbGxvd2luZyBjb2RlIHNjYW5zIHRoZSB0ZW1wbGF0ZSBzdHJpbmdzIHRvIGRldGVybWluZSB0aGVcbiAgLy8gc3ludGFjdGljIHBvc2l0aW9uIG9mIHRoZSBiaW5kaW5ncy4gVGhleSBjYW4gYmUgaW4gdGV4dCBwb3NpdGlvbiwgd2hlcmVcbiAgLy8gd2UgaW5zZXJ0IGFuIEhUTUwgY29tbWVudCwgYXR0cmlidXRlIHZhbHVlIHBvc2l0aW9uLCB3aGVyZSB3ZSBpbnNlcnQgYVxuICAvLyBzZW50aW5lbCBzdHJpbmcgYW5kIHJlLXdyaXRlIHRoZSBhdHRyaWJ1dGUgbmFtZSwgb3IgaW5zaWRlIGEgdGFnIHdoZXJlXG4gIC8vIHdlIGluc2VydCB0aGUgc2VudGluZWwgc3RyaW5nLlxuICBjb25zdCBsID0gc3RyaW5ncy5sZW5ndGggLSAxO1xuICAvLyBTdG9yZXMgdGhlIGNhc2Utc2Vuc2l0aXZlIGJvdW5kIGF0dHJpYnV0ZSBuYW1lcyBpbiB0aGUgb3JkZXIgb2YgdGhlaXJcbiAgLy8gcGFydHMuIEVsZW1lbnRQYXJ0cyBhcmUgYWxzbyByZWZsZWN0ZWQgaW4gdGhpcyBhcnJheSBhcyB1bmRlZmluZWRcbiAgLy8gcmF0aGVyIHRoYW4gYSBzdHJpbmcsIHRvIGRpc2FtYmlndWF0ZSBmcm9tIGF0dHJpYnV0ZSBiaW5kaW5ncy5cbiAgY29uc3QgYXR0ck5hbWVzOiBBcnJheTxzdHJpbmc+ID0gW107XG4gIGxldCBodG1sID1cbiAgICB0eXBlID09PSBTVkdfUkVTVUxUID8gJzxzdmc+JyA6IHR5cGUgPT09IE1BVEhNTF9SRVNVTFQgPyAnPG1hdGg+JyA6ICcnO1xuXG4gIC8vIFdoZW4gd2UncmUgaW5zaWRlIGEgcmF3IHRleHQgdGFnIChub3QgaXQncyB0ZXh0IGNvbnRlbnQpLCB0aGUgcmVnZXhcbiAgLy8gd2lsbCBzdGlsbCBiZSB0YWdSZWdleCBzbyB3ZSBjYW4gZmluZCBhdHRyaWJ1dGVzLCBidXQgd2lsbCBzd2l0Y2ggdG9cbiAgLy8gdGhpcyByZWdleCB3aGVuIHRoZSB0YWcgZW5kcy5cbiAgbGV0IHJhd1RleHRFbmRSZWdleDogUmVnRXhwIHwgdW5kZWZpbmVkO1xuXG4gIC8vIFRoZSBjdXJyZW50IHBhcnNpbmcgc3RhdGUsIHJlcHJlc2VudGVkIGFzIGEgcmVmZXJlbmNlIHRvIG9uZSBvZiB0aGVcbiAgLy8gcmVnZXhlc1xuICBsZXQgcmVnZXggPSB0ZXh0RW5kUmVnZXg7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICBjb25zdCBzID0gc3RyaW5nc1tpXTtcbiAgICAvLyBUaGUgaW5kZXggb2YgdGhlIGVuZCBvZiB0aGUgbGFzdCBhdHRyaWJ1dGUgbmFtZS4gV2hlbiB0aGlzIGlzXG4gICAgLy8gcG9zaXRpdmUgYXQgZW5kIG9mIGEgc3RyaW5nLCBpdCBtZWFucyB3ZSdyZSBpbiBhbiBhdHRyaWJ1dGUgdmFsdWVcbiAgICAvLyBwb3NpdGlvbiBhbmQgbmVlZCB0byByZXdyaXRlIHRoZSBhdHRyaWJ1dGUgbmFtZS5cbiAgICAvLyBXZSBhbHNvIHVzZSBhIHNwZWNpYWwgdmFsdWUgb2YgLTIgdG8gaW5kaWNhdGUgdGhhdCB3ZSBlbmNvdW50ZXJlZFxuICAgIC8vIHRoZSBlbmQgb2YgYSBzdHJpbmcgaW4gYXR0cmlidXRlIG5hbWUgcG9zaXRpb24uXG4gICAgbGV0IGF0dHJOYW1lRW5kSW5kZXggPSAtMTtcbiAgICBsZXQgYXR0ck5hbWU6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBsZXQgbGFzdEluZGV4ID0gMDtcbiAgICBsZXQgbWF0Y2ghOiBSZWdFeHBFeGVjQXJyYXkgfCBudWxsO1xuXG4gICAgLy8gVGhlIGNvbmRpdGlvbnMgaW4gdGhpcyBsb29wIGhhbmRsZSB0aGUgY3VycmVudCBwYXJzZSBzdGF0ZSwgYW5kIHRoZVxuICAgIC8vIGFzc2lnbm1lbnRzIHRvIHRoZSBgcmVnZXhgIHZhcmlhYmxlIGFyZSB0aGUgc3RhdGUgdHJhbnNpdGlvbnMuXG4gICAgd2hpbGUgKGxhc3RJbmRleCA8IHMubGVuZ3RoKSB7XG4gICAgICAvLyBNYWtlIHN1cmUgd2Ugc3RhcnQgc2VhcmNoaW5nIGZyb20gd2hlcmUgd2UgcHJldmlvdXNseSBsZWZ0IG9mZlxuICAgICAgcmVnZXgubGFzdEluZGV4ID0gbGFzdEluZGV4O1xuICAgICAgbWF0Y2ggPSByZWdleC5leGVjKHMpO1xuICAgICAgaWYgKG1hdGNoID09PSBudWxsKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgbGFzdEluZGV4ID0gcmVnZXgubGFzdEluZGV4O1xuICAgICAgaWYgKHJlZ2V4ID09PSB0ZXh0RW5kUmVnZXgpIHtcbiAgICAgICAgaWYgKG1hdGNoW0NPTU1FTlRfU1RBUlRdID09PSAnIS0tJykge1xuICAgICAgICAgIHJlZ2V4ID0gY29tbWVudEVuZFJlZ2V4O1xuICAgICAgICB9IGVsc2UgaWYgKG1hdGNoW0NPTU1FTlRfU1RBUlRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAvLyBXZSBzdGFydGVkIGEgd2VpcmQgY29tbWVudCwgbGlrZSA8L3tcbiAgICAgICAgICByZWdleCA9IGNvbW1lbnQyRW5kUmVnZXg7XG4gICAgICAgIH0gZWxzZSBpZiAobWF0Y2hbVEFHX05BTUVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBpZiAocmF3VGV4dEVsZW1lbnQudGVzdChtYXRjaFtUQUdfTkFNRV0pKSB7XG4gICAgICAgICAgICAvLyBSZWNvcmQgaWYgd2UgZW5jb3VudGVyIGEgcmF3LXRleHQgZWxlbWVudC4gV2UnbGwgc3dpdGNoIHRvXG4gICAgICAgICAgICAvLyB0aGlzIHJlZ2V4IGF0IHRoZSBlbmQgb2YgdGhlIHRhZy5cbiAgICAgICAgICAgIHJhd1RleHRFbmRSZWdleCA9IG5ldyBSZWdFeHAoYDwvJHttYXRjaFtUQUdfTkFNRV19YCwgJ2cnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVnZXggPSB0YWdFbmRSZWdleDtcbiAgICAgICAgfSBlbHNlIGlmIChtYXRjaFtEWU5BTUlDX1RBR19OQU1FXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKERFVl9NT0RFKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICdCaW5kaW5ncyBpbiB0YWcgbmFtZXMgYXJlIG5vdCBzdXBwb3J0ZWQuIFBsZWFzZSB1c2Ugc3RhdGljIHRlbXBsYXRlcyBpbnN0ZWFkLiAnICtcbiAgICAgICAgICAgICAgICAnU2VlIGh0dHBzOi8vbGl0LmRldi9kb2NzL3RlbXBsYXRlcy9leHByZXNzaW9ucy8jc3RhdGljLWV4cHJlc3Npb25zJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVnZXggPSB0YWdFbmRSZWdleDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChyZWdleCA9PT0gdGFnRW5kUmVnZXgpIHtcbiAgICAgICAgaWYgKG1hdGNoW0VOVElSRV9NQVRDSF0gPT09ICc+Jykge1xuICAgICAgICAgIC8vIEVuZCBvZiBhIHRhZy4gSWYgd2UgaGFkIHN0YXJ0ZWQgYSByYXctdGV4dCBlbGVtZW50LCB1c2UgdGhhdFxuICAgICAgICAgIC8vIHJlZ2V4XG4gICAgICAgICAgcmVnZXggPSByYXdUZXh0RW5kUmVnZXggPz8gdGV4dEVuZFJlZ2V4O1xuICAgICAgICAgIC8vIFdlIG1heSBiZSBlbmRpbmcgYW4gdW5xdW90ZWQgYXR0cmlidXRlIHZhbHVlLCBzbyBtYWtlIHN1cmUgd2VcbiAgICAgICAgICAvLyBjbGVhciBhbnkgcGVuZGluZyBhdHRyTmFtZUVuZEluZGV4XG4gICAgICAgICAgYXR0ck5hbWVFbmRJbmRleCA9IC0xO1xuICAgICAgICB9IGVsc2UgaWYgKG1hdGNoW0FUVFJJQlVURV9OQU1FXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgLy8gQXR0cmlidXRlIG5hbWUgcG9zaXRpb25cbiAgICAgICAgICBhdHRyTmFtZUVuZEluZGV4ID0gLTI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXR0ck5hbWVFbmRJbmRleCA9IHJlZ2V4Lmxhc3RJbmRleCAtIG1hdGNoW1NQQUNFU19BTkRfRVFVQUxTXS5sZW5ndGg7XG4gICAgICAgICAgYXR0ck5hbWUgPSBtYXRjaFtBVFRSSUJVVEVfTkFNRV07XG4gICAgICAgICAgcmVnZXggPVxuICAgICAgICAgICAgbWF0Y2hbUVVPVEVfQ0hBUl0gPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgICA/IHRhZ0VuZFJlZ2V4XG4gICAgICAgICAgICAgIDogbWF0Y2hbUVVPVEVfQ0hBUl0gPT09ICdcIidcbiAgICAgICAgICAgICAgICA/IGRvdWJsZVF1b3RlQXR0ckVuZFJlZ2V4XG4gICAgICAgICAgICAgICAgOiBzaW5nbGVRdW90ZUF0dHJFbmRSZWdleDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgcmVnZXggPT09IGRvdWJsZVF1b3RlQXR0ckVuZFJlZ2V4IHx8XG4gICAgICAgIHJlZ2V4ID09PSBzaW5nbGVRdW90ZUF0dHJFbmRSZWdleFxuICAgICAgKSB7XG4gICAgICAgIHJlZ2V4ID0gdGFnRW5kUmVnZXg7XG4gICAgICB9IGVsc2UgaWYgKHJlZ2V4ID09PSBjb21tZW50RW5kUmVnZXggfHwgcmVnZXggPT09IGNvbW1lbnQyRW5kUmVnZXgpIHtcbiAgICAgICAgcmVnZXggPSB0ZXh0RW5kUmVnZXg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb3Qgb25lIG9mIHRoZSBmaXZlIHN0YXRlIHJlZ2V4ZXMsIHNvIGl0IG11c3QgYmUgdGhlIGR5bmFtaWNhbGx5XG4gICAgICAgIC8vIGNyZWF0ZWQgcmF3IHRleHQgcmVnZXggYW5kIHdlJ3JlIGF0IHRoZSBjbG9zZSBvZiB0aGF0IGVsZW1lbnQuXG4gICAgICAgIHJlZ2V4ID0gdGFnRW5kUmVnZXg7XG4gICAgICAgIHJhd1RleHRFbmRSZWdleCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoREVWX01PREUpIHtcbiAgICAgIC8vIElmIHdlIGhhdmUgYSBhdHRyTmFtZUVuZEluZGV4LCB3aGljaCBpbmRpY2F0ZXMgdGhhdCB3ZSBzaG91bGRcbiAgICAgIC8vIHJld3JpdGUgdGhlIGF0dHJpYnV0ZSBuYW1lLCBhc3NlcnQgdGhhdCB3ZSdyZSBpbiBhIHZhbGlkIGF0dHJpYnV0ZVxuICAgICAgLy8gcG9zaXRpb24gLSBlaXRoZXIgaW4gYSB0YWcsIG9yIGEgcXVvdGVkIGF0dHJpYnV0ZSB2YWx1ZS5cbiAgICAgIGNvbnNvbGUuYXNzZXJ0KFxuICAgICAgICBhdHRyTmFtZUVuZEluZGV4ID09PSAtMSB8fFxuICAgICAgICAgIHJlZ2V4ID09PSB0YWdFbmRSZWdleCB8fFxuICAgICAgICAgIHJlZ2V4ID09PSBzaW5nbGVRdW90ZUF0dHJFbmRSZWdleCB8fFxuICAgICAgICAgIHJlZ2V4ID09PSBkb3VibGVRdW90ZUF0dHJFbmRSZWdleCxcbiAgICAgICAgJ3VuZXhwZWN0ZWQgcGFyc2Ugc3RhdGUgQidcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gV2UgaGF2ZSBmb3VyIGNhc2VzOlxuICAgIC8vICAxLiBXZSdyZSBpbiB0ZXh0IHBvc2l0aW9uLCBhbmQgbm90IGluIGEgcmF3IHRleHQgZWxlbWVudFxuICAgIC8vICAgICAocmVnZXggPT09IHRleHRFbmRSZWdleCk6IGluc2VydCBhIGNvbW1lbnQgbWFya2VyLlxuICAgIC8vICAyLiBXZSBoYXZlIGEgbm9uLW5lZ2F0aXZlIGF0dHJOYW1lRW5kSW5kZXggd2hpY2ggbWVhbnMgd2UgbmVlZCB0b1xuICAgIC8vICAgICByZXdyaXRlIHRoZSBhdHRyaWJ1dGUgbmFtZSB0byBhZGQgYSBib3VuZCBhdHRyaWJ1dGUgc3VmZml4LlxuICAgIC8vICAzLiBXZSdyZSBhdCB0aGUgbm9uLWZpcnN0IGJpbmRpbmcgaW4gYSBtdWx0aS1iaW5kaW5nIGF0dHJpYnV0ZSwgdXNlIGFcbiAgICAvLyAgICAgcGxhaW4gbWFya2VyLlxuICAgIC8vICA0LiBXZSdyZSBzb21ld2hlcmUgZWxzZSBpbnNpZGUgdGhlIHRhZy4gSWYgd2UncmUgaW4gYXR0cmlidXRlIG5hbWVcbiAgICAvLyAgICAgcG9zaXRpb24gKGF0dHJOYW1lRW5kSW5kZXggPT09IC0yKSwgYWRkIGEgc2VxdWVudGlhbCBzdWZmaXggdG9cbiAgICAvLyAgICAgZ2VuZXJhdGUgYSB1bmlxdWUgYXR0cmlidXRlIG5hbWUuXG5cbiAgICAvLyBEZXRlY3QgYSBiaW5kaW5nIG5leHQgdG8gc2VsZi1jbG9zaW5nIHRhZyBlbmQgYW5kIGluc2VydCBhIHNwYWNlIHRvXG4gICAgLy8gc2VwYXJhdGUgdGhlIG1hcmtlciBmcm9tIHRoZSB0YWcgZW5kOlxuICAgIGNvbnN0IGVuZCA9XG4gICAgICByZWdleCA9PT0gdGFnRW5kUmVnZXggJiYgc3RyaW5nc1tpICsgMV0uc3RhcnRzV2l0aCgnLz4nKSA/ICcgJyA6ICcnO1xuICAgIGh0bWwgKz1cbiAgICAgIHJlZ2V4ID09PSB0ZXh0RW5kUmVnZXhcbiAgICAgICAgPyBzICsgbm9kZU1hcmtlclxuICAgICAgICA6IGF0dHJOYW1lRW5kSW5kZXggPj0gMFxuICAgICAgICAgID8gKGF0dHJOYW1lcy5wdXNoKGF0dHJOYW1lISksXG4gICAgICAgICAgICBzLnNsaWNlKDAsIGF0dHJOYW1lRW5kSW5kZXgpICtcbiAgICAgICAgICAgICAgYm91bmRBdHRyaWJ1dGVTdWZmaXggK1xuICAgICAgICAgICAgICBzLnNsaWNlKGF0dHJOYW1lRW5kSW5kZXgpKSArXG4gICAgICAgICAgICBtYXJrZXIgK1xuICAgICAgICAgICAgZW5kXG4gICAgICAgICAgOiBzICsgbWFya2VyICsgKGF0dHJOYW1lRW5kSW5kZXggPT09IC0yID8gaSA6IGVuZCk7XG4gIH1cblxuICBjb25zdCBodG1sUmVzdWx0OiBzdHJpbmcgfCBUcnVzdGVkSFRNTCA9XG4gICAgaHRtbCArXG4gICAgKHN0cmluZ3NbbF0gfHwgJzw/PicpICtcbiAgICAodHlwZSA9PT0gU1ZHX1JFU1VMVCA/ICc8L3N2Zz4nIDogdHlwZSA9PT0gTUFUSE1MX1JFU1VMVCA/ICc8L21hdGg+JyA6ICcnKTtcblxuICAvLyBSZXR1cm5lZCBhcyBhbiBhcnJheSBmb3IgdGVyc2VuZXNzXG4gIHJldHVybiBbdHJ1c3RGcm9tVGVtcGxhdGVTdHJpbmcoc3RyaW5ncywgaHRtbFJlc3VsdCksIGF0dHJOYW1lc107XG59O1xuXG4vKiogQGludGVybmFsICovXG5leHBvcnQgdHlwZSB7VGVtcGxhdGV9O1xuY2xhc3MgVGVtcGxhdGUge1xuICAvKiogQGludGVybmFsICovXG4gIGVsITogSFRNTFRlbXBsYXRlRWxlbWVudDtcblxuICBwYXJ0czogQXJyYXk8VGVtcGxhdGVQYXJ0PiA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIC8vIFRoaXMgcHJvcGVydHkgbmVlZHMgdG8gcmVtYWluIHVubWluaWZpZWQuXG4gICAge3N0cmluZ3MsIFsnXyRsaXRUeXBlJCddOiB0eXBlfTogVW5jb21waWxlZFRlbXBsYXRlUmVzdWx0LFxuICAgIG9wdGlvbnM/OiBSZW5kZXJPcHRpb25zXG4gICkge1xuICAgIGxldCBub2RlOiBOb2RlIHwgbnVsbDtcbiAgICBsZXQgbm9kZUluZGV4ID0gMDtcbiAgICBsZXQgYXR0ck5hbWVJbmRleCA9IDA7XG4gICAgY29uc3QgcGFydENvdW50ID0gc3RyaW5ncy5sZW5ndGggLSAxO1xuICAgIGNvbnN0IHBhcnRzID0gdGhpcy5wYXJ0cztcblxuICAgIC8vIENyZWF0ZSB0ZW1wbGF0ZSBlbGVtZW50XG4gICAgY29uc3QgW2h0bWwsIGF0dHJOYW1lc10gPSBnZXRUZW1wbGF0ZUh0bWwoc3RyaW5ncywgdHlwZSk7XG4gICAgdGhpcy5lbCA9IFRlbXBsYXRlLmNyZWF0ZUVsZW1lbnQoaHRtbCwgb3B0aW9ucyk7XG4gICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gdGhpcy5lbC5jb250ZW50O1xuXG4gICAgLy8gUmUtcGFyZW50IFNWRyBvciBNYXRoTUwgbm9kZXMgaW50byB0ZW1wbGF0ZSByb290XG4gICAgaWYgKHR5cGUgPT09IFNWR19SRVNVTFQgfHwgdHlwZSA9PT0gTUFUSE1MX1JFU1VMVCkge1xuICAgICAgY29uc3Qgd3JhcHBlciA9IHRoaXMuZWwuY29udGVudC5maXJzdENoaWxkITtcbiAgICAgIHdyYXBwZXIucmVwbGFjZVdpdGgoLi4ud3JhcHBlci5jaGlsZE5vZGVzKTtcbiAgICB9XG5cbiAgICAvLyBXYWxrIHRoZSB0ZW1wbGF0ZSB0byBmaW5kIGJpbmRpbmcgbWFya2VycyBhbmQgY3JlYXRlIFRlbXBsYXRlUGFydHNcbiAgICB3aGlsZSAoKG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKSkgIT09IG51bGwgJiYgcGFydHMubGVuZ3RoIDwgcGFydENvdW50KSB7XG4gICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgICBpZiAoREVWX01PREUpIHtcbiAgICAgICAgICBjb25zdCB0YWcgPSAobm9kZSBhcyBFbGVtZW50KS5sb2NhbE5hbWU7XG4gICAgICAgICAgLy8gV2FybiBpZiBgdGV4dGFyZWFgIGluY2x1ZGVzIGFuIGV4cHJlc3Npb24gYW5kIHRocm93IGlmIGB0ZW1wbGF0ZWBcbiAgICAgICAgICAvLyBkb2VzIHNpbmNlIHRoZXNlIGFyZSBub3Qgc3VwcG9ydGVkLiBXZSBkbyB0aGlzIGJ5IGNoZWNraW5nXG4gICAgICAgICAgLy8gaW5uZXJIVE1MIGZvciBhbnl0aGluZyB0aGF0IGxvb2tzIGxpa2UgYSBtYXJrZXIuIFRoaXMgY2F0Y2hlc1xuICAgICAgICAgIC8vIGNhc2VzIGxpa2UgYmluZGluZ3MgaW4gdGV4dGFyZWEgdGhlcmUgbWFya2VycyB0dXJuIGludG8gdGV4dCBub2Rlcy5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAvXig/OnRleHRhcmVhfHRlbXBsYXRlKSQvaSEudGVzdCh0YWcpICYmXG4gICAgICAgICAgICAobm9kZSBhcyBFbGVtZW50KS5pbm5lckhUTUwuaW5jbHVkZXMobWFya2VyKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgbSA9XG4gICAgICAgICAgICAgIGBFeHByZXNzaW9ucyBhcmUgbm90IHN1cHBvcnRlZCBpbnNpZGUgXFxgJHt0YWd9XFxgIGAgK1xuICAgICAgICAgICAgICBgZWxlbWVudHMuIFNlZSBodHRwczovL2xpdC5kZXYvbXNnL2V4cHJlc3Npb24taW4tJHt0YWd9IGZvciBtb3JlIGAgK1xuICAgICAgICAgICAgICBgaW5mb3JtYXRpb24uYDtcbiAgICAgICAgICAgIGlmICh0YWcgPT09ICd0ZW1wbGF0ZScpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG0pO1xuICAgICAgICAgICAgfSBlbHNlIGlzc3VlV2FybmluZygnJywgbSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE8gKGp1c3RpbmZhZ25hbmkpOiBmb3IgYXR0ZW1wdGVkIGR5bmFtaWMgdGFnIG5hbWVzLCB3ZSBkb24ndFxuICAgICAgICAvLyBpbmNyZW1lbnQgdGhlIGJpbmRpbmdJbmRleCwgYW5kIGl0J2xsIGJlIG9mZiBieSAxIGluIHRoZSBlbGVtZW50XG4gICAgICAgIC8vIGFuZCBvZmYgYnkgdHdvIGFmdGVyIGl0LlxuICAgICAgICBpZiAoKG5vZGUgYXMgRWxlbWVudCkuaGFzQXR0cmlidXRlcygpKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBuYW1lIG9mIChub2RlIGFzIEVsZW1lbnQpLmdldEF0dHJpYnV0ZU5hbWVzKCkpIHtcbiAgICAgICAgICAgIGlmIChuYW1lLmVuZHNXaXRoKGJvdW5kQXR0cmlidXRlU3VmZml4KSkge1xuICAgICAgICAgICAgICBjb25zdCByZWFsTmFtZSA9IGF0dHJOYW1lc1thdHRyTmFtZUluZGV4KytdO1xuICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IChub2RlIGFzIEVsZW1lbnQpLmdldEF0dHJpYnV0ZShuYW1lKSE7XG4gICAgICAgICAgICAgIGNvbnN0IHN0YXRpY3MgPSB2YWx1ZS5zcGxpdChtYXJrZXIpO1xuICAgICAgICAgICAgICBjb25zdCBtID0gLyhbLj9AXSk/KC4qKS8uZXhlYyhyZWFsTmFtZSkhO1xuICAgICAgICAgICAgICBwYXJ0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBBVFRSSUJVVEVfUEFSVCxcbiAgICAgICAgICAgICAgICBpbmRleDogbm9kZUluZGV4LFxuICAgICAgICAgICAgICAgIG5hbWU6IG1bMl0sXG4gICAgICAgICAgICAgICAgc3RyaW5nczogc3RhdGljcyxcbiAgICAgICAgICAgICAgICBjdG9yOlxuICAgICAgICAgICAgICAgICAgbVsxXSA9PT0gJy4nXG4gICAgICAgICAgICAgICAgICAgID8gUHJvcGVydHlQYXJ0XG4gICAgICAgICAgICAgICAgICAgIDogbVsxXSA9PT0gJz8nXG4gICAgICAgICAgICAgICAgICAgICAgPyBCb29sZWFuQXR0cmlidXRlUGFydFxuICAgICAgICAgICAgICAgICAgICAgIDogbVsxXSA9PT0gJ0AnXG4gICAgICAgICAgICAgICAgICAgICAgICA/IEV2ZW50UGFydFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBBdHRyaWJ1dGVQYXJ0LFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgKG5vZGUgYXMgRWxlbWVudCkucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lLnN0YXJ0c1dpdGgobWFya2VyKSkge1xuICAgICAgICAgICAgICBwYXJ0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBFTEVNRU5UX1BBUlQsXG4gICAgICAgICAgICAgICAgaW5kZXg6IG5vZGVJbmRleCxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIChub2RlIGFzIEVsZW1lbnQpLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gVE9ETyAoanVzdGluZmFnbmFuaSk6IGJlbmNobWFyayB0aGUgcmVnZXggYWdhaW5zdCB0ZXN0aW5nIGZvciBlYWNoXG4gICAgICAgIC8vIG9mIHRoZSAzIHJhdyB0ZXh0IGVsZW1lbnQgbmFtZXMuXG4gICAgICAgIGlmIChyYXdUZXh0RWxlbWVudC50ZXN0KChub2RlIGFzIEVsZW1lbnQpLnRhZ05hbWUpKSB7XG4gICAgICAgICAgLy8gRm9yIHJhdyB0ZXh0IGVsZW1lbnRzIHdlIG5lZWQgdG8gc3BsaXQgdGhlIHRleHQgY29udGVudCBvblxuICAgICAgICAgIC8vIG1hcmtlcnMsIGNyZWF0ZSBhIFRleHQgbm9kZSBmb3IgZWFjaCBzZWdtZW50LCBhbmQgY3JlYXRlXG4gICAgICAgICAgLy8gYSBUZW1wbGF0ZVBhcnQgZm9yIGVhY2ggbWFya2VyLlxuICAgICAgICAgIGNvbnN0IHN0cmluZ3MgPSAobm9kZSBhcyBFbGVtZW50KS50ZXh0Q29udGVudCEuc3BsaXQobWFya2VyKTtcbiAgICAgICAgICBjb25zdCBsYXN0SW5kZXggPSBzdHJpbmdzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgaWYgKGxhc3RJbmRleCA+IDApIHtcbiAgICAgICAgICAgIChub2RlIGFzIEVsZW1lbnQpLnRleHRDb250ZW50ID0gdHJ1c3RlZFR5cGVzXG4gICAgICAgICAgICAgID8gKHRydXN0ZWRUeXBlcy5lbXB0eVNjcmlwdCBhcyB1bmtub3duIGFzICcnKVxuICAgICAgICAgICAgICA6ICcnO1xuICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgdGV4dCBub2RlIGZvciBlYWNoIGxpdGVyYWwgc2VjdGlvblxuICAgICAgICAgICAgLy8gVGhlc2Ugbm9kZXMgYXJlIGFsc28gdXNlZCBhcyB0aGUgbWFya2VycyBmb3Igbm9kZSBwYXJ0c1xuICAgICAgICAgICAgLy8gV2UgY2FuJ3QgdXNlIGVtcHR5IHRleHQgbm9kZXMgYXMgbWFya2VycyBiZWNhdXNlIHRoZXkncmVcbiAgICAgICAgICAgIC8vIG5vcm1hbGl6ZWQgd2hlbiBjbG9uaW5nIGluIElFIChjb3VsZCBzaW1wbGlmeSB3aGVuXG4gICAgICAgICAgICAvLyBJRSBpcyBubyBsb25nZXIgc3VwcG9ydGVkKVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsYXN0SW5kZXg7IGkrKykge1xuICAgICAgICAgICAgICAobm9kZSBhcyBFbGVtZW50KS5hcHBlbmQoc3RyaW5nc1tpXSwgY3JlYXRlTWFya2VyKCkpO1xuICAgICAgICAgICAgICAvLyBXYWxrIHBhc3QgdGhlIG1hcmtlciBub2RlIHdlIGp1c3QgYWRkZWRcbiAgICAgICAgICAgICAgd2Fsa2VyLm5leHROb2RlKCk7XG4gICAgICAgICAgICAgIHBhcnRzLnB1c2goe3R5cGU6IENISUxEX1BBUlQsIGluZGV4OiArK25vZGVJbmRleH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTm90ZSBiZWNhdXNlIHRoaXMgbWFya2VyIGlzIGFkZGVkIGFmdGVyIHRoZSB3YWxrZXIncyBjdXJyZW50XG4gICAgICAgICAgICAvLyBub2RlLCBpdCB3aWxsIGJlIHdhbGtlZCB0byBpbiB0aGUgb3V0ZXIgbG9vcCAoYW5kIGlnbm9yZWQpLCBzb1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgbmVlZCB0byBhZGp1c3Qgbm9kZUluZGV4IGhlcmVcbiAgICAgICAgICAgIChub2RlIGFzIEVsZW1lbnQpLmFwcGVuZChzdHJpbmdzW2xhc3RJbmRleF0sIGNyZWF0ZU1hcmtlcigpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PT0gOCkge1xuICAgICAgICBjb25zdCBkYXRhID0gKG5vZGUgYXMgQ29tbWVudCkuZGF0YTtcbiAgICAgICAgaWYgKGRhdGEgPT09IG1hcmtlck1hdGNoKSB7XG4gICAgICAgICAgcGFydHMucHVzaCh7dHlwZTogQ0hJTERfUEFSVCwgaW5kZXg6IG5vZGVJbmRleH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCBpID0gLTE7XG4gICAgICAgICAgd2hpbGUgKChpID0gKG5vZGUgYXMgQ29tbWVudCkuZGF0YS5pbmRleE9mKG1hcmtlciwgaSArIDEpKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIC8vIENvbW1lbnQgbm9kZSBoYXMgYSBiaW5kaW5nIG1hcmtlciBpbnNpZGUsIG1ha2UgYW4gaW5hY3RpdmUgcGFydFxuICAgICAgICAgICAgLy8gVGhlIGJpbmRpbmcgd29uJ3Qgd29yaywgYnV0IHN1YnNlcXVlbnQgYmluZGluZ3Mgd2lsbFxuICAgICAgICAgICAgcGFydHMucHVzaCh7dHlwZTogQ09NTUVOVF9QQVJULCBpbmRleDogbm9kZUluZGV4fSk7XG4gICAgICAgICAgICAvLyBNb3ZlIHRvIHRoZSBlbmQgb2YgdGhlIG1hdGNoXG4gICAgICAgICAgICBpICs9IG1hcmtlci5sZW5ndGggLSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbm9kZUluZGV4Kys7XG4gICAgfVxuXG4gICAgaWYgKERFVl9NT0RFKSB7XG4gICAgICAvLyBJZiB0aGVyZSB3YXMgYSBkdXBsaWNhdGUgYXR0cmlidXRlIG9uIGEgdGFnLCB0aGVuIHdoZW4gdGhlIHRhZyBpc1xuICAgICAgLy8gcGFyc2VkIGludG8gYW4gZWxlbWVudCB0aGUgYXR0cmlidXRlIGdldHMgZGUtZHVwbGljYXRlZC4gV2UgY2FuIGRldGVjdFxuICAgICAgLy8gdGhpcyBtaXNtYXRjaCBpZiB3ZSBoYXZlbid0IHByZWNpc2VseSBjb25zdW1lZCBldmVyeSBhdHRyaWJ1dGUgbmFtZVxuICAgICAgLy8gd2hlbiBwcmVwYXJpbmcgdGhlIHRlbXBsYXRlLiBUaGlzIHdvcmtzIGJlY2F1c2UgYGF0dHJOYW1lc2AgaXMgYnVpbHRcbiAgICAgIC8vIGZyb20gdGhlIHRlbXBsYXRlIHN0cmluZyBhbmQgYGF0dHJOYW1lSW5kZXhgIGNvbWVzIGZyb20gcHJvY2Vzc2luZyB0aGVcbiAgICAgIC8vIHJlc3VsdGluZyBET00uXG4gICAgICBpZiAoYXR0ck5hbWVzLmxlbmd0aCAhPT0gYXR0ck5hbWVJbmRleCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYERldGVjdGVkIGR1cGxpY2F0ZSBhdHRyaWJ1dGUgYmluZGluZ3MuIFRoaXMgb2NjdXJzIGlmIHlvdXIgdGVtcGxhdGUgYCArXG4gICAgICAgICAgICBgaGFzIGR1cGxpY2F0ZSBhdHRyaWJ1dGVzIG9uIGFuIGVsZW1lbnQgdGFnLiBGb3IgZXhhbXBsZSBgICtcbiAgICAgICAgICAgIGBcIjxpbnB1dCA/ZGlzYWJsZWQ9XFwke3RydWV9ID9kaXNhYmxlZD1cXCR7ZmFsc2V9PlwiIGNvbnRhaW5zIGEgYCArXG4gICAgICAgICAgICBgZHVwbGljYXRlIFwiZGlzYWJsZWRcIiBhdHRyaWJ1dGUuIFRoZSBlcnJvciB3YXMgZGV0ZWN0ZWQgaW4gYCArXG4gICAgICAgICAgICBgdGhlIGZvbGxvd2luZyB0ZW1wbGF0ZTogXFxuYCArXG4gICAgICAgICAgICAnYCcgK1xuICAgICAgICAgICAgc3RyaW5ncy5qb2luKCckey4uLn0nKSArXG4gICAgICAgICAgICAnYCdcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXZSBjb3VsZCBzZXQgd2Fsa2VyLmN1cnJlbnROb2RlIHRvIGFub3RoZXIgbm9kZSBoZXJlIHRvIHByZXZlbnQgYSBtZW1vcnlcbiAgICAvLyBsZWFrLCBidXQgZXZlcnkgdGltZSB3ZSBwcmVwYXJlIGEgdGVtcGxhdGUsIHdlIGltbWVkaWF0ZWx5IHJlbmRlciBpdFxuICAgIC8vIGFuZCByZS11c2UgdGhlIHdhbGtlciBpbiBuZXcgVGVtcGxhdGVJbnN0YW5jZS5fY2xvbmUoKS5cbiAgICBkZWJ1Z0xvZ0V2ZW50ICYmXG4gICAgICBkZWJ1Z0xvZ0V2ZW50KHtcbiAgICAgICAga2luZDogJ3RlbXBsYXRlIHByZXAnLFxuICAgICAgICB0ZW1wbGF0ZTogdGhpcyxcbiAgICAgICAgY2xvbmFibGVUZW1wbGF0ZTogdGhpcy5lbCxcbiAgICAgICAgcGFydHM6IHRoaXMucGFydHMsXG4gICAgICAgIHN0cmluZ3MsXG4gICAgICB9KTtcbiAgfVxuXG4gIC8vIE92ZXJyaWRkZW4gdmlhIGBsaXRIdG1sUG9seWZpbGxTdXBwb3J0YCB0byBwcm92aWRlIHBsYXRmb3JtIHN1cHBvcnQuXG4gIC8qKiBAbm9jb2xsYXBzZSAqL1xuICBzdGF0aWMgY3JlYXRlRWxlbWVudChodG1sOiBUcnVzdGVkSFRNTCwgX29wdGlvbnM/OiBSZW5kZXJPcHRpb25zKSB7XG4gICAgY29uc3QgZWwgPSBkLmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgZWwuaW5uZXJIVE1MID0gaHRtbCBhcyB1bmtub3duIGFzIHN0cmluZztcbiAgICByZXR1cm4gZWw7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBEaXNjb25uZWN0YWJsZSB7XG4gIF8kcGFyZW50PzogRGlzY29ubmVjdGFibGU7XG4gIF8kZGlzY29ubmVjdGFibGVDaGlsZHJlbj86IFNldDxEaXNjb25uZWN0YWJsZT47XG4gIC8vIFJhdGhlciB0aGFuIGhvbGQgY29ubmVjdGlvbiBzdGF0ZSBvbiBpbnN0YW5jZXMsIERpc2Nvbm5lY3RhYmxlcyByZWN1cnNpdmVseVxuICAvLyBmZXRjaCB0aGUgY29ubmVjdGlvbiBzdGF0ZSBmcm9tIHRoZSBSb290UGFydCB0aGV5IGFyZSBjb25uZWN0ZWQgaW4gdmlhXG4gIC8vIGdldHRlcnMgdXAgdGhlIERpc2Nvbm5lY3RhYmxlIHRyZWUgdmlhIF8kcGFyZW50IHJlZmVyZW5jZXMuIFRoaXMgcHVzaGVzIHRoZVxuICAvLyBjb3N0IG9mIHRyYWNraW5nIHRoZSBpc0Nvbm5lY3RlZCBzdGF0ZSB0byBgQXN5bmNEaXJlY3RpdmVzYCwgYW5kIGF2b2lkc1xuICAvLyBuZWVkaW5nIHRvIHBhc3MgYWxsIERpc2Nvbm5lY3RhYmxlcyAocGFydHMsIHRlbXBsYXRlIGluc3RhbmNlcywgYW5kXG4gIC8vIGRpcmVjdGl2ZXMpIHRoZWlyIGNvbm5lY3Rpb24gc3RhdGUgZWFjaCB0aW1lIGl0IGNoYW5nZXMsIHdoaWNoIHdvdWxkIGJlXG4gIC8vIGNvc3RseSBmb3IgdHJlZXMgdGhhdCBoYXZlIG5vIEFzeW5jRGlyZWN0aXZlcy5cbiAgXyRpc0Nvbm5lY3RlZDogYm9vbGVhbjtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZURpcmVjdGl2ZShcbiAgcGFydDogQ2hpbGRQYXJ0IHwgQXR0cmlidXRlUGFydCB8IEVsZW1lbnRQYXJ0LFxuICB2YWx1ZTogdW5rbm93bixcbiAgcGFyZW50OiBEaXJlY3RpdmVQYXJlbnQgPSBwYXJ0LFxuICBhdHRyaWJ1dGVJbmRleD86IG51bWJlclxuKTogdW5rbm93biB7XG4gIC8vIEJhaWwgZWFybHkgaWYgdGhlIHZhbHVlIGlzIGV4cGxpY2l0bHkgbm9DaGFuZ2UuIE5vdGUsIHRoaXMgbWVhbnMgYW55XG4gIC8vIG5lc3RlZCBkaXJlY3RpdmUgaXMgc3RpbGwgYXR0YWNoZWQgYW5kIGlzIG5vdCBydW4uXG4gIGlmICh2YWx1ZSA9PT0gbm9DaGFuZ2UpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgbGV0IGN1cnJlbnREaXJlY3RpdmUgPVxuICAgIGF0dHJpYnV0ZUluZGV4ICE9PSB1bmRlZmluZWRcbiAgICAgID8gKHBhcmVudCBhcyBBdHRyaWJ1dGVQYXJ0KS5fX2RpcmVjdGl2ZXM/LlthdHRyaWJ1dGVJbmRleF1cbiAgICAgIDogKHBhcmVudCBhcyBDaGlsZFBhcnQgfCBFbGVtZW50UGFydCB8IERpcmVjdGl2ZSkuX19kaXJlY3RpdmU7XG4gIGNvbnN0IG5leHREaXJlY3RpdmVDb25zdHJ1Y3RvciA9IGlzUHJpbWl0aXZlKHZhbHVlKVxuICAgID8gdW5kZWZpbmVkXG4gICAgOiAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICAgICAgKHZhbHVlIGFzIERpcmVjdGl2ZVJlc3VsdClbJ18kbGl0RGlyZWN0aXZlJCddO1xuICBpZiAoY3VycmVudERpcmVjdGl2ZT8uY29uc3RydWN0b3IgIT09IG5leHREaXJlY3RpdmVDb25zdHJ1Y3Rvcikge1xuICAgIC8vIFRoaXMgcHJvcGVydHkgbmVlZHMgdG8gcmVtYWluIHVubWluaWZpZWQuXG4gICAgY3VycmVudERpcmVjdGl2ZT8uWydfJG5vdGlmeURpcmVjdGl2ZUNvbm5lY3Rpb25DaGFuZ2VkJ10/LihmYWxzZSk7XG4gICAgaWYgKG5leHREaXJlY3RpdmVDb25zdHJ1Y3RvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjdXJyZW50RGlyZWN0aXZlID0gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50RGlyZWN0aXZlID0gbmV3IG5leHREaXJlY3RpdmVDb25zdHJ1Y3RvcihwYXJ0IGFzIFBhcnRJbmZvKTtcbiAgICAgIGN1cnJlbnREaXJlY3RpdmUuXyRpbml0aWFsaXplKHBhcnQsIHBhcmVudCwgYXR0cmlidXRlSW5kZXgpO1xuICAgIH1cbiAgICBpZiAoYXR0cmlidXRlSW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgKChwYXJlbnQgYXMgQXR0cmlidXRlUGFydCkuX19kaXJlY3RpdmVzID8/PSBbXSlbYXR0cmlidXRlSW5kZXhdID1cbiAgICAgICAgY3VycmVudERpcmVjdGl2ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgKHBhcmVudCBhcyBDaGlsZFBhcnQgfCBEaXJlY3RpdmUpLl9fZGlyZWN0aXZlID0gY3VycmVudERpcmVjdGl2ZTtcbiAgICB9XG4gIH1cbiAgaWYgKGN1cnJlbnREaXJlY3RpdmUgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhbHVlID0gcmVzb2x2ZURpcmVjdGl2ZShcbiAgICAgIHBhcnQsXG4gICAgICBjdXJyZW50RGlyZWN0aXZlLl8kcmVzb2x2ZShwYXJ0LCAodmFsdWUgYXMgRGlyZWN0aXZlUmVzdWx0KS52YWx1ZXMpLFxuICAgICAgY3VycmVudERpcmVjdGl2ZSxcbiAgICAgIGF0dHJpYnV0ZUluZGV4XG4gICAgKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbmV4cG9ydCB0eXBlIHtUZW1wbGF0ZUluc3RhbmNlfTtcbi8qKlxuICogQW4gdXBkYXRlYWJsZSBpbnN0YW5jZSBvZiBhIFRlbXBsYXRlLiBIb2xkcyByZWZlcmVuY2VzIHRvIHRoZSBQYXJ0cyB1c2VkIHRvXG4gKiB1cGRhdGUgdGhlIHRlbXBsYXRlIGluc3RhbmNlLlxuICovXG5jbGFzcyBUZW1wbGF0ZUluc3RhbmNlIGltcGxlbWVudHMgRGlzY29ubmVjdGFibGUge1xuICBfJHRlbXBsYXRlOiBUZW1wbGF0ZTtcbiAgXyRwYXJ0czogQXJyYXk8UGFydCB8IHVuZGVmaW5lZD4gPSBbXTtcblxuICAvKiogQGludGVybmFsICovXG4gIF8kcGFyZW50OiBDaGlsZFBhcnQ7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRkaXNjb25uZWN0YWJsZUNoaWxkcmVuPzogU2V0PERpc2Nvbm5lY3RhYmxlPiA9IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZTogVGVtcGxhdGUsIHBhcmVudDogQ2hpbGRQYXJ0KSB7XG4gICAgdGhpcy5fJHRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgdGhpcy5fJHBhcmVudCA9IHBhcmVudDtcbiAgfVxuXG4gIC8vIENhbGxlZCBieSBDaGlsZFBhcnQgcGFyZW50Tm9kZSBnZXR0ZXJcbiAgZ2V0IHBhcmVudE5vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuXyRwYXJlbnQucGFyZW50Tm9kZTtcbiAgfVxuXG4gIC8vIFNlZSBjb21tZW50IGluIERpc2Nvbm5lY3RhYmxlIGludGVyZmFjZSBmb3Igd2h5IHRoaXMgaXMgYSBnZXR0ZXJcbiAgZ2V0IF8kaXNDb25uZWN0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuXyRwYXJlbnQuXyRpc0Nvbm5lY3RlZDtcbiAgfVxuXG4gIC8vIFRoaXMgbWV0aG9kIGlzIHNlcGFyYXRlIGZyb20gdGhlIGNvbnN0cnVjdG9yIGJlY2F1c2Ugd2UgbmVlZCB0byByZXR1cm4gYVxuICAvLyBEb2N1bWVudEZyYWdtZW50IGFuZCB3ZSBkb24ndCB3YW50IHRvIGhvbGQgb250byBpdCB3aXRoIGFuIGluc3RhbmNlIGZpZWxkLlxuICBfY2xvbmUob3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGVsOiB7Y29udGVudH0sXG4gICAgICBwYXJ0czogcGFydHMsXG4gICAgfSA9IHRoaXMuXyR0ZW1wbGF0ZTtcbiAgICBjb25zdCBmcmFnbWVudCA9IChvcHRpb25zPy5jcmVhdGlvblNjb3BlID8/IGQpLmltcG9ydE5vZGUoY29udGVudCwgdHJ1ZSk7XG4gICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gZnJhZ21lbnQ7XG5cbiAgICBsZXQgbm9kZSA9IHdhbGtlci5uZXh0Tm9kZSgpITtcbiAgICBsZXQgbm9kZUluZGV4ID0gMDtcbiAgICBsZXQgcGFydEluZGV4ID0gMDtcbiAgICBsZXQgdGVtcGxhdGVQYXJ0ID0gcGFydHNbMF07XG5cbiAgICB3aGlsZSAodGVtcGxhdGVQYXJ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChub2RlSW5kZXggPT09IHRlbXBsYXRlUGFydC5pbmRleCkge1xuICAgICAgICBsZXQgcGFydDogUGFydCB8IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHRlbXBsYXRlUGFydC50eXBlID09PSBDSElMRF9QQVJUKSB7XG4gICAgICAgICAgcGFydCA9IG5ldyBDaGlsZFBhcnQoXG4gICAgICAgICAgICBub2RlIGFzIEhUTUxFbGVtZW50LFxuICAgICAgICAgICAgbm9kZS5uZXh0U2libGluZyxcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICh0ZW1wbGF0ZVBhcnQudHlwZSA9PT0gQVRUUklCVVRFX1BBUlQpIHtcbiAgICAgICAgICBwYXJ0ID0gbmV3IHRlbXBsYXRlUGFydC5jdG9yKFxuICAgICAgICAgICAgbm9kZSBhcyBIVE1MRWxlbWVudCxcbiAgICAgICAgICAgIHRlbXBsYXRlUGFydC5uYW1lLFxuICAgICAgICAgICAgdGVtcGxhdGVQYXJ0LnN0cmluZ3MsXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgb3B0aW9uc1xuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAodGVtcGxhdGVQYXJ0LnR5cGUgPT09IEVMRU1FTlRfUEFSVCkge1xuICAgICAgICAgIHBhcnQgPSBuZXcgRWxlbWVudFBhcnQobm9kZSBhcyBIVE1MRWxlbWVudCwgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fJHBhcnRzLnB1c2gocGFydCk7XG4gICAgICAgIHRlbXBsYXRlUGFydCA9IHBhcnRzWysrcGFydEluZGV4XTtcbiAgICAgIH1cbiAgICAgIGlmIChub2RlSW5kZXggIT09IHRlbXBsYXRlUGFydD8uaW5kZXgpIHtcbiAgICAgICAgbm9kZSA9IHdhbGtlci5uZXh0Tm9kZSgpITtcbiAgICAgICAgbm9kZUluZGV4Kys7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFdlIG5lZWQgdG8gc2V0IHRoZSBjdXJyZW50Tm9kZSBhd2F5IGZyb20gdGhlIGNsb25lZCB0cmVlIHNvIHRoYXQgd2VcbiAgICAvLyBkb24ndCBob2xkIG9udG8gdGhlIHRyZWUgZXZlbiBpZiB0aGUgdHJlZSBpcyBkZXRhY2hlZCBhbmQgc2hvdWxkIGJlXG4gICAgLy8gZnJlZWQuXG4gICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gZDtcbiAgICByZXR1cm4gZnJhZ21lbnQ7XG4gIH1cblxuICBfdXBkYXRlKHZhbHVlczogQXJyYXk8dW5rbm93bj4pIHtcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yIChjb25zdCBwYXJ0IG9mIHRoaXMuXyRwYXJ0cykge1xuICAgICAgaWYgKHBhcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBkZWJ1Z0xvZ0V2ZW50ICYmXG4gICAgICAgICAgZGVidWdMb2dFdmVudCh7XG4gICAgICAgICAgICBraW5kOiAnc2V0IHBhcnQnLFxuICAgICAgICAgICAgcGFydCxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZXNbaV0sXG4gICAgICAgICAgICB2YWx1ZUluZGV4OiBpLFxuICAgICAgICAgICAgdmFsdWVzLFxuICAgICAgICAgICAgdGVtcGxhdGVJbnN0YW5jZTogdGhpcyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgaWYgKChwYXJ0IGFzIEF0dHJpYnV0ZVBhcnQpLnN0cmluZ3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIChwYXJ0IGFzIEF0dHJpYnV0ZVBhcnQpLl8kc2V0VmFsdWUodmFsdWVzLCBwYXJ0IGFzIEF0dHJpYnV0ZVBhcnQsIGkpO1xuICAgICAgICAgIC8vIFRoZSBudW1iZXIgb2YgdmFsdWVzIHRoZSBwYXJ0IGNvbnN1bWVzIGlzIHBhcnQuc3RyaW5ncy5sZW5ndGggLSAxXG4gICAgICAgICAgLy8gc2luY2UgdmFsdWVzIGFyZSBpbiBiZXR3ZWVuIHRlbXBsYXRlIHNwYW5zLiBXZSBpbmNyZW1lbnQgaSBieSAxXG4gICAgICAgICAgLy8gbGF0ZXIgaW4gdGhlIGxvb3AsIHNvIGluY3JlbWVudCBpdCBieSBwYXJ0LnN0cmluZ3MubGVuZ3RoIC0gMiBoZXJlXG4gICAgICAgICAgaSArPSAocGFydCBhcyBBdHRyaWJ1dGVQYXJ0KS5zdHJpbmdzIS5sZW5ndGggLSAyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhcnQuXyRzZXRWYWx1ZSh2YWx1ZXNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpKys7XG4gICAgfVxuICB9XG59XG5cbi8qXG4gKiBQYXJ0c1xuICovXG50eXBlIEF0dHJpYnV0ZVRlbXBsYXRlUGFydCA9IHtcbiAgcmVhZG9ubHkgdHlwZTogdHlwZW9mIEFUVFJJQlVURV9QQVJUO1xuICByZWFkb25seSBpbmRleDogbnVtYmVyO1xuICByZWFkb25seSBuYW1lOiBzdHJpbmc7XG4gIHJlYWRvbmx5IGN0b3I6IHR5cGVvZiBBdHRyaWJ1dGVQYXJ0O1xuICByZWFkb25seSBzdHJpbmdzOiBSZWFkb25seUFycmF5PHN0cmluZz47XG59O1xudHlwZSBDaGlsZFRlbXBsYXRlUGFydCA9IHtcbiAgcmVhZG9ubHkgdHlwZTogdHlwZW9mIENISUxEX1BBUlQ7XG4gIHJlYWRvbmx5IGluZGV4OiBudW1iZXI7XG59O1xudHlwZSBFbGVtZW50VGVtcGxhdGVQYXJ0ID0ge1xuICByZWFkb25seSB0eXBlOiB0eXBlb2YgRUxFTUVOVF9QQVJUO1xuICByZWFkb25seSBpbmRleDogbnVtYmVyO1xufTtcbnR5cGUgQ29tbWVudFRlbXBsYXRlUGFydCA9IHtcbiAgcmVhZG9ubHkgdHlwZTogdHlwZW9mIENPTU1FTlRfUEFSVDtcbiAgcmVhZG9ubHkgaW5kZXg6IG51bWJlcjtcbn07XG5cbi8qKlxuICogQSBUZW1wbGF0ZVBhcnQgcmVwcmVzZW50cyBhIGR5bmFtaWMgcGFydCBpbiBhIHRlbXBsYXRlLCBiZWZvcmUgdGhlIHRlbXBsYXRlXG4gKiBpcyBpbnN0YW50aWF0ZWQuIFdoZW4gYSB0ZW1wbGF0ZSBpcyBpbnN0YW50aWF0ZWQgUGFydHMgYXJlIGNyZWF0ZWQgZnJvbVxuICogVGVtcGxhdGVQYXJ0cy5cbiAqL1xudHlwZSBUZW1wbGF0ZVBhcnQgPVxuICB8IENoaWxkVGVtcGxhdGVQYXJ0XG4gIHwgQXR0cmlidXRlVGVtcGxhdGVQYXJ0XG4gIHwgRWxlbWVudFRlbXBsYXRlUGFydFxuICB8IENvbW1lbnRUZW1wbGF0ZVBhcnQ7XG5cbmV4cG9ydCB0eXBlIFBhcnQgPVxuICB8IENoaWxkUGFydFxuICB8IEF0dHJpYnV0ZVBhcnRcbiAgfCBQcm9wZXJ0eVBhcnRcbiAgfCBCb29sZWFuQXR0cmlidXRlUGFydFxuICB8IEVsZW1lbnRQYXJ0XG4gIHwgRXZlbnRQYXJ0O1xuXG5leHBvcnQgdHlwZSB7Q2hpbGRQYXJ0fTtcbmNsYXNzIENoaWxkUGFydCBpbXBsZW1lbnRzIERpc2Nvbm5lY3RhYmxlIHtcbiAgcmVhZG9ubHkgdHlwZSA9IENISUxEX1BBUlQ7XG4gIHJlYWRvbmx5IG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWQ7XG4gIF8kY29tbWl0dGVkVmFsdWU6IHVua25vd24gPSBub3RoaW5nO1xuICAvKiogQGludGVybmFsICovXG4gIF9fZGlyZWN0aXZlPzogRGlyZWN0aXZlO1xuICAvKiogQGludGVybmFsICovXG4gIF8kc3RhcnROb2RlOiBDaGlsZE5vZGU7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRlbmROb2RlOiBDaGlsZE5vZGUgfCBudWxsO1xuICBwcml2YXRlIF90ZXh0U2FuaXRpemVyOiBWYWx1ZVNhbml0aXplciB8IHVuZGVmaW5lZDtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfJHBhcmVudDogRGlzY29ubmVjdGFibGUgfCB1bmRlZmluZWQ7XG4gIC8qKlxuICAgKiBDb25uZWN0aW9uIHN0YXRlIGZvciBSb290UGFydHMgb25seSAoaS5lLiBDaGlsZFBhcnQgd2l0aG91dCBfJHBhcmVudFxuICAgKiByZXR1cm5lZCBmcm9tIHRvcC1sZXZlbCBgcmVuZGVyYCkuIFRoaXMgZmllbGQgaXMgdW51c2VkIG90aGVyd2lzZS4gVGhlXG4gICAqIGludGVudGlvbiB3b3VsZCBiZSBjbGVhcmVyIGlmIHdlIG1hZGUgYFJvb3RQYXJ0YCBhIHN1YmNsYXNzIG9mIGBDaGlsZFBhcnRgXG4gICAqIHdpdGggdGhpcyBmaWVsZCAoYW5kIGEgZGlmZmVyZW50IF8kaXNDb25uZWN0ZWQgZ2V0dGVyKSwgYnV0IHRoZSBzdWJjbGFzc1xuICAgKiBjYXVzZWQgYSBwZXJmIHJlZ3Jlc3Npb24sIHBvc3NpYmx5IGR1ZSB0byBtYWtpbmcgY2FsbCBzaXRlcyBwb2x5bW9ycGhpYy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBfX2lzQ29ubmVjdGVkOiBib29sZWFuO1xuXG4gIC8vIFNlZSBjb21tZW50IGluIERpc2Nvbm5lY3RhYmxlIGludGVyZmFjZSBmb3Igd2h5IHRoaXMgaXMgYSBnZXR0ZXJcbiAgZ2V0IF8kaXNDb25uZWN0ZWQoKSB7XG4gICAgLy8gQ2hpbGRQYXJ0cyB0aGF0IGFyZSBub3QgYXQgdGhlIHJvb3Qgc2hvdWxkIGFsd2F5cyBiZSBjcmVhdGVkIHdpdGggYVxuICAgIC8vIHBhcmVudDsgb25seSBSb290Q2hpbGROb2RlJ3Mgd29uJ3QsIHNvIHRoZXkgcmV0dXJuIHRoZSBsb2NhbCBpc0Nvbm5lY3RlZFxuICAgIC8vIHN0YXRlXG4gICAgcmV0dXJuIHRoaXMuXyRwYXJlbnQ/Ll8kaXNDb25uZWN0ZWQgPz8gdGhpcy5fX2lzQ29ubmVjdGVkO1xuICB9XG5cbiAgLy8gVGhlIGZvbGxvd2luZyBmaWVsZHMgd2lsbCBiZSBwYXRjaGVkIG9udG8gQ2hpbGRQYXJ0cyB3aGVuIHJlcXVpcmVkIGJ5XG4gIC8vIEFzeW5jRGlyZWN0aXZlXG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRkaXNjb25uZWN0YWJsZUNoaWxkcmVuPzogU2V0PERpc2Nvbm5lY3RhYmxlPiA9IHVuZGVmaW5lZDtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfJG5vdGlmeUNvbm5lY3Rpb25DaGFuZ2VkPyhcbiAgICBpc0Nvbm5lY3RlZDogYm9vbGVhbixcbiAgICByZW1vdmVGcm9tUGFyZW50PzogYm9vbGVhbixcbiAgICBmcm9tPzogbnVtYmVyXG4gICk6IHZvaWQ7XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRyZXBhcmVudERpc2Nvbm5lY3RhYmxlcz8ocGFyZW50OiBEaXNjb25uZWN0YWJsZSk6IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgc3RhcnROb2RlOiBDaGlsZE5vZGUsXG4gICAgZW5kTm9kZTogQ2hpbGROb2RlIHwgbnVsbCxcbiAgICBwYXJlbnQ6IFRlbXBsYXRlSW5zdGFuY2UgfCBDaGlsZFBhcnQgfCB1bmRlZmluZWQsXG4gICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZFxuICApIHtcbiAgICB0aGlzLl8kc3RhcnROb2RlID0gc3RhcnROb2RlO1xuICAgIHRoaXMuXyRlbmROb2RlID0gZW5kTm9kZTtcbiAgICB0aGlzLl8kcGFyZW50ID0gcGFyZW50O1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgLy8gTm90ZSBfX2lzQ29ubmVjdGVkIGlzIG9ubHkgZXZlciBhY2Nlc3NlZCBvbiBSb290UGFydHMgKGkuZS4gd2hlbiB0aGVyZSBpc1xuICAgIC8vIG5vIF8kcGFyZW50KTsgdGhlIHZhbHVlIG9uIGEgbm9uLXJvb3QtcGFydCBpcyBcImRvbid0IGNhcmVcIiwgYnV0IGNoZWNraW5nXG4gICAgLy8gZm9yIHBhcmVudCB3b3VsZCBiZSBtb3JlIGNvZGVcbiAgICB0aGlzLl9faXNDb25uZWN0ZWQgPSBvcHRpb25zPy5pc0Nvbm5lY3RlZCA/PyB0cnVlO1xuICAgIGlmIChFTkFCTEVfRVhUUkFfU0VDVVJJVFlfSE9PS1MpIHtcbiAgICAgIC8vIEV4cGxpY2l0bHkgaW5pdGlhbGl6ZSBmb3IgY29uc2lzdGVudCBjbGFzcyBzaGFwZS5cbiAgICAgIHRoaXMuX3RleHRTYW5pdGl6ZXIgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBwYXJlbnQgbm9kZSBpbnRvIHdoaWNoIHRoZSBwYXJ0IHJlbmRlcnMgaXRzIGNvbnRlbnQuXG4gICAqXG4gICAqIEEgQ2hpbGRQYXJ0J3MgY29udGVudCBjb25zaXN0cyBvZiBhIHJhbmdlIG9mIGFkamFjZW50IGNoaWxkIG5vZGVzIG9mXG4gICAqIGAucGFyZW50Tm9kZWAsIHBvc3NpYmx5IGJvcmRlcmVkIGJ5ICdtYXJrZXIgbm9kZXMnIChgLnN0YXJ0Tm9kZWAgYW5kXG4gICAqIGAuZW5kTm9kZWApLlxuICAgKlxuICAgKiAtIElmIGJvdGggYC5zdGFydE5vZGVgIGFuZCBgLmVuZE5vZGVgIGFyZSBub24tbnVsbCwgdGhlbiB0aGUgcGFydCdzIGNvbnRlbnRcbiAgICogY29uc2lzdHMgb2YgYWxsIHNpYmxpbmdzIGJldHdlZW4gYC5zdGFydE5vZGVgIGFuZCBgLmVuZE5vZGVgLCBleGNsdXNpdmVseS5cbiAgICpcbiAgICogLSBJZiBgLnN0YXJ0Tm9kZWAgaXMgbm9uLW51bGwgYnV0IGAuZW5kTm9kZWAgaXMgbnVsbCwgdGhlbiB0aGUgcGFydCdzXG4gICAqIGNvbnRlbnQgY29uc2lzdHMgb2YgYWxsIHNpYmxpbmdzIGZvbGxvd2luZyBgLnN0YXJ0Tm9kZWAsIHVwIHRvIGFuZFxuICAgKiBpbmNsdWRpbmcgdGhlIGxhc3QgY2hpbGQgb2YgYC5wYXJlbnROb2RlYC4gSWYgYC5lbmROb2RlYCBpcyBub24tbnVsbCwgdGhlblxuICAgKiBgLnN0YXJ0Tm9kZWAgd2lsbCBhbHdheXMgYmUgbm9uLW51bGwuXG4gICAqXG4gICAqIC0gSWYgYm90aCBgLmVuZE5vZGVgIGFuZCBgLnN0YXJ0Tm9kZWAgYXJlIG51bGwsIHRoZW4gdGhlIHBhcnQncyBjb250ZW50XG4gICAqIGNvbnNpc3RzIG9mIGFsbCBjaGlsZCBub2RlcyBvZiBgLnBhcmVudE5vZGVgLlxuICAgKi9cbiAgZ2V0IHBhcmVudE5vZGUoKTogTm9kZSB7XG4gICAgbGV0IHBhcmVudE5vZGU6IE5vZGUgPSB3cmFwKHRoaXMuXyRzdGFydE5vZGUpLnBhcmVudE5vZGUhO1xuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuXyRwYXJlbnQ7XG4gICAgaWYgKFxuICAgICAgcGFyZW50ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgIHBhcmVudE5vZGU/Lm5vZGVUeXBlID09PSAxMSAvKiBOb2RlLkRPQ1VNRU5UX0ZSQUdNRU5UICovXG4gICAgKSB7XG4gICAgICAvLyBJZiB0aGUgcGFyZW50Tm9kZSBpcyBhIERvY3VtZW50RnJhZ21lbnQsIGl0IG1heSBiZSBiZWNhdXNlIHRoZSBET00gaXNcbiAgICAgIC8vIHN0aWxsIGluIHRoZSBjbG9uZWQgZnJhZ21lbnQgZHVyaW5nIGluaXRpYWwgcmVuZGVyOyBpZiBzbywgZ2V0IHRoZSByZWFsXG4gICAgICAvLyBwYXJlbnROb2RlIHRoZSBwYXJ0IHdpbGwgYmUgY29tbWl0dGVkIGludG8gYnkgYXNraW5nIHRoZSBwYXJlbnQuXG4gICAgICBwYXJlbnROb2RlID0gKHBhcmVudCBhcyBDaGlsZFBhcnQgfCBUZW1wbGF0ZUluc3RhbmNlKS5wYXJlbnROb2RlO1xuICAgIH1cbiAgICByZXR1cm4gcGFyZW50Tm9kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgcGFydCdzIGxlYWRpbmcgbWFya2VyIG5vZGUsIGlmIGFueS4gU2VlIGAucGFyZW50Tm9kZWAgZm9yIG1vcmVcbiAgICogaW5mb3JtYXRpb24uXG4gICAqL1xuICBnZXQgc3RhcnROb2RlKCk6IE5vZGUgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5fJHN0YXJ0Tm9kZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgcGFydCdzIHRyYWlsaW5nIG1hcmtlciBub2RlLCBpZiBhbnkuIFNlZSBgLnBhcmVudE5vZGVgIGZvciBtb3JlXG4gICAqIGluZm9ybWF0aW9uLlxuICAgKi9cbiAgZ2V0IGVuZE5vZGUoKTogTm9kZSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLl8kZW5kTm9kZTtcbiAgfVxuXG4gIF8kc2V0VmFsdWUodmFsdWU6IHVua25vd24sIGRpcmVjdGl2ZVBhcmVudDogRGlyZWN0aXZlUGFyZW50ID0gdGhpcyk6IHZvaWQge1xuICAgIGlmIChERVZfTU9ERSAmJiB0aGlzLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFRoaXMgXFxgQ2hpbGRQYXJ0XFxgIGhhcyBubyBcXGBwYXJlbnROb2RlXFxgIGFuZCB0aGVyZWZvcmUgY2Fubm90IGFjY2VwdCBhIHZhbHVlLiBUaGlzIGxpa2VseSBtZWFucyB0aGUgZWxlbWVudCBjb250YWluaW5nIHRoZSBwYXJ0IHdhcyBtYW5pcHVsYXRlZCBpbiBhbiB1bnN1cHBvcnRlZCB3YXkgb3V0c2lkZSBvZiBMaXQncyBjb250cm9sIHN1Y2ggdGhhdCB0aGUgcGFydCdzIG1hcmtlciBub2RlcyB3ZXJlIGVqZWN0ZWQgZnJvbSBET00uIEZvciBleGFtcGxlLCBzZXR0aW5nIHRoZSBlbGVtZW50J3MgXFxgaW5uZXJIVE1MXFxgIG9yIFxcYHRleHRDb250ZW50XFxgIGNhbiBkbyB0aGlzLmBcbiAgICAgICk7XG4gICAgfVxuICAgIHZhbHVlID0gcmVzb2x2ZURpcmVjdGl2ZSh0aGlzLCB2YWx1ZSwgZGlyZWN0aXZlUGFyZW50KTtcbiAgICBpZiAoaXNQcmltaXRpdmUodmFsdWUpKSB7XG4gICAgICAvLyBOb24tcmVuZGVyaW5nIGNoaWxkIHZhbHVlcy4gSXQncyBpbXBvcnRhbnQgdGhhdCB0aGVzZSBkbyBub3QgcmVuZGVyXG4gICAgICAvLyBlbXB0eSB0ZXh0IG5vZGVzIHRvIGF2b2lkIGlzc3VlcyB3aXRoIHByZXZlbnRpbmcgZGVmYXVsdCA8c2xvdD5cbiAgICAgIC8vIGZhbGxiYWNrIGNvbnRlbnQuXG4gICAgICBpZiAodmFsdWUgPT09IG5vdGhpbmcgfHwgdmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgaWYgKHRoaXMuXyRjb21taXR0ZWRWYWx1ZSAhPT0gbm90aGluZykge1xuICAgICAgICAgIGRlYnVnTG9nRXZlbnQgJiZcbiAgICAgICAgICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAgICAgICAgICBraW5kOiAnY29tbWl0IG5vdGhpbmcgdG8gY2hpbGQnLFxuICAgICAgICAgICAgICBzdGFydDogdGhpcy5fJHN0YXJ0Tm9kZSxcbiAgICAgICAgICAgICAgZW5kOiB0aGlzLl8kZW5kTm9kZSxcbiAgICAgICAgICAgICAgcGFyZW50OiB0aGlzLl8kcGFyZW50LFxuICAgICAgICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLl8kY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl8kY29tbWl0dGVkVmFsdWUgPSBub3RoaW5nO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZSAhPT0gdGhpcy5fJGNvbW1pdHRlZFZhbHVlICYmIHZhbHVlICE9PSBub0NoYW5nZSkge1xuICAgICAgICB0aGlzLl9jb21taXRUZXh0KHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIC8vIFRoaXMgcHJvcGVydHkgbmVlZHMgdG8gcmVtYWluIHVubWluaWZpZWQuXG4gICAgfSBlbHNlIGlmICgodmFsdWUgYXMgVGVtcGxhdGVSZXN1bHQpWydfJGxpdFR5cGUkJ10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5fY29tbWl0VGVtcGxhdGVSZXN1bHQodmFsdWUgYXMgVGVtcGxhdGVSZXN1bHQpO1xuICAgIH0gZWxzZSBpZiAoKHZhbHVlIGFzIE5vZGUpLm5vZGVUeXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChERVZfTU9ERSAmJiB0aGlzLm9wdGlvbnM/Lmhvc3QgPT09IHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2NvbW1pdFRleHQoXG4gICAgICAgICAgYFtwcm9iYWJsZSBtaXN0YWtlOiByZW5kZXJlZCBhIHRlbXBsYXRlJ3MgaG9zdCBpbiBpdHNlbGYgYCArXG4gICAgICAgICAgICBgKGNvbW1vbmx5IGNhdXNlZCBieSB3cml0aW5nIFxcJHt0aGlzfSBpbiBhIHRlbXBsYXRlXWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBBdHRlbXB0ZWQgdG8gcmVuZGVyIHRoZSB0ZW1wbGF0ZSBob3N0YCxcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICBgaW5zaWRlIGl0c2VsZi4gVGhpcyBpcyBhbG1vc3QgYWx3YXlzIGEgbWlzdGFrZSwgYW5kIGluIGRldiBtb2RlIGAsXG4gICAgICAgICAgYHdlIHJlbmRlciBzb21lIHdhcm5pbmcgdGV4dC4gSW4gcHJvZHVjdGlvbiBob3dldmVyLCB3ZSdsbCBgLFxuICAgICAgICAgIGByZW5kZXIgaXQsIHdoaWNoIHdpbGwgdXN1YWxseSByZXN1bHQgaW4gYW4gZXJyb3IsIGFuZCBzb21ldGltZXMgYCxcbiAgICAgICAgICBgaW4gdGhlIGVsZW1lbnQgZGlzYXBwZWFyaW5nIGZyb20gdGhlIERPTS5gXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuX2NvbW1pdE5vZGUodmFsdWUgYXMgTm9kZSk7XG4gICAgfSBlbHNlIGlmIChpc0l0ZXJhYmxlKHZhbHVlKSkge1xuICAgICAgdGhpcy5fY29tbWl0SXRlcmFibGUodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGYWxsYmFjaywgd2lsbCByZW5kZXIgdGhlIHN0cmluZyByZXByZXNlbnRhdGlvblxuICAgICAgdGhpcy5fY29tbWl0VGV4dCh2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfaW5zZXJ0PFQgZXh0ZW5kcyBOb2RlPihub2RlOiBUKSB7XG4gICAgcmV0dXJuIHdyYXAod3JhcCh0aGlzLl8kc3RhcnROb2RlKS5wYXJlbnROb2RlISkuaW5zZXJ0QmVmb3JlKFxuICAgICAgbm9kZSxcbiAgICAgIHRoaXMuXyRlbmROb2RlXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgX2NvbW1pdE5vZGUodmFsdWU6IE5vZGUpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fJGNvbW1pdHRlZFZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgdGhpcy5fJGNsZWFyKCk7XG4gICAgICBpZiAoXG4gICAgICAgIEVOQUJMRV9FWFRSQV9TRUNVUklUWV9IT09LUyAmJlxuICAgICAgICBzYW5pdGl6ZXJGYWN0b3J5SW50ZXJuYWwgIT09IG5vb3BTYW5pdGl6ZXJcbiAgICAgICkge1xuICAgICAgICBjb25zdCBwYXJlbnROb2RlTmFtZSA9IHRoaXMuXyRzdGFydE5vZGUucGFyZW50Tm9kZT8ubm9kZU5hbWU7XG4gICAgICAgIGlmIChwYXJlbnROb2RlTmFtZSA9PT0gJ1NUWUxFJyB8fCBwYXJlbnROb2RlTmFtZSA9PT0gJ1NDUklQVCcpIHtcbiAgICAgICAgICBsZXQgbWVzc2FnZSA9ICdGb3JiaWRkZW4nO1xuICAgICAgICAgIGlmIChERVZfTU9ERSkge1xuICAgICAgICAgICAgaWYgKHBhcmVudE5vZGVOYW1lID09PSAnU1RZTEUnKSB7XG4gICAgICAgICAgICAgIG1lc3NhZ2UgPVxuICAgICAgICAgICAgICAgIGBMaXQgZG9lcyBub3Qgc3VwcG9ydCBiaW5kaW5nIGluc2lkZSBzdHlsZSBub2Rlcy4gYCArXG4gICAgICAgICAgICAgICAgYFRoaXMgaXMgYSBzZWN1cml0eSByaXNrLCBhcyBzdHlsZSBpbmplY3Rpb24gYXR0YWNrcyBjYW4gYCArXG4gICAgICAgICAgICAgICAgYGV4ZmlsdHJhdGUgZGF0YSBhbmQgc3Bvb2YgVUlzLiBgICtcbiAgICAgICAgICAgICAgICBgQ29uc2lkZXIgaW5zdGVhZCB1c2luZyBjc3NcXGAuLi5cXGAgbGl0ZXJhbHMgYCArXG4gICAgICAgICAgICAgICAgYHRvIGNvbXBvc2Ugc3R5bGVzLCBhbmQgZG8gZHluYW1pYyBzdHlsaW5nIHdpdGggYCArXG4gICAgICAgICAgICAgICAgYGNzcyBjdXN0b20gcHJvcGVydGllcywgOjpwYXJ0cywgPHNsb3Q+cywgYCArXG4gICAgICAgICAgICAgICAgYGFuZCBieSBtdXRhdGluZyB0aGUgRE9NIHJhdGhlciB0aGFuIHN0eWxlc2hlZXRzLmA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBtZXNzYWdlID1cbiAgICAgICAgICAgICAgICBgTGl0IGRvZXMgbm90IHN1cHBvcnQgYmluZGluZyBpbnNpZGUgc2NyaXB0IG5vZGVzLiBgICtcbiAgICAgICAgICAgICAgICBgVGhpcyBpcyBhIHNlY3VyaXR5IHJpc2ssIGFzIGl0IGNvdWxkIGFsbG93IGFyYml0cmFyeSBgICtcbiAgICAgICAgICAgICAgICBgY29kZSBleGVjdXRpb24uYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBkZWJ1Z0xvZ0V2ZW50ICYmXG4gICAgICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAgICAgIGtpbmQ6ICdjb21taXQgbm9kZScsXG4gICAgICAgICAgc3RhcnQ6IHRoaXMuXyRzdGFydE5vZGUsXG4gICAgICAgICAgcGFyZW50OiB0aGlzLl8kcGFyZW50LFxuICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICAgIH0pO1xuICAgICAgdGhpcy5fJGNvbW1pdHRlZFZhbHVlID0gdGhpcy5faW5zZXJ0KHZhbHVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9jb21taXRUZXh0KHZhbHVlOiB1bmtub3duKTogdm9pZCB7XG4gICAgLy8gSWYgdGhlIGNvbW1pdHRlZCB2YWx1ZSBpcyBhIHByaW1pdGl2ZSBpdCBtZWFucyB3ZSBjYWxsZWQgX2NvbW1pdFRleHQgb25cbiAgICAvLyB0aGUgcHJldmlvdXMgcmVuZGVyLCBhbmQgd2Uga25vdyB0aGF0IHRoaXMuXyRzdGFydE5vZGUubmV4dFNpYmxpbmcgaXMgYVxuICAgIC8vIFRleHQgbm9kZS4gV2UgY2FuIG5vdyBqdXN0IHJlcGxhY2UgdGhlIHRleHQgY29udGVudCAoLmRhdGEpIG9mIHRoZSBub2RlLlxuICAgIGlmIChcbiAgICAgIHRoaXMuXyRjb21taXR0ZWRWYWx1ZSAhPT0gbm90aGluZyAmJlxuICAgICAgaXNQcmltaXRpdmUodGhpcy5fJGNvbW1pdHRlZFZhbHVlKVxuICAgICkge1xuICAgICAgY29uc3Qgbm9kZSA9IHdyYXAodGhpcy5fJHN0YXJ0Tm9kZSkubmV4dFNpYmxpbmcgYXMgVGV4dDtcbiAgICAgIGlmIChFTkFCTEVfRVhUUkFfU0VDVVJJVFlfSE9PS1MpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RleHRTYW5pdGl6ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMuX3RleHRTYW5pdGl6ZXIgPSBjcmVhdGVTYW5pdGl6ZXIobm9kZSwgJ2RhdGEnLCAncHJvcGVydHknKTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9IHRoaXMuX3RleHRTYW5pdGl6ZXIodmFsdWUpO1xuICAgICAgfVxuICAgICAgZGVidWdMb2dFdmVudCAmJlxuICAgICAgICBkZWJ1Z0xvZ0V2ZW50KHtcbiAgICAgICAgICBraW5kOiAnY29tbWl0IHRleHQnLFxuICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgICB9KTtcbiAgICAgIChub2RlIGFzIFRleHQpLmRhdGEgPSB2YWx1ZSBhcyBzdHJpbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChFTkFCTEVfRVhUUkFfU0VDVVJJVFlfSE9PS1MpIHtcbiAgICAgICAgY29uc3QgdGV4dE5vZGUgPSBkLmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgICAgICAgdGhpcy5fY29tbWl0Tm9kZSh0ZXh0Tm9kZSk7XG4gICAgICAgIC8vIFdoZW4gc2V0dGluZyB0ZXh0IGNvbnRlbnQsIGZvciBzZWN1cml0eSBwdXJwb3NlcyBpdCBtYXR0ZXJzIGEgbG90XG4gICAgICAgIC8vIHdoYXQgdGhlIHBhcmVudCBpcy4gRm9yIGV4YW1wbGUsIDxzdHlsZT4gYW5kIDxzY3JpcHQ+IG5lZWQgdG8gYmVcbiAgICAgICAgLy8gaGFuZGxlZCB3aXRoIGNhcmUsIHdoaWxlIDxzcGFuPiBkb2VzIG5vdC4gU28gZmlyc3Qgd2UgbmVlZCB0byBwdXQgYVxuICAgICAgICAvLyB0ZXh0IG5vZGUgaW50byB0aGUgZG9jdW1lbnQsIHRoZW4gd2UgY2FuIHNhbml0aXplIGl0cyBjb250ZW50LlxuICAgICAgICBpZiAodGhpcy5fdGV4dFNhbml0aXplciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhpcy5fdGV4dFNhbml0aXplciA9IGNyZWF0ZVNhbml0aXplcih0ZXh0Tm9kZSwgJ2RhdGEnLCAncHJvcGVydHknKTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9IHRoaXMuX3RleHRTYW5pdGl6ZXIodmFsdWUpO1xuICAgICAgICBkZWJ1Z0xvZ0V2ZW50ICYmXG4gICAgICAgICAgZGVidWdMb2dFdmVudCh7XG4gICAgICAgICAgICBraW5kOiAnY29tbWl0IHRleHQnLFxuICAgICAgICAgICAgbm9kZTogdGV4dE5vZGUsXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgdGV4dE5vZGUuZGF0YSA9IHZhbHVlIGFzIHN0cmluZztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2NvbW1pdE5vZGUoZC5jcmVhdGVUZXh0Tm9kZSh2YWx1ZSBhcyBzdHJpbmcpKTtcbiAgICAgICAgZGVidWdMb2dFdmVudCAmJlxuICAgICAgICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAgICAgICAga2luZDogJ2NvbW1pdCB0ZXh0JyxcbiAgICAgICAgICAgIG5vZGU6IHdyYXAodGhpcy5fJHN0YXJ0Tm9kZSkubmV4dFNpYmxpbmcgYXMgVGV4dCxcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl8kY29tbWl0dGVkVmFsdWUgPSB2YWx1ZTtcbiAgfVxuXG4gIHByaXZhdGUgX2NvbW1pdFRlbXBsYXRlUmVzdWx0KFxuICAgIHJlc3VsdDogVGVtcGxhdGVSZXN1bHQgfCBDb21waWxlZFRlbXBsYXRlUmVzdWx0XG4gICk6IHZvaWQge1xuICAgIC8vIFRoaXMgcHJvcGVydHkgbmVlZHMgdG8gcmVtYWluIHVubWluaWZpZWQuXG4gICAgY29uc3Qge3ZhbHVlcywgWydfJGxpdFR5cGUkJ106IHR5cGV9ID0gcmVzdWx0O1xuICAgIC8vIElmICRsaXRUeXBlJCBpcyBhIG51bWJlciwgcmVzdWx0IGlzIGEgcGxhaW4gVGVtcGxhdGVSZXN1bHQgYW5kIHdlIGdldFxuICAgIC8vIHRoZSB0ZW1wbGF0ZSBmcm9tIHRoZSB0ZW1wbGF0ZSBjYWNoZS4gSWYgbm90LCByZXN1bHQgaXMgYVxuICAgIC8vIENvbXBpbGVkVGVtcGxhdGVSZXN1bHQgYW5kIF8kbGl0VHlwZSQgaXMgYSBDb21waWxlZFRlbXBsYXRlIGFuZCB3ZSBuZWVkXG4gICAgLy8gdG8gY3JlYXRlIHRoZSA8dGVtcGxhdGU+IGVsZW1lbnQgdGhlIGZpcnN0IHRpbWUgd2Ugc2VlIGl0LlxuICAgIGNvbnN0IHRlbXBsYXRlOiBUZW1wbGF0ZSB8IENvbXBpbGVkVGVtcGxhdGUgPVxuICAgICAgdHlwZW9mIHR5cGUgPT09ICdudW1iZXInXG4gICAgICAgID8gdGhpcy5fJGdldFRlbXBsYXRlKHJlc3VsdCBhcyBVbmNvbXBpbGVkVGVtcGxhdGVSZXN1bHQpXG4gICAgICAgIDogKHR5cGUuZWwgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgKHR5cGUuZWwgPSBUZW1wbGF0ZS5jcmVhdGVFbGVtZW50KFxuICAgICAgICAgICAgICB0cnVzdEZyb21UZW1wbGF0ZVN0cmluZyh0eXBlLmgsIHR5cGUuaFswXSksXG4gICAgICAgICAgICAgIHRoaXMub3B0aW9uc1xuICAgICAgICAgICAgKSksXG4gICAgICAgICAgdHlwZSk7XG5cbiAgICBpZiAoKHRoaXMuXyRjb21taXR0ZWRWYWx1ZSBhcyBUZW1wbGF0ZUluc3RhbmNlKT8uXyR0ZW1wbGF0ZSA9PT0gdGVtcGxhdGUpIHtcbiAgICAgIGRlYnVnTG9nRXZlbnQgJiZcbiAgICAgICAgZGVidWdMb2dFdmVudCh7XG4gICAgICAgICAga2luZDogJ3RlbXBsYXRlIHVwZGF0aW5nJyxcbiAgICAgICAgICB0ZW1wbGF0ZSxcbiAgICAgICAgICBpbnN0YW5jZTogdGhpcy5fJGNvbW1pdHRlZFZhbHVlIGFzIFRlbXBsYXRlSW5zdGFuY2UsXG4gICAgICAgICAgcGFydHM6ICh0aGlzLl8kY29tbWl0dGVkVmFsdWUgYXMgVGVtcGxhdGVJbnN0YW5jZSkuXyRwYXJ0cyxcbiAgICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgdmFsdWVzLFxuICAgICAgICB9KTtcbiAgICAgICh0aGlzLl8kY29tbWl0dGVkVmFsdWUgYXMgVGVtcGxhdGVJbnN0YW5jZSkuX3VwZGF0ZSh2YWx1ZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpbnN0YW5jZSA9IG5ldyBUZW1wbGF0ZUluc3RhbmNlKHRlbXBsYXRlIGFzIFRlbXBsYXRlLCB0aGlzKTtcbiAgICAgIGNvbnN0IGZyYWdtZW50ID0gaW5zdGFuY2UuX2Nsb25lKHRoaXMub3B0aW9ucyk7XG4gICAgICBkZWJ1Z0xvZ0V2ZW50ICYmXG4gICAgICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAgICAgIGtpbmQ6ICd0ZW1wbGF0ZSBpbnN0YW50aWF0ZWQnLFxuICAgICAgICAgIHRlbXBsYXRlLFxuICAgICAgICAgIGluc3RhbmNlLFxuICAgICAgICAgIHBhcnRzOiBpbnN0YW5jZS5fJHBhcnRzLFxuICAgICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgICAgICBmcmFnbWVudCxcbiAgICAgICAgICB2YWx1ZXMsXG4gICAgICAgIH0pO1xuICAgICAgaW5zdGFuY2UuX3VwZGF0ZSh2YWx1ZXMpO1xuICAgICAgZGVidWdMb2dFdmVudCAmJlxuICAgICAgICBkZWJ1Z0xvZ0V2ZW50KHtcbiAgICAgICAgICBraW5kOiAndGVtcGxhdGUgaW5zdGFudGlhdGVkIGFuZCB1cGRhdGVkJyxcbiAgICAgICAgICB0ZW1wbGF0ZSxcbiAgICAgICAgICBpbnN0YW5jZSxcbiAgICAgICAgICBwYXJ0czogaW5zdGFuY2UuXyRwYXJ0cyxcbiAgICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgZnJhZ21lbnQsXG4gICAgICAgICAgdmFsdWVzLFxuICAgICAgICB9KTtcbiAgICAgIHRoaXMuX2NvbW1pdE5vZGUoZnJhZ21lbnQpO1xuICAgICAgdGhpcy5fJGNvbW1pdHRlZFZhbHVlID0gaW5zdGFuY2U7XG4gICAgfVxuICB9XG5cbiAgLy8gT3ZlcnJpZGRlbiB2aWEgYGxpdEh0bWxQb2x5ZmlsbFN1cHBvcnRgIHRvIHByb3ZpZGUgcGxhdGZvcm0gc3VwcG9ydC5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfJGdldFRlbXBsYXRlKHJlc3VsdDogVW5jb21waWxlZFRlbXBsYXRlUmVzdWx0KSB7XG4gICAgbGV0IHRlbXBsYXRlID0gdGVtcGxhdGVDYWNoZS5nZXQocmVzdWx0LnN0cmluZ3MpO1xuICAgIGlmICh0ZW1wbGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0ZW1wbGF0ZUNhY2hlLnNldChyZXN1bHQuc3RyaW5ncywgKHRlbXBsYXRlID0gbmV3IFRlbXBsYXRlKHJlc3VsdCkpKTtcbiAgICB9XG4gICAgcmV0dXJuIHRlbXBsYXRlO1xuICB9XG5cbiAgcHJpdmF0ZSBfY29tbWl0SXRlcmFibGUodmFsdWU6IEl0ZXJhYmxlPHVua25vd24+KTogdm9pZCB7XG4gICAgLy8gRm9yIGFuIEl0ZXJhYmxlLCB3ZSBjcmVhdGUgYSBuZXcgSW5zdGFuY2VQYXJ0IHBlciBpdGVtLCB0aGVuIHNldCBpdHNcbiAgICAvLyB2YWx1ZSB0byB0aGUgaXRlbS4gVGhpcyBpcyBhIGxpdHRsZSBiaXQgb2Ygb3ZlcmhlYWQgZm9yIGV2ZXJ5IGl0ZW0gaW5cbiAgICAvLyBhbiBJdGVyYWJsZSwgYnV0IGl0IGxldHMgdXMgcmVjdXJzZSBlYXNpbHkgYW5kIGVmZmljaWVudGx5IHVwZGF0ZSBBcnJheXNcbiAgICAvLyBvZiBUZW1wbGF0ZVJlc3VsdHMgdGhhdCB3aWxsIGJlIGNvbW1vbmx5IHJldHVybmVkIGZyb20gZXhwcmVzc2lvbnMgbGlrZTpcbiAgICAvLyBhcnJheS5tYXAoKGkpID0+IGh0bWxgJHtpfWApLCBieSByZXVzaW5nIGV4aXN0aW5nIFRlbXBsYXRlSW5zdGFuY2VzLlxuXG4gICAgLy8gSWYgdmFsdWUgaXMgYW4gYXJyYXksIHRoZW4gdGhlIHByZXZpb3VzIHJlbmRlciB3YXMgb2YgYW5cbiAgICAvLyBpdGVyYWJsZSBhbmQgdmFsdWUgd2lsbCBjb250YWluIHRoZSBDaGlsZFBhcnRzIGZyb20gdGhlIHByZXZpb3VzXG4gICAgLy8gcmVuZGVyLiBJZiB2YWx1ZSBpcyBub3QgYW4gYXJyYXksIGNsZWFyIHRoaXMgcGFydCBhbmQgbWFrZSBhIG5ld1xuICAgIC8vIGFycmF5IGZvciBDaGlsZFBhcnRzLlxuICAgIGlmICghaXNBcnJheSh0aGlzLl8kY29tbWl0dGVkVmFsdWUpKSB7XG4gICAgICB0aGlzLl8kY29tbWl0dGVkVmFsdWUgPSBbXTtcbiAgICAgIHRoaXMuXyRjbGVhcigpO1xuICAgIH1cblxuICAgIC8vIExldHMgdXMga2VlcCB0cmFjayBvZiBob3cgbWFueSBpdGVtcyB3ZSBzdGFtcGVkIHNvIHdlIGNhbiBjbGVhciBsZWZ0b3ZlclxuICAgIC8vIGl0ZW1zIGZyb20gYSBwcmV2aW91cyByZW5kZXJcbiAgICBjb25zdCBpdGVtUGFydHMgPSB0aGlzLl8kY29tbWl0dGVkVmFsdWUgYXMgQ2hpbGRQYXJ0W107XG4gICAgbGV0IHBhcnRJbmRleCA9IDA7XG4gICAgbGV0IGl0ZW1QYXJ0OiBDaGlsZFBhcnQgfCB1bmRlZmluZWQ7XG5cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdmFsdWUpIHtcbiAgICAgIGlmIChwYXJ0SW5kZXggPT09IGl0ZW1QYXJ0cy5sZW5ndGgpIHtcbiAgICAgICAgLy8gSWYgbm8gZXhpc3RpbmcgcGFydCwgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICAvLyBUT0RPIChqdXN0aW5mYWduYW5pKTogdGVzdCBwZXJmIGltcGFjdCBvZiBhbHdheXMgY3JlYXRpbmcgdHdvIHBhcnRzXG4gICAgICAgIC8vIGluc3RlYWQgb2Ygc2hhcmluZyBwYXJ0cyBiZXR3ZWVuIG5vZGVzXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9saXQvbGl0L2lzc3Vlcy8xMjY2XG4gICAgICAgIGl0ZW1QYXJ0cy5wdXNoKFxuICAgICAgICAgIChpdGVtUGFydCA9IG5ldyBDaGlsZFBhcnQoXG4gICAgICAgICAgICB0aGlzLl9pbnNlcnQoY3JlYXRlTWFya2VyKCkpLFxuICAgICAgICAgICAgdGhpcy5faW5zZXJ0KGNyZWF0ZU1hcmtlcigpKSxcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnNcbiAgICAgICAgICApKVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmV1c2UgYW4gZXhpc3RpbmcgcGFydFxuICAgICAgICBpdGVtUGFydCA9IGl0ZW1QYXJ0c1twYXJ0SW5kZXhdO1xuICAgICAgfVxuICAgICAgaXRlbVBhcnQuXyRzZXRWYWx1ZShpdGVtKTtcbiAgICAgIHBhcnRJbmRleCsrO1xuICAgIH1cblxuICAgIGlmIChwYXJ0SW5kZXggPCBpdGVtUGFydHMubGVuZ3RoKSB7XG4gICAgICAvLyBpdGVtUGFydHMgYWx3YXlzIGhhdmUgZW5kIG5vZGVzXG4gICAgICB0aGlzLl8kY2xlYXIoXG4gICAgICAgIGl0ZW1QYXJ0ICYmIHdyYXAoaXRlbVBhcnQuXyRlbmROb2RlISkubmV4dFNpYmxpbmcsXG4gICAgICAgIHBhcnRJbmRleFxuICAgICAgKTtcbiAgICAgIC8vIFRydW5jYXRlIHRoZSBwYXJ0cyBhcnJheSBzbyBfdmFsdWUgcmVmbGVjdHMgdGhlIGN1cnJlbnQgc3RhdGVcbiAgICAgIGl0ZW1QYXJ0cy5sZW5ndGggPSBwYXJ0SW5kZXg7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIG5vZGVzIGNvbnRhaW5lZCB3aXRoaW4gdGhpcyBQYXJ0IGZyb20gdGhlIERPTS5cbiAgICpcbiAgICogQHBhcmFtIHN0YXJ0IFN0YXJ0IG5vZGUgdG8gY2xlYXIgZnJvbSwgZm9yIGNsZWFyaW5nIGEgc3Vic2V0IG9mIHRoZSBwYXJ0J3NcbiAgICogICAgIERPTSAodXNlZCB3aGVuIHRydW5jYXRpbmcgaXRlcmFibGVzKVxuICAgKiBAcGFyYW0gZnJvbSAgV2hlbiBgc3RhcnRgIGlzIHNwZWNpZmllZCwgdGhlIGluZGV4IHdpdGhpbiB0aGUgaXRlcmFibGUgZnJvbVxuICAgKiAgICAgd2hpY2ggQ2hpbGRQYXJ0cyBhcmUgYmVpbmcgcmVtb3ZlZCwgdXNlZCBmb3IgZGlzY29ubmVjdGluZyBkaXJlY3RpdmVzIGluXG4gICAqICAgICB0aG9zZSBQYXJ0cy5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBfJGNsZWFyKFxuICAgIHN0YXJ0OiBDaGlsZE5vZGUgfCBudWxsID0gd3JhcCh0aGlzLl8kc3RhcnROb2RlKS5uZXh0U2libGluZyxcbiAgICBmcm9tPzogbnVtYmVyXG4gICkge1xuICAgIHRoaXMuXyRub3RpZnlDb25uZWN0aW9uQ2hhbmdlZD8uKGZhbHNlLCB0cnVlLCBmcm9tKTtcbiAgICB3aGlsZSAoc3RhcnQgJiYgc3RhcnQgIT09IHRoaXMuXyRlbmROb2RlKSB7XG4gICAgICBjb25zdCBuID0gd3JhcChzdGFydCEpLm5leHRTaWJsaW5nO1xuICAgICAgKHdyYXAoc3RhcnQhKSBhcyBFbGVtZW50KS5yZW1vdmUoKTtcbiAgICAgIHN0YXJ0ID0gbjtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEltcGxlbWVudGF0aW9uIG9mIFJvb3RQYXJ0J3MgYGlzQ29ubmVjdGVkYC4gTm90ZSB0aGF0IHRoaXMgbWV0aG9kXG4gICAqIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBvbiBgUm9vdFBhcnRgcyAodGhlIGBDaGlsZFBhcnRgIHJldHVybmVkIGZyb20gYVxuICAgKiB0b3AtbGV2ZWwgYHJlbmRlcigpYCBjYWxsKS4gSXQgaGFzIG5vIGVmZmVjdCBvbiBub24tcm9vdCBDaGlsZFBhcnRzLlxuICAgKiBAcGFyYW0gaXNDb25uZWN0ZWQgV2hldGhlciB0byBzZXRcbiAgICogQGludGVybmFsXG4gICAqL1xuICBzZXRDb25uZWN0ZWQoaXNDb25uZWN0ZWQ6IGJvb2xlYW4pIHtcbiAgICBpZiAodGhpcy5fJHBhcmVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9faXNDb25uZWN0ZWQgPSBpc0Nvbm5lY3RlZDtcbiAgICAgIHRoaXMuXyRub3RpZnlDb25uZWN0aW9uQ2hhbmdlZD8uKGlzQ29ubmVjdGVkKTtcbiAgICB9IGVsc2UgaWYgKERFVl9NT0RFKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdwYXJ0LnNldENvbm5lY3RlZCgpIG1heSBvbmx5IGJlIGNhbGxlZCBvbiBhICcgK1xuICAgICAgICAgICdSb290UGFydCByZXR1cm5lZCBmcm9tIHJlbmRlcigpLidcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQSB0b3AtbGV2ZWwgYENoaWxkUGFydGAgcmV0dXJuZWQgZnJvbSBgcmVuZGVyYCB0aGF0IG1hbmFnZXMgdGhlIGNvbm5lY3RlZFxuICogc3RhdGUgb2YgYEFzeW5jRGlyZWN0aXZlYHMgY3JlYXRlZCB0aHJvdWdob3V0IHRoZSB0cmVlIGJlbG93IGl0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJvb3RQYXJ0IGV4dGVuZHMgQ2hpbGRQYXJ0IHtcbiAgLyoqXG4gICAqIFNldHMgdGhlIGNvbm5lY3Rpb24gc3RhdGUgZm9yIGBBc3luY0RpcmVjdGl2ZWBzIGNvbnRhaW5lZCB3aXRoaW4gdGhpcyByb290XG4gICAqIENoaWxkUGFydC5cbiAgICpcbiAgICogbGl0LWh0bWwgZG9lcyBub3QgYXV0b21hdGljYWxseSBtb25pdG9yIHRoZSBjb25uZWN0ZWRuZXNzIG9mIERPTSByZW5kZXJlZDtcbiAgICogYXMgc3VjaCwgaXQgaXMgdGhlIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSBjYWxsZXIgdG8gYHJlbmRlcmAgdG8gZW5zdXJlIHRoYXRcbiAgICogYHBhcnQuc2V0Q29ubmVjdGVkKGZhbHNlKWAgaXMgY2FsbGVkIGJlZm9yZSB0aGUgcGFydCBvYmplY3QgaXMgcG90ZW50aWFsbHlcbiAgICogZGlzY2FyZGVkLCB0byBlbnN1cmUgdGhhdCBgQXN5bmNEaXJlY3RpdmVgcyBoYXZlIGEgY2hhbmNlIHRvIGRpc3Bvc2Ugb2ZcbiAgICogYW55IHJlc291cmNlcyBiZWluZyBoZWxkLiBJZiBhIGBSb290UGFydGAgdGhhdCB3YXMgcHJldmlvdXNseVxuICAgKiBkaXNjb25uZWN0ZWQgaXMgc3Vic2VxdWVudGx5IHJlLWNvbm5lY3RlZCAoYW5kIGl0cyBgQXN5bmNEaXJlY3RpdmVgcyBzaG91bGRcbiAgICogcmUtY29ubmVjdCksIGBzZXRDb25uZWN0ZWQodHJ1ZSlgIHNob3VsZCBiZSBjYWxsZWQuXG4gICAqXG4gICAqIEBwYXJhbSBpc0Nvbm5lY3RlZCBXaGV0aGVyIGRpcmVjdGl2ZXMgd2l0aGluIHRoaXMgdHJlZSBzaG91bGQgYmUgY29ubmVjdGVkXG4gICAqIG9yIG5vdFxuICAgKi9cbiAgc2V0Q29ubmVjdGVkKGlzQ29ubmVjdGVkOiBib29sZWFuKTogdm9pZDtcbn1cblxuZXhwb3J0IHR5cGUge0F0dHJpYnV0ZVBhcnR9O1xuY2xhc3MgQXR0cmlidXRlUGFydCBpbXBsZW1lbnRzIERpc2Nvbm5lY3RhYmxlIHtcbiAgcmVhZG9ubHkgdHlwZTpcbiAgICB8IHR5cGVvZiBBVFRSSUJVVEVfUEFSVFxuICAgIHwgdHlwZW9mIFBST1BFUlRZX1BBUlRcbiAgICB8IHR5cGVvZiBCT09MRUFOX0FUVFJJQlVURV9QQVJUXG4gICAgfCB0eXBlb2YgRVZFTlRfUEFSVCA9IEFUVFJJQlVURV9QQVJUO1xuICByZWFkb25seSBlbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xuICByZWFkb25seSBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBJZiB0aGlzIGF0dHJpYnV0ZSBwYXJ0IHJlcHJlc2VudHMgYW4gaW50ZXJwb2xhdGlvbiwgdGhpcyBjb250YWlucyB0aGVcbiAgICogc3RhdGljIHN0cmluZ3Mgb2YgdGhlIGludGVycG9sYXRpb24uIEZvciBzaW5nbGUtdmFsdWUsIGNvbXBsZXRlIGJpbmRpbmdzLFxuICAgKiB0aGlzIGlzIHVuZGVmaW5lZC5cbiAgICovXG4gIHJlYWRvbmx5IHN0cmluZ3M/OiBSZWFkb25seUFycmF5PHN0cmluZz47XG4gIC8qKiBAaW50ZXJuYWwgKi9cbiAgXyRjb21taXR0ZWRWYWx1ZTogdW5rbm93biB8IEFycmF5PHVua25vd24+ID0gbm90aGluZztcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfX2RpcmVjdGl2ZXM/OiBBcnJheTxEaXJlY3RpdmUgfCB1bmRlZmluZWQ+O1xuICAvKiogQGludGVybmFsICovXG4gIF8kcGFyZW50OiBEaXNjb25uZWN0YWJsZTtcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfJGRpc2Nvbm5lY3RhYmxlQ2hpbGRyZW4/OiBTZXQ8RGlzY29ubmVjdGFibGU+ID0gdW5kZWZpbmVkO1xuXG4gIHByb3RlY3RlZCBfc2FuaXRpemVyOiBWYWx1ZVNhbml0aXplciB8IHVuZGVmaW5lZDtcblxuICBnZXQgdGFnTmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50LnRhZ05hbWU7XG4gIH1cblxuICAvLyBTZWUgY29tbWVudCBpbiBEaXNjb25uZWN0YWJsZSBpbnRlcmZhY2UgZm9yIHdoeSB0aGlzIGlzIGEgZ2V0dGVyXG4gIGdldCBfJGlzQ29ubmVjdGVkKCkge1xuICAgIHJldHVybiB0aGlzLl8kcGFyZW50Ll8kaXNDb25uZWN0ZWQ7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBlbGVtZW50OiBIVE1MRWxlbWVudCxcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgc3RyaW5nczogUmVhZG9ubHlBcnJheTxzdHJpbmc+LFxuICAgIHBhcmVudDogRGlzY29ubmVjdGFibGUsXG4gICAgb3B0aW9uczogUmVuZGVyT3B0aW9ucyB8IHVuZGVmaW5lZFxuICApIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fJHBhcmVudCA9IHBhcmVudDtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIGlmIChzdHJpbmdzLmxlbmd0aCA+IDIgfHwgc3RyaW5nc1swXSAhPT0gJycgfHwgc3RyaW5nc1sxXSAhPT0gJycpIHtcbiAgICAgIHRoaXMuXyRjb21taXR0ZWRWYWx1ZSA9IG5ldyBBcnJheShzdHJpbmdzLmxlbmd0aCAtIDEpLmZpbGwobmV3IFN0cmluZygpKTtcbiAgICAgIHRoaXMuc3RyaW5ncyA9IHN0cmluZ3M7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuXyRjb21taXR0ZWRWYWx1ZSA9IG5vdGhpbmc7XG4gICAgfVxuICAgIGlmIChFTkFCTEVfRVhUUkFfU0VDVVJJVFlfSE9PS1MpIHtcbiAgICAgIHRoaXMuX3Nhbml0aXplciA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUgb2YgdGhpcyBwYXJ0IGJ5IHJlc29sdmluZyB0aGUgdmFsdWUgZnJvbSBwb3NzaWJseSBtdWx0aXBsZVxuICAgKiB2YWx1ZXMgYW5kIHN0YXRpYyBzdHJpbmdzIGFuZCBjb21taXR0aW5nIGl0IHRvIHRoZSBET00uXG4gICAqIElmIHRoaXMgcGFydCBpcyBzaW5nbGUtdmFsdWVkLCBgdGhpcy5fc3RyaW5nc2Agd2lsbCBiZSB1bmRlZmluZWQsIGFuZCB0aGVcbiAgICogbWV0aG9kIHdpbGwgYmUgY2FsbGVkIHdpdGggYSBzaW5nbGUgdmFsdWUgYXJndW1lbnQuIElmIHRoaXMgcGFydCBpc1xuICAgKiBtdWx0aS12YWx1ZSwgYHRoaXMuX3N0cmluZ3NgIHdpbGwgYmUgZGVmaW5lZCwgYW5kIHRoZSBtZXRob2QgaXMgY2FsbGVkXG4gICAqIHdpdGggdGhlIHZhbHVlIGFycmF5IG9mIHRoZSBwYXJ0J3Mgb3duaW5nIFRlbXBsYXRlSW5zdGFuY2UsIGFuZCBhbiBvZmZzZXRcbiAgICogaW50byB0aGUgdmFsdWUgYXJyYXkgZnJvbSB3aGljaCB0aGUgdmFsdWVzIHNob3VsZCBiZSByZWFkLlxuICAgKiBUaGlzIG1ldGhvZCBpcyBvdmVybG9hZGVkIHRoaXMgd2F5IHRvIGVsaW1pbmF0ZSBzaG9ydC1saXZlZCBhcnJheSBzbGljZXNcbiAgICogb2YgdGhlIHRlbXBsYXRlIGluc3RhbmNlIHZhbHVlcywgYW5kIGFsbG93IGEgZmFzdC1wYXRoIGZvciBzaW5nbGUtdmFsdWVkXG4gICAqIHBhcnRzLlxuICAgKlxuICAgKiBAcGFyYW0gdmFsdWUgVGhlIHBhcnQgdmFsdWUsIG9yIGFuIGFycmF5IG9mIHZhbHVlcyBmb3IgbXVsdGktdmFsdWVkIHBhcnRzXG4gICAqIEBwYXJhbSB2YWx1ZUluZGV4IHRoZSBpbmRleCB0byBzdGFydCByZWFkaW5nIHZhbHVlcyBmcm9tLiBgdW5kZWZpbmVkYCBmb3JcbiAgICogICBzaW5nbGUtdmFsdWVkIHBhcnRzXG4gICAqIEBwYXJhbSBub0NvbW1pdCBjYXVzZXMgdGhlIHBhcnQgdG8gbm90IGNvbW1pdCBpdHMgdmFsdWUgdG8gdGhlIERPTS4gVXNlZFxuICAgKiAgIGluIGh5ZHJhdGlvbiB0byBwcmltZSBhdHRyaWJ1dGUgcGFydHMgd2l0aCB0aGVpciBmaXJzdC1yZW5kZXJlZCB2YWx1ZSxcbiAgICogICBidXQgbm90IHNldCB0aGUgYXR0cmlidXRlLCBhbmQgaW4gU1NSIHRvIG5vLW9wIHRoZSBET00gb3BlcmF0aW9uIGFuZFxuICAgKiAgIGNhcHR1cmUgdGhlIHZhbHVlIGZvciBzZXJpYWxpemF0aW9uLlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF8kc2V0VmFsdWUoXG4gICAgdmFsdWU6IHVua25vd24gfCBBcnJheTx1bmtub3duPixcbiAgICBkaXJlY3RpdmVQYXJlbnQ6IERpcmVjdGl2ZVBhcmVudCA9IHRoaXMsXG4gICAgdmFsdWVJbmRleD86IG51bWJlcixcbiAgICBub0NvbW1pdD86IGJvb2xlYW5cbiAgKSB7XG4gICAgY29uc3Qgc3RyaW5ncyA9IHRoaXMuc3RyaW5ncztcblxuICAgIC8vIFdoZXRoZXIgYW55IG9mIHRoZSB2YWx1ZXMgaGFzIGNoYW5nZWQsIGZvciBkaXJ0eS1jaGVja2luZ1xuICAgIGxldCBjaGFuZ2UgPSBmYWxzZTtcblxuICAgIGlmIChzdHJpbmdzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIFNpbmdsZS12YWx1ZSBiaW5kaW5nIGNhc2VcbiAgICAgIHZhbHVlID0gcmVzb2x2ZURpcmVjdGl2ZSh0aGlzLCB2YWx1ZSwgZGlyZWN0aXZlUGFyZW50LCAwKTtcbiAgICAgIGNoYW5nZSA9XG4gICAgICAgICFpc1ByaW1pdGl2ZSh2YWx1ZSkgfHxcbiAgICAgICAgKHZhbHVlICE9PSB0aGlzLl8kY29tbWl0dGVkVmFsdWUgJiYgdmFsdWUgIT09IG5vQ2hhbmdlKTtcbiAgICAgIGlmIChjaGFuZ2UpIHtcbiAgICAgICAgdGhpcy5fJGNvbW1pdHRlZFZhbHVlID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEludGVycG9sYXRpb24gY2FzZVxuICAgICAgY29uc3QgdmFsdWVzID0gdmFsdWUgYXMgQXJyYXk8dW5rbm93bj47XG4gICAgICB2YWx1ZSA9IHN0cmluZ3NbMF07XG5cbiAgICAgIGxldCBpLCB2O1xuICAgICAgZm9yIChpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgIHYgPSByZXNvbHZlRGlyZWN0aXZlKHRoaXMsIHZhbHVlc1t2YWx1ZUluZGV4ISArIGldLCBkaXJlY3RpdmVQYXJlbnQsIGkpO1xuXG4gICAgICAgIGlmICh2ID09PSBub0NoYW5nZSkge1xuICAgICAgICAgIC8vIElmIHRoZSB1c2VyLXByb3ZpZGVkIHZhbHVlIGlzIGBub0NoYW5nZWAsIHVzZSB0aGUgcHJldmlvdXMgdmFsdWVcbiAgICAgICAgICB2ID0gKHRoaXMuXyRjb21taXR0ZWRWYWx1ZSBhcyBBcnJheTx1bmtub3duPilbaV07XG4gICAgICAgIH1cbiAgICAgICAgY2hhbmdlIHx8PVxuICAgICAgICAgICFpc1ByaW1pdGl2ZSh2KSB8fCB2ICE9PSAodGhpcy5fJGNvbW1pdHRlZFZhbHVlIGFzIEFycmF5PHVua25vd24+KVtpXTtcbiAgICAgICAgaWYgKHYgPT09IG5vdGhpbmcpIHtcbiAgICAgICAgICB2YWx1ZSA9IG5vdGhpbmc7XG4gICAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT09IG5vdGhpbmcpIHtcbiAgICAgICAgICB2YWx1ZSArPSAodiA/PyAnJykgKyBzdHJpbmdzW2kgKyAxXTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBhbHdheXMgcmVjb3JkIGVhY2ggdmFsdWUsIGV2ZW4gaWYgb25lIGlzIGBub3RoaW5nYCwgZm9yIGZ1dHVyZVxuICAgICAgICAvLyBjaGFuZ2UgZGV0ZWN0aW9uLlxuICAgICAgICAodGhpcy5fJGNvbW1pdHRlZFZhbHVlIGFzIEFycmF5PHVua25vd24+KVtpXSA9IHY7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjaGFuZ2UgJiYgIW5vQ29tbWl0KSB7XG4gICAgICB0aGlzLl9jb21taXRWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfY29tbWl0VmFsdWUodmFsdWU6IHVua25vd24pIHtcbiAgICBpZiAodmFsdWUgPT09IG5vdGhpbmcpIHtcbiAgICAgICh3cmFwKHRoaXMuZWxlbWVudCkgYXMgRWxlbWVudCkucmVtb3ZlQXR0cmlidXRlKHRoaXMubmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChFTkFCTEVfRVhUUkFfU0VDVVJJVFlfSE9PS1MpIHtcbiAgICAgICAgaWYgKHRoaXMuX3Nhbml0aXplciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGhpcy5fc2FuaXRpemVyID0gc2FuaXRpemVyRmFjdG9yeUludGVybmFsKFxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgdGhpcy5uYW1lLFxuICAgICAgICAgICAgJ2F0dHJpYnV0ZSdcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlID0gdGhpcy5fc2FuaXRpemVyKHZhbHVlID8/ICcnKTtcbiAgICAgIH1cbiAgICAgIGRlYnVnTG9nRXZlbnQgJiZcbiAgICAgICAgZGVidWdMb2dFdmVudCh7XG4gICAgICAgICAga2luZDogJ2NvbW1pdCBhdHRyaWJ1dGUnLFxuICAgICAgICAgIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgICB9KTtcbiAgICAgICh3cmFwKHRoaXMuZWxlbWVudCkgYXMgRWxlbWVudCkuc2V0QXR0cmlidXRlKFxuICAgICAgICB0aGlzLm5hbWUsXG4gICAgICAgICh2YWx1ZSA/PyAnJykgYXMgc3RyaW5nXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgdHlwZSB7UHJvcGVydHlQYXJ0fTtcbmNsYXNzIFByb3BlcnR5UGFydCBleHRlbmRzIEF0dHJpYnV0ZVBhcnQge1xuICBvdmVycmlkZSByZWFkb25seSB0eXBlID0gUFJPUEVSVFlfUEFSVDtcblxuICAvKiogQGludGVybmFsICovXG4gIG92ZXJyaWRlIF9jb21taXRWYWx1ZSh2YWx1ZTogdW5rbm93bikge1xuICAgIGlmIChFTkFCTEVfRVhUUkFfU0VDVVJJVFlfSE9PS1MpIHtcbiAgICAgIGlmICh0aGlzLl9zYW5pdGl6ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLl9zYW5pdGl6ZXIgPSBzYW5pdGl6ZXJGYWN0b3J5SW50ZXJuYWwoXG4gICAgICAgICAgdGhpcy5lbGVtZW50LFxuICAgICAgICAgIHRoaXMubmFtZSxcbiAgICAgICAgICAncHJvcGVydHknXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IHRoaXMuX3Nhbml0aXplcih2YWx1ZSk7XG4gICAgfVxuICAgIGRlYnVnTG9nRXZlbnQgJiZcbiAgICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAgICBraW5kOiAnY29tbWl0IHByb3BlcnR5JyxcbiAgICAgICAgZWxlbWVudDogdGhpcy5lbGVtZW50LFxuICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgIHZhbHVlLFxuICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICB9KTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICh0aGlzLmVsZW1lbnQgYXMgYW55KVt0aGlzLm5hbWVdID0gdmFsdWUgPT09IG5vdGhpbmcgPyB1bmRlZmluZWQgOiB2YWx1ZTtcbiAgfVxufVxuXG5leHBvcnQgdHlwZSB7Qm9vbGVhbkF0dHJpYnV0ZVBhcnR9O1xuY2xhc3MgQm9vbGVhbkF0dHJpYnV0ZVBhcnQgZXh0ZW5kcyBBdHRyaWJ1dGVQYXJ0IHtcbiAgb3ZlcnJpZGUgcmVhZG9ubHkgdHlwZSA9IEJPT0xFQU5fQVRUUklCVVRFX1BBUlQ7XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBvdmVycmlkZSBfY29tbWl0VmFsdWUodmFsdWU6IHVua25vd24pIHtcbiAgICBkZWJ1Z0xvZ0V2ZW50ICYmXG4gICAgICBkZWJ1Z0xvZ0V2ZW50KHtcbiAgICAgICAga2luZDogJ2NvbW1pdCBib29sZWFuIGF0dHJpYnV0ZScsXG4gICAgICAgIGVsZW1lbnQ6IHRoaXMuZWxlbWVudCxcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICB2YWx1ZTogISEodmFsdWUgJiYgdmFsdWUgIT09IG5vdGhpbmcpLFxuICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICB9KTtcbiAgICAod3JhcCh0aGlzLmVsZW1lbnQpIGFzIEVsZW1lbnQpLnRvZ2dsZUF0dHJpYnV0ZShcbiAgICAgIHRoaXMubmFtZSxcbiAgICAgICEhdmFsdWUgJiYgdmFsdWUgIT09IG5vdGhpbmdcbiAgICApO1xuICB9XG59XG5cbnR5cGUgRXZlbnRMaXN0ZW5lcldpdGhPcHRpb25zID0gRXZlbnRMaXN0ZW5lck9yRXZlbnRMaXN0ZW5lck9iamVjdCAmXG4gIFBhcnRpYWw8QWRkRXZlbnRMaXN0ZW5lck9wdGlvbnM+O1xuXG4vKipcbiAqIEFuIEF0dHJpYnV0ZVBhcnQgdGhhdCBtYW5hZ2VzIGFuIGV2ZW50IGxpc3RlbmVyIHZpYSBhZGQvcmVtb3ZlRXZlbnRMaXN0ZW5lci5cbiAqXG4gKiBUaGlzIHBhcnQgd29ya3MgYnkgYWRkaW5nIGl0c2VsZiBhcyB0aGUgZXZlbnQgbGlzdGVuZXIgb24gYW4gZWxlbWVudCwgdGhlblxuICogZGVsZWdhdGluZyB0byB0aGUgdmFsdWUgcGFzc2VkIHRvIGl0LiBUaGlzIHJlZHVjZXMgdGhlIG51bWJlciBvZiBjYWxscyB0b1xuICogYWRkL3JlbW92ZUV2ZW50TGlzdGVuZXIgaWYgdGhlIGxpc3RlbmVyIGNoYW5nZXMgZnJlcXVlbnRseSwgc3VjaCBhcyB3aGVuIGFuXG4gKiBpbmxpbmUgZnVuY3Rpb24gaXMgdXNlZCBhcyBhIGxpc3RlbmVyLlxuICpcbiAqIEJlY2F1c2UgZXZlbnQgb3B0aW9ucyBhcmUgcGFzc2VkIHdoZW4gYWRkaW5nIGxpc3RlbmVycywgd2UgbXVzdCB0YWtlIGNhc2VcbiAqIHRvIGFkZCBhbmQgcmVtb3ZlIHRoZSBwYXJ0IGFzIGEgbGlzdGVuZXIgd2hlbiB0aGUgZXZlbnQgb3B0aW9ucyBjaGFuZ2UuXG4gKi9cbmV4cG9ydCB0eXBlIHtFdmVudFBhcnR9O1xuY2xhc3MgRXZlbnRQYXJ0IGV4dGVuZHMgQXR0cmlidXRlUGFydCB7XG4gIG92ZXJyaWRlIHJlYWRvbmx5IHR5cGUgPSBFVkVOVF9QQVJUO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBzdHJpbmdzOiBSZWFkb25seUFycmF5PHN0cmluZz4sXG4gICAgcGFyZW50OiBEaXNjb25uZWN0YWJsZSxcbiAgICBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkXG4gICkge1xuICAgIHN1cGVyKGVsZW1lbnQsIG5hbWUsIHN0cmluZ3MsIHBhcmVudCwgb3B0aW9ucyk7XG5cbiAgICBpZiAoREVWX01PREUgJiYgdGhpcy5zdHJpbmdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYEEgXFxgPCR7ZWxlbWVudC5sb2NhbE5hbWV9PlxcYCBoYXMgYSBcXGBAJHtuYW1lfT0uLi5cXGAgbGlzdGVuZXIgd2l0aCBgICtcbiAgICAgICAgICAnaW52YWxpZCBjb250ZW50LiBFdmVudCBsaXN0ZW5lcnMgaW4gdGVtcGxhdGVzIG11c3QgaGF2ZSBleGFjdGx5ICcgK1xuICAgICAgICAgICdvbmUgZXhwcmVzc2lvbiBhbmQgbm8gc3Vycm91bmRpbmcgdGV4dC4nXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8vIEV2ZW50UGFydCBkb2VzIG5vdCB1c2UgdGhlIGJhc2UgXyRzZXRWYWx1ZS9fcmVzb2x2ZVZhbHVlIGltcGxlbWVudGF0aW9uXG4gIC8vIHNpbmNlIHRoZSBkaXJ0eSBjaGVja2luZyBpcyBtb3JlIGNvbXBsZXhcbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBvdmVycmlkZSBfJHNldFZhbHVlKFxuICAgIG5ld0xpc3RlbmVyOiB1bmtub3duLFxuICAgIGRpcmVjdGl2ZVBhcmVudDogRGlyZWN0aXZlUGFyZW50ID0gdGhpc1xuICApIHtcbiAgICBuZXdMaXN0ZW5lciA9XG4gICAgICByZXNvbHZlRGlyZWN0aXZlKHRoaXMsIG5ld0xpc3RlbmVyLCBkaXJlY3RpdmVQYXJlbnQsIDApID8/IG5vdGhpbmc7XG4gICAgaWYgKG5ld0xpc3RlbmVyID09PSBub0NoYW5nZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBvbGRMaXN0ZW5lciA9IHRoaXMuXyRjb21taXR0ZWRWYWx1ZTtcblxuICAgIC8vIElmIHRoZSBuZXcgdmFsdWUgaXMgbm90aGluZyBvciBhbnkgb3B0aW9ucyBjaGFuZ2Ugd2UgaGF2ZSB0byByZW1vdmUgdGhlXG4gICAgLy8gcGFydCBhcyBhIGxpc3RlbmVyLlxuICAgIGNvbnN0IHNob3VsZFJlbW92ZUxpc3RlbmVyID1cbiAgICAgIChuZXdMaXN0ZW5lciA9PT0gbm90aGluZyAmJiBvbGRMaXN0ZW5lciAhPT0gbm90aGluZykgfHxcbiAgICAgIChuZXdMaXN0ZW5lciBhcyBFdmVudExpc3RlbmVyV2l0aE9wdGlvbnMpLmNhcHR1cmUgIT09XG4gICAgICAgIChvbGRMaXN0ZW5lciBhcyBFdmVudExpc3RlbmVyV2l0aE9wdGlvbnMpLmNhcHR1cmUgfHxcbiAgICAgIChuZXdMaXN0ZW5lciBhcyBFdmVudExpc3RlbmVyV2l0aE9wdGlvbnMpLm9uY2UgIT09XG4gICAgICAgIChvbGRMaXN0ZW5lciBhcyBFdmVudExpc3RlbmVyV2l0aE9wdGlvbnMpLm9uY2UgfHxcbiAgICAgIChuZXdMaXN0ZW5lciBhcyBFdmVudExpc3RlbmVyV2l0aE9wdGlvbnMpLnBhc3NpdmUgIT09XG4gICAgICAgIChvbGRMaXN0ZW5lciBhcyBFdmVudExpc3RlbmVyV2l0aE9wdGlvbnMpLnBhc3NpdmU7XG5cbiAgICAvLyBJZiB0aGUgbmV3IHZhbHVlIGlzIG5vdCBub3RoaW5nIGFuZCB3ZSByZW1vdmVkIHRoZSBsaXN0ZW5lciwgd2UgaGF2ZVxuICAgIC8vIHRvIGFkZCB0aGUgcGFydCBhcyBhIGxpc3RlbmVyLlxuICAgIGNvbnN0IHNob3VsZEFkZExpc3RlbmVyID1cbiAgICAgIG5ld0xpc3RlbmVyICE9PSBub3RoaW5nICYmXG4gICAgICAob2xkTGlzdGVuZXIgPT09IG5vdGhpbmcgfHwgc2hvdWxkUmVtb3ZlTGlzdGVuZXIpO1xuXG4gICAgZGVidWdMb2dFdmVudCAmJlxuICAgICAgZGVidWdMb2dFdmVudCh7XG4gICAgICAgIGtpbmQ6ICdjb21taXQgZXZlbnQgbGlzdGVuZXInLFxuICAgICAgICBlbGVtZW50OiB0aGlzLmVsZW1lbnQsXG4gICAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgdmFsdWU6IG5ld0xpc3RlbmVyLFxuICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICAgIHJlbW92ZUxpc3RlbmVyOiBzaG91bGRSZW1vdmVMaXN0ZW5lcixcbiAgICAgICAgYWRkTGlzdGVuZXI6IHNob3VsZEFkZExpc3RlbmVyLFxuICAgICAgICBvbGRMaXN0ZW5lcixcbiAgICAgIH0pO1xuICAgIGlmIChzaG91bGRSZW1vdmVMaXN0ZW5lcikge1xuICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgIHRoaXMubmFtZSxcbiAgICAgICAgdGhpcyxcbiAgICAgICAgb2xkTGlzdGVuZXIgYXMgRXZlbnRMaXN0ZW5lcldpdGhPcHRpb25zXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoc2hvdWxkQWRkTGlzdGVuZXIpIHtcbiAgICAgIC8vIEJld2FyZTogSUUxMSBhbmQgQ2hyb21lIDQxIGRvbid0IGxpa2UgdXNpbmcgdGhlIGxpc3RlbmVyIGFzIHRoZVxuICAgICAgLy8gb3B0aW9ucyBvYmplY3QuIEZpZ3VyZSBvdXQgaG93IHRvIGRlYWwgdy8gdGhpcyBpbiBJRTExIC0gbWF5YmVcbiAgICAgIC8vIHBhdGNoIGFkZEV2ZW50TGlzdGVuZXI/XG4gICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgdGhpcy5uYW1lLFxuICAgICAgICB0aGlzLFxuICAgICAgICBuZXdMaXN0ZW5lciBhcyBFdmVudExpc3RlbmVyV2l0aE9wdGlvbnNcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMuXyRjb21taXR0ZWRWYWx1ZSA9IG5ld0xpc3RlbmVyO1xuICB9XG5cbiAgaGFuZGxlRXZlbnQoZXZlbnQ6IEV2ZW50KSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl8kY29tbWl0dGVkVmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuXyRjb21taXR0ZWRWYWx1ZS5jYWxsKHRoaXMub3B0aW9ucz8uaG9zdCA/PyB0aGlzLmVsZW1lbnQsIGV2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgKHRoaXMuXyRjb21taXR0ZWRWYWx1ZSBhcyBFdmVudExpc3RlbmVyT2JqZWN0KS5oYW5kbGVFdmVudChldmVudCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB0eXBlIHtFbGVtZW50UGFydH07XG5jbGFzcyBFbGVtZW50UGFydCBpbXBsZW1lbnRzIERpc2Nvbm5lY3RhYmxlIHtcbiAgcmVhZG9ubHkgdHlwZSA9IEVMRU1FTlRfUEFSVDtcblxuICAvKiogQGludGVybmFsICovXG4gIF9fZGlyZWN0aXZlPzogRGlyZWN0aXZlO1xuXG4gIC8vIFRoaXMgaXMgdG8gZW5zdXJlIHRoYXQgZXZlcnkgUGFydCBoYXMgYSBfJGNvbW1pdHRlZFZhbHVlXG4gIF8kY29tbWl0dGVkVmFsdWU6IHVuZGVmaW5lZDtcblxuICAvKiogQGludGVybmFsICovXG4gIF8kcGFyZW50ITogRGlzY29ubmVjdGFibGU7XG5cbiAgLyoqIEBpbnRlcm5hbCAqL1xuICBfJGRpc2Nvbm5lY3RhYmxlQ2hpbGRyZW4/OiBTZXQ8RGlzY29ubmVjdGFibGU+ID0gdW5kZWZpbmVkO1xuXG4gIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGVsZW1lbnQ6IEVsZW1lbnQsXG4gICAgcGFyZW50OiBEaXNjb25uZWN0YWJsZSxcbiAgICBvcHRpb25zOiBSZW5kZXJPcHRpb25zIHwgdW5kZWZpbmVkXG4gICkge1xuICAgIHRoaXMuXyRwYXJlbnQgPSBwYXJlbnQ7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIC8vIFNlZSBjb21tZW50IGluIERpc2Nvbm5lY3RhYmxlIGludGVyZmFjZSBmb3Igd2h5IHRoaXMgaXMgYSBnZXR0ZXJcbiAgZ2V0IF8kaXNDb25uZWN0ZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuXyRwYXJlbnQuXyRpc0Nvbm5lY3RlZDtcbiAgfVxuXG4gIF8kc2V0VmFsdWUodmFsdWU6IHVua25vd24pOiB2b2lkIHtcbiAgICBkZWJ1Z0xvZ0V2ZW50ICYmXG4gICAgICBkZWJ1Z0xvZ0V2ZW50KHtcbiAgICAgICAga2luZDogJ2NvbW1pdCB0byBlbGVtZW50IGJpbmRpbmcnLFxuICAgICAgICBlbGVtZW50OiB0aGlzLmVsZW1lbnQsXG4gICAgICAgIHZhbHVlLFxuICAgICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICB9KTtcbiAgICByZXNvbHZlRGlyZWN0aXZlKHRoaXMsIHZhbHVlKTtcbiAgfVxufVxuXG4vKipcbiAqIEVORCBVU0VSUyBTSE9VTEQgTk9UIFJFTFkgT04gVEhJUyBPQkpFQ1QuXG4gKlxuICogUHJpdmF0ZSBleHBvcnRzIGZvciB1c2UgYnkgb3RoZXIgTGl0IHBhY2thZ2VzLCBub3QgaW50ZW5kZWQgZm9yIHVzZSBieVxuICogZXh0ZXJuYWwgdXNlcnMuXG4gKlxuICogV2UgY3VycmVudGx5IGRvIG5vdCBtYWtlIGEgbWFuZ2xlZCByb2xsdXAgYnVpbGQgb2YgdGhlIGxpdC1zc3IgY29kZS4gSW4gb3JkZXJcbiAqIHRvIGtlZXAgYSBudW1iZXIgb2YgKG90aGVyd2lzZSBwcml2YXRlKSB0b3AtbGV2ZWwgZXhwb3J0cyBtYW5nbGVkIGluIHRoZVxuICogY2xpZW50IHNpZGUgY29kZSwgd2UgZXhwb3J0IGEgXyRMSCBvYmplY3QgY29udGFpbmluZyB0aG9zZSBtZW1iZXJzIChvclxuICogaGVscGVyIG1ldGhvZHMgZm9yIGFjY2Vzc2luZyBwcml2YXRlIGZpZWxkcyBvZiB0aG9zZSBtZW1iZXJzKSwgYW5kIHRoZW5cbiAqIHJlLWV4cG9ydCB0aGVtIGZvciB1c2UgaW4gbGl0LXNzci4gVGhpcyBrZWVwcyBsaXQtc3NyIGFnbm9zdGljIHRvIHdoZXRoZXIgdGhlXG4gKiBjbGllbnQtc2lkZSBjb2RlIGlzIGJlaW5nIHVzZWQgaW4gYGRldmAgbW9kZSBvciBgcHJvZGAgbW9kZS5cbiAqXG4gKiBUaGlzIGhhcyBhIHVuaXF1ZSBuYW1lLCB0byBkaXNhbWJpZ3VhdGUgaXQgZnJvbSBwcml2YXRlIGV4cG9ydHMgaW5cbiAqIGxpdC1lbGVtZW50LCB3aGljaCByZS1leHBvcnRzIGFsbCBvZiBsaXQtaHRtbC5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5leHBvcnQgY29uc3QgXyRMSCA9IHtcbiAgLy8gVXNlZCBpbiBsaXQtc3NyXG4gIF9ib3VuZEF0dHJpYnV0ZVN1ZmZpeDogYm91bmRBdHRyaWJ1dGVTdWZmaXgsXG4gIF9tYXJrZXI6IG1hcmtlcixcbiAgX21hcmtlck1hdGNoOiBtYXJrZXJNYXRjaCxcbiAgX0hUTUxfUkVTVUxUOiBIVE1MX1JFU1VMVCxcbiAgX2dldFRlbXBsYXRlSHRtbDogZ2V0VGVtcGxhdGVIdG1sLFxuICAvLyBVc2VkIGluIHRlc3RzIGFuZCBwcml2YXRlLXNzci1zdXBwb3J0XG4gIF9UZW1wbGF0ZUluc3RhbmNlOiBUZW1wbGF0ZUluc3RhbmNlLFxuICBfaXNJdGVyYWJsZTogaXNJdGVyYWJsZSxcbiAgX3Jlc29sdmVEaXJlY3RpdmU6IHJlc29sdmVEaXJlY3RpdmUsXG4gIF9DaGlsZFBhcnQ6IENoaWxkUGFydCxcbiAgX0F0dHJpYnV0ZVBhcnQ6IEF0dHJpYnV0ZVBhcnQsXG4gIF9Cb29sZWFuQXR0cmlidXRlUGFydDogQm9vbGVhbkF0dHJpYnV0ZVBhcnQsXG4gIF9FdmVudFBhcnQ6IEV2ZW50UGFydCxcbiAgX1Byb3BlcnR5UGFydDogUHJvcGVydHlQYXJ0LFxuICBfRWxlbWVudFBhcnQ6IEVsZW1lbnRQYXJ0LFxufTtcblxuLy8gQXBwbHkgcG9seWZpbGxzIGlmIGF2YWlsYWJsZVxuY29uc3QgcG9seWZpbGxTdXBwb3J0ID0gREVWX01PREVcbiAgPyBnbG9iYWwubGl0SHRtbFBvbHlmaWxsU3VwcG9ydERldk1vZGVcbiAgOiBnbG9iYWwubGl0SHRtbFBvbHlmaWxsU3VwcG9ydDtcbnBvbHlmaWxsU3VwcG9ydD8uKFRlbXBsYXRlLCBDaGlsZFBhcnQpO1xuXG4vLyBJTVBPUlRBTlQ6IGRvIG5vdCBjaGFuZ2UgdGhlIHByb3BlcnR5IG5hbWUgb3IgdGhlIGFzc2lnbm1lbnQgZXhwcmVzc2lvbi5cbi8vIFRoaXMgbGluZSB3aWxsIGJlIHVzZWQgaW4gcmVnZXhlcyB0byBzZWFyY2ggZm9yIGxpdC1odG1sIHVzYWdlLlxuKGdsb2JhbC5saXRIdG1sVmVyc2lvbnMgPz89IFtdKS5wdXNoKCczLjIuMScpO1xuaWYgKERFVl9NT0RFICYmIGdsb2JhbC5saXRIdG1sVmVyc2lvbnMubGVuZ3RoID4gMSkge1xuICBpc3N1ZVdhcm5pbmchKFxuICAgICdtdWx0aXBsZS12ZXJzaW9ucycsXG4gICAgYE11bHRpcGxlIHZlcnNpb25zIG9mIExpdCBsb2FkZWQuIGAgK1xuICAgICAgYExvYWRpbmcgbXVsdGlwbGUgdmVyc2lvbnMgaXMgbm90IHJlY29tbWVuZGVkLmBcbiAgKTtcbn1cblxuLyoqXG4gKiBSZW5kZXJzIGEgdmFsdWUsIHVzdWFsbHkgYSBsaXQtaHRtbCBUZW1wbGF0ZVJlc3VsdCwgdG8gdGhlIGNvbnRhaW5lci5cbiAqXG4gKiBUaGlzIGV4YW1wbGUgcmVuZGVycyB0aGUgdGV4dCBcIkhlbGxvLCBab2UhXCIgaW5zaWRlIGEgcGFyYWdyYXBoIHRhZywgYXBwZW5kaW5nXG4gKiBpdCB0byB0aGUgY29udGFpbmVyIGBkb2N1bWVudC5ib2R5YC5cbiAqXG4gKiBgYGBqc1xuICogaW1wb3J0IHtodG1sLCByZW5kZXJ9IGZyb20gJ2xpdCc7XG4gKlxuICogY29uc3QgbmFtZSA9IFwiWm9lXCI7XG4gKiByZW5kZXIoaHRtbGA8cD5IZWxsbywgJHtuYW1lfSE8L3A+YCwgZG9jdW1lbnQuYm9keSk7XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gdmFsdWUgQW55IFtyZW5kZXJhYmxlXG4gKiAgIHZhbHVlXShodHRwczovL2xpdC5kZXYvZG9jcy90ZW1wbGF0ZXMvZXhwcmVzc2lvbnMvI2NoaWxkLWV4cHJlc3Npb25zKSxcbiAqICAgdHlwaWNhbGx5IGEge0BsaW5rY29kZSBUZW1wbGF0ZVJlc3VsdH0gY3JlYXRlZCBieSBldmFsdWF0aW5nIGEgdGVtcGxhdGUgdGFnXG4gKiAgIGxpa2Uge0BsaW5rY29kZSBodG1sfSBvciB7QGxpbmtjb2RlIHN2Z30uXG4gKiBAcGFyYW0gY29udGFpbmVyIEEgRE9NIGNvbnRhaW5lciB0byByZW5kZXIgdG8uIFRoZSBmaXJzdCByZW5kZXIgd2lsbCBhcHBlbmRcbiAqICAgdGhlIHJlbmRlcmVkIHZhbHVlIHRvIHRoZSBjb250YWluZXIsIGFuZCBzdWJzZXF1ZW50IHJlbmRlcnMgd2lsbFxuICogICBlZmZpY2llbnRseSB1cGRhdGUgdGhlIHJlbmRlcmVkIHZhbHVlIGlmIHRoZSBzYW1lIHJlc3VsdCB0eXBlIHdhc1xuICogICBwcmV2aW91c2x5IHJlbmRlcmVkIHRoZXJlLlxuICogQHBhcmFtIG9wdGlvbnMgU2VlIHtAbGlua2NvZGUgUmVuZGVyT3B0aW9uc30gZm9yIG9wdGlvbnMgZG9jdW1lbnRhdGlvbi5cbiAqIEBzZWVcbiAqIHtAbGluayBodHRwczovL2xpdC5kZXYvZG9jcy9saWJyYXJpZXMvc3RhbmRhbG9uZS10ZW1wbGF0ZXMvI3JlbmRlcmluZy1saXQtaHRtbC10ZW1wbGF0ZXN8IFJlbmRlcmluZyBMaXQgSFRNTCBUZW1wbGF0ZXN9XG4gKi9cbmV4cG9ydCBjb25zdCByZW5kZXIgPSAoXG4gIHZhbHVlOiB1bmtub3duLFxuICBjb250YWluZXI6IEhUTUxFbGVtZW50IHwgRG9jdW1lbnRGcmFnbWVudCxcbiAgb3B0aW9ucz86IFJlbmRlck9wdGlvbnNcbik6IFJvb3RQYXJ0ID0+IHtcbiAgaWYgKERFVl9NT0RFICYmIGNvbnRhaW5lciA9PSBudWxsKSB7XG4gICAgLy8gR2l2ZSBhIGNsZWFyZXIgZXJyb3IgbWVzc2FnZSB0aGFuXG4gICAgLy8gICAgIFVuY2F1Z2h0IFR5cGVFcnJvcjogQ2Fubm90IHJlYWQgcHJvcGVydGllcyBvZiBudWxsIChyZWFkaW5nXG4gICAgLy8gICAgICdfJGxpdFBhcnQkJylcbiAgICAvLyB3aGljaCByZWFkcyBsaWtlIGFuIGludGVybmFsIExpdCBlcnJvci5cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBUaGUgY29udGFpbmVyIHRvIHJlbmRlciBpbnRvIG1heSBub3QgYmUgJHtjb250YWluZXJ9YCk7XG4gIH1cbiAgY29uc3QgcmVuZGVySWQgPSBERVZfTU9ERSA/IGRlYnVnTG9nUmVuZGVySWQrKyA6IDA7XG4gIGNvbnN0IHBhcnRPd25lck5vZGUgPSBvcHRpb25zPy5yZW5kZXJCZWZvcmUgPz8gY29udGFpbmVyO1xuICAvLyBUaGlzIHByb3BlcnR5IG5lZWRzIHRvIHJlbWFpbiB1bm1pbmlmaWVkLlxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICBsZXQgcGFydDogQ2hpbGRQYXJ0ID0gKHBhcnRPd25lck5vZGUgYXMgYW55KVsnXyRsaXRQYXJ0JCddO1xuICBkZWJ1Z0xvZ0V2ZW50ICYmXG4gICAgZGVidWdMb2dFdmVudCh7XG4gICAgICBraW5kOiAnYmVnaW4gcmVuZGVyJyxcbiAgICAgIGlkOiByZW5kZXJJZCxcbiAgICAgIHZhbHVlLFxuICAgICAgY29udGFpbmVyLFxuICAgICAgb3B0aW9ucyxcbiAgICAgIHBhcnQsXG4gICAgfSk7XG4gIGlmIChwYXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBlbmROb2RlID0gb3B0aW9ucz8ucmVuZGVyQmVmb3JlID8/IG51bGw7XG4gICAgLy8gVGhpcyBwcm9wZXJ0eSBuZWVkcyB0byByZW1haW4gdW5taW5pZmllZC5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIChwYXJ0T3duZXJOb2RlIGFzIGFueSlbJ18kbGl0UGFydCQnXSA9IHBhcnQgPSBuZXcgQ2hpbGRQYXJ0KFxuICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShjcmVhdGVNYXJrZXIoKSwgZW5kTm9kZSksXG4gICAgICBlbmROb2RlLFxuICAgICAgdW5kZWZpbmVkLFxuICAgICAgb3B0aW9ucyA/PyB7fVxuICAgICk7XG4gIH1cbiAgcGFydC5fJHNldFZhbHVlKHZhbHVlKTtcbiAgZGVidWdMb2dFdmVudCAmJlxuICAgIGRlYnVnTG9nRXZlbnQoe1xuICAgICAga2luZDogJ2VuZCByZW5kZXInLFxuICAgICAgaWQ6IHJlbmRlcklkLFxuICAgICAgdmFsdWUsXG4gICAgICBjb250YWluZXIsXG4gICAgICBvcHRpb25zLFxuICAgICAgcGFydCxcbiAgICB9KTtcbiAgcmV0dXJuIHBhcnQgYXMgUm9vdFBhcnQ7XG59O1xuXG5pZiAoRU5BQkxFX0VYVFJBX1NFQ1VSSVRZX0hPT0tTKSB7XG4gIHJlbmRlci5zZXRTYW5pdGl6ZXIgPSBzZXRTYW5pdGl6ZXI7XG4gIHJlbmRlci5jcmVhdGVTYW5pdGl6ZXIgPSBjcmVhdGVTYW5pdGl6ZXI7XG4gIGlmIChERVZfTU9ERSkge1xuICAgIHJlbmRlci5fdGVzdE9ubHlDbGVhclNhbml0aXplckZhY3RvcnlEb05vdENhbGxPckVsc2UgPVxuICAgICAgX3Rlc3RPbmx5Q2xlYXJTYW5pdGl6ZXJGYWN0b3J5RG9Ob3RDYWxsT3JFbHNlO1xuICB9XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9cbmZ1bmN0aW9uKm8obyxmKXtpZih2b2lkIDAhPT1vKXtsZXQgaT0wO2Zvcihjb25zdCB0IG9mIG8peWllbGQgZih0LGkrKyl9fWV4cG9ydHtvIGFzIG1hcH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1tYXAuanMubWFwXG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGl0ZXJhYmxlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIGBmKHZhbHVlKWAgb24gZWFjaFxuICogdmFsdWUgaW4gYGl0ZW1zYC5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGBgYHRzXG4gKiByZW5kZXIoKSB7XG4gKiAgIHJldHVybiBodG1sYFxuICogICAgIDx1bD5cbiAqICAgICAgICR7bWFwKGl0ZW1zLCAoaSkgPT4gaHRtbGA8bGk+JHtpfTwvbGk+YCl9XG4gKiAgICAgPC91bD5cbiAqICAgYDtcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24qIG1hcDxUPihcbiAgaXRlbXM6IEl0ZXJhYmxlPFQ+IHwgdW5kZWZpbmVkLFxuICBmOiAodmFsdWU6IFQsIGluZGV4OiBudW1iZXIpID0+IHVua25vd25cbikge1xuICBpZiAoaXRlbXMgIT09IHVuZGVmaW5lZCkge1xuICAgIGxldCBpID0gMDtcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIGl0ZW1zKSB7XG4gICAgICB5aWVsZCBmKHZhbHVlLCBpKyspO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEJTRC0zLUNsYXVzZVxuICovXG5jb25zdCByPShyLG8sdCk9Pntmb3IoY29uc3QgdCBvZiBvKWlmKHRbMF09PT1yKXJldHVybigwLHRbMV0pKCk7cmV0dXJuIHQ/LigpfTtleHBvcnR7ciBhcyBjaG9vc2V9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2hvb3NlLmpzLm1hcFxuIiwiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEJTRC0zLUNsYXVzZVxuICovXG5cbi8qKlxuICogQ2hvb3NlcyBhbmQgZXZhbHVhdGVzIGEgdGVtcGxhdGUgZnVuY3Rpb24gZnJvbSBhIGxpc3QgYmFzZWQgb24gbWF0Y2hpbmdcbiAqIHRoZSBnaXZlbiBgdmFsdWVgIHRvIGEgY2FzZS5cbiAqXG4gKiBDYXNlcyBhcmUgc3RydWN0dXJlZCBhcyBgW2Nhc2VWYWx1ZSwgZnVuY11gLiBgdmFsdWVgIGlzIG1hdGNoZWQgdG9cbiAqIGBjYXNlVmFsdWVgIGJ5IHN0cmljdCBlcXVhbGl0eS4gVGhlIGZpcnN0IG1hdGNoIGlzIHNlbGVjdGVkLiBDYXNlIHZhbHVlc1xuICogY2FuIGJlIG9mIGFueSB0eXBlIGluY2x1ZGluZyBwcmltaXRpdmVzLCBvYmplY3RzLCBhbmQgc3ltYm9scy5cbiAqXG4gKiBUaGlzIGlzIHNpbWlsYXIgdG8gYSBzd2l0Y2ggc3RhdGVtZW50LCBidXQgYXMgYW4gZXhwcmVzc2lvbiBhbmQgd2l0aG91dFxuICogZmFsbHRocm91Z2guXG4gKlxuICogQGV4YW1wbGVcbiAqXG4gKiBgYGB0c1xuICogcmVuZGVyKCkge1xuICogICByZXR1cm4gaHRtbGBcbiAqICAgICAke2Nob29zZSh0aGlzLnNlY3Rpb24sIFtcbiAqICAgICAgIFsnaG9tZScsICgpID0+IGh0bWxgPGgxPkhvbWU8L2gxPmBdLFxuICogICAgICAgWydhYm91dCcsICgpID0+IGh0bWxgPGgxPkFib3V0PC9oMT5gXVxuICogICAgIF0sXG4gKiAgICAgKCkgPT4gaHRtbGA8aDE+RXJyb3I8L2gxPmApfVxuICogICBgO1xuICogfVxuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCBjaG9vc2UgPSA8VCwgViwgSyBleHRlbmRzIFQgPSBUPihcbiAgdmFsdWU6IFQsXG4gIGNhc2VzOiBBcnJheTxbSywgKCkgPT4gVl0+LFxuICBkZWZhdWx0Q2FzZT86ICgpID0+IFZcbikgPT4ge1xuICBmb3IgKGNvbnN0IGMgb2YgY2FzZXMpIHtcbiAgICBjb25zdCBjYXNlVmFsdWUgPSBjWzBdO1xuICAgIGlmIChjYXNlVmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICBjb25zdCBmbiA9IGNbMV07XG4gICAgICByZXR1cm4gZm4oKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRlZmF1bHRDYXNlPy4oKTtcbn07XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKi9cbmZ1bmN0aW9uIG4obixyLHQpe3JldHVybiBuP3Iobik6dD8uKG4pfWV4cG9ydHtuIGFzIHdoZW59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2hlbi5qcy5tYXBcbiIsIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBCU0QtMy1DbGF1c2VcbiAqL1xuXG50eXBlIEZhbHN5ID0gbnVsbCB8IHVuZGVmaW5lZCB8IGZhbHNlIHwgMCB8IC0wIHwgMG4gfCAnJztcblxuLyoqXG4gKiBXaGVuIGBjb25kaXRpb25gIGlzIHRydWUsIHJldHVybnMgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIGB0cnVlQ2FzZSgpYCwgZWxzZVxuICogcmV0dXJucyB0aGUgcmVzdWx0IG9mIGNhbGxpbmcgYGZhbHNlQ2FzZSgpYCBpZiBgZmFsc2VDYXNlYCBpcyBkZWZpbmVkLlxuICpcbiAqIFRoaXMgaXMgYSBjb252ZW5pZW5jZSB3cmFwcGVyIGFyb3VuZCBhIHRlcm5hcnkgZXhwcmVzc2lvbiB0aGF0IG1ha2VzIGl0IGFcbiAqIGxpdHRsZSBuaWNlciB0byB3cml0ZSBhbiBpbmxpbmUgY29uZGl0aW9uYWwgd2l0aG91dCBhbiBlbHNlLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogYGBgdHNcbiAqIHJlbmRlcigpIHtcbiAqICAgcmV0dXJuIGh0bWxgXG4gKiAgICAgJHt3aGVuKHRoaXMudXNlciwgKCkgPT4gaHRtbGBVc2VyOiAke3RoaXMudXNlci51c2VybmFtZX1gLCAoKSA9PiBodG1sYFNpZ24gSW4uLi5gKX1cbiAqICAgYDtcbiAqIH1cbiAqIGBgYFxuICovXG5leHBvcnQgZnVuY3Rpb24gd2hlbjxDIGV4dGVuZHMgRmFsc3ksIFQsIEYgPSB1bmRlZmluZWQ+KFxuICBjb25kaXRpb246IEMsXG4gIHRydWVDYXNlOiAoYzogQykgPT4gVCxcbiAgZmFsc2VDYXNlPzogKGM6IEMpID0+IEZcbik6IEY7XG5leHBvcnQgZnVuY3Rpb24gd2hlbjxDLCBULCBGPihcbiAgY29uZGl0aW9uOiBDIGV4dGVuZHMgRmFsc3kgPyBuZXZlciA6IEMsXG4gIHRydWVDYXNlOiAoYzogQykgPT4gVCxcbiAgZmFsc2VDYXNlPzogKGM6IEMpID0+IEZcbik6IFQ7XG5leHBvcnQgZnVuY3Rpb24gd2hlbjxDLCBULCBGID0gdW5kZWZpbmVkPihcbiAgY29uZGl0aW9uOiBDLFxuICB0cnVlQ2FzZTogKGM6IEV4Y2x1ZGU8QywgRmFsc3k+KSA9PiBULFxuICBmYWxzZUNhc2U/OiAoYzogRXh0cmFjdDxDLCBGYWxzeT4pID0+IEZcbik6IEMgZXh0ZW5kcyBGYWxzeSA/IEYgOiBUO1xuZXhwb3J0IGZ1bmN0aW9uIHdoZW4oXG4gIGNvbmRpdGlvbjogdW5rbm93bixcbiAgdHJ1ZUNhc2U6IChjOiB1bmtub3duKSA9PiB1bmtub3duLFxuICBmYWxzZUNhc2U/OiAoYzogdW5rbm93bikgPT4gdW5rbm93blxuKTogdW5rbm93biB7XG4gIHJldHVybiBjb25kaXRpb24gPyB0cnVlQ2FzZShjb25kaXRpb24pIDogZmFsc2VDYXNlPy4oY29uZGl0aW9uKTtcbn1cbiIsImltcG9ydCB7TGl0RWxlbWVudH0gZnJvbSAnI2N1c3RvbWFyeS9saXQnO1xuaW1wb3J0IHtnZXREZWZpbml0aW9ufSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlEZWZpbml0aW9uLmpzXCI7XG5pbXBvcnQge1Byb3BlcnR5VmFsdWVzfSBmcm9tIFwiQGxpdC9yZWFjdGl2ZS1lbGVtZW50XCI7XG5cbnR5cGUgQ29uc3RydWN0b3I8VCA9IHt9PiA9IG5ldyAoLi4uYXJnczogYW55W10pID0+IFQ7XG5cbnR5cGUgQ3VzdG9tYXJ5TGlzdGVuZXIgPSAoZWxlbWVudDogSFRNTEVsZW1lbnQsIGV2ZW50OiBFdmVudCkgPT4gdm9pZDtcblxuZXhwb3J0IGZ1bmN0aW9uIE1peGluX2FkZEV2ZW50SGFuZGxlcnNcblx0XHQ8VCBleHRlbmRzIENvbnN0cnVjdG9yPExpdEVsZW1lbnQ+PihzdXBlckNsYXNzOiBUKTogVCB7XG5cdFx0XHRjbGFzcyBNaXhpbl9hZGRFdmVudEhhbmRsZXJzX0NsYXNzIGV4dGVuZHMgc3VwZXJDbGFzcyB7XG5cdFx0XHRcdC8vIG5vaW5zcGVjdGlvbiBKU1VudXNlZEdsb2JhbFN5bWJvbHNcblx0XHRcdFx0cHJvdGVjdGVkIG92ZXJyaWRlIHVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVzKSB7XG5cdFx0XHRcdFx0c3VwZXIudXBkYXRlZD8uKGNoYW5nZWRQcm9wZXJ0aWVzKTtcblxuXHRcdFx0XHRcdGNvbnN0IGRlZmluaXRpb24gPSBnZXREZWZpbml0aW9uKHRoaXMpO1xuXG5cdFx0XHRcdFx0Y29uc3QgZXZlbnRzID1cblx0XHRcdFx0XHRcdFx0ZGVmaW5pdGlvbi5kZWNsYXJhdGlvbi5ob29rcz8uZXZlbnRzO1xuXHRcdFx0XHRcdGlmICghZXZlbnRzKSByZXR1cm47XG5cblx0XHRcdFx0XHRpZiAoZXZlbnRzIGluc3RhbmNlb2YgQXJyYXkpIHtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgY3VzdG9tYXJ5RXZlbnQgb2YgZXZlbnRzKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNlbGVjdG9yID0gY3VzdG9tYXJ5RXZlbnQuc2VsZWN0b3I7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHR5cGUgPSBjdXN0b21hcnlFdmVudC50eXBlO1xuXHRcdFx0XHRcdFx0XHRjb25zdCBsaXN0ZW5lciA9IGN1c3RvbWFyeUV2ZW50Lmxpc3RlbmVyO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmFkZEV2ZW50SGFuZGxlcihzZWxlY3RvciwgdHlwZSwgbGlzdGVuZXIgYXMgYW55KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IFtzZWxlY3RvciwgbGlzdGVuZXJdIG9mIE9iamVjdC5lbnRyaWVzKGV2ZW50cykpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgdHlwZSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0dGhpcy5hZGRFdmVudEhhbmRsZXIoc2VsZWN0b3IsIHR5cGUsIGxpc3RlbmVyIGFzIGFueSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cHJpdmF0ZSBhZGRFdmVudEhhbmRsZXIoXG5cdFx0XHRcdFx0XHRzZWxlY3Rvcjogc3RyaW5nIHwgdW5kZWZpbmVkLFxuXHRcdFx0XHRcdFx0dHlwZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuXHRcdFx0XHRcdFx0bGlzdGVuZXI6IEN1c3RvbWFyeUxpc3RlbmVyXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdGlmICghc2VsZWN0b3IpIHtcblx0XHRcdFx0XHRcdHRoaXMuYWRkQ3VzdG9tRXZlbnRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lcik7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y29uc3QgcGFyZW50OiBQYXJlbnROb2RlID0gdGhpcy5zaGFkb3dSb290ID8/IHRoaXM7XG5cdFx0XHRcdFx0Y29uc3QgZWxlbWVudHM6IE5vZGVMaXN0T2Y8RWxlbWVudD4gPSBwYXJlbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XG5cdFx0XHRcdFx0XHR0aGlzLmFkZEN1c3RvbUV2ZW50TGlzdGVuZXIoZWxlbWVudCwgdHlwZSwgbGlzdGVuZXIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHByaXZhdGUgYWRkQ3VzdG9tRXZlbnRMaXN0ZW5lcihcblx0XHRcdFx0XHRcdGVsZW1lbnQ6IEVsZW1lbnQsXG5cdFx0XHRcdFx0XHR0eXBlOiBzdHJpbmcgfCB1bmRlZmluZWQsXG5cdFx0XHRcdFx0XHRsaXN0ZW5lcjogQ3VzdG9tYXJ5TGlzdGVuZXJcblx0XHRcdFx0KVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0Y29uc3QgbGlzdGVuZXJzOiBBcnJheTxDdXN0b21hcnlMaXN0ZW5lcj4gPVxuXHRcdFx0XHRcdFx0XHQoZWxlbWVudCBhcyBhbnkpLl9fY3VzdG9tYXJ5X2xpc3RlbmVycyA/Pz0gW107XG5cdFx0XHRcdFx0aWYgKGxpc3RlbmVycy5pbmNsdWRlcyhsaXN0ZW5lcikpIHtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgdGFnTmFtZSA9IGVsZW1lbnQudGFnTmFtZTtcblx0XHRcdFx0XHRlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG5cdFx0XHRcdFx0XHRcdHR5cGUgPz9cblx0XHRcdFx0XHRcdFx0REVGQVVMVF9FVkVOVF9UWVBFU1t0YWdOYW1lXSA/P1xuXHRcdFx0XHRcdFx0XHQoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcblx0XHRcdFx0XHRcdFx0XHRcdFx0YCR7dGhpcy50YWdOYW1lLnRvTG93ZXJDYXNlKCl9OiAke3RhZ05hbWV9IGVsZW1lbnRzYCArXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgcmVxdWlyZSB5b3UgdG8gcHJvdmlkZSBhbiBldmVudCB0eXBlJyArXG5cdFx0XHRcdFx0XHRcdFx0XHRcdCcgYmVjYXVzZSBDdXN0b21hcnkgaGFzIG5vdCBkZWZpbmVkIGEgZGVmYXVsdCB5ZXQnXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fSkoKSxcblx0XHRcdFx0XHRcdFx0KGV2ZW50OiBFdmVudCkgPT4gbGlzdGVuZXIodGhpcywgZXZlbnQpXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRsaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIE1peGluX2FkZEV2ZW50SGFuZGxlcnNfQ2xhc3M7XG5cdFx0fVxuXG5jb25zdCBERUZBVUxUX0VWRU5UX1RZUEVTOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuXHQnQSc6ICdjbGljaycsXG5cdCdCVVRUT04nOiAnY2xpY2snLFxuXHQnRk9STSc6ICdzdWJtaXQnLFxuXHQnSU5QVVQnOiAnaW5wdXQnLFxuXHQnU0VMRUNUJzogJ2lucHV0Jyxcblx0J1RBQkxFJzogJ2NsaWNrJyxcblx0J1RFWFRBUkVBJzogJ2lucHV0Jyxcbn0iLCJpbXBvcnQge0xpdEVsZW1lbnR9IGZyb20gJyNjdXN0b21hcnkvbGl0JztcbmltcG9ydCB7Z2V0RGVmaW5pdGlvbn0gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5RGVmaW5pdGlvbi5qc1wiO1xuXG50eXBlIENvbnN0cnVjdG9yPFQgPSB7fT4gPSBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBUO1xuXG5leHBvcnQgZnVuY3Rpb24gTWl4aW5fYWRvcHRTdHlsZVNoZWV0XG48VCBleHRlbmRzIENvbnN0cnVjdG9yPExpdEVsZW1lbnQ+PihzdXBlckNsYXNzOiBUKTogVCB7XG5cdGNsYXNzIE1peGluX2Fkb3B0U3R5bGVTaGVldF9DbGFzcyBleHRlbmRzIHN1cGVyQ2xhc3Mge1xuXHRcdC8vIG5vaW5zcGVjdGlvbiBKU1VudXNlZEdsb2JhbFN5bWJvbHNcblx0XHRvdmVycmlkZSBmaXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXM6IE1hcDxzdHJpbmcsIGFueT4pIHtcblx0XHRcdHN1cGVyLmZpcnN0VXBkYXRlZD8uKGNoYW5nZWRQcm9wZXJ0aWVzKTtcblxuXHRcdFx0Y29uc3QgZGVmaW5pdGlvbiA9IGdldERlZmluaXRpb24odGhpcyk7XG5cblx0XHRcdGNvbnN0IHtjc3NTdHlsZVNoZWV0fSA9IGRlZmluaXRpb247XG5cdFx0XHRpZiAoIWNzc1N0eWxlU2hlZXQpIHJldHVybjtcblxuXHRcdFx0Y29uc3QgYWRvcHRlcjogRG9jdW1lbnRPclNoYWRvd1Jvb3QgPSB0aGlzLnNoYWRvd1Jvb3QgPz8gZG9jdW1lbnQ7XG5cdFx0XHRhZG9wdGVyLmFkb3B0ZWRTdHlsZVNoZWV0cy5wdXNoKGNzc1N0eWxlU2hlZXQpO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gTWl4aW5fYWRvcHRTdHlsZVNoZWV0X0NsYXNzO1xufVxuIiwiaW1wb3J0IHtMaXRFbGVtZW50fSBmcm9tICcjY3VzdG9tYXJ5L2xpdCc7XG5pbXBvcnQge2dldERlZmluaXRpb259IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeURlZmluaXRpb24uanNcIjtcblxudHlwZSBDb25zdHJ1Y3RvcjxUID0ge30+ID0gbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gVDtcblxuZXhwb3J0IGZ1bmN0aW9uIE1peGluX2F0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1xuXHRcdDxUIGV4dGVuZHMgQ29uc3RydWN0b3I8TGl0RWxlbWVudD4+KHN1cGVyQ2xhc3M6IFQpOiBUIHtcblx0Y2xhc3MgTWl4aW5fYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrX0NsYXNzIGV4dGVuZHMgc3VwZXJDbGFzcyB7XG5cdFx0Ly8gbm9pbnNwZWN0aW9uIEpTVW51c2VkR2xvYmFsU3ltYm9sc1xuXHRcdG92ZXJyaWRlIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lOiBzdHJpbmcsIG9sZFZhbHVlOiBzdHJpbmcgfCBudWxsLCBuZXdWYWx1ZTogc3RyaW5nIHwgbnVsbCkge1xuXHRcdFx0c3VwZXIuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSk7XG5cblx0XHRcdGNvbnN0IGRlZmluaXRpb24gPSBnZXREZWZpbml0aW9uKHRoaXMpO1xuXG5cdFx0XHRkZWZpbml0aW9uLmRlY2xhcmF0aW9uLmhvb2tzPy5kb20/LmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1xuXHRcdFx0XHRcdD8uKHRoaXMsIG5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBNaXhpbl9hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tfQ2xhc3M7XG59XG4iLCJpbXBvcnQge0xpdEVsZW1lbnR9IGZyb20gJyNjdXN0b21hcnkvbGl0JztcbmltcG9ydCB7Z2V0RGVmaW5pdGlvbn0gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5RGVmaW5pdGlvbi5qc1wiO1xuXG50eXBlIENvbnN0cnVjdG9yPFQgPSB7fT4gPSBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBUO1xuXG5leHBvcnQgZnVuY3Rpb24gTWl4aW5fY29ubmVjdGVkXG5cdFx0PFQgZXh0ZW5kcyBDb25zdHJ1Y3RvcjxMaXRFbGVtZW50Pj4oc3VwZXJDbGFzczogVCk6IFQge1xuXHRcdFx0Y2xhc3MgTWl4aW5fY29ubmVjdGVkX0NsYXNzIGV4dGVuZHMgc3VwZXJDbGFzcyB7XG5cdFx0XHRcdC8vIG5vaW5zcGVjdGlvbiBKU1VudXNlZEdsb2JhbFN5bWJvbHNcblx0XHRcdFx0b3ZlcnJpZGUgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG5cdFx0XHRcdFx0c3VwZXIuY29ubmVjdGVkQ2FsbGJhY2s/LigpO1xuXG5cdFx0XHRcdFx0Y29uc3QgZGVmaW5pdGlvbiA9IGdldERlZmluaXRpb24odGhpcyk7XG5cblx0XHRcdFx0XHRkZWZpbml0aW9uLmRlY2xhcmF0aW9uLmhvb2tzPy5saWZlY3ljbGU/LmNvbm5lY3RlZD8uKHRoaXMpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gTWl4aW5fY29ubmVjdGVkX0NsYXNzO1xuXHRcdH1cbiIsImltcG9ydCB7TGl0RWxlbWVudH0gZnJvbSAnI2N1c3RvbWFyeS9saXQnO1xuaW1wb3J0IHtnZXREZWZpbml0aW9ufSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlEZWZpbml0aW9uLmpzXCI7XG5cbnR5cGUgQ29uc3RydWN0b3I8VCA9IHt9PiA9IG5ldyAoLi4uYXJnczogYW55W10pID0+IFQ7XG5cbmV4cG9ydCBmdW5jdGlvbiBNaXhpbl9kaXNjb25uZWN0ZWRcblx0XHQ8VCBleHRlbmRzIENvbnN0cnVjdG9yPExpdEVsZW1lbnQ+PihzdXBlckNsYXNzOiBUKTogVCB7XG5cdFx0XHRjbGFzcyBNaXhpbl9kaXNjb25uZWN0ZWRfQ2xhc3MgZXh0ZW5kcyBzdXBlckNsYXNzIHtcblx0XHRcdFx0Ly8gbm9pbnNwZWN0aW9uIEpTVW51c2VkR2xvYmFsU3ltYm9sc1xuXHRcdFx0XHRvdmVycmlkZSBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcblx0XHRcdFx0XHRzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaz8uKCk7XG5cblx0XHRcdFx0XHRjb25zdCBkZWZpbml0aW9uID0gZ2V0RGVmaW5pdGlvbih0aGlzKTtcblxuXHRcdFx0XHRcdGRlZmluaXRpb24uZGVjbGFyYXRpb24uaG9va3M/LmxpZmVjeWNsZT8uZGlzY29ubmVjdGVkPy4odGhpcyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBNaXhpbl9kaXNjb25uZWN0ZWRfQ2xhc3M7XG5cdFx0fVxuIiwiaW1wb3J0IHtMaXRFbGVtZW50fSBmcm9tICcjY3VzdG9tYXJ5L2xpdCc7XG5pbXBvcnQge1Byb3BlcnR5VmFsdWVzfSBmcm9tIFwiQGxpdC9yZWFjdGl2ZS1lbGVtZW50XCI7XG5pbXBvcnQge2dldERlZmluaXRpb259IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeURlZmluaXRpb24uanNcIjtcblxudHlwZSBDb25zdHJ1Y3RvcjxUID0ge30+ID0gbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gVDtcblxuZXhwb3J0IGZ1bmN0aW9uIE1peGluX2ZpcnN0VXBkYXRlZFxuXHRcdDxUIGV4dGVuZHMgQ29uc3RydWN0b3I8TGl0RWxlbWVudD4+KHN1cGVyQ2xhc3M6IFQpOiBUIHtcblx0XHRcdGNsYXNzIE1peGluX2ZpcnN0VXBkYXRlZF9DbGFzcyBleHRlbmRzIHN1cGVyQ2xhc3Mge1xuXHRcdFx0XHQvLyBub2luc3BlY3Rpb24gSlNVbnVzZWRHbG9iYWxTeW1ib2xzXG5cdFx0XHRcdHByb3RlY3RlZCBvdmVycmlkZSBmaXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVzKSB7XG5cdFx0XHRcdFx0c3VwZXIuZmlyc3RVcGRhdGVkPy4oY2hhbmdlZFByb3BlcnRpZXMpO1xuXG5cdFx0XHRcdFx0Y29uc3QgZGVmaW5pdGlvbiA9IGdldERlZmluaXRpb24odGhpcyk7XG5cblx0XHRcdFx0XHRjb25zdCB7bGlmZWN5Y2xlLCBjaGFuZ2VzfSA9IGRlZmluaXRpb24uZGVjbGFyYXRpb24uaG9va3MgPz8ge307XG5cblx0XHRcdFx0XHRsaWZlY3ljbGU/LmZpcnN0VXBkYXRlZD8uKHRoaXMsIGNoYW5nZWRQcm9wZXJ0aWVzKTtcblxuXHRcdFx0XHRcdGlmIChjaGFuZ2VzIGluc3RhbmNlb2YgQXJyYXkpIHtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgY2hhbmdlIG9mIGNoYW5nZXMpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qge25hbWUsIGZpcnN0VXBkYXRlZH0gPSBjaGFuZ2U7XG5cdFx0XHRcdFx0XHRcdGlmIChmaXJzdFVwZGF0ZWQgJiYgY2hhbmdlZFByb3BlcnRpZXMuaGFzKG5hbWUpKSB7XG5cdFx0XHRcdFx0XHRcdFx0Zmlyc3RVcGRhdGVkKHRoaXMsICh0aGlzIGFzIGFueSlbbmFtZV0sIGNoYW5nZWRQcm9wZXJ0aWVzLmdldChuYW1lKSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBNaXhpbl9maXJzdFVwZGF0ZWRfQ2xhc3M7XG5cdFx0fVxuIiwiaW1wb3J0IHtMaXRFbGVtZW50fSBmcm9tICcjY3VzdG9tYXJ5L2xpdCc7XG5pbXBvcnQge2Nob29zZSwgaHRtbCwgbWFwLCB3aGVufSBmcm9tIFwiI2N1c3RvbWFyeS9saXRcIjtcbmltcG9ydCB7VW5jb21waWxlZFRlbXBsYXRlUmVzdWx0fSBmcm9tIFwibGl0LWh0bWxcIjtcbmltcG9ydCB7Z2V0RGVmaW5pdGlvbn0gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5RGVmaW5pdGlvbi5qc1wiO1xuXG50eXBlIENvbnN0cnVjdG9yPFQgPSB7fT4gPSBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBUO1xuXG5leHBvcnQgZnVuY3Rpb24gTWl4aW5fcmVuZGVyRnJvbVRlbXBsYXRlXG5cdFx0PFQgZXh0ZW5kcyBDb25zdHJ1Y3RvcjxMaXRFbGVtZW50Pj4oc3VwZXJDbGFzczogVCk6IFQge1xuXHRcdFx0Y2xhc3MgTWl4aW5fcmVuZGVyRnJvbVRlbXBsYXRlX0NsYXNzIGV4dGVuZHMgc3VwZXJDbGFzcyB7XG5cdFx0XHRcdC8vIG5vaW5zcGVjdGlvbiBKU1VudXNlZEdsb2JhbFN5bWJvbHNcblx0XHRcdFx0cHJvdGVjdGVkIG92ZXJyaWRlIHJlbmRlcigpOiB1bmtub3duIHtcblx0XHRcdFx0XHRjb25zdCBkZWZpbml0aW9uID0gZ2V0RGVmaW5pdGlvbih0aGlzKTtcblxuXHRcdFx0XHRcdGNvbnN0IHRlbXBsYXRlUmVzdWx0OiBVbmNvbXBpbGVkVGVtcGxhdGVSZXN1bHQgPVxuXHRcdFx0XHRcdFx0XHRyZW5kZXJfbGl0X2h0bWxfVGVtcGxhdGVSZXN1bHQoXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVmaW5pdGlvbi5pbW11dGFibGVfaHRtbFN0cmluZyxcblx0XHRcdFx0XHRcdFx0XHRcdCh0aGlzIGFzIGFueSkuc3RhdGVcblx0XHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdHRoaXMucmV1c2VfaW1tdXRhYmxlX1RlbXBsYXRlU3RyaW5nc0FycmF5KHRlbXBsYXRlUmVzdWx0KTtcblxuXHRcdFx0XHRcdHJldHVybiB0ZW1wbGF0ZVJlc3VsdDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHByaXZhdGUgcmV1c2VfaW1tdXRhYmxlX1RlbXBsYXRlU3RyaW5nc0FycmF5KFxuXHRcdFx0XHRcdFx0dGVtcGxhdGVSZXN1bHQ6IFVuY29tcGlsZWRUZW1wbGF0ZVJlc3VsdFxuXHRcdFx0XHQpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRjb25zdCB0ZW1wbGF0ZVN0cmluZ3NBcnJheSA9IHRlbXBsYXRlUmVzdWx0LnN0cmluZ3M7XG5cblx0XHRcdFx0XHRpZiAoIXRoaXMuaW1tdXRhYmxlX3RlbXBsYXRlU3RyaW5nc0FycmF5KSB7XG5cdFx0XHRcdFx0XHR0aGlzLmltbXV0YWJsZV90ZW1wbGF0ZVN0cmluZ3NBcnJheSA9IHRlbXBsYXRlU3RyaW5nc0FycmF5O1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGVtcGxhdGVTdHJpbmdzQXJyYXkubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdGlmICh0ZW1wbGF0ZVN0cmluZ3NBcnJheVtpXSAhPT0gdGhpcy5pbW11dGFibGVfdGVtcGxhdGVTdHJpbmdzQXJyYXlbaV0pIHtcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKGBcbk9yaWdpbmFsIGh0bWwgZmlyc3QgcmVnaXN0ZXJlZCBvbmx5IG9uY2UgZnJvbSBuYW1lZCB0ZW1wbGF0ZSB0YWcgaW4gcGFnZVxuKG9yIGZpcnN0IHJlZ2lzdGVyZWQgb25seSBvbmNlIGZyb20gZXh0ZXJuYWwgaHRtbCBmaWxlKVxuY291bGQgbm90IGhhdmUgcG9zc2libHkgY2hhbmdlZCBzdHJ1Y3R1cmUgaW5iZXR3ZWVuIGNhbGxzIHRvIHJlbmRlci4uLi4gdGFtcGVyaW5nPz9cbihzZWUgaHR0cHM6Ly9naXRodWIuY29tL2xpdC9saXQvcHVsbC8zOTg3KVxuYCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dGVtcGxhdGVSZXN1bHQuc3RyaW5ncyA9IHRoaXMuaW1tdXRhYmxlX3RlbXBsYXRlU3RyaW5nc0FycmF5O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cHJpdmF0ZSBpbW11dGFibGVfdGVtcGxhdGVTdHJpbmdzQXJyYXk6IFRlbXBsYXRlU3RyaW5nc0FycmF5IHwgdW5kZWZpbmVkO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gTWl4aW5fcmVuZGVyRnJvbVRlbXBsYXRlX0NsYXNzIGFzIFQ7XG5cdFx0fVxuXG4vKipcbiBsaXQgXCJodG1sXCIgaXMgYSB0YWcgZnVuY3Rpb24uXG4gYXQgcnVudGltZSwgdGhlIHRhZ2dlZCB0ZW1wbGF0ZSBjb21lcyBmcm9tIGh0bWxTdHJpbmcuXG4gb25seSBKUyBjb21waWxhdGlvbiBjYW4gcGFyc2UgdGhlIHRhZ2dlZCB0ZW1wbGF0ZSBpbnRvIGEgcHJvcGVyIGZ1bmN0aW9uIGNhbGwsXG4gc28gd2UgbmVlZCBKUyBjb21waWxhdGlvbiB0byBoYXBwZW4gYXQgcnVudGltZS5cbiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9UZW1wbGF0ZV9saXRlcmFscyN0YWdnZWRfdGVtcGxhdGVzXG4qL1xuZnVuY3Rpb24gcmVuZGVyX2xpdF9odG1sX1RlbXBsYXRlUmVzdWx0KFxuXHRcdGVsZW1lbnQ6IEhUTUxFbGVtZW50LFxuXHRcdGh0bWxTdHJpbmc6IHN0cmluZyxcblx0XHRzdGF0ZTogYW55LFxuKTogVW5jb21waWxlZFRlbXBsYXRlUmVzdWx0IHtcblx0Y29uc3QgdGhpc0FyZyA9IGVsZW1lbnQ7XG5cdGNvbnN0IGZuID0gbmV3IEZ1bmN0aW9uKFxuXHRcdFx0J3N0YXRlJywgJ2h0bWwnLCAnbWFwJywgJ2Nob29zZScsICd3aGVuJyxcblx0XHRcdCdcInVzZSBzdHJpY3RcIjsgcmV0dXJuIGh0bWxcXGAnICsgaHRtbFN0cmluZyArICdcXGAnXG5cdCk7XG5cdHJldHVybiBmbi5jYWxsKHRoaXNBcmcsIHN0YXRlLCBodG1sLCBtYXAsIGNob29zZSwgd2hlbik7XG59XG4iLCJpbXBvcnQge0xpdEVsZW1lbnR9IGZyb20gJyNjdXN0b21hcnkvbGl0JztcbmltcG9ydCB7Z2V0RGVmaW5pdGlvbn0gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5RGVmaW5pdGlvbi5qc1wiO1xuXG50eXBlIENvbnN0cnVjdG9yPFQgPSB7fT4gPSBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBUO1xudHlwZSBQcm9wZXJ0eVZhbHVlcyA9IE1hcDxQcm9wZXJ0eUtleSwgdW5rbm93bj47XG5cbmV4cG9ydCBmdW5jdGlvbiBNaXhpbl9zbG90Q2hhbmdlXG5cdFx0PFQgZXh0ZW5kcyBDb25zdHJ1Y3RvcjxMaXRFbGVtZW50Pj4oc3VwZXJDbGFzczogVCk6IFQge1xuXHRcdFx0Y2xhc3MgTWl4aW5fc2xvdENoYW5nZV9DbGFzcyBleHRlbmRzIHN1cGVyQ2xhc3Mge1xuXHRcdFx0XHQvLyBub2luc3BlY3Rpb24gSlNVbnVzZWRHbG9iYWxTeW1ib2xzXG5cdFx0XHRcdHByb3RlY3RlZCBvdmVycmlkZSBmaXJzdFVwZGF0ZWQoY2hhbmdlZFByb3BlcnRpZXM6IFByb3BlcnR5VmFsdWVzKSB7XG5cdFx0XHRcdFx0c3VwZXIuZmlyc3RVcGRhdGVkKGNoYW5nZWRQcm9wZXJ0aWVzKTtcblxuXHRcdFx0XHRcdGNvbnN0IGVsZW1lbnQgPSB0aGlzO1xuXG5cdFx0XHRcdFx0Y29uc3QgZGVmaW5pdGlvbiA9IGdldERlZmluaXRpb24oZWxlbWVudCk7XG5cblx0XHRcdFx0XHRjb25zdCBzbG90Y2hhbmdlID1cblx0XHRcdFx0XHRcdFx0ZGVmaW5pdGlvbi5kZWNsYXJhdGlvbi5ob29rcz8uc2xvdHM/LnNsb3RjaGFuZ2U7XG5cblx0XHRcdFx0XHRpZiAoIXNsb3RjaGFuZ2UpIHJldHVybjtcblxuXHRcdFx0XHRcdC8vIG9uIGZpcnN0IHJlbmRlciwgZXhlY3V0ZSBvbmNlIGZvciB0aGUgZmlyc3QgdGltZSB3aXRob3V0IGFuIGV2ZW50XG5cdFx0XHRcdFx0c2xvdGNoYW5nZShlbGVtZW50KTtcblxuXHRcdFx0XHRcdC8qXG5cdFx0XHRcdFx0aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNjczMzI2MzUvc2xvdHMtZG9lcy1ub3Qtd29yay1vbi1hLWh0bWwtd2ViLWNvbXBvbmVudC13aXRob3V0LXNoYWRvdy1kb21cblx0XHRcdFx0XHQqL1xuXHRcdFx0XHRcdGVsZW1lbnQuc2hhZG93Um9vdCEuYWRkRXZlbnRMaXN0ZW5lcignc2xvdGNoYW5nZScsIGV2ZW50ID0+IHNsb3RjaGFuZ2UoZWxlbWVudCwgZXZlbnQpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIE1peGluX3Nsb3RDaGFuZ2VfQ2xhc3M7XG5cdFx0fVxuIiwiaW1wb3J0IHtMaXRFbGVtZW50fSBmcm9tICcjY3VzdG9tYXJ5L2xpdCc7XG5pbXBvcnQge2dldERlZmluaXRpb259IGZyb20gXCIjY3VzdG9tYXJ5L0N1c3RvbWFyeURlZmluaXRpb24uanNcIjtcblxudHlwZSBDb25zdHJ1Y3RvcjxUID0ge30+ID0gbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gVDtcblxuZXhwb3J0IGZ1bmN0aW9uIE1peGluX3N0YXRlXG5cdFx0PFQgZXh0ZW5kcyBDb25zdHJ1Y3RvcjxMaXRFbGVtZW50Pj4oc3VwZXJDbGFzczogVCk6IFQge1xuXHRjbGFzcyBNaXhpbl9zdGF0ZV9DbGFzcyBleHRlbmRzIHN1cGVyQ2xhc3Mge1xuXHRcdGNvbnN0cnVjdG9yKC4uLmFyZ3M6IGFueVtdKSB7XG5cdFx0XHRzdXBlcihhcmdzKTtcblxuXHRcdFx0Y29uc3QgZGVmaW5pdGlvbiA9IGdldERlZmluaXRpb24odGhpcyk7XG5cblx0XHRcdGNvbnN0IHt2YWx1ZXN9ID0gZGVmaW5pdGlvbi5kZWNsYXJhdGlvbjtcblx0XHRcdGlmICghdmFsdWVzKSByZXR1cm47XG5cblx0XHRcdE9iamVjdC5hc3NpZ24odGhpcywgdmFsdWVzKTtcblx0XHR9XG5cblx0XHQvLyBub2luc3BlY3Rpb24gSlNVbnVzZWRHbG9iYWxTeW1ib2xzXG5cdFx0c2V0U3RhdGUoc3RhdGVfb3JfZm46IGFueSkge1xuXHRcdFx0X3NldFN0YXRlKFxuXHRcdFx0XHRcdHN0YXRlX29yX2ZuLFxuXHRcdFx0XHRcdCgpID0+ICh0aGlzIGFzIGFueSkuc3RhdGUsXG5cdFx0XHRcdFx0c3RhdGUgPT4gKHRoaXMgYXMgYW55KS5zdGF0ZSA9IHN0YXRlXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gTWl4aW5fc3RhdGVfQ2xhc3M7XG59XG5cbmZ1bmN0aW9uIF9zZXRTdGF0ZShzdGF0ZV9vcl9mbjogU3RhdGUsIGdldFN0YXRlRm46IEdldFN0YXRlRm4sIHNldFN0YXRlRm46IFNldFN0YXRlRm4pIHtcblx0aWYgKHN0YXRlX29yX2ZuID09PSBudWxsIHx8IHN0YXRlX29yX2ZuID09PSB1bmRlZmluZWQpIHJldHVybjtcblxuXHRjb25zdCBfc3RhdGUgPSBnZXRTdGF0ZUZuKCk7XG5cblx0Y29uc3Qgc3RhdGUgPSBzdGF0ZV9vcl9mbiBpbnN0YW5jZW9mIEZ1bmN0aW9uXG5cdFx0XHQ/IHN0YXRlX29yX2ZuKF9zdGF0ZSlcblx0XHRcdDogc3RhdGVfb3JfZm47XG5cblx0c2V0U3RhdGVGbih0eXBlb2YgX3N0YXRlID09PSAnb2JqZWN0JyA/IHsuLi5fc3RhdGUsIC4uLnN0YXRlfSA6IHN0YXRlKTtcbn1cblxudHlwZSBTdGF0ZSA9IGFueTtcbnR5cGUgR2V0U3RhdGVGbiA9ICgpID0+IFN0YXRlO1xudHlwZSBTZXRTdGF0ZUZuID0gKHN0YXRlOiBTdGF0ZSkgPT4gU3RhdGU7XG4iLCJpbXBvcnQge0xpdEVsZW1lbnR9IGZyb20gJyNjdXN0b21hcnkvbGl0JztcbmltcG9ydCB7UHJvcGVydHlWYWx1ZXN9IGZyb20gXCJAbGl0L3JlYWN0aXZlLWVsZW1lbnRcIjtcbmltcG9ydCB7Z2V0RGVmaW5pdGlvbn0gZnJvbSBcIiNjdXN0b21hcnkvQ3VzdG9tYXJ5RGVmaW5pdGlvbi5qc1wiO1xuXG50eXBlIENvbnN0cnVjdG9yPFQgPSB7fT4gPSBuZXcgKC4uLmFyZ3M6IGFueVtdKSA9PiBUO1xuXG5leHBvcnQgZnVuY3Rpb24gTWl4aW5fdXBkYXRlZFxuXHRcdDxUIGV4dGVuZHMgQ29uc3RydWN0b3I8TGl0RWxlbWVudD4+KHN1cGVyQ2xhc3M6IFQpOiBUIHtcblx0XHRcdGNsYXNzIE1peGluX3VwZGF0ZWRfQ2xhc3MgZXh0ZW5kcyBzdXBlckNsYXNzIHtcblx0XHRcdFx0Ly8gbm9pbnNwZWN0aW9uIEpTVW51c2VkR2xvYmFsU3ltYm9sc1xuXHRcdFx0XHRwcm90ZWN0ZWQgb3ZlcnJpZGUgdXBkYXRlZChjaGFuZ2VkUHJvcGVydGllczogUHJvcGVydHlWYWx1ZXMpIHtcblx0XHRcdFx0XHRzdXBlci51cGRhdGVkPy4oY2hhbmdlZFByb3BlcnRpZXMpO1xuXG5cdFx0XHRcdFx0Y29uc3QgZGVmaW5pdGlvbiA9IGdldERlZmluaXRpb24odGhpcyk7XG5cblx0XHRcdFx0XHRjb25zdCB7bGlmZWN5Y2xlLCBjaGFuZ2VzfSA9IGRlZmluaXRpb24uZGVjbGFyYXRpb24uaG9va3MgPz8ge307XG5cblx0XHRcdFx0XHRsaWZlY3ljbGU/LnVwZGF0ZWQ/Lih0aGlzLCBjaGFuZ2VkUHJvcGVydGllcyk7XG5cblx0XHRcdFx0XHRpZiAoY2hhbmdlcyBpbnN0YW5jZW9mIEFycmF5KSB7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IGNoYW5nZSBvZiBjaGFuZ2VzKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHtuYW1lLCB1cGRhdGVkfSA9IGNoYW5nZTtcblx0XHRcdFx0XHRcdFx0aWYgKHVwZGF0ZWQgJiYgY2hhbmdlZFByb3BlcnRpZXMuaGFzKG5hbWUpKSB7XG5cdFx0XHRcdFx0XHRcdFx0dXBkYXRlZCh0aGlzLCAodGhpcyBhcyBhbnkpW25hbWVdLCBjaGFuZ2VkUHJvcGVydGllcy5nZXQobmFtZSkpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0Zm9yIChjb25zdCBuYW1lIGluIGNoYW5nZXMpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgdXBkYXRlZCA9IGNoYW5nZXNbbmFtZV07XG5cdFx0XHRcdFx0XHRcdGlmIChjaGFuZ2VkUHJvcGVydGllcy5oYXMobmFtZSkpIHtcblx0XHRcdFx0XHRcdFx0XHR1cGRhdGVkKHRoaXMsICh0aGlzIGFzIGFueSlbbmFtZV0sIGNoYW5nZWRQcm9wZXJ0aWVzLmdldChuYW1lKSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBNaXhpbl91cGRhdGVkX0NsYXNzO1xuXHRcdH1cbiIsImltcG9ydCB7TGl0RWxlbWVudH0gZnJvbSAnI2N1c3RvbWFyeS9saXQnO1xuaW1wb3J0IHtQcm9wZXJ0eVZhbHVlc30gZnJvbSBcIkBsaXQvcmVhY3RpdmUtZWxlbWVudFwiO1xuaW1wb3J0IHtnZXREZWZpbml0aW9ufSBmcm9tIFwiI2N1c3RvbWFyeS9DdXN0b21hcnlEZWZpbml0aW9uLmpzXCI7XG5cbnR5cGUgQ29uc3RydWN0b3I8VCA9IHt9PiA9IG5ldyAoLi4uYXJnczogYW55W10pID0+IFQ7XG5cbmV4cG9ydCBmdW5jdGlvbiBNaXhpbl93aWxsVXBkYXRlXG5cdFx0PFQgZXh0ZW5kcyBDb25zdHJ1Y3RvcjxMaXRFbGVtZW50Pj4oc3VwZXJDbGFzczogVCk6IFQge1xuXHRcdFx0Y2xhc3MgTWl4aW5fd2lsbFVwZGF0ZV9DbGFzcyBleHRlbmRzIHN1cGVyQ2xhc3Mge1xuXHRcdFx0XHQvLyBub2luc3BlY3Rpb24gSlNVbnVzZWRHbG9iYWxTeW1ib2xzXG5cdFx0XHRcdHByb3RlY3RlZCBvdmVycmlkZSB3aWxsVXBkYXRlKGNoYW5nZWRQcm9wZXJ0aWVzOiBQcm9wZXJ0eVZhbHVlcykge1xuXHRcdFx0XHRcdHN1cGVyLndpbGxVcGRhdGU/LihjaGFuZ2VkUHJvcGVydGllcyk7XG5cblx0XHRcdFx0XHRjb25zdCBkZWZpbml0aW9uID0gZ2V0RGVmaW5pdGlvbih0aGlzKTtcblxuXHRcdFx0XHRcdGNvbnN0IHtsaWZlY3ljbGUsIGNoYW5nZXN9ID0gZGVmaW5pdGlvbi5kZWNsYXJhdGlvbi5ob29rcyA/PyB7fTtcblxuXHRcdFx0XHRcdGxpZmVjeWNsZT8ud2lsbFVwZGF0ZT8uKHRoaXMsIGNoYW5nZWRQcm9wZXJ0aWVzKTtcblxuXHRcdFx0XHRcdGlmIChjaGFuZ2VzIGluc3RhbmNlb2YgQXJyYXkpIHtcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgY2hhbmdlIG9mIGNoYW5nZXMpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3Qge25hbWUsIHdpbGxVcGRhdGV9ID0gY2hhbmdlO1xuXHRcdFx0XHRcdFx0XHRpZiAod2lsbFVwZGF0ZSAmJiBjaGFuZ2VkUHJvcGVydGllcy5oYXMobmFtZSkpIHtcblx0XHRcdFx0XHRcdFx0XHR3aWxsVXBkYXRlKHRoaXMsICh0aGlzIGFzIGFueSlbbmFtZV0sIGNoYW5nZWRQcm9wZXJ0aWVzLmdldChuYW1lKSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBNaXhpbl93aWxsVXBkYXRlX0NsYXNzO1xuXHRcdH1cbiJdLCJuYW1lcyI6WyJMaXRFbGVtZW50IiwiUmVhY3RpdmVFbGVtZW50IiwiY29uc3RydWN0b3IiLCJ0aGlzIiwicmVuZGVyT3B0aW9ucyIsImhvc3QiLCJfX2NoaWxkUGFydCIsInVuZGVmaW5lZCIsImNyZWF0ZVJlbmRlclJvb3QiLCJyZW5kZXJSb290Iiwic3VwZXIiLCJyZW5kZXJCZWZvcmUiLCJmaXJzdENoaWxkIiwidXBkYXRlIiwiY2hhbmdlZFByb3BlcnRpZXMiLCJ2YWx1ZSIsInJlbmRlciIsImhhc1VwZGF0ZWQiLCJpc0Nvbm5lY3RlZCIsImNvbm5lY3RlZENhbGxiYWNrIiwic2V0Q29ubmVjdGVkIiwiZGlzY29ubmVjdGVkQ2FsbGJhY2siLCJub0NoYW5nZSIsImdsb2JhbFRoaXMiLCJsaXRFbGVtZW50SHlkcmF0ZVN1cHBvcnQiLCJwb2x5ZmlsbFN1cHBvcnQiLCJsaXRFbGVtZW50UG9seWZpbGxTdXBwb3J0IiwiXyRMRSIsIl8kYXR0cmlidXRlVG9Qcm9wZXJ0eSIsImVsIiwibmFtZSIsIl8kY2hhbmdlZFByb3BlcnRpZXMiLCJsaXRFbGVtZW50VmVyc2lvbnMiLCJwdXNoIiwiaXMiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImdldE93blByb3BlcnR5TmFtZXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJnZXRQcm90b3R5cGVPZiIsIk9iamVjdCIsImdsb2JhbCIsInRydXN0ZWRUeXBlcyIsImVtcHR5U3RyaW5nRm9yQm9vbGVhbkF0dHJpYnV0ZSIsImVtcHR5U2NyaXB0IiwicmVhY3RpdmVFbGVtZW50UG9seWZpbGxTdXBwb3J0IiwiSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSIsInByb3AiLCJfb2JqIiwiZGVmYXVsdENvbnZlcnRlciIsInRvQXR0cmlidXRlIiwidHlwZSIsIkJvb2xlYW4iLCJBcnJheSIsIkpTT04iLCJzdHJpbmdpZnkiLCJmcm9tQXR0cmlidXRlIiwiZnJvbVZhbHVlIiwiTnVtYmVyIiwicGFyc2UiLCJlIiwibm90RXF1YWwiLCJvbGQiLCJkZWZhdWx0UHJvcGVydHlEZWNsYXJhdGlvbiIsImF0dHJpYnV0ZSIsIlN0cmluZyIsImNvbnZlcnRlciIsInJlZmxlY3QiLCJoYXNDaGFuZ2VkIiwiU3ltYm9sIiwibWV0YWRhdGEiLCJsaXRQcm9wZXJ0eU1ldGFkYXRhIiwiV2Vha01hcCIsIkhUTUxFbGVtZW50IiwiYWRkSW5pdGlhbGl6ZXIiLCJpbml0aWFsaXplciIsIl9fcHJlcGFyZSIsIl9pbml0aWFsaXplcnMiLCJvYnNlcnZlZEF0dHJpYnV0ZXMiLCJmaW5hbGl6ZSIsIl9fYXR0cmlidXRlVG9Qcm9wZXJ0eU1hcCIsImtleXMiLCJjcmVhdGVQcm9wZXJ0eSIsIm9wdGlvbnMiLCJzdGF0ZSIsImVsZW1lbnRQcm9wZXJ0aWVzIiwic2V0Iiwibm9BY2Nlc3NvciIsImtleSIsImRlc2NyaXB0b3IiLCJnZXRQcm9wZXJ0eURlc2NyaXB0b3IiLCJwcm90b3R5cGUiLCJnZXQiLCJ2IiwiY2FsbCIsIm9sZFZhbHVlIiwicmVxdWVzdFVwZGF0ZSIsImNvbmZpZ3VyYWJsZSIsImVudW1lcmFibGUiLCJnZXRQcm9wZXJ0eU9wdGlvbnMiLCJoYXNPd25Qcm9wZXJ0eSIsInN1cGVyQ3RvciIsIk1hcCIsImZpbmFsaXplZCIsInByb3BzIiwicHJvcGVydGllcyIsInByb3BLZXlzIiwicCIsImF0dHIiLCJfX2F0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eSIsImVsZW1lbnRTdHlsZXMiLCJmaW5hbGl6ZVN0eWxlcyIsInN0eWxlcyIsImlzQXJyYXkiLCJTZXQiLCJmbGF0IiwiSW5maW5pdHkiLCJyZXZlcnNlIiwicyIsInVuc2hpZnQiLCJnZXRDb21wYXRpYmxlU3R5bGUiLCJ0b0xvd2VyQ2FzZSIsIl9faW5zdGFuY2VQcm9wZXJ0aWVzIiwiaXNVcGRhdGVQZW5kaW5nIiwiX19yZWZsZWN0aW5nUHJvcGVydHkiLCJfX2luaXRpYWxpemUiLCJfX3VwZGF0ZVByb21pc2UiLCJQcm9taXNlIiwicmVzIiwiZW5hYmxlVXBkYXRpbmciLCJfX3NhdmVJbnN0YW5jZVByb3BlcnRpZXMiLCJmb3JFYWNoIiwiaSIsImFkZENvbnRyb2xsZXIiLCJjb250cm9sbGVyIiwiX19jb250cm9sbGVycyIsImFkZCIsImhvc3RDb25uZWN0ZWQiLCJyZW1vdmVDb250cm9sbGVyIiwiZGVsZXRlIiwiaW5zdGFuY2VQcm9wZXJ0aWVzIiwic2l6ZSIsInNoYWRvd1Jvb3QiLCJhdHRhY2hTaGFkb3ciLCJzaGFkb3dSb290T3B0aW9ucyIsImFkb3B0U3R5bGVzIiwiYyIsIl9yZXF1ZXN0ZWRVcGRhdGUiLCJob3N0RGlzY29ubmVjdGVkIiwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrIiwiX29sZCIsIl9fcHJvcGVydHlUb0F0dHJpYnV0ZSIsImF0dHJWYWx1ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImN0b3IiLCJwcm9wTmFtZSIsIl8kY2hhbmdlUHJvcGVydHkiLCJfX2VucXVldWVVcGRhdGUiLCJoYXMiLCJfX3JlZmxlY3RpbmdQcm9wZXJ0aWVzIiwicmVqZWN0IiwicmVzdWx0Iiwic2NoZWR1bGVVcGRhdGUiLCJwZXJmb3JtVXBkYXRlIiwid3JhcHBlZCIsInNob3VsZFVwZGF0ZSIsIndpbGxVcGRhdGUiLCJob3N0VXBkYXRlIiwiX19tYXJrVXBkYXRlZCIsIl8kZGlkVXBkYXRlIiwiX2NoYW5nZWRQcm9wZXJ0aWVzIiwiaG9zdFVwZGF0ZWQiLCJmaXJzdFVwZGF0ZWQiLCJ1cGRhdGVkIiwidXBkYXRlQ29tcGxldGUiLCJnZXRVcGRhdGVDb21wbGV0ZSIsIm1vZGUiLCJyZWFjdGl2ZUVsZW1lbnRWZXJzaW9ucyIsInN1cHBvcnRzQWRvcHRpbmdTdHlsZVNoZWV0cyIsIlNoYWRvd1Jvb3QiLCJTaGFkeUNTUyIsIm5hdGl2ZVNoYWRvdyIsIkRvY3VtZW50IiwiQ1NTU3R5bGVTaGVldCIsImNvbnN0cnVjdGlvblRva2VuIiwiY3NzVGFnQ2FjaGUiLCJDU1NSZXN1bHQiLCJjc3NUZXh0Iiwic3RyaW5ncyIsInNhZmVUb2tlbiIsIkVycm9yIiwiX3N0cmluZ3MiLCJzdHlsZVNoZWV0IiwiX3N0eWxlU2hlZXQiLCJjYWNoZWFibGUiLCJsZW5ndGgiLCJyZXBsYWNlU3luYyIsInRvU3RyaW5nIiwidW5zYWZlQ1NTIiwiY3NzIiwidmFsdWVzIiwicmVkdWNlIiwiYWNjIiwiaWR4IiwidGV4dEZyb21DU1NSZXN1bHQiLCJhZG9wdGVkU3R5bGVTaGVldHMiLCJtYXAiLCJzdHlsZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIm5vbmNlIiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsInNoZWV0IiwicnVsZSIsImNzc1J1bGVzIiwiY3NzUmVzdWx0RnJvbVN0eWxlU2hlZXQiLCJwb2xpY3kiLCJjcmVhdGVQb2xpY3kiLCJjcmVhdGVIVE1MIiwiYm91bmRBdHRyaWJ1dGVTdWZmaXgiLCJtYXJrZXIiLCJNYXRoIiwicmFuZG9tIiwidG9GaXhlZCIsInNsaWNlIiwibWFya2VyTWF0Y2giLCJub2RlTWFya2VyIiwiZCIsImNyZWF0ZU1hcmtlciIsImNyZWF0ZUNvbW1lbnQiLCJpc1ByaW1pdGl2ZSIsImlzSXRlcmFibGUiLCJpdGVyYXRvciIsIlNQQUNFX0NIQVIiLCJ0ZXh0RW5kUmVnZXgiLCJjb21tZW50RW5kUmVnZXgiLCJjb21tZW50MkVuZFJlZ2V4IiwidGFnRW5kUmVnZXgiLCJSZWdFeHAiLCJzaW5nbGVRdW90ZUF0dHJFbmRSZWdleCIsImRvdWJsZVF1b3RlQXR0ckVuZFJlZ2V4IiwicmF3VGV4dEVsZW1lbnQiLCJ0YWciLCJfJGxpdFR5cGUkIiwiaHRtbCIsInN2ZyIsIm1hdGhtbCIsImZvciIsIm5vdGhpbmciLCJ0ZW1wbGF0ZUNhY2hlIiwid2Fsa2VyIiwiY3JlYXRlVHJlZVdhbGtlciIsInRydXN0RnJvbVRlbXBsYXRlU3RyaW5nIiwidHNhIiwic3RyaW5nRnJvbVRTQSIsImdldFRlbXBsYXRlSHRtbCIsImwiLCJhdHRyTmFtZXMiLCJyYXdUZXh0RW5kUmVnZXgiLCJyZWdleCIsImF0dHJOYW1lIiwibWF0Y2giLCJhdHRyTmFtZUVuZEluZGV4IiwibGFzdEluZGV4IiwiZXhlYyIsInRlc3QiLCJlbmQiLCJzdGFydHNXaXRoIiwiVGVtcGxhdGUiLCJub2RlIiwicGFydHMiLCJub2RlSW5kZXgiLCJhdHRyTmFtZUluZGV4IiwicGFydENvdW50IiwiY3VycmVudE5vZGUiLCJjb250ZW50Iiwid3JhcHBlciIsInJlcGxhY2VXaXRoIiwiY2hpbGROb2RlcyIsIm5leHROb2RlIiwibm9kZVR5cGUiLCJoYXNBdHRyaWJ1dGVzIiwiZ2V0QXR0cmlidXRlTmFtZXMiLCJlbmRzV2l0aCIsInJlYWxOYW1lIiwic3RhdGljcyIsImdldEF0dHJpYnV0ZSIsInNwbGl0IiwibSIsImluZGV4IiwiUHJvcGVydHlQYXJ0IiwiQm9vbGVhbkF0dHJpYnV0ZVBhcnQiLCJFdmVudFBhcnQiLCJBdHRyaWJ1dGVQYXJ0IiwidGFnTmFtZSIsImFwcGVuZCIsImRhdGEiLCJpbmRleE9mIiwiX29wdGlvbnMiLCJpbm5lckhUTUwiLCJyZXNvbHZlRGlyZWN0aXZlIiwicGFydCIsInBhcmVudCIsImF0dHJpYnV0ZUluZGV4IiwiY3VycmVudERpcmVjdGl2ZSIsIl9fZGlyZWN0aXZlcyIsIl9fZGlyZWN0aXZlIiwibmV4dERpcmVjdGl2ZUNvbnN0cnVjdG9yIiwiXyRpbml0aWFsaXplIiwiXyRyZXNvbHZlIiwiVGVtcGxhdGVJbnN0YW5jZSIsInRlbXBsYXRlIiwiXyRwYXJ0cyIsIl8kZGlzY29ubmVjdGFibGVDaGlsZHJlbiIsIl8kdGVtcGxhdGUiLCJfJHBhcmVudCIsInBhcmVudE5vZGUiLCJfJGlzQ29ubmVjdGVkIiwiX2Nsb25lIiwiZnJhZ21lbnQiLCJjcmVhdGlvblNjb3BlIiwiaW1wb3J0Tm9kZSIsInBhcnRJbmRleCIsInRlbXBsYXRlUGFydCIsIkNoaWxkUGFydCIsIm5leHRTaWJsaW5nIiwiRWxlbWVudFBhcnQiLCJfdXBkYXRlIiwiXyRzZXRWYWx1ZSIsIl9faXNDb25uZWN0ZWQiLCJzdGFydE5vZGUiLCJlbmROb2RlIiwiXyRjb21taXR0ZWRWYWx1ZSIsIl8kc3RhcnROb2RlIiwiXyRlbmROb2RlIiwiZGlyZWN0aXZlUGFyZW50IiwiXyRjbGVhciIsIl9jb21taXRUZXh0IiwiX2NvbW1pdFRlbXBsYXRlUmVzdWx0IiwiX2NvbW1pdE5vZGUiLCJfY29tbWl0SXRlcmFibGUiLCJfaW5zZXJ0IiwiaW5zZXJ0QmVmb3JlIiwiY3JlYXRlVGV4dE5vZGUiLCJfJGdldFRlbXBsYXRlIiwiaCIsImluc3RhbmNlIiwiaXRlbVBhcnRzIiwiaXRlbVBhcnQiLCJpdGVtIiwic3RhcnQiLCJmcm9tIiwiXyRub3RpZnlDb25uZWN0aW9uQ2hhbmdlZCIsIm4iLCJyZW1vdmUiLCJlbGVtZW50IiwiZmlsbCIsInZhbHVlSW5kZXgiLCJub0NvbW1pdCIsImNoYW5nZSIsIl9jb21taXRWYWx1ZSIsInRvZ2dsZUF0dHJpYnV0ZSIsIm5ld0xpc3RlbmVyIiwib2xkTGlzdGVuZXIiLCJzaG91bGRSZW1vdmVMaXN0ZW5lciIsImNhcHR1cmUiLCJvbmNlIiwicGFzc2l2ZSIsInNob3VsZEFkZExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVFdmVudCIsImV2ZW50IiwiXyRMSCIsIl9ib3VuZEF0dHJpYnV0ZVN1ZmZpeCIsIl9tYXJrZXIiLCJfbWFya2VyTWF0Y2giLCJfSFRNTF9SRVNVTFQiLCJfZ2V0VGVtcGxhdGVIdG1sIiwiX1RlbXBsYXRlSW5zdGFuY2UiLCJfaXNJdGVyYWJsZSIsIl9yZXNvbHZlRGlyZWN0aXZlIiwiX0NoaWxkUGFydCIsIl9BdHRyaWJ1dGVQYXJ0IiwiX0Jvb2xlYW5BdHRyaWJ1dGVQYXJ0IiwiX0V2ZW50UGFydCIsIl9Qcm9wZXJ0eVBhcnQiLCJfRWxlbWVudFBhcnQiLCJsaXRIdG1sUG9seWZpbGxTdXBwb3J0IiwibGl0SHRtbFZlcnNpb25zIiwiY29udGFpbmVyIiwicGFydE93bmVyTm9kZSIsIml0ZW1zIiwiZiIsImNob29zZSIsImNhc2VzIiwiZGVmYXVsdENhc2UiLCJmbiIsIndoZW4iLCJjb25kaXRpb24iLCJ0cnVlQ2FzZSIsImZhbHNlQ2FzZSJdLCJ2ZXJzaW9uIjozLCJmaWxlIjoiY3VzdG9tYXJ5Lm1qcy5tYXAifQ==
